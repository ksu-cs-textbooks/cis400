




	
	
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		
		

	
	
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		
		

	
	
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		
		
<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="height=device-height, width=device-width, initial-scale=1.0, minimum-scale=1.0">
    <meta name="generator" content="Hugo 0.117.0">
    <meta name="generator" content="Relearn 5.18.0">
    <meta name="description" content="K-State CIS 400 Textbook">
    <meta name="author" content="Nathan Bean">
    <title>Exercises :: K-State CIS 400 Textbook</title>
    <link href="https://ksu-cs-textbooks.github.io/cis400/c-exercises-s23/index.html" rel="canonical" type="text/html" title="Exercises :: K-State CIS 400 Textbook">
    <link href="https://ksu-cs-textbooks.github.io/cis400/c-exercises-s23/index.xml" rel="alternate" type="application/rss+xml" title="Exercises :: K-State CIS 400 Textbook">
    <link href="https://ksu-cs-textbooks.github.io/cis400/c-exercises-s23/tele.html" rel="alternate" type="text/html" title="Exercises :: K-State CIS 400 Textbook">
    <link href="https://ksu-cs-textbooks.github.io/cis400/c-exercises-s23/embed.html" rel="alternate" type="text/html" title="Exercises :: K-State CIS 400 Textbook">
    <!-- https://github.com/filamentgroup/loadCSS/blob/master/README.md#how-to-use -->
    <link href="https://ksu-cs-textbooks.github.io/cis400/css/fontawesome-all.min.css?1712954547" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="https://ksu-cs-textbooks.github.io/cis400/css/fontawesome-all.min.css?1712954547" rel="stylesheet"></noscript>
    <link href="https://ksu-cs-textbooks.github.io/cis400/css/nucleus.css?1712954547" rel="stylesheet">
    <link href="https://ksu-cs-textbooks.github.io/cis400/css/auto-complete.css?1712954547" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="https://ksu-cs-textbooks.github.io/cis400/css/auto-complete.css?1712954547" rel="stylesheet"></noscript>
    <link href="https://ksu-cs-textbooks.github.io/cis400/css/perfect-scrollbar.min.css?1712954547" rel="stylesheet">
    <link href="https://ksu-cs-textbooks.github.io/cis400/css/fonts.css?1712954547" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="https://ksu-cs-textbooks.github.io/cis400/css/fonts.css?1712954547" rel="stylesheet"></noscript>
    <link href="https://ksu-cs-textbooks.github.io/cis400/css/theme.css?1712954547" rel="stylesheet">
    <link href="https://ksu-cs-textbooks.github.io/cis400/css/theme-auto.css?1712954547" rel="stylesheet" id="variant-style">
    <link href="https://ksu-cs-textbooks.github.io/cis400/css/variant.css?1712954547" rel="stylesheet">
    <link href="https://ksu-cs-textbooks.github.io/cis400/css/print.css?1712954547" rel="stylesheet" media="print">
    <link href="https://ksu-cs-textbooks.github.io/cis400/css/format-print.css?1712954547" rel="stylesheet">
    <link href="https://ksu-cs-textbooks.github.io/cis400/css/ie.css?1712954547" rel="stylesheet">
    <script src="https://ksu-cs-textbooks.github.io/cis400/js/url.js?1712954547"></script>
    <script src="https://ksu-cs-textbooks.github.io/cis400/js/variant.js?1712954547"></script>
    <script>
      // hack to let hugo tell us how to get to the root when using relativeURLs, it needs to be called *url= for it to do its magic:
      // https://github.com/gohugoio/hugo/blob/145b3fcce35fbac25c7033c91c1b7ae6d1179da8/transform/urlreplacers/absurlreplacer.go#L72
      window.index_js_url="https://ksu-cs-textbooks.github.io/cis400/index.search.js";
      var root_url="https://ksu-cs-textbooks.github.io/cis400/";
      var baseUri=root_url.replace(/\/$/, '');
      // translations
      window.T_Copy_to_clipboard = 'Copy to clipboard';
      window.T_Copied_to_clipboard = 'Copied to clipboard!';
      window.T_Copy_link_to_clipboard = 'Copy link to clipboard';
      window.T_Link_copied_to_clipboard = 'Copied link to clipboard!';
      window.T_No_results_found = 'No results found for \u0022{0}\u0022';
      window.T_N_results_found = '{1} results found for \u0022{0}\u0022';
      // some further base stuff
      var baseUriFull='https:\/\/ksu-cs-textbooks.github.io\/cis400/';
      window.variants && variants.init( [ 'auto', 'light-theme', 'dark-theme' ] );
    </script>
    
    <link href="https://ksu-cs-textbooks.github.io/cis400/css/custom.css?1712954547" rel="stylesheet">

  </head>
  <body class="mobile-support print disableInlineCopyToClipboard" data-url="https://ksu-cs-textbooks.github.io/cis400/c-exercises-s23/index.html">
    <div id="body" class="default-animation">
      <div id="sidebar-overlay"></div>
      <div id="toc-overlay"></div>
      <nav id="topbar" class="highlightable">
        <div>
          <div id="top-tele-link">
            <a class="print-link" title='Teleprompter View' href="https://ksu-cs-textbooks.github.io/cis400/c-exercises-s23/tele.html">
              <i class="fas fa-tv fa-fw"></i>
            </a>
          </div>
          <div id="top-embed-link">
            <a class="print-link" title='Embeddable Version' href="https://ksu-cs-textbooks.github.io/cis400/c-exercises-s23/embed.html">
              <i class="fas fa-expand-arrows-alt fa-fw"></i>
            </a>
          </div>
          <div id="breadcrumbs">
            <span id="sidebar-toggle-span">
              <a href="#" id="sidebar-toggle" class="topbar-link" title='Menu (CTRL+ALT+n)'><i class="fas fa-bars fa-fw"></i></a>
            </span>
            <ol class="links" itemscope itemtype="http://schema.org/BreadcrumbList">
              <li itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement"><a itemprop="item" href="https://ksu-cs-textbooks.github.io/cis400/index.html"><span itemprop="name">CIS 400: Object-Oriented Design, Implementation, and Testing</span></a><meta itemprop="position" content="1"> &gt; </li>
              <li itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement"><span itemprop="name">Exercises</span><meta itemprop="position" content="2"></li>
            </ol>
          </div>
        </div>
      </nav>
      <main id="body-inner" class="highlightable chapter narrow" tabindex="-1">
        <div class="flex-block-wrapper">
          <article class="chapter">
            <header class="headline">
            </header>


<div class="article-subheading">Chapter C</div>
<h1 id="exercises">Exercises</h1>

<p>Doing the Work</p>

            <footer class="footline">

            </footer>
          </article>

          <section>
            <h1 class="a11y-only">Subsections of Exercises</h1>
    
    
          <article class="default">
            <header class="headline">
            </header>
<h1 id="encapsulation">Encapsulation</h1>

<h3 id="part-1">Part 1</h3>
<p>Follow the tutorial in the following video:</p>

<a href="https://www.youtube.com/watch?v=y2hEQz3d66w">YouTube Video</a>

<h3 id="part-2">Part 2</h3>
<p>Then add the remaining static methods to the <code>VectorMath</code> class (<code>Scale</code>, <code>DotProduct</code>, <code>CrossProduct</code>, <code>Magnitude</code>, <code>Normalize</code>) following the structure laid out in this UML class diagram:</p>
<p>
<a href="#image-104e9773468011f1e18024657fe901a5" class="lightbox-link">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/c.1.1.png" alt="The Encapsulation Exercise Class Diagram" style="height: auto; width: auto;" loading="lazy">
</a>
<a href="javascript:history.back();" class="lightbox" id="image-104e9773468011f1e18024657fe901a5">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/c.1.1.png" alt="The Encapsulation Exercise Class Diagram" class="lightbox-image" loading="lazy">
</a></p>
<p>The vector operations these methods should compute are:</p>

<span class="math align-center">$$\vec{a}+\vec{b}= \langle a_x + b_x, a_y + b_y, a_z + b_z \rangle \tag{Vector Addition}$$
$$\vec{a}-\vec{b}= \langle a_x - b_x, a_y - b_y, a_z - b_z \rangle \tag{Vector Subtraction}$$
$$\vec{a} \cdot s= \langle a_x \cdot s, a_y \cdot s, a_z \cdot s \rangle \tag{Vector Scaling}$$
$$\vec{a} \cdot \vec{b} = \langle a_x b_x + a_y b_y + a_z b_z \rangle \tag{Vector Dot Product}$$
$$\vec{a} \times \vec{b} = \langle 
a_y b_z - a_z b_y, 
a_z b_x - a_x b_z,
a_x b_y - a_y b_x \rangle \tag{Vector Cross Product}$$
$$||\vec{a}|| = \sqrt{a_x^2 + a_y^2 + a_z^2} \tag{Vector Magnitude}$$
$$\hat{u} = \frac{\vec{u}}{||\vec{u}||} \tag{Vector Normalization}$$</span><p>You can uncomment the tests in the <code>VectorMathUnitTests</code> class and then run them to verify your work.</p>
<h3 id="submit-a-release">Submit A Release</h3>
<p><a href="https://ksu-cs-textbooks.github.io/cis400/b-git-and-github/12-release/">Create a release</a>
 of your project code on GitHub and submit its URL.</p>

            <footer class="footline">

            </footer>
          </article>

    
    
          <article class="default">
            <header class="headline">
            </header>
<h1 id="documentation-exercise">Documentation Exercise</h1>


<a href="https://www.youtube.com/watch?v=HIhGlC0lJoQ">YouTube Video</a>


            <footer class="footline">

            </footer>
          </article>

    
    
          <article class="default">
            <header class="headline">
            </header>
<h1 id="testing-exercise">Testing Exercise</h1>


<a href="https://www.youtube.com/watch?v=yMa2Lqmw9O8">YouTube Video</a>


            <footer class="footline">

            </footer>
          </article>

    
    
          <article class="default">
            <header class="headline">
            </header>
<h1 id="polymorphism-exercise">Polymorphism Exercise</h1>


<a href="https://www.youtube.com/watch?v=Gi6MLfz2n7M">YouTube Video</a>


            <footer class="footline">

            </footer>
          </article>

    
    
          <article class="default">
            <header class="headline">
            </header>
<h1 id="wpf-exercise">WPF Exercise</h1>


<a href="https://www.youtube.com/watch?v=blh16iEEQBE">YouTube Video</a>


            <footer class="footline">

            </footer>
          </article>

    
    
          <article class="default">
            <header class="headline">
            </header>
<h1 id="elements-tree-exercise">Elements Tree Exercise</h1>


<a href="https://www.youtube.com/watch?v=H9PUbS8kU-Q">YouTube Video</a>


            <footer class="footline">

            </footer>
          </article>

    
    
          <article class="default">
            <header class="headline">
            </header>
<h1 id="events-exercise">Events Exercise</h1>


<a href="https://www.youtube.com/watch?v=0Q3rvZW8gyE">YouTube Video</a>


            <footer class="footline">

            </footer>
          </article>

    
    
          <article class="default">
            <header class="headline">
            </header>
<h1 id="data-binding-exercise">Data Binding Exercise</h1>


<a href="https://www.youtube.com/watch?v=nwN1lbFaBvc">YouTube Video</a>


            <footer class="footline">

            </footer>
          </article>

    
    
          <article class="default">
            <header class="headline">
            </header>
<h1 id="dependency-property-exercise">Dependency Property Exercise</h1>


<a href="https://www.youtube.com/watch?v=rsAtGn9rrOU">YouTube Video</a>


            <footer class="footline">

            </footer>
          </article>

    
    
          <article class="default">
            <header class="headline">
            </header>
<h1 id="razor-pages-exercise">Razor Pages Exercise</h1>


<a href="https://www.youtube.com/watch?v=NXSgmSWz8tc">YouTube Video</a>

<p>Now that you know how to create Razor pages, let&rsquo;s see what makes them useful for creating dynamic web pages.</p>
<h2 id="initial-project">Initial Project</h2>
<p>We&rsquo;ll start with a simple ASP.NET web app using Razor Pages to display a database of movies.  This app consists of a single page, <code>Index</code> that will be used to display the details of the movies in the database.  It also contains classes representing an individual movie (<code>Movie</code>) and the movie database (<code>MovieDatabase</code>).</p>
<p>You can clone the starting project from the GitHub Classroom url provided in the Canvas Assignment (for students in the CIS 400 course), or directly from the GitHub <a href="https://github.com/ksu-cis/movie-site.git" target="_blank">repo</a>
 (for other readers).</p>
<h3 id="movie-class">Movie Class</h3>
<p>Here is the starting point of a class representing a movie:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// A class representing a Movie</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Movie</span>
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">/// Gets and sets the title of the movie</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">string</span> Title { <span style="color:#66d9ef">get</span>; <span style="color:#66d9ef">set</span>; }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">/// Gets and sets the Motion Picture Association of America Rating</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">string</span> MPAARating { <span style="color:#66d9ef">get</span>; <span style="color:#66d9ef">set</span>; }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">/// Gets and sets the primary genre of the movie</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">string</span> MajorGenre { <span style="color:#66d9ef">get</span>; <span style="color:#66d9ef">set</span>; }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">/// Gets and sets the Internet Movie Database rating of the movie</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">float?</span> IMDBRating { <span style="color:#66d9ef">get</span>; <span style="color:#66d9ef">set</span>; }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">/// Gets and sets the Rotten Tomatoes rating of the movie</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">float?</span> RottenTomatoesRating { <span style="color:#66d9ef">get</span>; <span style="color:#66d9ef">set</span>; }
</span></span><span style="display:flex;"><span>    }</span></span></code></pre></div><p>As you can see, it&rsquo;s a pretty simple data class.</p>
<p>However, we do have one new thing we haven&rsquo;t seen before - a new use of the question mark symbol (<code>?</code>) in <code>float?</code>.  This indicates a <a href="https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/builtin-types/nullable-value-types" target="_blank">nullable type</a>
, i.e. in addition to the possible float values, the variable can also be <code>null</code>.</p>
<p>Remember, a <code>float</code> is a value type, and normally you cannot set a value type to <code>null</code>.  By making it a nullable type, we effectively have wrapped it in an object (technically, a <code>Nullable&lt;T&gt;</code> object).  So instead of <code>RottenTomatoesRating</code> referencing the memory where the value of the float is stored, it is now storing a <em>reference</em> to that location in memory.  This reference can itself be <code>null</code> if it isn&rsquo;t pointing anywhere.</p>
<p>We need all of these properties to have the possibility to be <code>null</code>, as the data we are working with does not have values for all of them.  Let&rsquo;s look at that data next.</p>
<h3 id="serialized-movie-data">Serialized Movie Data</h3>
<p>The <em>movies.json</em> file contains data in a JSON format.  JSON stands for <em>Javascript Serialization Object Notation</em>.  As the name suggests, it is a <a href="https://en.wikipedia.org/wiki/Serialization" target="_blank">serialization</a>
 format - a way of expressing the state of a data object in text.  While it originates with JavaScript, JSON has become a popular format for exchanging data in many programming languages.  Let&rsquo;s take a closer look at this file&rsquo;s structure.</p>
<p>The first movie in the file is <em>The Land Girls</em>:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>[
</span></span><span style="display:flex;"><span>  {
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;Title&#34;</span>: <span style="color:#e6db74">&#34;The Land Girls&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;USGross&#34;</span>: <span style="color:#ae81ff">146083</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;WorldWideGross&#34;</span>: <span style="color:#ae81ff">146083</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;USDVDSales&#34;</span>: <span style="color:#66d9ef">null</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;ProductionBudget&#34;</span>: <span style="color:#ae81ff">8000000</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;ReleaseDate&#34;</span>: <span style="color:#e6db74">&#34;Jun 12 1998&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;MPAARating&#34;</span>: <span style="color:#e6db74">&#34;R&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;RunningTime&#34;</span>: <span style="color:#66d9ef">null</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;Distributor&#34;</span>: <span style="color:#e6db74">&#34;Gramercy&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;Source&#34;</span>: <span style="color:#66d9ef">null</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;MajorGenre&#34;</span>: <span style="color:#66d9ef">null</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;CreativeType&#34;</span>: <span style="color:#66d9ef">null</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;Director&#34;</span>: <span style="color:#66d9ef">null</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;RottenTomatoesRating&#34;</span>: <span style="color:#66d9ef">null</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;IMDBRating&#34;</span>: <span style="color:#ae81ff">6.1</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;IMDBVotes&#34;</span>: <span style="color:#ae81ff">1071</span>
</span></span><span style="display:flex;"><span>  },
</span></span><span style="display:flex;"><span>  <span style="color:#960050;background-color:#1e0010">...</span>
</span></span><span style="display:flex;"><span>]</span></span></code></pre></div><p>The outer square brackets (<code>[</code>, <code>]</code>) indicate that the file contents represent an array.  The curly braces (<code>{</code>, <code>}</code>) indicate an object - thus the file represents an array of objects.  Each object consists of key/value pairs, i.e. <code>&quot;Title&quot;: &quot;The Land Girls&quot;</code> indicates the title of the film.  We&rsquo;re using a library to deserialize these JSON objects into our C# <code>Movie</code> object structure, so we need the keys to match the property names in that structure.</p>
<p>As you can see with this entry, many of the values are <code>null</code>.  This is why we needed to introduce nullables into our data object - otherwise when we deserialized this object in our C# code, our program would crash when it tried to set one of the value properties to <code>null</code>.</p>
<h3 id="the-moviedatabase-class">The MovieDatabase Class</h3>
<p>Now let&rsquo;s look at the <code>MovieDatabase</code> class:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// A class representing a database of movies</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">MovieDatabase</span>
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">static</span> List&lt;Movie&gt; movies = <span style="color:#66d9ef">new</span> List&lt;Movie&gt;();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">/// Loads the movie database from the JSON file</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">static</span> MovieDatabase() {
</span></span><span style="display:flex;"><span>            
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">using</span> (StreamReader file = System.IO.File.OpenText(<span style="color:#e6db74">&#34;movies.json&#34;</span>))
</span></span><span style="display:flex;"><span>            {
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">string</span> json = file.ReadToEnd();
</span></span><span style="display:flex;"><span>                movies = JsonConvert.DeserializeObject&lt;List&lt;Movie&gt;&gt;(json);
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">/// Gets all movies in the database</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> IEnumerable&lt;Movie&gt; All { <span style="color:#66d9ef">get</span> { <span style="color:#66d9ef">return</span> movies; } }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>There are a couple of interesting features.  First, the class is <code>static</code>, which means we cannot construct an instance of it - there will only ever be <em>one</em> instance, and we&rsquo;ll reference it directly from its class name, <code>MovieDatabase</code>.  As a static class, all of its fields, methods, and properties must likewise be declared <code>static</code>.  If these are public, then we can access them directly from the class name, i.e. to access the <code>All</code> property, we would invoke <code>MovieDatabase.All</code>.</p>
<p>Notice that we have declared a <a href="https://docs.microsoft.com/en-us/dotnet/csharp/programming-guide/classes-and-structs/static-constructors" target="_blank">static constructor</a>
 for the class.  This will be invoked the first time the class is used in the program, and only that one time (as after that, the one static instance of the class exists).  Since we cannot construct a static class directly, there is no reason to add an access modifier (<code>public</code>, <code>protected</code>, or <code>private</code>).</p>
<p>The usual reason to have a static constructor is to do some kind of initialization, and that is what we are doing here.  We are loading the JSON file, and using the <code>JsonConvert.DeserializeObject&lt;T&gt;()</code> method to convert the JSON into a <code>List&lt;Movie&gt;</code>.  This method is part of the <a href="https://www.newtonsoft.com/json" target="_blank">JSON.net</a>
 library from Newtonsoft - which is provided to us through a Nuget package.  If you look under the <em>Dependencies</em> entry in the solution explorer, you can find a <em>Packages</em> list that contains <em>Newtonsoft.JSON</em>, this library.</p>
<p><a href="https://www.nuget.org/" target="_blank">Nuget</a>
 is a package manager that allows developers to publish .NET libraries they have created for other developers to use.  It is a source of many useful libraries, and if you become a professional .NET developer, it is probably a resource you will find yourself using often.</p>
<h2 id="displaying-a-list-of-movie-titles">Displaying a list of Movie Titles</h2>
<p>Okay, now that we&rsquo;re familiar with the starter code, let&rsquo;s turn our attention to the task at hand - we&rsquo;d like to display all the movies in our database on the <code>Index</code> razor page.</p>
<h3 id="refactoring-indexcshtml">Refactoring Index.cshtml</h3>
<p>Let&rsquo;s start by looking at our Page class, <code>Index.cshtml</code>:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>@page
</span></span><span style="display:flex;"><span>@model IndexModel
</span></span><span style="display:flex;"><span>@{
</span></span><span style="display:flex;"><span>    ViewData[&#34;Title&#34;] = &#34;Home page&#34;;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>&lt;<span style="color:#f92672">h1</span>&gt;Hello World&lt;/<span style="color:#f92672">h1</span>&gt;</span></span></code></pre></div><p>Let&rsquo;s change the header <code>Hello World</code> to say <code>Movies</code>.  And below that, let&rsquo;s declare an unordered list of movie titles, and put the first few titles in list items:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>&lt;<span style="color:#f92672">h1</span>&gt;Movies&lt;/<span style="color:#f92672">h1</span>&gt;
</span></span><span style="display:flex;"><span>&lt;<span style="color:#f92672">ul</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">li</span>&gt;The Land Girls&lt;/<span style="color:#f92672">li</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">li</span>&gt;First Love, Last Rites&lt;/<span style="color:#f92672">li</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">li</span>&gt;I Married a Strange Person&lt;/<span style="color:#f92672">li</span>&gt;
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#f92672">ul</span>&gt;</span></span></code></pre></div><p>Go ahead and run your program.  Your page should look like:</p>
<p>
<a href="#image-cec7ccd506bf1e0702986108fe448c08" class="lightbox-link">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/6.7.1.png" alt="The refactored index page" style="height: auto; width: auto;" loading="lazy">
</a>
<a href="javascript:history.back();" class="lightbox" id="image-cec7ccd506bf1e0702986108fe448c08">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/6.7.1.png" alt="The refactored index page" class="lightbox-image" loading="lazy">
</a></p>
<p>This approach would work fine, but there are 3,201 entries in our database - do you really want to do that by hand?</p>
<p>Instead, let&rsquo;s leverage the power of Razor templates, and use some C# code to iterate through each entry in the database.  We can do this with a <code>foreach</code> loop, just like you might do in a regular C# class:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>&lt;h1&gt;Movies&lt;/h1&gt;
</span></span><span style="display:flex;"><span>&lt;ul&gt;
</span></span><span style="display:flex;"><span>    @foreach(Movie movie <span style="color:#66d9ef">in</span> MovieDatabase.All)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        &lt;li&gt;@movie.Title&lt;/li&gt;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>&lt;/ul&gt;</span></span></code></pre></div><p>Notice that inside the body of the <code>foreach</code> loop, we use regular HTML to declare a list item element (<code>&lt;li&gt;</code>).  But for the <em>content</em> of that element, we are using the <code>movie.Title</code> property.  As this is prefaced with an at symbol (<code>@</code>), the Razor template engine evaluates it as a C# expression, and concatenates the result (the movie&rsquo;s title) into the list item.  Thus, for the first item in the database, <code>&lt;li&gt;The Land Girls&lt;/li&gt;</code>.</p>
<p>Each of these is in turn concatenated into the page as the <code>foreach</code> loop is processed, resulting in a list of all the movie titles in the database.  Run the program and see for yourself:</p>
<p>
<a href="#image-69a670e07fbdfea63b44f12a094f0bc2" class="lightbox-link">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/6.7.2.png" alt="The full list of movies" style="height: auto; width: auto;" loading="lazy">
</a>
<a href="javascript:history.back();" class="lightbox" id="image-69a670e07fbdfea63b44f12a094f0bc2">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/6.7.2.png" alt="The full list of movies" class="lightbox-image" loading="lazy">
</a></p>
<p>They&rsquo;re all there.  You can scroll all the way to the bottom.</p>
<h3 id="adding-some-detail">Adding Some Detail</h3>
<p>It might be interesting to see more information about the movies than just the title.  Let&rsquo;s take advantage of the details in our <code>Movie</code> class by expanding what is shown:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>&lt;h1&gt;Movies&lt;/h1&gt;
</span></span><span style="display:flex;"><span>&lt;ul&gt;
</span></span><span style="display:flex;"><span>    @foreach(Movie movie <span style="color:#66d9ef">in</span> MovieDatabase.All)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        &lt;li&gt;
</span></span><span style="display:flex;"><span>            &lt;h3&gt;@movie.Title&lt;/h3&gt;
</span></span><span style="display:flex;"><span>            &lt;div&gt;@movie.MPAARating&lt;/div&gt;
</span></span><span style="display:flex;"><span>            &lt;div&gt;@movie.MajorGenre&lt;/div&gt;
</span></span><span style="display:flex;"><span>        &lt;/li&gt;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>&lt;/ul&gt;</span></span></code></pre></div><p>Notice that unlike our WPF XAML, we can nest as many children in an HTML element as we want!  If we run the program now:</p>
<p>
<a href="#image-82fc7116a26366fd8fd15ef7a525c6fe" class="lightbox-link">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/6.7.3.png" alt="The detailed movie list" style="height: auto; width: auto;" loading="lazy">
</a>
<a href="javascript:history.back();" class="lightbox" id="image-82fc7116a26366fd8fd15ef7a525c6fe">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/6.7.3.png" alt="The detailed movie list" class="lightbox-image" loading="lazy">
</a></p>
<p>Well, it works, but it&rsquo;s also underwhelming (and a bit difficult to interpret).  Notice that our first few movies don&rsquo;t have all the rating properties, so there are large blank spaces.</p>
<p>Let&rsquo;s take advantage of Razor&rsquo;s ability to use conditionals to leave those blanks out:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>&lt;h1&gt;Movies&lt;/h1&gt;
</span></span><span style="display:flex;"><span>&lt;ul class=<span style="color:#e6db74">&#34;movie-list&#34;</span>&gt;
</span></span><span style="display:flex;"><span>    @foreach(Movie movie <span style="color:#66d9ef">in</span> MovieDatabase.All)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        &lt;li&gt;
</span></span><span style="display:flex;"><span>            &lt;h3 class=<span style="color:#e6db74">&#34;title&#34;</span>&gt;@movie.Title&lt;/h3&gt;
</span></span><span style="display:flex;"><span>            @if (movie.MPAARating != <span style="color:#66d9ef">null</span>)
</span></span><span style="display:flex;"><span>            {
</span></span><span style="display:flex;"><span>                &lt;div class=<span style="color:#e6db74">&#34;mpaa&#34;</span>&gt;
</span></span><span style="display:flex;"><span>                    Rated @movie.MPAARating
</span></span><span style="display:flex;"><span>                &lt;/div&gt;
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>            @if (movie.MajorGenre != <span style="color:#66d9ef">null</span>)
</span></span><span style="display:flex;"><span>            {
</span></span><span style="display:flex;"><span>                &lt;div class=<span style="color:#e6db74">&#34;genre&#34;</span>&gt;
</span></span><span style="display:flex;"><span>                    @movie.MajorGenre
</span></span><span style="display:flex;"><span>                &lt;/div&gt;
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        &lt;/li&gt;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>&lt;/ul&gt;</span></span></code></pre></div><p>We&rsquo;ve also added the text &ldquo;Rated&rdquo; before our <code>MPAARating</code>, so the entry will now read &ldquo;Rated R&rdquo; for an R-rated movie, &ldquo;Rated G&rdquo; for a g-rated movie, and so on.</p>
<p>We also added class attributes to the <code>&lt;h3&gt;</code> and each <code>&lt;div&gt;</code>, as well as the movie list itself.  We&rsquo;ll use these to style our elements.</p>
<h3 id="adding-some-style">Adding Some Style</h3>
<p>We can find our CSS rules for the project in <em>wwwroot/css/site.js</em>.</p>
<p>Let&rsquo;s start with the unordered list itself.  We can select it with the <code>ul.movie-list</code> selector.  We&rsquo;ll remove any padding and margins, and add a solid line above it:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-css" data-lang="css"><span style="display:flex;"><span><span style="color:#f92672">ul</span>.<span style="color:#a6e22e">movie-list</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">padding</span>: <span style="color:#ae81ff">0</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">margin</span>: <span style="color:#ae81ff">0</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">border-top</span>: <span style="color:#ae81ff">1</span><span style="color:#66d9ef">px</span> <span style="color:#66d9ef">solid</span> <span style="color:#66d9ef">gray</span>;
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>We&rsquo;ll then select each list item that is a child of that list with <code>ul.movie-list &gt; li</code>.  We&rsquo;ll remove the bullet, add a lighter border at the bottom to separate our items, and put a 10-pixel margin all the way around:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-css" data-lang="css"><span style="display:flex;"><span><span style="color:#f92672">ul</span>.<span style="color:#a6e22e">movie-list</span> <span style="color:#f92672">&gt;</span> <span style="color:#f92672">li</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">list-style-type</span>: <span style="color:#66d9ef">none</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">border-bottom</span>: <span style="color:#ae81ff">1</span><span style="color:#66d9ef">px</span> <span style="color:#66d9ef">solid</span> <span style="color:#66d9ef">lightgray</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">margin</span>: <span style="color:#ae81ff">10</span><span style="color:#66d9ef">px</span>;
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>You might wonder why we put the list in an unordered list at all, if we&rsquo;re just going to change all its default styles.  Remember, HTML provides the <em>structure</em> as well as the content.  By putting the items in a list, we&rsquo;re signifying that the items <em>are a list</em>.  We are conveying semantic meaning with the structure we use.</p>
<p>Remember, it&rsquo;s not just humans that read the internet.  Many bots and algorithms do as well, and they typically won&rsquo;t use the lens of CSS styling - they&rsquo;ll be reading the raw HTML.</p>
<p>We&rsquo;ll make our title headers a dark slate gray, have a slightly larger-then-normal text, and remove the margins so that there are no large space between the header and the text is directly above and beneath them:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-css" data-lang="css"><span style="display:flex;"><span>.<span style="color:#a6e22e">title</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">color</span>: <span style="color:#66d9ef">darkslategray</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">font-size</span>: <span style="color:#ae81ff">1.2</span><span style="color:#66d9ef">rem</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">margin</span>: <span style="color:#ae81ff">0</span>;
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>Finally, let&rsquo;s lighten the color of the MPAA rating and genre:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-css" data-lang="css"><span style="display:flex;"><span>.<span style="color:#a6e22e">mpaa</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">color</span>: <span style="color:#66d9ef">slategray</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>.<span style="color:#a6e22e">genre</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">color</span>: <span style="color:#66d9ef">lightslategray</span>;
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><h3 id="adding-some-ratings">Adding Some Ratings</h3>
<p>While the MPAA ratings convey the age-appropriateness of a movie, the IMDB and Rotten Tomatoes ratings provide a sense of how much people <em>enjoy</em> the films.  Since this probably information our readers might want to see to help them judge what films to look at, it might be nice to call attention to them in some way.</p>
<p>What if we put them into their own boxes, and position them on the right side of the screen, opposite the title?  Something like:</p>
<p>
<a href="#image-38f4e1432a616dd663f514790f1c1406" class="lightbox-link">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/6.7.4.png" alt="Mockup of styled list item" style="height: auto; width: auto;" loading="lazy">
</a>
<a href="javascript:history.back();" class="lightbox" id="image-38f4e1432a616dd663f514790f1c1406">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/6.7.4.png" alt="Mockup of styled list item" class="lightbox-image" loading="lazy">
</a></p>
<p>There are many ways of accomplishing this look, including the <code>float</code> property or using a <code>&lt;table&gt;</code> element.  But let&rsquo;s turn to one of the newer and more powerful css layout features, the flexbox layout.</p>
<p>We&rsquo;ll start by refactoring our HTML slightly, to divide our <code>&lt;li&gt;</code> into two <code>&lt;div&gt;</code>s, one containing our current details for the movie, and one for the viewer ratings:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>      &lt;<span style="color:#f92672">li</span>&gt;
</span></span><span style="display:flex;"><span>        &lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;details&#34;</span>&gt;
</span></span><span style="display:flex;"><span>            &lt;<span style="color:#f92672">h3</span>&gt;@movie.Title&lt;/<span style="color:#f92672">h3</span>&gt;
</span></span><span style="display:flex;"><span>            @if (movie.MPAARating != null)
</span></span><span style="display:flex;"><span>            {
</span></span><span style="display:flex;"><span>                &lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;mpaa&#34;</span>&gt;
</span></span><span style="display:flex;"><span>                    Rated @movie.MPAARating
</span></span><span style="display:flex;"><span>                &lt;/<span style="color:#f92672">div</span>&gt;
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>            @if (movie.MajorGenre != null)
</span></span><span style="display:flex;"><span>            {
</span></span><span style="display:flex;"><span>                &lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;genre&#34;</span>&gt;
</span></span><span style="display:flex;"><span>                    @movie.MajorGenre
</span></span><span style="display:flex;"><span>                &lt;/<span style="color:#f92672">div</span>&gt;
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        &lt;/<span style="color:#f92672">div</span>&gt;
</span></span><span style="display:flex;"><span>        &lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;ratings&#34;</span>&gt;
</span></span><span style="display:flex;"><span>            @if (movie.IMDBRating != null)
</span></span><span style="display:flex;"><span>            {
</span></span><span style="display:flex;"><span>                &lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;imdb&#34;</span>&gt;
</span></span><span style="display:flex;"><span>                    @movie.IMDBRating
</span></span><span style="display:flex;"><span>                &lt;/<span style="color:#f92672">div</span>&gt;
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>            @if (movie.RottenTomatoesRating != null)
</span></span><span style="display:flex;"><span>            {
</span></span><span style="display:flex;"><span>                &lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;rotten-tomatoes&#34;</span>&gt;
</span></span><span style="display:flex;"><span>                    @movie.RottenTomatoesRating
</span></span><span style="display:flex;"><span>                &lt;/<span style="color:#f92672">div</span>&gt;
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        &lt;/<span style="color:#f92672">div</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;/<span style="color:#f92672">li</span>&gt;</span></span></code></pre></div><p>Now we&rsquo;ll apply the flexbox properties and a minimum height to the list item:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-css" data-lang="css"><span style="display:flex;"><span><span style="color:#f92672">ul</span>.<span style="color:#a6e22e">movie-list</span> <span style="color:#f92672">&gt;</span> <span style="color:#f92672">li</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">display</span>: <span style="color:#66d9ef">flex</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">flex-direction</span>: <span style="color:#66d9ef">row</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">align-items</span>: <span style="color:#66d9ef">flex-start</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">justify-content</span>: <span style="color:#66d9ef">space-between</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">min-height</span>: <span style="color:#ae81ff">50</span><span style="color:#66d9ef">px</span>;
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>These can be combined with our earlier rule block with the same selector, or they can be declared separately.</p>
<p>We&rsquo;ll also use flexbox to make our ratings appear side-by-side:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-css" data-lang="css"><span style="display:flex;"><span>.<span style="color:#a6e22e">ratings</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">display</span>: <span style="color:#66d9ef">flex</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">flex-direction</span>: <span style="color:#66d9ef">row</span>;
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>And use some styles to add the border, center the text, and use gray for the text and border colors:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-css" data-lang="css"><span style="display:flex;"><span>.<span style="color:#a6e22e">imdb</span><span style="color:#f92672">,</span> .<span style="color:#a6e22e">rotten-tomatoes</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">color</span>: <span style="color:#66d9ef">gray</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">border</span>: <span style="color:#ae81ff">1</span><span style="color:#66d9ef">px</span> <span style="color:#66d9ef">solid</span> <span style="color:#66d9ef">gray</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">width</span>: <span style="color:#ae81ff">60</span><span style="color:#66d9ef">px</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">text-align</span>: <span style="color:#66d9ef">center</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">font-size</span>: <span style="color:#ae81ff">1.2</span><span style="color:#66d9ef">rem</span>;
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>Notice that we can use the comma to allow more than one selector to share a rule.</p>
<p>It might be nice to label the two ratings, as Rotten Tomatoes is on a 100-point scale, and IMDB uses a 10-point scale.  We could go back and apply this in the HTML, but it is a good opportunity to show off the <code>::before</code> pseduo-selector, which allows us to create HTML elements using css:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-css" data-lang="css"><span style="display:flex;"><span>.<span style="color:#a6e22e">imdb</span>::<span style="color:#a6e22e">before</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">content</span>: <span style="color:#e6db74">&#34;IMDB&#34;</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">display</span>: <span style="color:#66d9ef">block</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">font-size</span>: <span style="color:#ae81ff">1</span><span style="color:#66d9ef">rem</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>.<span style="color:#a6e22e">rotten-tomatoes</span>::<span style="color:#a6e22e">before</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">content</span>: <span style="color:#e6db74">&#34;Rotten&#34;</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">display</span>: <span style="color:#66d9ef">block</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">font-size</span>: <span style="color:#ae81ff">1</span><span style="color:#66d9ef">rem</span>;
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>If you run your code at this point, you may notice your <code>&lt;h3&gt;</code> styles have stopped applying.  If we look at the selector, we&rsquo;ll see why.  It is currently: <code>ul.movie-list &gt; li &gt; h3</code>, which indicates the <code>&lt;h3&gt;</code> it applies to should be a direct child of the <code>&lt;li&gt;</code> tag.  We could swap to using <code>h3</code> instead, but this would apply to <em>all</em> <code>&lt;h3&gt;</code> tags on our page.  Instead, let&rsquo;s swap the <code>&gt;</code> for a space <code> </code>, which indicates a descendant instead of a direct child.  In fact, we could drop the <code>li</code> as well:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-css" data-lang="css"><span style="display:flex;"><span><span style="color:#f92672">ul</span>.<span style="color:#a6e22e">movie-list</span>  <span style="color:#f92672">h3</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">font-size</span>: <span style="color:#ae81ff">1.2</span><span style="color:#66d9ef">rem</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">margin-bottom</span>: <span style="color:#ae81ff">0</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">color</span>: <span style="color:#66d9ef">darkslategray</span>;
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>The end result is very close to our sketch:</p>
<p>
<a href="#image-8bc5e58d5f3e762aa20a16be550a66c3" class="lightbox-link">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/6.7.5.png" alt="The end result" style="height: auto; width: auto;" loading="lazy">
</a>
<a href="javascript:history.back();" class="lightbox" id="image-8bc5e58d5f3e762aa20a16be550a66c3">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/6.7.5.png" alt="The end result" class="lightbox-image" loading="lazy">
</a></p>
<p>Clearly, CSS is a powerful tool.  It can be challenging to learn, but if you are going to be involved in web development, it is time well spent.</p>
<p>The <a href="https://developer.mozilla.org/en-US/docs/Web/CSS" target="_blank">MDN CSS documentation</a>
 and the <a href="https://css-tricks.com/" target="_blank">CSS-Tricks site</a>
 are both excellent references for learning CSS.</p>

            <footer class="footline">

            </footer>
          </article>

    
    
          <article class="chapter">
            <header class="headline">
            </header>


<div class="article-subheading">Chapter 11</div>
<h1 id="responsive-design">Responsive Design</h1>

<p>Fitting the Screen</p>

            <footer class="footline">

            </footer>
          </article>

          <section>
            <h1 class="a11y-only">Subsections of Responsive Design</h1>
    
    
          <article class="default">
            <header class="headline">
            </header>
<h1 id="media--rule">Media @ Rule</h1>

<p>The <code>@media</code> rule was originally introduced in CSS version 2.  It was used to differentiate between different kinds of devices, i.e. a computer screen, printer, etc.  Only the print type saw broad adoption, but it remains useful.  Let&rsquo;s see how we can use it.</p>
<p>If we look at our <em>Pages/Index.cshtml</em> page, we can find an <code>&lt;aside&gt;</code> element that contains a banner advertisement for Bernie&rsquo;s. The <code>&lt;aside&gt;</code> element is a <em>semantic element</em> - one that implies a specific meaning for what it contains.  The meaning it implies is something &rsquo;extra&rsquo; to the page that isn&rsquo;t part of its main thrust - in this case, an advertisement.</p>
<p>Beyond implying a meaning, it&rsquo;s equivalent to a <code>&lt;div&gt;</code> element, it is simply a block-level element that divides up the page and can be used to attach CSS rules.</p>
<p>Let&rsquo;s assume that we <em>don&rsquo;t</em> want this to appear on the page when we print it.  Let&rsquo;s add a <code>class</code> of <code>&quot;advertisement&quot;</code> to it:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>&lt;<span style="color:#f92672">aside</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;advertisement&#34;</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">img</span> <span style="color:#a6e22e">src</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;~/img/ad.png&#34;</span> <span style="color:#a6e22e">alt</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;Eat at Bernies!&#34;</span>/&gt;
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#f92672">aside</span>&gt;</span></span></code></pre></div><p>And in our <em>wwwroot/css/site.css</em>, let&rsquo;s create an <code>@media</code> rule for printing:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-css" data-lang="css"><span style="display:flex;"><span>@<span style="color:#66d9ef">media</span> <span style="color:#f92672">print</span> {
</span></span><span style="display:flex;"><span>    .<span style="color:#a6e22e">advertisement</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">display</span>: <span style="color:#66d9ef">none</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>Any CSS enclosed in the curly braces following <code>@media print</code> will <em>only</em> be applied when the page is printed.  In that case, we set any element with the class <code>advertisement</code> to not display.  Try running the program, and in the browser, select <em>print preview</em>.</p>
<p>
<a href="#image-9ec31d0056facff86e828e51df6e4176" class="lightbox-link">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/3.3.2.1.png" alt="The printed webpage" style="height: auto; width: auto;" loading="lazy">
</a>
<a href="javascript:history.back();" class="lightbox" id="image-9ec31d0056facff86e828e51df6e4176">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/3.3.2.1.png" alt="The printed webpage" class="lightbox-image" loading="lazy">
</a></p>
<p>The advertisement does not appear!  But it still shows up in the browser.</p>
<p>This simple technique can be used to easily create printer-friendly versions of your webpage by changing colors to gray tones, replacing fonts, and removing elements that will require a lot of ink to print.</p>
<p>But the media @ rule is also the basis for an even more powerful mechanism, <em>media queries</em>, which we&rsquo;ll look at next.</p>

            <footer class="footline">

            </footer>
          </article>

    
    
          <article class="default">
            <header class="headline">
            </header>
<h1 id="media-queries">Media Queries</h1>

<p>In CSS3, the <code>@media</code> rule was extended to include the concept of <em>media queries</em>, a technique that allows us to conditionally apply CSS rules using a broader range of values.  Some of the most commonly used are:</p>
<ul>
<li>The width and the height of the viewport (the area on-screen)</li>
<li>The width and height of the device (the monitor, phone, or other screen)</li>
<li>The orientation (landscape or portrait)</li>
<li>The resolution</li>
</ul>
<p>Media queries are primarily used to enable <em>responsive design</em>, which refers to your page re-arranging itself for display on different devices.</p>
<p>A media query expands the <code>@media</code> rule that we used previously.  It consists of the <code>@media</code> keyword followed by an optional media type (<code>all</code>, <code>print</code>, <code>screen</code>, or <code>speech</code>), and then any media features we want to query for within parenthesis.</p>
<p>Let&rsquo;s start with a simple example.  Let&rsquo;s change the color of our <code>h1</code> elements based on the orientation of the screen.  Add these two rules to your <em>wwwroot/css/site.css</em>:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-css" data-lang="css"><span style="display:flex;"><span>@<span style="color:#66d9ef">media</span> <span style="color:#f92672">(</span><span style="color:#f92672">orientation</span><span style="color:#f92672">:</span> <span style="color:#f92672">landscape</span><span style="color:#f92672">)</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">h1</span> { <span style="color:#66d9ef">color</span>: <span style="color:#66d9ef">green</span>; }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>@<span style="color:#66d9ef">media</span> <span style="color:#f92672">(</span><span style="color:#f92672">orientation</span><span style="color:#f92672">:</span> <span style="color:#f92672">portrait</span><span style="color:#f92672">)</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">h1</span> { <span style="color:#66d9ef">color</span>: <span style="color:#66d9ef">orange</span>; }
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>Now if you run your server, the <code>&lt;h1&gt;</code> elements will probably be green.  Resize your window until it is taller than it is wide, and they will turn orange.</p>
<h2 id="using-chrome-developer-tools">Using Chrome Developer Tools</h2>
<p>While we can definitely stretch our browser window to try different sizes, there are far better tools available.  Let&rsquo;s see how Chrome&rsquo;s Developer Tools can make our lives as a developer easier.</p>
<p>First, set Visual Studio to use Chrome as the browser it launches your website with.  From the build target dropdown, select the &lsquo;Web Browser&rsquo; option, and select &lsquo;Google Chrome&rsquo;:</p>
<p>
<a href="#image-899861a362f70d73c409b439689503ea" class="lightbox-link">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/3.3.3.1.png" alt="Setting Chrome as the build target" style="height: auto; width: auto;" loading="lazy">
</a>
<a href="javascript:history.back();" class="lightbox" id="image-899861a362f70d73c409b439689503ea">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/3.3.3.1.png" alt="Setting Chrome as the build target" class="lightbox-image" loading="lazy">
</a></p>
<p>Now run your program. When Chrome loads, turn on developer tools by either pressing <code>CTRL</code> + <code>SHIFT</code> + <code>I</code> or right-clicking on the page and selecting &lsquo;Inspect&rsquo;.  This launches the developer tools in their own pane in the window.  At the top of the developer pane is an icon that resembles a cellphone in front of a screen.</p>
<p>
<a href="#image-d2082f576c5ea1c4f01ac22a4042a61e" class="lightbox-link">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/3.3.3.2.png" alt="The Device Toolbar toggle button" style="height: auto; width: auto;" loading="lazy">
</a>
<a href="javascript:history.back();" class="lightbox" id="image-d2082f576c5ea1c4f01ac22a4042a61e">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/3.3.3.2.png" alt="The Device Toolbar toggle button" class="lightbox-image" loading="lazy">
</a></p>
<p>Clicking it will toggle the device toolbar, which allows you to emulate different devices, choosing from several common phones and tables, or use the &lsquo;responsive&rsquo; category to set a custom size:</p>
<p>
<a href="#image-2f17de515e99c9eff5f60ea71c6227c0" class="lightbox-link">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/3.3.3.3.png" alt="The device selection dropdown" style="height: auto; width: auto;" loading="lazy">
</a>
<a href="javascript:history.back();" class="lightbox" id="image-2f17de515e99c9eff5f60ea71c6227c0">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/3.3.3.3.png" alt="The device selection dropdown" class="lightbox-image" loading="lazy">
</a></p>
<p>In addition, you can change the orientation of the device with the rotate button:</p>
<p>
<a href="#image-b3d14494ca2255529ee0b7bb978feed7" class="lightbox-link">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/3.3.3.4.png" alt="The device selection dropdown" style="height: auto; width: auto;" loading="lazy">
</a>
<a href="javascript:history.back();" class="lightbox" id="image-b3d14494ca2255529ee0b7bb978feed7">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/3.3.3.4.png" alt="The device selection dropdown" class="lightbox-image" loading="lazy">
</a></p>
<p>Try selecting a mobile phone and then using the rotate button to change the orientation.  Watch how your <code>&lt;h1&gt;</code> elements change color!</p>
<p>Next we&rsquo;ll look at how we use media queries in responsive design.</p>

  
  
<div class="box notices cstyle note">
  <div class="box-label"><i class="fa-fw fas fa-exclamation-circle"></i> Note</div>
  <div class="box-content">

<p>Developer tools are actually a part of all modern web browsers, so if you prefer to use a different browser you can learn its tools instead.  Here are links to the documentation for the major browsers:</p>
<ul>
<li><a href="https://developers.google.com/web/tools/chrome-devtools" target="_blank">Chrome DevTools</a>
</li>
<li><a href="https://docs.microsoft.com/en-us/microsoft-edge/devtools-guide" target="_blank">Edge Developer Tools</a>
</li>
<li><a href="https://developer.mozilla.org/en-US/docs/Tools" target="_blank">Firefox Developer Tools</a>
</li>
<li><a href="https://developer.apple.com/safari/tools/" target="_blank">Safari Developer Tools</a>

<br/></li>
</ul>
</div>
</div>

            <footer class="footline">

            </footer>
          </article>

    
    
          <article class="default">
            <header class="headline">
            </header>
<h1 id="float-based-responsive-layout">Float-based Responsive Layout</h1>

<p>Now that we have seen the concept of responsive breakpoints, let&rsquo;s put them to use creating a layout for our web page.  Currently we have three <code>&lt;div&gt;</code> elements, each with a header and placeholder text.  We&rsquo;d like to arrange these into a row of three columns if the screen is large enough, and collapse them into a single column on smaller screens, such as a mobile phone.</p>
<p>We&rsquo;re going to explore several strategies for accomplishing this.  First, we&rsquo;ll look at float-based layouts.  This is an older strategy for creating columns, and it is based on the <code>float</code> css property which is traditionally used to float images and figures to the right or left of a body of text.</p>
<p>We can instead leverage it to create columns by setting each <code>&lt;div&gt;</code> we intend to behave as a column to have a <code>float: left;</code> property.  This makes each column float to the left of the one after it.  Let&rsquo;s give it a try.</p>
<p>First, in your <em>Pages/Index.cshtml</em>, we&rsquo;ll add a class to the outermost div, just under the <code>&lt;aside&gt;</code> we manipulated previously:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>&lt;<span style="color:#f92672">aside</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;advertisement&#34;</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">img</span> <span style="color:#a6e22e">src</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;~/img/ad.png&#34;</span> <span style="color:#a6e22e">alt</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;Eat at Bernies!&#34;</span>/&gt;
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#f92672">aside</span>&gt;
</span></span><span style="display:flex;"><span>&lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;float-columns&#34;</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">div</span>&gt;
</span></span><span style="display:flex;"><span>        &lt;<span style="color:#f92672">h1</span>&gt;Column One&lt;/<span style="color:#f92672">h1</span>&gt;
</span></span><span style="display:flex;"><span>        ...</span></span></code></pre></div><p>Then we&rsquo;ll add setting the <code>float</code> property in our <em>wwwroot/css/site.css</em>:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-css" data-lang="css"><span style="display:flex;"><span>.<span style="color:#a6e22e">float-columns</span> <span style="color:#f92672">&gt;</span> <span style="color:#f92672">div</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">float</span>: <span style="color:#66d9ef">left</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">width</span>: <span style="color:#ae81ff">33</span><span style="color:#66d9ef">%</span>;
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>We use the child selection operator <code>&gt;</code> to apply the css rules to all <code>&lt;div&gt;</code> elements that are a direct child of the <code>&lt;div&gt;</code> we gave the class of <code>float-columns</code> to.  We&rsquo;ll make each of those children <code>&lt;div&gt;</code> elements behave like columns by making them float to the left of the column declared after them, and set them each to be roughly 1/3 the width of the page with <code>width: 33%</code>.</p>
<p>If we run the page now, we&rsquo;ll see that we have our columns:</p>
<p>
<a href="#image-5923c12afb3dbc09eb927a80580a20d6" class="lightbox-link">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/3.3.5.1.png" alt="The three-column float layout" style="height: auto; width: auto;" loading="lazy">
</a>
<a href="javascript:history.back();" class="lightbox" id="image-5923c12afb3dbc09eb927a80580a20d6">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/3.3.5.1.png" alt="The three-column float layout" class="lightbox-image" loading="lazy">
</a></p>
<p>But when you scroll down, you&rsquo;ll also see a problem:</p>
<p>
<a href="#image-05f7b0e348798e5f6b89a586ea7cc0b9" class="lightbox-link">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/3.3.5.2.png" alt="A float error" style="height: auto; width: auto;" loading="lazy">
</a>
<a href="javascript:history.back();" class="lightbox" id="image-05f7b0e348798e5f6b89a586ea7cc0b9">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/3.3.5.2.png" alt="A float error" class="lightbox-image" loading="lazy">
</a></p>
<p>Because the use of <code>float</code> takes elements out of the usual flow layout algorithm, the elements that follow them often end up in unexpected positions.  We have to explicitly turn the normal flow layout back on when we&rsquo;re done with our floating elements with a <code>clear</code> property, which can be <code>left</code>, <code>right</code>, or <code>both</code>.</p>
<p>This normally is done by adding an empty div with the <code>clear: both</code> rule applied after the last column; a technique called a <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/clear" target="_blank">clearfix</a>
.  Let&rsquo;s go ahead and declare our clearfix class in <em>wwwroot/css/site.css</em>:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-css" data-lang="css"><span style="display:flex;"><span>.<span style="color:#a6e22e">clearfix</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">clear</span>: <span style="color:#66d9ef">both</span>;
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>And then in our <em>Pages/Index.cshtml</em>, we&rsquo;ll add a <code>&lt;div&gt;</code> element with that class, just after our containing <code>&lt;div&gt;</code> (it will be the last element in the file):</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>&lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;clearfix&#34;</span>&gt;&lt;/<span style="color:#f92672">div</span>&gt;</span></span></code></pre></div><p>Now when we render the page, we&rsquo;ll see the columns behave as expected:</p>
<p>!The float error fixed](/images/3.3.5.3.png)</p>
<p>However, our page is not responsive at this point.  So we&rsquo;ll need to add a media query to establish a responsive breakpoint for smaller screens.  Let&rsquo;s use 490 pixels as our breakpoint.  We&rsquo;ll need to add this new rule <em>below</em> the ones we created for our <code>.float-columns</code> in <em>wwwroot/css/site.css</em>, as we will be overriding those when the media query is true:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-css" data-lang="css"><span style="display:flex;"><span>@<span style="color:#66d9ef">media</span> <span style="color:#f92672">(</span><span style="color:#f92672">max-width</span><span style="color:#f92672">:</span> <span style="color:#f92672">490px</span><span style="color:#f92672">)</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/* Reset the columns to render with the flow of the page */</span>
</span></span><span style="display:flex;"><span>    .<span style="color:#a6e22e">float-columns</span> <span style="color:#f92672">&gt;</span> <span style="color:#f92672">div</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">float</span>: <span style="color:#66d9ef">none</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">width</span>: <span style="color:#ae81ff">100</span><span style="color:#66d9ef">%</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>We simply reverse the rules we applied to the columns by setting the properties back to their defaults.  Now the columns will change to their stacked appearance when we look at the site on a smaller screen.</p>

            <footer class="footline">

            </footer>
          </article>

    
    
          <article class="default">
            <header class="headline">
            </header>
<h1 id="responsive-setup">Responsive Setup</h1>

<p>In web development, <em>Responsive Design</em> means making your webpages adjust to the device they are displayed on.  This is especially important today, where a user might be browsing the web from a desktop, a tablet, a phone, or even a console built into a refrigerator, a car, or an airplane seat!</p>
<p>Before we go farther, there are a couple of concepts we need to understand.  The first is the <em>device width</em> and <em>device height</em>, which are the actual size of the device&rsquo;s screen.  Next is the <em>viewport</em>, which is the area of the screen that the web browser actually gets to render into, and has its own width and height.  The viewport width and height can be smaller than the device width and height, as is the case when the browser is displayed in a window that is not maximized.  In that case, only the area of the browser window (less the toolbars) is the viewport.</p>
<p>A viewport can also be <em>larger</em> than the device width and height.  When mobile phones first started allowing users to browse the web, they had tiny screens.  Phone manufacturers had to decide how to display webpages that were never designed for these devices.  They settled on an approach of setting the viewport to a size consistent with computer monitors of the day, and then scaling the entire page down to fit onto the actual screen.  The result was you could see the entire webpage, but it was tiny.</p>
<p>
<a href="#image-8eece28ee159e6cbd4f39fcd5bc87898" class="lightbox-link">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/3.3.4.0.jpg" alt="Viewports on Mobile Devices" style="height: auto; width: auto;" loading="lazy">
</a>
<a href="javascript:history.back();" class="lightbox" id="image-8eece28ee159e6cbd4f39fcd5bc87898">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/3.3.4.0.jpg" alt="Viewports on Mobile Devices" class="lightbox-image" loading="lazy">
</a></p>
<p>This remains the default behavior of mobile browsers to this day - and because the viewport is not aligned with the device size, media queries targeting the viewport also do not correctly account for device size.</p>
<h2 id="the-viewport-meta-tag">The Viewport Meta Tag</h2>
<p>However, this can be overridden through the use of a <code>&lt;meta&gt;</code> element.  The <code>&lt;meta&gt;</code> element must be placed in the <code>&lt;head&gt;</code> of a webpage, and applies some kind of metadata to the webpage.  Historically, it was used to supply key words to search engines, but this practice was routinely abused and search engines have ceased to rely on it.  However, other kinds of metadata can be added with a <code>&lt;meta&gt;</code> element, and one of the most important for responsive design overrides the default viewport settings.  Thus, a responsive webpage should always declare the following <code>&lt;meta&gt;</code> tag:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>&lt;<span style="color:#f92672">meta</span> <span style="color:#a6e22e">name</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;viewport&#34;</span> <span style="color:#a6e22e">content</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;width=device-width, initial-scale=1&#34;</span>&gt;</span></span></code></pre></div><p>This tells the browser to set the width of the viewport to the width of the device, and to not scale the final rendering of the webpage (scale is on a range of 0 to 1, where 1 is 100%).  This ensures that the viewport and the device sizes are the same.</p>
<p>If you look in your project&rsquo;s _Pages/Shared/<em>Layout.cshtml</em> file, you will notice that this <code>&lt;meta&gt;</code> tag is already defined.  In fact, it is included as biolerplate in all ASP.NET projects generated by Visual Studio that include Razor pages.  But if you find yourself writing pages from scratch that you want to be responsive, you&rsquo;ll need to add this.  You can read more about it on <a href="https://developer.mozilla.org/en-US/docs/Mozilla/Mobile/Viewport_meta_tag" target="_blank">MDN</a>
.</p>
<h2 id="responsive-breakpoints">Responsive Breakpoints</h2>
<p>Once we know our viewport is set up to be the same size as our device, we can turn our attention to using media queries to respond to different widths of screens.  For example, we can define all the CSS rules we would normally use, and then a media query that would limit those for a smaller screen - say under 750 pixels.  Let&rsquo;s try this out by adding a border to our aside, and changing its appearance in a smaller screen:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-css" data-lang="css"><span style="display:flex;"><span><span style="color:#f92672">aside</span> { <span style="color:#66d9ef">border</span>: <span style="color:#ae81ff">5</span><span style="color:#66d9ef">px</span> <span style="color:#66d9ef">solid</span> <span style="color:#66d9ef">gray</span>; }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>@<span style="color:#66d9ef">media</span> <span style="color:#f92672">(</span><span style="color:#f92672">max-width</span><span style="color:#f92672">:</span> <span style="color:#f92672">750px</span><span style="color:#f92672">)</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/* applies when the screen is under 750 pixels wide */</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">aside</span> { <span style="color:#66d9ef">border</span>: <span style="color:#ae81ff">3</span><span style="color:#66d9ef">px</span> <span style="color:#66d9ef">dashed</span> <span style="color:#66d9ef">gray</span>; }
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>Now when the viewport is wider than 750 pixels, you&rsquo;ll see a solid gray border around the banner ad:</p>
<p>
<a href="#image-019f95b5df4c2712c81a7d020625d08f" class="lightbox-link">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/3.3.4.1.png" alt="Added Border on the Banner Ad" style="height: auto; width: auto;" loading="lazy">
</a>
<a href="javascript:history.back();" class="lightbox" id="image-019f95b5df4c2712c81a7d020625d08f">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/3.3.4.1.png" alt="Added Border on the Banner Ad" class="lightbox-image" loading="lazy">
</a></p>
<p>And if you size down your viewport, you&rsquo;ll see that banner go to a smaller dashed gray:</p>
<p>
<a href="#image-d72d4c8edcc9168920d66386b3ac1350" class="lightbox-link">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/3.3.4.2.png" alt="Border at medium viewport size" style="height: auto; width: auto;" loading="lazy">
</a>
<a href="javascript:history.back();" class="lightbox" id="image-d72d4c8edcc9168920d66386b3ac1350">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/3.3.4.2.png" alt="Border at medium viewport size" class="lightbox-image" loading="lazy">
</a></p>
<p>We can extend this approach by adding <em>another</em> media query for even smaller screens, say those under 490 pixels:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-css" data-lang="css"><span style="display:flex;"><span>@<span style="color:#66d9ef">media</span> <span style="color:#f92672">(</span><span style="color:#f92672">max-width</span><span style="color:#f92672">:</span> <span style="color:#f92672">490px</span><span style="color:#f92672">)</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/* applies when the screen is under 490 pixels wide */</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">aside</span> { <span style="color:#66d9ef">border</span>: <span style="color:#ae81ff">2</span><span style="color:#66d9ef">px</span> <span style="color:#66d9ef">dotted</span> <span style="color:#66d9ef">gray</span>; }
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>As this rule is declared <em>after</em> the first two border rules, it will <em>override</em> them both, replacing the values for the border (note, any previously declared rules that have not been overridden will continue to apply).  Now if you size your screen even smaller:</p>
<p>
<a href="#image-7f1a05ecb4a7bf2d174b79e85aa3476b" class="lightbox-link">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/3.3.4.3.png" alt="Border at small viewport size" style="height: auto; width: auto;" loading="lazy">
</a>
<a href="javascript:history.back();" class="lightbox" id="image-7f1a05ecb4a7bf2d174b79e85aa3476b">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/3.3.4.3.png" alt="Border at small viewport size" class="lightbox-image" loading="lazy">
</a></p>
<p>This strategy of using successively smaller media queries to override CSS styles at different screen widths is known as <em>responsive breakpoints</em>, because at those widths you specify, the appearance of your page changes.</p>
<p>It is a good idea to have the starting point of your page (when no media queries are applied) be a normal desktop resolution so that your site appears normal in very old browsers.</p>

            <footer class="footline">

            </footer>
          </article>

    
    
          <article class="default">
            <header class="headline">
            </header>
<h1 id="flex-based-responsive-layout">Flex-based Responsive Layout</h1>

<p>Now, the float-based layout is really a bit of a hack, as the intent of the <code>float</code> property is really for the embedding of images and callouts to the sides of text content.  Unfortunately, floats and tables were the only mechanisms in earlier versions of CSS to allow for more nuanced layouts.</p>
<p>However, that has changed with CSS3, which has introduced several new layout algorithms to supplement the traditional flow and table ones.  One of these is <a href="https://css-tricks.com/snippets/css/a-guide-to-flexbox/" target="_blank">flexbox</a>
, which we will explore now.</p>
<p>Flexbox provides an alternative means for laying out HTML elements within a containing element.  You set the containing element&rsquo;s <code>display</code> property to <code>flex</code>, and choose a <code>flex-direction</code> (<code>row</code>, <code>column</code>, <code>row-reverse</code>, or <code>column-reverse</code>).</p>
<p>It is very easy to set up our three-column layout with flexbox.  Let&rsquo;s do so now.</p>
<p>First, we&rsquo;ll change the class we are applying to our containing <code>div</code> element in <em>Pages/Index.cshtml</em>.  Let&rsquo;s use <code>&quot;flex-columns&quot;</code> instead of our previous <code>&quot;float-columns&quot;</code>:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>&lt;<span style="color:#f92672">aside</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;advertisement&#34;</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">img</span> <span style="color:#a6e22e">src</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;~/img/ad.png&#34;</span> <span style="color:#a6e22e">alt</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;Eat at Bernies!&#34;</span>/&gt;
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#f92672">aside</span>&gt;
</span></span><span style="display:flex;"><span>&lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;flex-columns&#34;</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">div</span>&gt;
</span></span><span style="display:flex;"><span>        &lt;<span style="color:#f92672">h1</span>&gt;Column One&lt;/<span style="color:#f92672">h1</span>&gt;
</span></span><span style="display:flex;"><span>        ...</span></span></code></pre></div><p>We can then add additional CSS rules to our <em>wwwroot/css/site.css</em> to apply the flex layout:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-css" data-lang="css"><span style="display:flex;"><span>.<span style="color:#a6e22e">flex-columns</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">display</span>: <span style="color:#66d9ef">flex</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">flex-direction</span>: <span style="color:#66d9ef">row</span>;
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>Now if we run our program and look at our page, we&rsquo;ll see that the flex algorithm has automatically arranged the children <code>&lt;div&gt;</code> elements into three equally-sized columns for us!</p>
<p>
<a href="#image-0e239c36eca2bd24718af02e50f4da8d" class="lightbox-link">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/3.3.6.1.png" alt="Flex-based columns layout" style="height: auto; width: auto;" loading="lazy">
</a>
<a href="javascript:history.back();" class="lightbox" id="image-0e239c36eca2bd24718af02e50f4da8d">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/3.3.6.1.png" alt="Flex-based columns layout" class="lightbox-image" loading="lazy">
</a></p>
<p>Moreover, if we were to add or remove columns, the layout would automatically change to keep them balanced.  You can also apply a number of additional properties to provide more fine-grained control of the layout; the CSS Tricks <a href="https://css-tricks.com/snippets/css/a-guide-to-flexbox/" target="_blank">A Complete Guide to Flexbox</a>
 offers a great guide to the details.</p>
<p>Now to make our layout responsive, we just need to switch the direction of our container:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-css" data-lang="css"><span style="display:flex;"><span>@<span style="color:#66d9ef">media</span> <span style="color:#f92672">(</span><span style="color:#f92672">max-width</span><span style="color:#f92672">:</span> <span style="color:#f92672">490px</span><span style="color:#f92672">)</span> {
</span></span><span style="display:flex;"><span>    .<span style="color:#a6e22e">flex-columns</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">flex-direction</span>: <span style="color:#66d9ef">column</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>Now when we view our page on a smaller screen, it will use columns instead of rows!</p>
<p>
<a href="#image-68208258e42dc40af7d6ade52fd0cfa1" class="lightbox-link">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/3.3.6.2.png" alt="Single Column Flex Layout" style="height: auto; width: auto;" loading="lazy">
</a>
<a href="javascript:history.back();" class="lightbox" id="image-68208258e42dc40af7d6ade52fd0cfa1">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/3.3.6.2.png" alt="Single Column Flex Layout" class="lightbox-image" loading="lazy">
</a></p>
<p>We also no longer need to bother with a clearfix <code>&lt;div&gt;</code>, though leaving the one we created in the prior example in place won&rsquo;t cause any problems.</p>

            <footer class="footline">

            </footer>
          </article>

    
    
          <article class="default">
            <header class="headline">
            </header>
<h1 id="grid-based">Grid-based</h1>

<p>TODO: float based responsive layouts</p>

            <footer class="footline">

            </footer>
          </article>

    
    
          <article class="default">
            <header class="headline">
            </header>
<h1 id="summary">Summary</h1>

<p>TODO: float based responsive layouts</p>

            <footer class="footline">

            </footer>
          </article>

          </section>
    
    
          <article class="default">
            <header class="headline">
            </header>
<h1 id="web-data">Web Data</h1>

<p>Now that we&rsquo;ve seen how to dynamically create the content of a Razor Page on the server, we should turn our attention to how we can do so based on our user&rsquo;s needs.  Consider the example application we have been developing - it exposes a database of movie information to the user.  How might a user want to use this database?  They might want to find the details for a specific movie - who directed it, when was it released, etc.  They might be looking for a movie they want to watch in a favorite genre.  They might be looking to find all the movies directed by a favorite director&hellip; there are a lot of possibilities.</p>
<p>As software developers, we need to anticipate how our users will likely want to use the software we are developing.  And with that in mind, we need to develop user interfaces that allow the user to communicate those needs to the software we are writing as concisely as possible.  Remember that in HTTP, all communication between the client (and its user) and the server (our web application), is mediated through the request-response mechanism:</p>
<p>
<a href="#image-4c994f140c64f98adb771a1977f4dbf4" class="lightbox-link">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/request-response-pattern.png" alt="Request-Response Mechanism" style="height: auto; width: auto;" loading="lazy">
</a>
<a href="javascript:history.back();" class="lightbox" id="image-4c994f140c64f98adb771a1977f4dbf4">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/request-response-pattern.png" alt="Request-Response Mechanism" class="lightbox-image" loading="lazy">
</a></p>
<p>Thus, any information the user wants to supply the server is typically communicated <em>through</em> a request.  HTML provides a mechanism for enabling this communication in a structured way - forms.  A <code>&lt;form&gt;</code> element, when submitted, serializes the values of all <code>&lt;input&gt;</code> elements contained within it and submits them to the server in the request.</p>
<p>The values in the form are serialized (converted into text) and submitted with the request.  Exactly how this serialization happens depends on the kind of request.  For GET requests the serialized data is added to the url as the query string.  For POST requests, the serialized data is sent as the body of the request.</p>
<p>You can usually use either form (except when uploading files, which must be POSTed).  However, you might think about the semantics of each action.  A GET request is for retrieving something <em>from</em> the server, so any data your sending is about modifying that request.  Thus, search and filter requests make sense as a GET request.  A POST request is about sending something <em>to</em> the server, thus account creation, blog posts, and so on make sense as a POST request.</p>

  
  
<div class="box notices cstyle info">
  <div class="box-label"><i class="fa-fw fas fa-info-circle"></i> Info</div>
  <div class="box-content">

<p>When sent using secure HTTP (HTTPS), both the query string portion of the URL and the request body are encrypted, so there is no difference in the in-transit security.  However, browsers typically store the full URL in the history, so if sensitive information is being sent, you might want to use POST requests.</p>
</div>
</div>

            <footer class="footline">

            </footer>
          </article>

          <section>
            <h1 class="a11y-only">Subsections of Web Data</h1>
    
    
          <article class="default">
            <header class="headline">
            </header>
<h1 id="adding-search-to-the-movie-site">Adding Search to the Movie Site</h1>

<p>Let&rsquo;s add a search form and functionality to our movie website.  We&rsquo;ll add this to our <em>Index.cshtml</em> page, just above the <code>&lt;h1&gt;</code> element:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>    &lt;<span style="color:#f92672">form</span>&gt;
</span></span><span style="display:flex;"><span>        &lt;<span style="color:#f92672">input</span> <span style="color:#a6e22e">type</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;text&#34;</span> <span style="color:#a6e22e">name</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;SearchTerms&#34;</span>/&gt;
</span></span><span style="display:flex;"><span>        &lt;<span style="color:#f92672">input</span> <span style="color:#a6e22e">type</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;submit&#34;</span> <span style="color:#a6e22e">value</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;Search&#34;</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;/<span style="color:#f92672">form</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">h1</span>&gt;Movie Results&lt;/<span style="color:#f92672">h1</span>&gt;</span></span></code></pre></div><p>We&rsquo;ll also change the <code>&lt;h1&gt;</code> contents to &ldquo;Movie Results&rdquo;.</p>
<p>Try typing a search term into the search box, and click the <em>search</em> button.  Has anything changed?</p>
<h3 id="the-request-object">The Request Object</h3>
<p>When you click the <em>search</em> button, the browser serializes your form, and makes a request against your server including the search terms.  By default this request is a <strong>GET</strong> request, and the contents of the form are serialized using <a href="https://developer.mozilla.org/en-US/docs/Glossary/percent-encoding" target="_blank">urlencoding (aka percent encoding)</a>
, a special string format.  This string is then appended to the requested url as the <a href="https://developer.mozilla.org/en-US/docs/Web/API/Location/search" target="_blank">query string (aka search string)</a>
 - a series of key-value pairs proceeded by the question mark symbol(<code>?</code>) and separated by the ampersand (<code>&amp;</code>).</p>
<p>This data is made available to us in our PageModel <em>Index.cshtml.cs</em> by ASP.NET.  Let&rsquo;s take a look at it now.  Notice the method <code>public void OnGet()</code>?  This method is invoked <em>every time the page is requested using a GET request</em>.  Thus, if we need to do some initialization and/or processing, this would be the place to do it.</p>
<p>Inside the PageModel, we can access the request data using the <code>Request</code> object.  The exact string can be accessed with <code>Request.QueryString</code>, or the parsed and deserialized results can be accessed from <code>Request.Query</code>.  Let&rsquo;s use the latter to pull out the search terms:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> OnGet() 
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        String terms = Request.Query[<span style="color:#e6db74">&#34;SearchTerms&#34;</span>];
</span></span><span style="display:flex;"><span>    }</span></span></code></pre></div><p>We can store that value, and make it available to the page itself, by creating a public property.  Let&rsquo;s create one named <code>SearchTerms</code>:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">string</span> SearchTerms { <span style="color:#66d9ef">get</span>; <span style="color:#66d9ef">set</span>; }</span></span></code></pre></div><p>And we&rsquo;ll refactor our <code>OnGet()</code> to store the search terms coming in from the request:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> OnGet() 
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        SearchTerms = Request.Query[<span style="color:#e6db74">&#34;SearchTerms&#34;</span>];
</span></span><span style="display:flex;"><span>    }</span></span></code></pre></div><p>Now we can refactor our input element to use that public property from our model as its default value:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>    &lt;<span style="color:#f92672">input</span> <span style="color:#a6e22e">type</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;text&#34;</span> <span style="color:#a6e22e">name</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;SearchTerms&#34;</span> <span style="color:#a6e22e">value</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;@Model.SearchTerms&#34;</span>/&gt;</span></span></code></pre></div><p>The first time we visit the index page, the <code>SearchTerms</code> value will be null, so our input would have <code>value=&quot;&quot;</code>.  The browser interprets this as empty.  If we add a search term and click the <em>search</em> button, we&rsquo;ll see the page reload.  And since <code>@Model.SearchTerms</code> has a value this time, we&rsquo;ll see that string appear in search box!</p>
<p>Now we just need to search for those terms&hellip;</p>
<h3 id="adding-search-to-the-database">Adding Search to the Database</h3>
<p>We&rsquo;ll start by defining a new static method in our <em>MovieDatabase.cs</em> file to search for movies using the search terms:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// Searches the database for matching movies</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;param name=&#34;terms&#34;&gt;The terms to search for&lt;/param&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;returns&gt;A collection of movies&lt;/returns&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> IEnumerable&lt;Movie&gt; Search(<span style="color:#66d9ef">string</span> terms)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// TODO: Search database</span>
</span></span><span style="display:flex;"><span>    }</span></span></code></pre></div><p>We&rsquo;ll need a collection of results that implements the <code>IEnumerable&lt;T&gt;</code> interface.  Let&rsquo;s use the familiar <code>List&lt;T&gt;</code>:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>    List&lt;Movie&gt; results = <span style="color:#66d9ef">new</span> List&lt;Movie&gt;();</span></span></code></pre></div><p>Now, there is a chance that the search terms we receive are <code>null</code>.  If that&rsquo;s the case, we would either 1) return <em>all</em> the movies, or 2) return <em>no</em> movies.  You can choose either option, but for now, I&rsquo;ll return all movies</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>    <span style="color:#75715e">// Return all movies if there are no search terms</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span>(terms == <span style="color:#66d9ef">null</span>) <span style="color:#66d9ef">return</span> All;</span></span></code></pre></div><p>If we <em>do</em> have search terms, we need to add any movies from our database that include those terms in the title.  This requires us to check <em>each movie</em> in our database:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>    <span style="color:#75715e">// return each movie in the database containing the terms substring</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">foreach</span>(Movie movie <span style="color:#66d9ef">in</span> All)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span>(movie.Title.Contains(terms, StringComparison.InvariantCultureIgnoreCase)) 
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            results.Add(movie);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }   </span></span></code></pre></div><p>We&rsquo;ll use <a href="https://docs.microsoft.com/en-us/dotnet/api/system.string.contains?view=netframework-4.8" target="_blank">String.Contains()</a>
 to determine if our terms are a <em>substring</em> within the title, ignoring case differences.  If we find it, we&rsquo;ll add the movie to our <code>results</code> list.</p>
<p>Finally, we&rsquo;ll return that list:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> results;</span></span></code></pre></div><p>Now, we can refactor our <em>Index.cshtml.cs</em> to use this new search method:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// The movies to display on the index page </span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> IEnumerable&lt;Movie&gt; Movies { <span style="color:#66d9ef">get</span>; <span style="color:#66d9ef">protected</span> <span style="color:#66d9ef">set</span>; }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// The current search terms </span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">string</span> SearchTerms { <span style="color:#66d9ef">get</span>; <span style="color:#66d9ef">set</span>; }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// Gets the search results for display on the page</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> OnGet() 
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        SearchTerms = Request.Query[<span style="color:#e6db74">&#34;SearchTerms&#34;</span>];
</span></span><span style="display:flex;"><span>        Movies = MovieDatabase.Search(SearchTerms);
</span></span><span style="display:flex;"><span>    }</span></span></code></pre></div><p>We&rsquo;ll also need ot refactor our <em>Index.cshtml.cs</em> to use the search results, instead of the entire database:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>&lt;<span style="color:#f92672">ul</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;movie-list&#34;</span>&gt;
</span></span><span style="display:flex;"><span>    @foreach(Movie movie in @Model.Movies)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        &lt;<span style="color:#f92672">li</span>&gt;
</span></span><span style="display:flex;"><span>            &lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;details&#34;</span>&gt;
</span></span><span style="display:flex;"><span>                &lt;<span style="color:#f92672">h3</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;title&#34;</span>&gt;@movie.Title&lt;/<span style="color:#f92672">h3</span>&gt;
</span></span><span style="display:flex;"><span>                &lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;mpaa&#34;</span>&gt;@movie.MPAARating&lt;/<span style="color:#f92672">div</span>&gt;
</span></span><span style="display:flex;"><span>                &lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;genre&#34;</span>&gt;@movie.MajorGenre&lt;/<span style="color:#f92672">div</span>&gt;
</span></span><span style="display:flex;"><span>            &lt;/<span style="color:#f92672">div</span>&gt;
</span></span><span style="display:flex;"><span>            &lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;ratings&#34;</span>&gt;
</span></span><span style="display:flex;"><span>                @if(movie.IMDBRating != null)
</span></span><span style="display:flex;"><span>                {
</span></span><span style="display:flex;"><span>                    &lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;imdb&#34;</span>&gt;
</span></span><span style="display:flex;"><span>                        @movie.IMDBRating
</span></span><span style="display:flex;"><span>                    &lt;/<span style="color:#f92672">div</span>&gt;
</span></span><span style="display:flex;"><span>                }
</span></span><span style="display:flex;"><span>                @if(movie.RottenTomatoesRating != null)
</span></span><span style="display:flex;"><span>                {
</span></span><span style="display:flex;"><span>                    &lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;rotten-tomatoes&#34;</span>&gt;
</span></span><span style="display:flex;"><span>                        @movie.RottenTomatoesRating
</span></span><span style="display:flex;"><span>                    &lt;/<span style="color:#f92672">div</span>&gt;
</span></span><span style="display:flex;"><span>                }
</span></span><span style="display:flex;"><span>            &lt;/<span style="color:#f92672">div</span>&gt;
</span></span><span style="display:flex;"><span>        &lt;/<span style="color:#f92672">li</span>&gt;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#f92672">ul</span>&gt;</span></span></code></pre></div><p>If we try running the project again, and searching for the term &ldquo;Love&rdquo;&hellip; it crashes?  What is going on?</p>
<p>
<a href="#image-a2a2d72ed2daeca9cd52437bd75f19cb" class="lightbox-link">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/6.8.2.png" alt="The Encountered Exception" style="height: auto; width: auto;" loading="lazy">
</a>
<a href="javascript:history.back();" class="lightbox" id="image-a2a2d72ed2daeca9cd52437bd75f19cb">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/6.8.2.png" alt="The Encountered Exception" class="lightbox-image" loading="lazy">
</a></p>
<p>Notice that the error is a <code>NullReferenceException</code>, and occurs in our <code>if</code> statement checking the title.</p>
<h3 id="bad-data">Bad Data</h3>
<p>If we think about what variables are involved in the line <code>if(movie.Title.Contains(terms, StringComparison.InvariantCultureIgnoreCase))</code>, we have:</p>
<ul>
<li><code>movie</code></li>
<li><code>movie.Title</code></li>
<li><code>terms</code></li>
</ul>
<p>Which of these three values can be null?  We know for certain <code>terms</code> is not, as we test for the null value and return if it exists just before this portion of our code.  Similarly, <code>movie</code> cannot be null, as it is an entry in the list provided by <code>All</code>, and if it were null, our page would have crashed before we added searching.  That leaves <code>movie.Title</code> as a possibility.</p>
<p>If we comb through the data in <em>movies.json</em>, we find on line 54957 a movie with <code>null</code> for a title:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>  {
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;Title&#34;</span>: <span style="color:#66d9ef">null</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;USGross&#34;</span>: <span style="color:#ae81ff">26403</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;WorldwideGross&#34;</span>: <span style="color:#ae81ff">3080493</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;USDVDSales&#34;</span>: <span style="color:#66d9ef">null</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;ProductionBudget&#34;</span>: <span style="color:#ae81ff">3700000</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;ReleaseDate&#34;</span>: <span style="color:#e6db74">&#34;Nov 03 2006&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;MPAARating&#34;</span>: <span style="color:#e6db74">&#34;Not Rated&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;RunningTime&#34;</span>: <span style="color:#ae81ff">85</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;Distributor&#34;</span>: <span style="color:#e6db74">&#34;IFC Films&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;Source&#34;</span>: <span style="color:#e6db74">&#34;Original Screenplay&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;MajorGenre&#34;</span>: <span style="color:#e6db74">&#34;Thriller/Suspense&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;CreativeType&#34;</span>: <span style="color:#e6db74">&#34;Contemporary Fiction&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;Director&#34;</span>: <span style="color:#66d9ef">null</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;RottenTomatoesRating&#34;</span>: <span style="color:#ae81ff">39</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;IMDBRating&#34;</span>: <span style="color:#ae81ff">6.6</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;IMDBVotes&#34;</span>: <span style="color:#ae81ff">11986</span>
</span></span><span style="display:flex;"><span>  }<span style="color:#960050;background-color:#1e0010">,</span></span></span></code></pre></div><p>Working from the provided metadata, we can eventually identify the film as one titled <a href="https://en.wikipedia.org/wiki/Unknown_%282006_film%29" target="_blank">Unknown</a>
.  It would seem that whomever wrote the script to create this JSON file interpreted &ldquo;Unknown&rdquo; to mean the title was unknown (hence null), rather than the literal word &ldquo;Unknown&rdquo;.</p>
<p>If we dig deeper into the JSON file, we can find other issues.  For example, the JSON identifies the controversial film <a href="https://en.wikipedia.org/wiki/The_Birth_of_a_Nation" target="_blank">Birth of a Nation</a>
 as being released in 2015, when it was actually the first full-length theatrical film ever released, in <em>1915</em>!  Most likely the original database from which these entries were derived only used two digits for the year, i.e. <code>15</code>, and the scripter who converted it to JSON chose a threshold date to determine if it was released in the 20 or 21st century, i.e.:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">if</span>(date &lt; <span style="color:#ae81ff">28</span>) 
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    date += <span style="color:#ae81ff">2000</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">else</span> {
</span></span><span style="display:flex;"><span>    date += <span style="color:#ae81ff">1900</span>;
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>The earliest movie release date in the JSON is 1928, for &ldquo;The Broadway Melody&rdquo;, which suggests that <em>all</em> the movies released between 1915 and 1928 have been mislabeled as being released in the 21st century!</p>
<p>Unfortunately, these kinds of errors are rampant in databases, so as software developers we must be aware that our data may well be <em>dirty</em> - containing erroneous values, and anticipate these errors much like we do with user input.  It is a good idea to clean up and fix these errors in our database so that it will be more reliable, but we also need to check for potential errors in our own code, as the database could be updated with more junk data in the future.  Thus, we&rsquo;ll add a <code>null</code> check to our <code>if</code> statement in <em>MovieDatabase.cs</em>:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">if</span>(movie.Title != <span style="color:#66d9ef">null</span> &amp;&amp; movie.Title.Contains(terms, StringComparison.InvariantCultureIgnoreCase)) </span></span></code></pre></div><p>This will protect us against a <code>NullReferenceException</code> when our movie titles are null.  Now if you try the search again, you should see the results:</p>
<p>
<a href="#image-0c584f8cb4c8f1c91ce02ac5b52bb66b" class="lightbox-link">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/6.8.3.png" alt="The Search Results for &amp;ldquo;Love&amp;rdquo;" style="height: auto; width: auto;" loading="lazy">
</a>
<a href="javascript:history.back();" class="lightbox" id="image-0c584f8cb4c8f1c91ce02ac5b52bb66b">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/6.8.3.png" alt="The Search Results for &amp;ldquo;Love&amp;rdquo;" class="lightbox-image" loading="lazy">
</a></p>

            <footer class="footline">

            </footer>
          </article>

    
    
          <article class="default">
            <header class="headline">
            </header>
<h1 id="adding-categorical-filters-to-the-movie-site">Adding Categorical Filters to the Movie Site</h1>

<p>Let&rsquo;s add some filters to the page as well.  We&rsquo;ll start with <em>categorical</em> filters, i.e. filtering by category.  Let&rsquo;s start by filtering for MPAA Rating.  We know that there are only a handful of ratings issued by the Motion Picture Association of America - G, PG, PG-13, R, and NC-17.  We might be tempted to use an enumeration to represent these values, but in C# an enumeration cannot have strings for values.  Nor can we use the hyphen (<code>-</code>) in an enumeration name.</p>
<h2 id="defining-the-mpaa-ratings">Defining the MPAA Ratings</h2>
<p>So let&rsquo;s define a string array with our MPAA values, and make it accessible from our <code>MovieDatabase</code> class:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// Gets the possible MPAARatings</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">string</span>[] MPAARatings
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">get</span> =&gt; <span style="color:#66d9ef">new</span> <span style="color:#66d9ef">string</span>[]
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            <span style="color:#e6db74">&#34;G&#34;</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#e6db74">&#34;PG&#34;</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#e6db74">&#34;PG-13&#34;</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#e6db74">&#34;R&#34;</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#e6db74">&#34;NC-17&#34;</span>
</span></span><span style="display:flex;"><span>        };
</span></span><span style="display:flex;"><span>    }</span></span></code></pre></div><p>Now in our <code>&lt;form&gt;</code> in <em>Index.cshtml</em> we can add a checkbox for each of these possible values:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>&lt;<span style="color:#f92672">form</span>&gt;
</span></span><span style="display:flex;"><span>    @foreach  (string rating in MovieDatabase.MPAARatings) 
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        &lt;<span style="color:#f92672">label</span>&gt;
</span></span><span style="display:flex;"><span>            &lt;<span style="color:#f92672">input</span> <span style="color:#a6e22e">type</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;checkbox&#34;</span> <span style="color:#a6e22e">name</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;MPAARatings&#34;</span> <span style="color:#a6e22e">value</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;@rating&#34;</span>/&gt;
</span></span><span style="display:flex;"><span>            @rating
</span></span><span style="display:flex;"><span>        &lt;/<span style="color:#f92672">label</span>&gt;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">input</span> <span style="color:#a6e22e">type</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;text&#34;</span> <span style="color:#a6e22e">name</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;SearchTerms&#34;</span> <span style="color:#a6e22e">value</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;@Model.SearchTerms&#34;</span>/&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">input</span> <span style="color:#a6e22e">type</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;submit&#34;</span> <span style="color:#a6e22e">value</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;Search&#34;</span>&gt;
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#f92672">form</span>&gt;</span></span></code></pre></div><p>If you try running the project now, and check a few boxes, you&rsquo;ll see the query string results look something like:</p>
<div class="wrap-code highlight"><pre tabindex="0"><code>?SearchTerms=&amp;MPAARatings=G&amp;MPAARatings=PG-13</code></pre></div><p>Notice how the key <em>MPAARatings</em> is repeated twice?  What would that look like in our PageModel?  We can find out; declare a <code>var</code> to hold the value in the <code>OnGet()</code> method of <em>Index.cshtml.cs</em>:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>    <span style="color:#66d9ef">var</span> MPAARatings = Request.Query[<span style="color:#e6db74">&#34;MPAARatings&#34;</span>];</span></span></code></pre></div><p>If we add a breakpoint on this line, and run our code, then check several boxes (you&rsquo;ll have to <em>continue</em> the first time you hit the breakpoint), then step over the line, we&rsquo;ll see that the var <code>MPAA</code> rating is set to a <em>string collection</em>.  We could therefore store it in an array property in <em>Index.cshtml.cs</em>, much like we did with our <code>SearchTerms</code>:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// The filtered MPAA Ratings</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">string</span>[] MPAARatings { <span style="color:#66d9ef">get</span>; <span style="color:#66d9ef">set</span>; }</span></span></code></pre></div><p>And we can refactor the line we just added to <code>OnGet()</code> to use this new property:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>    MPAARatings = Request.Query[<span style="color:#e6db74">&#34;MPAARatings&#34;</span>];</span></span></code></pre></div><p>Then, in our <em>Index.cshtml</em> Razor Page, we can refactor the checkbox to be checked if we filtered against this rating in our last request:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>    &lt;<span style="color:#f92672">input</span> <span style="color:#a6e22e">type</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;checkbox&#34;</span> <span style="color:#a6e22e">name</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;MPAARatings&#34;</span> <span style="color:#a6e22e">value</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;@rating&#34;</span> <span style="color:#a6e22e">checked</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;@Model.MPAARatings.Contains(rating)&#34;</span>/&gt;</span></span></code></pre></div><p>Now our filters stick around when we submit the search request.  That just leaves making the filters actually <em>work</em>.</p>
<h2 id="applying-mpaa-rating-filters">Applying MPAA Rating Filters</h2>
<p>Let&rsquo;s add another method to our <code>MovieDatabase</code> class, <code>FilterByMPAARating()</code>:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// Filters the provided collection of movies</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;param name=&#34;movies&#34;&gt;The collection of movies to filter&lt;/param&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;param name=&#34;ratings&#34;&gt;The ratings to include&lt;/param&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;returns&gt;A collection containing only movies that match the filter&lt;/returns&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> IEnumerable&lt;Movie&gt; FilterByMPAARating(IEnumerable&lt;Movie&gt; movies, IEnumerable&lt;<span style="color:#66d9ef">string</span>&gt; ratings)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// TODO: Filter the list</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    }</span></span></code></pre></div><p>Notice that in <em>this</em> method, we accept an <code>IEnumerable&lt;Movie&gt;</code> parameter.  This is the list of movies we want to filter.  We use this, instead of the <code>All()</code> we did in the <code>Search()</code> method, as we would want to filter the <em>results</em> of a search.</p>
<p>Let&rsquo;s do a null/empty check, and just return this shortlist if no filters are specified:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>    <span style="color:#75715e">// If no filter is specified, just return the provided collection</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> (ratings == <span style="color:#66d9ef">null</span> || ratings.Count() == <span style="color:#ae81ff">0</span>) <span style="color:#66d9ef">return</span> movies;</span></span></code></pre></div><p>Otherwise, we&rsquo;ll use the same process we did before.  Start with an empty list of movies, and iterate over the collection seeing if any match.  However, as we have <em>two</em> collections (the movies <em>and</em> the ratings), we&rsquo;ll see if the ratings collection contains the supplied movie&rsquo;s rating.</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>    <span style="color:#75715e">// Filter the supplied collection of movies</span>
</span></span><span style="display:flex;"><span>    List&lt;Movie&gt; results = <span style="color:#66d9ef">new</span> List&lt;Movie&gt;();
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">foreach</span>(Movie movie <span style="color:#66d9ef">in</span> movies)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span>(movie.MPAARatings != <span style="color:#66d9ef">null</span> &amp;&amp; ratings.Contains(movie.MPAARatings))
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            results.Add(movie);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }</span></span></code></pre></div><p>Finally, we&rsquo;ll return our results:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> results;</span></span></code></pre></div><p>Now, back in our PageModel <em>Index.cshtml.cs</em>, we&rsquo;ll apply our filter to the results of our search.  The refactored <code>OnGet()</code> should then be:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> OnGet()
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        SearchTerms = Request.Query[<span style="color:#e6db74">&#34;SearchTerms&#34;</span>];
</span></span><span style="display:flex;"><span>        MPAARatings = Request.Query[<span style="color:#e6db74">&#34;MPAARatings&#34;</span>];
</span></span><span style="display:flex;"><span>        Movies = MovieDatabase.Search(SearchTerms);
</span></span><span style="display:flex;"><span>        Movies = MovieDatabase.FilterByMPAARating(Movies, MPAARatings);        
</span></span><span style="display:flex;"><span>    }</span></span></code></pre></div><p>Now we can run a search with filters applied.  For example, searching for the word &ldquo;Love&rdquo; and movies that are PG or PG-13 yields:</p>
<p>
<a href="#image-5f2e0ccdd9191d3819ac5d20fae850d3" class="lightbox-link">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/6.8.4.png" alt="Filtered Search Results" style="height: auto; width: auto;" loading="lazy">
</a>
<a href="javascript:history.back();" class="lightbox" id="image-5f2e0ccdd9191d3819ac5d20fae850d3">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/6.8.4.png" alt="Filtered Search Results" class="lightbox-image" loading="lazy">
</a></p>
<p>You might be wondering why <em>Cloverfield</em> is listed.  But remember, we&rsquo;re searching by substring, and C <strong>LOVE</strong> rfield contains love!</p>
<h2 id="filtering-by-genre">Filtering by Genre</h2>
<p>Let&rsquo;s add filters for genre next.  But what genres should be included?  This is not as clear-cut as our MPAA rating, as there is no standards organization that says &ldquo;these are the only offical genres that exist.&rdquo;  In fact, new genres emerge from time to time.  So a better source of this info might just be to see what Genres are defined in our data, i.e.:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>    HashSet&lt;<span style="color:#66d9ef">string</span>&gt; genres = <span style="color:#66d9ef">new</span> HashSet&lt;<span style="color:#66d9ef">string</span>&gt;();
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">foreach</span>(Movie movie <span style="color:#66d9ef">in</span> All) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span>(movie.MajorGenre != <span style="color:#66d9ef">null</span>) 
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            genres.Add(movie.MajorGenre);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }</span></span></code></pre></div><p>Here we use a <a href="https://docs.microsoft.com/en-us/dotnet/api/system.collections.generic.hashset-1?view=netframework-4.8" target="_blank">HashSet</a>
 instead of a list, as it only adds each unique item once.  Duplicates are ignored.</p>
<p>But where would this code go?  We could place it in a getter for <code>MovieDatabase.Genres</code>:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> IEnumerable&lt;<span style="color:#66d9ef">string</span>&gt; Genres 
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">get</span> 
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            HashSet&lt;<span style="color:#66d9ef">string</span>&gt; genres = <span style="color:#66d9ef">new</span> HashSet&lt;<span style="color:#66d9ef">string</span>&gt;();
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">foreach</span>(Movie movie <span style="color:#66d9ef">in</span> All) {
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">if</span>(movie.MajorGenre != <span style="color:#66d9ef">null</span>) 
</span></span><span style="display:flex;"><span>                {
</span></span><span style="display:flex;"><span>                    genres.Add(movie.MajorGenre);
</span></span><span style="display:flex;"><span>                }
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }</span></span></code></pre></div><p>But this means that every time we want to access it, we&rsquo;ll search through all the movies&hellip; This is an O(n) operation, and will make our website slower.</p>
<p>Instead, let&rsquo;s create a private static variable in the <code>MovieDatabase</code> class to <em>cache</em> this collection as an array of strings:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>    <span style="color:#75715e">// The genres represented in the database</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">string</span>[] _genres;</span></span></code></pre></div><p>And expose it with a public static property:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// Gets the movie genres represented in the database </span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">string</span>[] Genres =&gt; _genres;</span></span></code></pre></div><p>And finally, we&rsquo;ll populate this array in the static constructor of <code>MovieDatabase</code>, after the JSON file has been processed:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>    HashSet&lt;<span style="color:#66d9ef">string</span>&gt; genreSet = <span style="color:#66d9ef">new</span> HashSet&lt;<span style="color:#66d9ef">string</span>&gt;();
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">foreach</span>(Movie movie <span style="color:#66d9ef">in</span> _movies) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span>(movie.MajorGenre != <span style="color:#66d9ef">null</span>) 
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            genreSet.Add(movie.MajorGenre);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    _genres = genreSet.ToArray();</span></span></code></pre></div><p>This approach means the finding of genres only happens once, and getting the <code>Genre</code> property is a constant-time O(1) operation.</p>
<p>We can implement the filters for the genres in the same way as we did for the MPAA filters; I&rsquo;ll leave that as an exercise for the reader.</p>

            <footer class="footline">

            </footer>
          </article>

    
    
          <article class="default">
            <header class="headline">
            </header>
<h1 id="adding-categorical-filters-to-the-movie-site">Adding Categorical Filters to the Movie Site</h1>

<p>Let&rsquo;s add some filters to the page as well.  We&rsquo;ll start with <em>categorical</em> filters, i.e. filtering by category.  Let&rsquo;s start by filtering for MPAA Rating.  We know that there are only a handful of ratings issued by the Motion Picture Association of America - G, PG, PG-13, R, and NC-17.  We might be tempted to use an enumeration to represent these values, but in C# an enumeration cannot have strings for values.  Nor can we use the hyphen (<code>-</code>) in an enumeration name.</p>
<h2 id="defining-the-mpaa-ratings">Defining the MPAA Ratings</h2>
<p>So let&rsquo;s define a string array with our MPAA values, and make it accessible from our <code>MovieDatabase</code> class:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// Gets the possible MPAARatings</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">string</span>[] MPAARatings
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">get</span> =&gt; <span style="color:#66d9ef">new</span> <span style="color:#66d9ef">string</span>[]
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            <span style="color:#e6db74">&#34;G&#34;</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#e6db74">&#34;PG&#34;</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#e6db74">&#34;PG-13&#34;</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#e6db74">&#34;R&#34;</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#e6db74">&#34;NC-17&#34;</span>
</span></span><span style="display:flex;"><span>        };
</span></span><span style="display:flex;"><span>    }</span></span></code></pre></div><p>Now in our <code>&lt;form&gt;</code> in <em>Index.cshtml</em> we can add a checkbox for each of these possible values:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>&lt;<span style="color:#f92672">form</span>&gt;
</span></span><span style="display:flex;"><span>    @foreach  (string rating in MovieDatabase.MPAARatings) 
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        &lt;<span style="color:#f92672">label</span>&gt;
</span></span><span style="display:flex;"><span>            &lt;<span style="color:#f92672">input</span> <span style="color:#a6e22e">type</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;checkbox&#34;</span> <span style="color:#a6e22e">name</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;MPAARatings&#34;</span> <span style="color:#a6e22e">value</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;@rating&#34;</span>/&gt;
</span></span><span style="display:flex;"><span>            @rating
</span></span><span style="display:flex;"><span>        &lt;/<span style="color:#f92672">label</span>&gt;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">input</span> <span style="color:#a6e22e">type</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;text&#34;</span> <span style="color:#a6e22e">name</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;SearchTerms&#34;</span> <span style="color:#a6e22e">value</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;@Model.SearchTerms&#34;</span>/&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">input</span> <span style="color:#a6e22e">type</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;submit&#34;</span> <span style="color:#a6e22e">value</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;Search&#34;</span>&gt;
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#f92672">form</span>&gt;</span></span></code></pre></div><p>If you try running the project now, and check a few boxes, you&rsquo;ll see the query string results look something like:</p>
<div class="wrap-code highlight"><pre tabindex="0"><code>?SearchTerms=&amp;MPAARatings=G&amp;MPAARatings=PG-13</code></pre></div><p>Notice how the key <em>MPAARatings</em> is repeated twice?  What would that look like in our PageModel?  We can find out; declare a <code>var</code> to hold the value in the <code>OnGet()</code> method of <em>Index.cshtml.cs</em>:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>    <span style="color:#66d9ef">var</span> MPAARatings = Request.Query[<span style="color:#e6db74">&#34;MPAARatings&#34;</span>];</span></span></code></pre></div><p>If we add a breakpoint on this line, and run our code, then check several boxes (you&rsquo;ll have to <em>continue</em> the first time you hit the breakpoint), then step over the line, we&rsquo;ll see that the var <code>MPAA</code> rating is set to a <em>string collection</em>.  We could therefore store it in an array property in <em>Index.cshtml.cs</em>, much like we did with our <code>SearchTerms</code>:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// The filtered MPAA Ratings</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">string</span>[] MPAARatings { <span style="color:#66d9ef">get</span>; <span style="color:#66d9ef">set</span>; }</span></span></code></pre></div><p>And we can refactor the line we just added to <code>OnGet()</code> to use this new property:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>    MPAARatings = Request.Query[<span style="color:#e6db74">&#34;MPAARatings&#34;</span>];</span></span></code></pre></div><p>Then, in our <em>Index.cshtml</em> Razor Page, we can refactor the checkbox to be checked if we filtered against this rating in our last request:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>    &lt;<span style="color:#f92672">input</span> <span style="color:#a6e22e">type</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;checkbox&#34;</span> <span style="color:#a6e22e">name</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;MPAARatings&#34;</span> <span style="color:#a6e22e">value</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;@rating&#34;</span> <span style="color:#a6e22e">checked</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;@Model.MPAARatings.Contains(rating)&#34;</span>/&gt;</span></span></code></pre></div><p>Now our filters stick around when we submit the search request.  That just leaves making the filters actually <em>work</em>.</p>
<h2 id="applying-mpaa-rating-filters">Applying MPAA Rating Filters</h2>
<p>Let&rsquo;s add another method to our <code>MovieDatabase</code> class, <code>FilterByMPAARating()</code>:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// Filters the provided collection of movies</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;param name=&#34;movies&#34;&gt;The collection of movies to filter&lt;/param&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;param name=&#34;ratings&#34;&gt;The ratings to include&lt;/param&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;returns&gt;A collection containing only movies that match the filter&lt;/returns&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> IEnumerable&lt;Movie&gt; FilterByMPAARating(IEnumerable&lt;Movie&gt; movies, IEnumerable&lt;<span style="color:#66d9ef">string</span>&gt; ratings)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// TODO: Filter the list</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    }</span></span></code></pre></div><p>Notice that in <em>this</em> method, we accept an <code>IEnumerable&lt;Movie&gt;</code> parameter.  This is the list of movies we want to filter.  We use this, instead of the <code>All()</code> we did in the <code>Search()</code> method, as we would want to filter the <em>results</em> of a search.</p>
<p>Let&rsquo;s do a null/empty check, and just return this shortlist if no filters are specified:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>    <span style="color:#75715e">// If no filter is specified, just return the provided collection</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> (ratings == <span style="color:#66d9ef">null</span> || ratings.Count() == <span style="color:#ae81ff">0</span>) <span style="color:#66d9ef">return</span> movies;</span></span></code></pre></div><p>Otherwise, we&rsquo;ll use the same process we did before.  Start with an empty list of movies, and iterate over the collection seeing if any match.  However, as we have <em>two</em> collections (the movies <em>and</em> the ratings), we&rsquo;ll see if the ratings collection contains the supplied movie&rsquo;s rating.</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>    <span style="color:#75715e">// Filter the supplied collection of movies</span>
</span></span><span style="display:flex;"><span>    List&lt;Movie&gt; results = <span style="color:#66d9ef">new</span> List&lt;Movie&gt;();
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">foreach</span>(Movie movie <span style="color:#66d9ef">in</span> movies)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span>(movie.MPAARatings != <span style="color:#66d9ef">null</span> &amp;&amp; ratings.Contains(movie.MPAARatings))
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            results.Add(movie);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }</span></span></code></pre></div><p>Finally, we&rsquo;ll return our results:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> results;</span></span></code></pre></div><p>Now, back in our PageModel <em>Index.cshtml.cs</em>, we&rsquo;ll apply our filter to the results of our search.  The refactored <code>OnGet()</code> should then be:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> OnGet()
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        SearchTerms = Request.Query[<span style="color:#e6db74">&#34;SearchTerms&#34;</span>];
</span></span><span style="display:flex;"><span>        MPAARatings = Request.Query[<span style="color:#e6db74">&#34;MPAARatings&#34;</span>];
</span></span><span style="display:flex;"><span>        Movies = MovieDatabase.Search(SearchTerms);
</span></span><span style="display:flex;"><span>        Movies = MovieDatabase.FilterByMPAARating(Movies, MPAARatings);        
</span></span><span style="display:flex;"><span>    }</span></span></code></pre></div><p>Now we can run a search with filters applied.  For example, searching for the word &ldquo;Love&rdquo; and movies that are PG or PG-13 yields:</p>
<p>
<a href="#image-6fecda8d62822b8c61c65e86b62904ee" class="lightbox-link">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/6.8.4.png" alt="Filtered Search Results" style="height: auto; width: auto;" loading="lazy">
</a>
<a href="javascript:history.back();" class="lightbox" id="image-6fecda8d62822b8c61c65e86b62904ee">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/6.8.4.png" alt="Filtered Search Results" class="lightbox-image" loading="lazy">
</a></p>
<p>You might be wondering why <em>Cloverfield</em> is listed.  But remember, we&rsquo;re searching by substring, and C <strong>LOVE</strong> rfield contains love!</p>
<h2 id="filtering-by-genre">Filtering by Genre</h2>
<p>Let&rsquo;s add filters for genre next.  But what genres should be included?  This is not as clear-cut as our MPAA rating, as there is no standards organization that says &ldquo;these are the only offical genres that exist.&rdquo;  In fact, new genres emerge from time to time.  So a better source of this info might just be to see what Genres are defined in our data, i.e.:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>    HashSet&lt;<span style="color:#66d9ef">string</span>&gt; genres = <span style="color:#66d9ef">new</span> HashSet&lt;<span style="color:#66d9ef">string</span>&gt;();
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">foreach</span>(Movie movie <span style="color:#66d9ef">in</span> All) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span>(movie.MajorGenre != <span style="color:#66d9ef">null</span>) 
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            genres.Add(movie.MajorGenre);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }</span></span></code></pre></div><p>Here we use a <a href="https://docs.microsoft.com/en-us/dotnet/api/system.collections.generic.hashset-1?view=netframework-4.8" target="_blank">HashSet</a>
 instead of a list, as it only adds each unique item once.  Duplicates are ignored.</p>
<p>But where would this code go?  We could place it in a getter for <code>MovieDatabase.Genres</code>:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> IEnumerable&lt;<span style="color:#66d9ef">string</span>&gt; Genres 
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">get</span> 
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            HashSet&lt;<span style="color:#66d9ef">string</span>&gt; genres = <span style="color:#66d9ef">new</span> HashSet&lt;<span style="color:#66d9ef">string</span>&gt;();
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">foreach</span>(Movie movie <span style="color:#66d9ef">in</span> All) {
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">if</span>(movie.MajorGenre != <span style="color:#66d9ef">null</span>) 
</span></span><span style="display:flex;"><span>                {
</span></span><span style="display:flex;"><span>                    genres.Add(movie.MajorGenre);
</span></span><span style="display:flex;"><span>                }
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }</span></span></code></pre></div><p>But this means that every time we want to access it, we&rsquo;ll search through all the movies&hellip; This is an O(n) operation, and will make our website slower.</p>
<p>Instead, let&rsquo;s create a private static variable in the <code>MovieDatabase</code> class to <em>cache</em> this collection as an array of strings:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>    <span style="color:#75715e">// The genres represented in the database</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">string</span>[] _genres;</span></span></code></pre></div><p>And expose it with a public static property:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// Gets the movie genres represented in the database </span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">string</span>[] Genres =&gt; _genres;</span></span></code></pre></div><p>And finally, we&rsquo;ll populate this array in the static constructor of <code>MovieDatabase</code>, after the JSON file has been processed:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>    HashSet&lt;<span style="color:#66d9ef">string</span>&gt; genreSet = <span style="color:#66d9ef">new</span> HashSet&lt;<span style="color:#66d9ef">string</span>&gt;();
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">foreach</span>(Movie movie <span style="color:#66d9ef">in</span> _movies) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span>(movie.MajorGenre != <span style="color:#66d9ef">null</span>) 
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            genreSet.Add(movie.MajorGenre);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    _genres = genreSet.ToArray();</span></span></code></pre></div><p>This approach means the finding of genres only happens once, and getting the <code>Genre</code> property is a constant-time O(1) operation.</p>
<p>We can implement the filters for the genres in the same way as we did for the MPAA filters; I&rsquo;ll leave that as an exercise for the reader.</p>

            <footer class="footline">

            </footer>
          </article>

    
    
          <article class="default">
            <header class="headline">
            </header>
<h1 id="numerical-filters">Numerical Filters</h1>

<p>Let&rsquo;s tackle one of the critics ratings next.  While we could create categories and use checkboxes, this doesn&rsquo;t capture the incremental values (i.e. 4.3), and it would be a <em>lot</em> of checkboxes for Rotten Tomatoes ratings!  Instead, we&rsquo;ll use a <em>numerical filter</em>, which limits our possible results to a range - between a minimum and maximum value.</p>
<p>Moreover, let&rsquo;s clean up our Index page, as it is getting difficult to determine what filter(s) go together, and and are adding more.</p>
<h2 id="refactoring-the-index-page">Refactoring the Index Page</h2>
<p>Let&rsquo;s move the filters to a column on the left, leave the search bar above, and show our results on the right.  This will require refactoring our <em>Index.cshtml</em> file:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>    &lt;form id=<span style="color:#e6db74">&#34;movie-database&#34;</span>&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        &lt;div id=<span style="color:#e6db74">&#34;search&#34;</span>&gt;
</span></span><span style="display:flex;"><span>            &lt;input type=<span style="color:#e6db74">&#34;text&#34;</span> name=<span style="color:#e6db74">&#34;SearchTerms&#34;</span> <span style="color:#66d9ef">value</span>=<span style="color:#e6db74">&#34;@Model.SearchTerms&#34;</span> /&gt;
</span></span><span style="display:flex;"><span>            &lt;input type=<span style="color:#e6db74">&#34;submit&#34;</span> <span style="color:#66d9ef">value</span>=<span style="color:#e6db74">&#34;Search&#34;</span>&gt;
</span></span><span style="display:flex;"><span>        &lt;/div&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        &lt;div id=<span style="color:#e6db74">&#34;filters&#34;</span>&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            &lt;h4&gt;MPAA Rating&lt;/h4&gt;
</span></span><span style="display:flex;"><span>            @foreach (<span style="color:#66d9ef">string</span> rating <span style="color:#66d9ef">in</span> MovieDatabase.MPAARating)
</span></span><span style="display:flex;"><span>            {
</span></span><span style="display:flex;"><span>                &lt;label&gt;
</span></span><span style="display:flex;"><span>                    &lt;input type=<span style="color:#e6db74">&#34;checkbox&#34;</span> name=<span style="color:#e6db74">&#34;MPAARatings&#34;</span> <span style="color:#66d9ef">value</span>=<span style="color:#e6db74">&#34;@rating&#34;</span> <span style="color:#66d9ef">checked</span>=<span style="color:#e6db74">&#34;@Model.MPAARatings.Contains(rating)&#34;</span> /&gt;
</span></span><span style="display:flex;"><span>                    @rating
</span></span><span style="display:flex;"><span>                &lt;/label&gt;
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            &lt;h4&gt;Genre&lt;/h4&gt;
</span></span><span style="display:flex;"><span>            @foreach (<span style="color:#66d9ef">string</span> genre <span style="color:#66d9ef">in</span> MovieDatabase.Genres)
</span></span><span style="display:flex;"><span>            {
</span></span><span style="display:flex;"><span>                &lt;label&gt;
</span></span><span style="display:flex;"><span>                    &lt;input type=<span style="color:#e6db74">&#34;checkbox&#34;</span> name=<span style="color:#e6db74">&#34;Genres&#34;</span> <span style="color:#66d9ef">value</span>=<span style="color:#e6db74">&#34;@genre&#34;</span> /&gt;
</span></span><span style="display:flex;"><span>                    @genre
</span></span><span style="display:flex;"><span>                &lt;/label&gt;
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            &lt;h4&gt;IMDB Rating&lt;/h4&gt;
</span></span><span style="display:flex;"><span>            &lt;div&gt;
</span></span><span style="display:flex;"><span>                Between
</span></span><span style="display:flex;"><span>                &lt;input name=<span style="color:#e6db74">&#34;IMDBMin&#34;</span> type=<span style="color:#e6db74">&#34;number&#34;</span> min=<span style="color:#e6db74">&#34;0&#34;</span> max=<span style="color:#e6db74">&#34;10&#34;</span> step=<span style="color:#e6db74">&#34;0.1&#34;</span> placeholder=<span style="color:#e6db74">&#34;min&#34;</span>/&gt;
</span></span><span style="display:flex;"><span>                and
</span></span><span style="display:flex;"><span>                &lt;input name=<span style="color:#e6db74">&#34;IMDBMax&#34;</span> type=<span style="color:#e6db74">&#34;number&#34;</span> min=<span style="color:#e6db74">&#34;0&#34;</span> max=<span style="color:#e6db74">&#34;10&#34;</span> step=<span style="color:#e6db74">&#34;0.1&#34;</span> placeholder=<span style="color:#e6db74">&#34;max&#34;</span>/&gt;
</span></span><span style="display:flex;"><span>            &lt;/div&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        &lt;/div&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        &lt;div id=<span style="color:#e6db74">&#34;results&#34;</span>&gt;
</span></span><span style="display:flex;"><span>            &lt;h1&gt;Movie Results&lt;/h1&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            &lt;ul class=<span style="color:#e6db74">&#34;movie-list&#34;</span>&gt;
</span></span><span style="display:flex;"><span>                @foreach (Movie movie <span style="color:#66d9ef">in</span> @Model.Movies)
</span></span><span style="display:flex;"><span>                {
</span></span><span style="display:flex;"><span>                    &lt;li&gt;
</span></span><span style="display:flex;"><span>                        &lt;div class=<span style="color:#e6db74">&#34;details&#34;</span>&gt;
</span></span><span style="display:flex;"><span>                            &lt;h3 class=<span style="color:#e6db74">&#34;title&#34;</span>&gt;@movie.Title&lt;/h3&gt;
</span></span><span style="display:flex;"><span>                            &lt;div class=<span style="color:#e6db74">&#34;mpaa&#34;</span>&gt;@movie.MPAARating&lt;/div&gt;
</span></span><span style="display:flex;"><span>                            &lt;div class=<span style="color:#e6db74">&#34;genre&#34;</span>&gt;@movie.MajorGenre&lt;/div&gt;
</span></span><span style="display:flex;"><span>                        &lt;/div&gt;
</span></span><span style="display:flex;"><span>                        &lt;div class=<span style="color:#e6db74">&#34;ratings&#34;</span>&gt;
</span></span><span style="display:flex;"><span>                            @if (movie.IMDBRating != <span style="color:#66d9ef">null</span>)
</span></span><span style="display:flex;"><span>                            {
</span></span><span style="display:flex;"><span>                                &lt;div class=<span style="color:#e6db74">&#34;imdb&#34;</span>&gt;
</span></span><span style="display:flex;"><span>                                    @movie.IMDBRating
</span></span><span style="display:flex;"><span>                                &lt;/div&gt;
</span></span><span style="display:flex;"><span>                            }
</span></span><span style="display:flex;"><span>                            @if (movie.RottenTomatoesRating != <span style="color:#66d9ef">null</span>)
</span></span><span style="display:flex;"><span>                            {
</span></span><span style="display:flex;"><span>                                &lt;div class=<span style="color:#e6db74">&#34;rotten-tomatoes&#34;</span>&gt;
</span></span><span style="display:flex;"><span>                                    @movie.RottenTomatoesRating
</span></span><span style="display:flex;"><span>                                &lt;/div&gt;
</span></span><span style="display:flex;"><span>                            }
</span></span><span style="display:flex;"><span>                        &lt;/div&gt;
</span></span><span style="display:flex;"><span>                    &lt;/li&gt;
</span></span><span style="display:flex;"><span>                }
</span></span><span style="display:flex;"><span>            &lt;/ul&gt;
</span></span><span style="display:flex;"><span>        &lt;/div&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    &lt;/form&gt;</span></span></code></pre></div><p>Most of this is simply moving elements around the page, but note that we are using inputs of <code>type=number</code> to represent our range of IMDB values.  We can specify a minimum and maximum for this range, as well as an allowable increment.  Also, we use the <code>placeholder</code> attribute to put text into the <code>input</code> until a value is added.</p>
<h2 id="adding-more-styles">Adding More Styles</h2>
<p>Now we&rsquo;ll need to add some rules to our <em>wwwroot/css/styles.css</em>.  First, we&rsquo;ll use a <code>grid</code> for the layout of the form:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-css" data-lang="css"><span style="display:flex;"><span><span style="color:#f92672">form</span>#movie-database {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">display</span>: <span style="color:#66d9ef">grid</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">grid-template-columns</span>: <span style="color:#ae81ff">1</span>fr <span style="color:#ae81ff">3</span>fr;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">grid-template-rows</span>: <span style="color:#66d9ef">auto</span> <span style="color:#66d9ef">auto</span>;
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>The right column will be three times as big as the right.</p>
<p>We can make our search bar span both columns with <code>grid-column-start</code> and <code>grid-column-end</code>:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-css" data-lang="css"><span style="display:flex;"><span>#search {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">grid-column-start</span>: <span style="color:#ae81ff">1</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">grid-column-end</span>: <span style="color:#ae81ff">3</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">text-align</span>: <span style="color:#66d9ef">center</span>;
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>Notice too that for CSS, we start counting at 1, not 0.  The filters and the results will fall in the next row automatically, each taking up their own respective grid cell.  You can read more about the grid layout in <a href="https://css-tricks.com/snippets/css/complete-guide-grid/" target="_blank">A Complete Guide to Grid</a>
.</p>
<p>Let&rsquo;s go ahead and use flexbox to lay out our filters in a column:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-css" data-lang="css"><span style="display:flex;"><span>#filters {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">display</span>: <span style="color:#66d9ef">flex</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">flex-direction</span>: <span style="color:#66d9ef">column</span>;
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>And make our number inputs bigger:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-css" data-lang="css"><span style="display:flex;"><span>#filters <span style="color:#f92672">input</span><span style="color:#f92672">[</span><span style="color:#f92672">type</span><span style="color:#f92672">=</span><span style="color:#f92672">number</span><span style="color:#f92672">]</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">width</span>: <span style="color:#ae81ff">4</span><span style="color:#66d9ef">rem</span>;
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>Notice the use of square brackets in our CSS Selector to only apply to inputs with type number.</p>
<p>Also, let&rsquo;s add a margin above and remove most of the margin below our <code>&lt;h4&gt;</code> elements:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-css" data-lang="css"><span style="display:flex;"><span>#filters <span style="color:#f92672">h4</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">margin-bottom</span>: <span style="color:#ae81ff">0.2</span><span style="color:#66d9ef">rem</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">margin-top</span>: <span style="color:#ae81ff">2</span><span style="color:#66d9ef">rem</span>;
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>The resulting page looks much cleaner:</p>
<p>
<a href="#image-691de5334f969fa1566bd47685881867" class="lightbox-link">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/6.8.5.png" alt="The Styled Page" style="height: auto; width: auto;" loading="lazy">
</a>
<a href="javascript:history.back();" class="lightbox" id="image-691de5334f969fa1566bd47685881867">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/6.8.5.png" alt="The Styled Page" class="lightbox-image" loading="lazy">
</a></p>
<h2 id="capturing-the-filter-values">Capturing the Filter Values</h2>
<p>Now we need to get the filter values from our GET request query string.  We could do this like we&rsquo;ve been doing before, with:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>    Request.Query[<span style="color:#e6db74">&#34;IMDBMin&#34;</span>];</span></span></code></pre></div><p>But the returned value would be a string, so we&rsquo;d need to parse it:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>    IMDBMin = <span style="color:#66d9ef">double</span>.Parse(Request.Query[<span style="color:#e6db74">&#34;IMDBMin&#34;</span>]);</span></span></code></pre></div><p>If the query was <code>null</code>, then this would evaluate to <code>NaN</code>, which we wouldn&rsquo;t want to set our <code>&lt;input&gt;</code> to&hellip;</p>
<p>Instead, we&rsquo;ll look at some options built into the PageModel.</p>
<h2 id="parameter-binding">Parameter Binding</h2>
<p>The first of these options is <a href="https://docs.microsoft.com/en-us/aspnet/web-api/overview/formats-and-model-binding/parameter-binding-in-aspnet-web-api" target="_blank"><em>Parameter Binding</em></a>
.  In this approach, we define parameters to our <code>OnGet()</code> method to be parsed out of the request automatically, i.e.:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// Gets the search results for display on the page</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> OnGet(<span style="color:#66d9ef">string</span> SearchTerms, <span style="color:#66d9ef">string</span>[] MPAARatings, <span style="color:#66d9ef">string</span>[] Genres, <span style="color:#66d9ef">double?</span> IMDBMin, <span style="color:#66d9ef">double?</span> IMDBMax) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">this</span>.SearchTerms = SearchTerms;
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">this</span>.MPAARatings = MPAARatings;
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">this</span>.Genres = Genres;
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">this</span>.IMDBMin = IMDBMin;
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">this</span>.IMDBMax = IMDBMax;
</span></span><span style="display:flex;"><span>        Movies = MovieDatabase.Search(SearchTerms);
</span></span><span style="display:flex;"><span>        Movies = MovieDatabase.FilterByMPAARating(Movies, MPAARatings);
</span></span><span style="display:flex;"><span>        Movies = MovieDatabase.FilterByGenre(Movies, Genres);
</span></span><span style="display:flex;"><span>        Movies = MovieDatabase.FilterByIMDBRating(Movies, IMDBMin, IMDBMax);
</span></span><span style="display:flex;"><span>    }</span></span></code></pre></div><p>The benefit of this approach is that as long as C# knows a conversion into the type we specify, the conversion is done automatically.  Note that the parameter name matches the <code>name</code> property of the corresponding <code>&lt;input&gt;</code> - this must be the case for the Razor Page to bind the parameter to the corresponding input value.</p>
<p>Note that we still need to assign these parameter values to the corresponding properties of our PageModel.  If we don&rsquo;t, then those properties will all be <code>null</code>, and the <code>&lt;inputs&gt;</code> rendered on our page will always be blank.</p>
<h2 id="model-binding">Model Binding</h2>
<p>A second option is to use <a href="https://docs.microsoft.com/en-us/aspnet/core/mvc/models/model-binding?view=aspnetcore-3.1" target="_blank"><em>Model Binding</em></a>
.  Model binding also automatically converts incoming form data, but in this case it binds directly to the properties of our PageModel.  We indicate this form of binding with a <code>[BindProperty]</code> attribute, i.e.:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">IndexModel</span> : PageModel {
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">
</span></span></span><span style="display:flex;"><span><span style="color:#a6e22e">    [BindProperty(SupportsGet=true)]</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">string</span> SearchTerms {<span style="color:#66d9ef">get</span>; <span style="color:#66d9ef">set</span>;}
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">
</span></span></span><span style="display:flex;"><span><span style="color:#a6e22e">    [BindProperty(SupportsGet=true)]</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">string</span>[] MPAARatings {<span style="color:#66d9ef">get</span>; <span style="color:#66d9ef">set</span>;}
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">
</span></span></span><span style="display:flex;"><span><span style="color:#a6e22e">    [BindProperty(SupportsGet=true)]</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">string</span>[] Genres {<span style="color:#66d9ef">get</span>; <span style="color:#66d9ef">set</span>;}
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">
</span></span></span><span style="display:flex;"><span><span style="color:#a6e22e">    [BindProperty(SupportsGet=true)]</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">double?</span> IMDBMin {<span style="color:#66d9ef">get</span>; <span style="color:#66d9ef">set</span>;}
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">
</span></span></span><span style="display:flex;"><span><span style="color:#a6e22e">    [BindProperty(SupportsGet=true)]</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">double?</span> IMDBMax {<span style="color:#66d9ef">get</span>; <span style="color:#66d9ef">set</span>;}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// Gets the search results for display on the page</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> OnGet() {
</span></span><span style="display:flex;"><span>        Movies = MovieDatabase.Search(SearchTerms);
</span></span><span style="display:flex;"><span>        Movies = MovieDatabase.FilterByMPAARating(Movies, MPAARatings);
</span></span><span style="display:flex;"><span>        Movies = MovieDatabase.FilterByGenre(Movies, Genres);
</span></span><span style="display:flex;"><span>        Movies = MovieDatabase.FilterByIMDBRating(Movies, IMDBMin, IMDBMax);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>Note that with this approach, the incoming data is directly bound to the properties, so we don&rsquo;t need to do any special assignments within our <code>OnGet()</code> method.  Also, note that we have to use <code>SupportsGet=true</code> in order for this binding to occur on GET requests (by default, model binding only happens with POST requests).</p>

  
  
<div class="box notices cstyle note">
  <div class="box-label"><i class="fa-fw fas fa-exclamation-circle"></i> Note</div>
  <div class="box-content">

<p>You only need to do <em>one</em> binding approach per property in a PageModel.  I.e. you can just use the property decorator:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">SomePageModel</span> : PageModel
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">    [BindProperty(SupportsGet=true)]</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">float</span> SomeProperty { <span style="color:#66d9ef">get</span>; <span style="color:#66d9ef">set</span>; }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> OnGet() {
</span></span><span style="display:flex;"><span>        DoSomething(SomeProperty);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p><em>or</em> you might use parameter binding:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">SomePageModel</span> : PageModel
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> OnGet(<span style="color:#66d9ef">float</span> SomeProperty) {
</span></span><span style="display:flex;"><span>        DoSomething(SomeProperty);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p><em>or</em> you can parse it from the request:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">SomePageModel</span> : PageModel
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> OnGet() {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">var</span> someProperty = <span style="color:#66d9ef">float</span>.Parse(Request.Query[<span style="color:#e6db74">&#34;SomeProperty&#34;</span>]);
</span></span><span style="display:flex;"><span>        DoSomething(someProperty);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>These are all <em>different means</em> of accessing the <em>same data</em> from the incoming request.</p>
</div>
</div>
<p>Now all we need to do is implement the actual filter.</p>
<h3 id="implementing-the-imdb-rating-filter">Implementing the IMDB Rating Filter</h3>
<p>We&rsquo;ll define the new filter in our <code>MovieDatabase</code> class as another static method:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// Filters the provided collection of movies</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// to those with IMDB ratings falling within</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// the specified range</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;param name=&#34;movies&#34;&gt;The collection of movies to filter&lt;/param&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;param name=&#34;min&#34;&gt;The minimum range value&lt;/param&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;param name=&#34;max&#34;&gt;The maximum range value&lt;/param&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;returns&gt;The filtered movie collection&lt;/returns&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> IEnumerable&lt;Movie&gt; FilterByIMDBRating(IEnumerable&lt;Movie&gt; movies, <span style="color:#66d9ef">double?</span> min, <span style="color:#66d9ef">double?</span> max)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// TODO: Filter movies</span>
</span></span><span style="display:flex;"><span>    }</span></span></code></pre></div><p>Notice that here too we use the nullable double value.  So our first step is probably to do a <code>null</code> check:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> (min == <span style="color:#66d9ef">null</span> &amp;&amp; max == <span style="color:#66d9ef">null</span>) <span style="color:#66d9ef">return</span> movies;</span></span></code></pre></div><p>But what if only one is null?  Should we filter for that part of the range?  It wouldn&rsquo;t be hard to do:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>    <span style="color:#66d9ef">var</span> results = <span style="color:#66d9ef">new</span> List&lt;Movie&gt;();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// only a maximum specified</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span>(min == <span style="color:#66d9ef">null</span>)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">foreach</span>(Movie movie <span style="color:#66d9ef">in</span> movies)
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">if</span> (movie.IMDBRating &lt;= max) results.Add(movie);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> results;
</span></span><span style="display:flex;"><span>    }</span></span></code></pre></div><p>And the minimum would mirror that:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>    <span style="color:#75715e">// only a minimum specified</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span>(max == <span style="color:#66d9ef">null</span>)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">foreach</span>(Movie movie <span style="color:#66d9ef">in</span> movies)
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">if</span> (movie.IMDBRating &gt;= min) results.Add(movie);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> results;
</span></span><span style="display:flex;"><span>    }</span></span></code></pre></div><p>Finally, we could handle the case where we have both a min and max value to our range:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>    <span style="color:#75715e">// Both minimum and maximum specified</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">foreach</span>(Movie movie <span style="color:#66d9ef">in</span> movies)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span>(movie.IMDBRating &gt;= min &amp;&amp; movie.IMDBRating &lt;= max)
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            results.Add(movie);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> results;</span></span></code></pre></div><p>Notice too, that in each of these cases we&rsquo;re treating the range as <em>inclusive</em> (including the specified minimum and maximum).  This is the behavior most casual internet users will expect.  If the database and user expectations are different for your audience, you&rsquo;d want your code to match that expectation.</p>
<p>Now we can filter by IMDB rating:</p>
<p>
<a href="#image-0a48509e22b9afd0027d05ee22535587" class="lightbox-link">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/6.8.6.png" alt="Filtering By IMDB" style="height: auto; width: auto;" loading="lazy">
</a>
<a href="javascript:history.back();" class="lightbox" id="image-0a48509e22b9afd0027d05ee22535587">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/6.8.6.png" alt="Filtering By IMDB" class="lightbox-image" loading="lazy">
</a></p>
<h2 id="finishing-up">Finishing Up</h2>
<p>Since we&rsquo;re displaying the Rotten Tomatoes rating, we should probably also have a filter for it.  This will work almost exactly like the IMDB rating - but with the range from 0 to 100.  I&rsquo;ll leave this as an exercise for the reader.</p>

            <footer class="footline">

            </footer>
          </article>

    
    
          <article class="default">
            <header class="headline">
            </header>
<h1 id="numerical-filters">Numerical Filters</h1>

<p>Let&rsquo;s tackle one of the critics ratings next.  While we could create categories and use checkboxes, this doesn&rsquo;t capture the incremental values (i.e. 4.3), and it would be a <em>lot</em> of checkboxes for Rotten Tomatoes ratings!  Instead, we&rsquo;ll use a <em>numerical filter</em>, which limits our possible results to a range - between a minimum and maximum value.</p>
<p>Moreover, let&rsquo;s clean up our Index page, as it is getting difficult to determine what filter(s) go together, and and are adding more.</p>
<h2 id="refactoring-the-index-page">Refactoring the Index Page</h2>
<p>Let&rsquo;s move the filters to a column on the left, leave the search bar above, and show our results on the right.  This will require refactoring our <em>Index.cshtml</em> file:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>    &lt;form id=<span style="color:#e6db74">&#34;movie-database&#34;</span>&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        &lt;div id=<span style="color:#e6db74">&#34;search&#34;</span>&gt;
</span></span><span style="display:flex;"><span>            &lt;input type=<span style="color:#e6db74">&#34;text&#34;</span> name=<span style="color:#e6db74">&#34;SearchTerms&#34;</span> <span style="color:#66d9ef">value</span>=<span style="color:#e6db74">&#34;@Model.SearchTerms&#34;</span> /&gt;
</span></span><span style="display:flex;"><span>            &lt;input type=<span style="color:#e6db74">&#34;submit&#34;</span> <span style="color:#66d9ef">value</span>=<span style="color:#e6db74">&#34;Search&#34;</span>&gt;
</span></span><span style="display:flex;"><span>        &lt;/div&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        &lt;div id=<span style="color:#e6db74">&#34;filters&#34;</span>&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            &lt;h4&gt;MPAA Rating&lt;/h4&gt;
</span></span><span style="display:flex;"><span>            @foreach (<span style="color:#66d9ef">string</span> rating <span style="color:#66d9ef">in</span> MovieDatabase.MPAARating)
</span></span><span style="display:flex;"><span>            {
</span></span><span style="display:flex;"><span>                &lt;label&gt;
</span></span><span style="display:flex;"><span>                    &lt;input type=<span style="color:#e6db74">&#34;checkbox&#34;</span> name=<span style="color:#e6db74">&#34;MPAARatings&#34;</span> <span style="color:#66d9ef">value</span>=<span style="color:#e6db74">&#34;@rating&#34;</span> <span style="color:#66d9ef">checked</span>=<span style="color:#e6db74">&#34;@Model.MPAARatings.Contains(rating)&#34;</span> /&gt;
</span></span><span style="display:flex;"><span>                    @rating
</span></span><span style="display:flex;"><span>                &lt;/label&gt;
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            &lt;h4&gt;Genre&lt;/h4&gt;
</span></span><span style="display:flex;"><span>            @foreach (<span style="color:#66d9ef">string</span> genre <span style="color:#66d9ef">in</span> MovieDatabase.Genres)
</span></span><span style="display:flex;"><span>            {
</span></span><span style="display:flex;"><span>                &lt;label&gt;
</span></span><span style="display:flex;"><span>                    &lt;input type=<span style="color:#e6db74">&#34;checkbox&#34;</span> name=<span style="color:#e6db74">&#34;Genres&#34;</span> <span style="color:#66d9ef">value</span>=<span style="color:#e6db74">&#34;@genre&#34;</span> /&gt;
</span></span><span style="display:flex;"><span>                    @genre
</span></span><span style="display:flex;"><span>                &lt;/label&gt;
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            &lt;h4&gt;IMDB Rating&lt;/h4&gt;
</span></span><span style="display:flex;"><span>            &lt;div&gt;
</span></span><span style="display:flex;"><span>                Between
</span></span><span style="display:flex;"><span>                &lt;input name=<span style="color:#e6db74">&#34;IMDBMin&#34;</span> type=<span style="color:#e6db74">&#34;number&#34;</span> min=<span style="color:#e6db74">&#34;0&#34;</span> max=<span style="color:#e6db74">&#34;10&#34;</span> step=<span style="color:#e6db74">&#34;0.1&#34;</span> placeholder=<span style="color:#e6db74">&#34;min&#34;</span>/&gt;
</span></span><span style="display:flex;"><span>                and
</span></span><span style="display:flex;"><span>                &lt;input name=<span style="color:#e6db74">&#34;IMDBMax&#34;</span> type=<span style="color:#e6db74">&#34;number&#34;</span> min=<span style="color:#e6db74">&#34;0&#34;</span> max=<span style="color:#e6db74">&#34;10&#34;</span> step=<span style="color:#e6db74">&#34;0.1&#34;</span> placeholder=<span style="color:#e6db74">&#34;max&#34;</span>/&gt;
</span></span><span style="display:flex;"><span>            &lt;/div&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        &lt;/div&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        &lt;div id=<span style="color:#e6db74">&#34;results&#34;</span>&gt;
</span></span><span style="display:flex;"><span>            &lt;h1&gt;Movie Results&lt;/h1&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            &lt;ul class=<span style="color:#e6db74">&#34;movie-list&#34;</span>&gt;
</span></span><span style="display:flex;"><span>                @foreach (Movie movie <span style="color:#66d9ef">in</span> @Model.Movies)
</span></span><span style="display:flex;"><span>                {
</span></span><span style="display:flex;"><span>                    &lt;li&gt;
</span></span><span style="display:flex;"><span>                        &lt;div class=<span style="color:#e6db74">&#34;details&#34;</span>&gt;
</span></span><span style="display:flex;"><span>                            &lt;h3 class=<span style="color:#e6db74">&#34;title&#34;</span>&gt;@movie.Title&lt;/h3&gt;
</span></span><span style="display:flex;"><span>                            &lt;div class=<span style="color:#e6db74">&#34;mpaa&#34;</span>&gt;@movie.MPAARating&lt;/div&gt;
</span></span><span style="display:flex;"><span>                            &lt;div class=<span style="color:#e6db74">&#34;genre&#34;</span>&gt;@movie.MajorGenre&lt;/div&gt;
</span></span><span style="display:flex;"><span>                        &lt;/div&gt;
</span></span><span style="display:flex;"><span>                        &lt;div class=<span style="color:#e6db74">&#34;ratings&#34;</span>&gt;
</span></span><span style="display:flex;"><span>                            @if (movie.IMDBRating != <span style="color:#66d9ef">null</span>)
</span></span><span style="display:flex;"><span>                            {
</span></span><span style="display:flex;"><span>                                &lt;div class=<span style="color:#e6db74">&#34;imdb&#34;</span>&gt;
</span></span><span style="display:flex;"><span>                                    @movie.IMDBRating
</span></span><span style="display:flex;"><span>                                &lt;/div&gt;
</span></span><span style="display:flex;"><span>                            }
</span></span><span style="display:flex;"><span>                            @if (movie.RottenTomatoesRating != <span style="color:#66d9ef">null</span>)
</span></span><span style="display:flex;"><span>                            {
</span></span><span style="display:flex;"><span>                                &lt;div class=<span style="color:#e6db74">&#34;rotten-tomatoes&#34;</span>&gt;
</span></span><span style="display:flex;"><span>                                    @movie.RottenTomatoesRating
</span></span><span style="display:flex;"><span>                                &lt;/div&gt;
</span></span><span style="display:flex;"><span>                            }
</span></span><span style="display:flex;"><span>                        &lt;/div&gt;
</span></span><span style="display:flex;"><span>                    &lt;/li&gt;
</span></span><span style="display:flex;"><span>                }
</span></span><span style="display:flex;"><span>            &lt;/ul&gt;
</span></span><span style="display:flex;"><span>        &lt;/div&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    &lt;/form&gt;</span></span></code></pre></div><p>Most of this is simply moving elements around the page, but note that we are using inputs of <code>type=number</code> to represent our range of IMDB values.  We can specify a minimum and maximum for this range, as well as an allowable increment.  Also, we use the <code>placeholder</code> attribute to put text into the <code>input</code> until a value is added.</p>
<h2 id="adding-more-styles">Adding More Styles</h2>
<p>Now we&rsquo;ll need to add some rules to our <em>wwwroot/css/styles.css</em>.  First, we&rsquo;ll use a <code>grid</code> for the layout of the form:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-css" data-lang="css"><span style="display:flex;"><span><span style="color:#f92672">form</span>#movie-database {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">display</span>: <span style="color:#66d9ef">grid</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">grid-template-columns</span>: <span style="color:#ae81ff">1</span>fr <span style="color:#ae81ff">3</span>fr;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">grid-template-rows</span>: <span style="color:#66d9ef">auto</span> <span style="color:#66d9ef">auto</span>;
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>The right column will be three times as big as the left.</p>
<p>We can make our search bar span both columns with <code>grid-column-start</code> and <code>grid-column-end</code>:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-css" data-lang="css"><span style="display:flex;"><span>#search {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">grid-column-start</span>: <span style="color:#ae81ff">1</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">grid-column-end</span>: <span style="color:#ae81ff">3</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">text-align</span>: <span style="color:#66d9ef">center</span>;
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>Notice too that for CSS, we start counting at 1, not 0.  The filters and the results will fall in the next row automatically, each taking up their own respective grid cell.  You can read more about the grid layout in <a href="https://css-tricks.com/snippets/css/complete-guide-grid/" target="_blank">A Complete Guide to Grid</a>
.</p>
<p>Let&rsquo;s go ahead and use flexbox to lay out our filters in a column:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-css" data-lang="css"><span style="display:flex;"><span>#filters {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">display</span>: <span style="color:#66d9ef">flex</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">flex-direction</span>: <span style="color:#66d9ef">column</span>;
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>And make our number inputs bigger:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-css" data-lang="css"><span style="display:flex;"><span>#filters <span style="color:#f92672">input</span><span style="color:#f92672">[</span><span style="color:#f92672">type</span><span style="color:#f92672">=</span><span style="color:#f92672">number</span><span style="color:#f92672">]</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">width</span>: <span style="color:#ae81ff">4</span><span style="color:#66d9ef">rem</span>;
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>Notice the use of square brackets in our CSS Selector to only apply to inputs with type number.</p>
<p>Also, let&rsquo;s add a margin above and remove most of the margin below our <code>&lt;h4&gt;</code> elements:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-css" data-lang="css"><span style="display:flex;"><span>#filters <span style="color:#f92672">h4</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">margin-bottom</span>: <span style="color:#ae81ff">0.2</span><span style="color:#66d9ef">rem</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">margin-top</span>: <span style="color:#ae81ff">2</span><span style="color:#66d9ef">rem</span>;
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>The resulting page looks much cleaner:</p>
<p>
<a href="#image-540531e70c7f0a54f0e1e0a0bfb1ffd1" class="lightbox-link">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/6.8.5.png" alt="The Styled Page" style="height: auto; width: auto;" loading="lazy">
</a>
<a href="javascript:history.back();" class="lightbox" id="image-540531e70c7f0a54f0e1e0a0bfb1ffd1">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/6.8.5.png" alt="The Styled Page" class="lightbox-image" loading="lazy">
</a></p>
<h2 id="capturing-the-filter-values">Capturing the Filter Values</h2>
<p>Now we need to get the filter values from our GET request query string.  We could do this like we&rsquo;ve been doing before, with:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>    Request.Query[<span style="color:#e6db74">&#34;IMDBMin&#34;</span>];</span></span></code></pre></div><p>But the returned value would be a string, so we&rsquo;d need to parse it:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>    IMDBMin = <span style="color:#66d9ef">double</span>.Parse(Request.Query[<span style="color:#e6db74">&#34;IMDBMin&#34;</span>]);</span></span></code></pre></div><p>If the query was <code>null</code>, then this would evaluate to <code>NaN</code>, which we wouldn&rsquo;t want to set our <code>&lt;input&gt;</code> to&hellip;</p>
<p>Instead, we&rsquo;ll look at some options built into the PageModel.</p>
<h2 id="parameter-binding">Parameter Binding</h2>
<p>The first of these options is <a href="https://docs.microsoft.com/en-us/aspnet/web-api/overview/formats-and-model-binding/parameter-binding-in-aspnet-web-api" target="_blank"><em>Parameter Binding</em></a>
.  In this approach, we define parameters to our <code>OnGet()</code> method to be parsed out of the request automatically, i.e.:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// Gets the search results for display on the page</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> OnGet(<span style="color:#66d9ef">string</span> SearchTerms, <span style="color:#66d9ef">string</span>[] MPAARatings, <span style="color:#66d9ef">string</span>[] Genres, <span style="color:#66d9ef">double?</span> IMDBMin, <span style="color:#66d9ef">double?</span> IMDBMax) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">this</span>.SearchTerms = SearchTerms;
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">this</span>.MPAARatings = MPAARatings;
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">this</span>.Genres = Genres;
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">this</span>.IMDBMin = IMDBMin;
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">this</span>.IMDBMax = IMDBMax;
</span></span><span style="display:flex;"><span>        Movies = MovieDatabase.Search(SearchTerms);
</span></span><span style="display:flex;"><span>        Movies = MovieDatabase.FilterByMPAARating(Movies, MPAARatings);
</span></span><span style="display:flex;"><span>        Movies = MovieDatabase.FilterByGenre(Movies, Genres);
</span></span><span style="display:flex;"><span>        Movies = MovieDatabase.FilterByIMDBRating(Movies, IMDBMin, IMDBMax);
</span></span><span style="display:flex;"><span>    }</span></span></code></pre></div><p>The benefit of this approach is that as long as C# knows a conversion into the type we specify, the conversion is done automatically.  Note that the parameter name matches the <code>name</code> property of the corresponding <code>&lt;input&gt;</code> - this must be the case for the Razor Page to bind the parameter to the corresponding input value.</p>
<p>Note that we still need to assign these parameter values to the corresponding properties of our PageModel.  If we don&rsquo;t, then those properties will all be <code>null</code>, and the <code>&lt;inputs&gt;</code> rendered on our page will always be blank.</p>
<h2 id="model-binding">Model Binding</h2>
<p>A second option is to use <a href="https://docs.microsoft.com/en-us/aspnet/core/mvc/models/model-binding?view=aspnetcore-3.1" target="_blank"><em>Model Binding</em></a>
.  Model binding also automatically converts incoming form data, but in this case it binds directly to the properties of our PageModel.  We indicate this form of binding with a <code>[BindProperty]</code> attribute, i.e.:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">IndexModel</span> : PageModel {
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">
</span></span></span><span style="display:flex;"><span><span style="color:#a6e22e">    [BindProperty(SupportsGet=true)]</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">string</span> SearchTerms {<span style="color:#66d9ef">get</span>; <span style="color:#66d9ef">set</span>;}
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">
</span></span></span><span style="display:flex;"><span><span style="color:#a6e22e">    [BindProperty(SupportsGet=true)]</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">string</span>[] MPAARatings {<span style="color:#66d9ef">get</span>; <span style="color:#66d9ef">set</span>;}
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">
</span></span></span><span style="display:flex;"><span><span style="color:#a6e22e">    [BindProperty(SupportsGet=true)]</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">string</span>[] Genres {<span style="color:#66d9ef">get</span>; <span style="color:#66d9ef">set</span>;}
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">
</span></span></span><span style="display:flex;"><span><span style="color:#a6e22e">    [BindProperty(SupportsGet=true)]</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">double?</span> IMDBMin {<span style="color:#66d9ef">get</span>; <span style="color:#66d9ef">set</span>;}
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">
</span></span></span><span style="display:flex;"><span><span style="color:#a6e22e">    [BindProperty(SupportsGet=true)]</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">double?</span> IMDBMax {<span style="color:#66d9ef">get</span>; <span style="color:#66d9ef">set</span>;}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// Gets the search results for display on the page</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> OnGet() {
</span></span><span style="display:flex;"><span>        Movies = MovieDatabase.Search(SearchTerms);
</span></span><span style="display:flex;"><span>        Movies = MovieDatabase.FilterByMPAARating(Movies, MPAARatings);
</span></span><span style="display:flex;"><span>        Movies = MovieDatabase.FilterByGenre(Movies, Genres);
</span></span><span style="display:flex;"><span>        Movies = MovieDatabase.FilterByIMDBRating(Movies, IMDBMin, IMDBMax);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>Note that with this approach, the incoming data is directly bound to the properties, so we don&rsquo;t need to do any special assignments within our <code>OnGet()</code> method.  Also, note that we have to use <code>SupportsGet=true</code> in order for this binding to occur on GET requests (by default, model binding only happens with POST requests).</p>

  
  
<div class="box notices cstyle note">
  <div class="box-label"><i class="fa-fw fas fa-exclamation-circle"></i> Note</div>
  <div class="box-content">

<p>You only need to do <em>one</em> binding approach per property in a PageModel.  I.e. you can just use the property decorator:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">SomePageModel</span> : PageModel
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">    [BindProperty(SupportsGet=true)]</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">float</span> SomeProperty { <span style="color:#66d9ef">get</span>; <span style="color:#66d9ef">set</span>; }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> OnGet() {
</span></span><span style="display:flex;"><span>        DoSomething(SomeProperty);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p><em>or</em> you might use parameter binding:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">SomePageModel</span> : PageModel
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> OnGet(<span style="color:#66d9ef">float</span> SomeProperty) {
</span></span><span style="display:flex;"><span>        DoSomething(SomeProperty);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p><em>or</em> you can parse it from the request:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">SomePageModel</span> : PageModel
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> OnGet() {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">var</span> someProperty = <span style="color:#66d9ef">float</span>.Parse(Request.Query[<span style="color:#e6db74">&#34;SomeProperty&#34;</span>]);
</span></span><span style="display:flex;"><span>        DoSomething(someProperty);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>These are all <em>different means</em> of accessing the <em>same data</em> from the incoming request.</p>
</div>
</div>
<p>Now all we need to do is implement the actual filter.</p>
<h3 id="implementing-the-imdb-rating-filter">Implementing the IMDB Rating Filter</h3>
<p>We&rsquo;ll define the new filter in our <code>MovieDatabase</code> class as another static method:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// Filters the provided collection of movies</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// to those with IMDB ratings falling within</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// the specified range</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;param name=&#34;movies&#34;&gt;The collection of movies to filter&lt;/param&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;param name=&#34;min&#34;&gt;The minimum range value&lt;/param&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;param name=&#34;max&#34;&gt;The maximum range value&lt;/param&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;returns&gt;The filtered movie collection&lt;/returns&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> IEnumerable&lt;Movie&gt; FilterByIMDBRating(IEnumerable&lt;Movie&gt; movies, <span style="color:#66d9ef">double?</span> min, <span style="color:#66d9ef">double?</span> max)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// TODO: Filter movies</span>
</span></span><span style="display:flex;"><span>    }</span></span></code></pre></div><p>Notice that here too we use the nullable double value.  So our first step is probably to do a <code>null</code> check:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> (min == <span style="color:#66d9ef">null</span> &amp;&amp; max == <span style="color:#66d9ef">null</span>) <span style="color:#66d9ef">return</span> movies;</span></span></code></pre></div><p>But what if only one is null?  Should we filter for that part of the range?  It wouldn&rsquo;t be hard to do:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>    <span style="color:#66d9ef">var</span> results = <span style="color:#66d9ef">new</span> List&lt;Movie&gt;();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// only a maximum specified</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span>(min == <span style="color:#66d9ef">null</span>)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">foreach</span>(Movie movie <span style="color:#66d9ef">in</span> movies)
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">if</span> (movie.IMDBRating &lt;= max) results.Add(movie);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> results;
</span></span><span style="display:flex;"><span>    }</span></span></code></pre></div><p>And the minimum would mirror that:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>    <span style="color:#75715e">// only a minimum specified</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span>(max == <span style="color:#66d9ef">null</span>)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">foreach</span>(Movie movie <span style="color:#66d9ef">in</span> movies)
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">if</span> (movie.IMDBRating &gt;= min) results.Add(movie);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> results;
</span></span><span style="display:flex;"><span>    }</span></span></code></pre></div><p>Finally, we could handle the case where we have both a min and max value to our range:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>    <span style="color:#75715e">// Both minimum and maximum specified</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">foreach</span>(Movie movie <span style="color:#66d9ef">in</span> movies)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span>(movie.IMDBRating &gt;= min &amp;&amp; movie.IMDBRating &lt;= max)
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            results.Add(movie);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> results;</span></span></code></pre></div><p>Notice too, that in each of these cases we&rsquo;re treating the range as <em>inclusive</em> (including the specified minimum and maximum).  This is the behavior most casual internet users will expect.  If the database and user expectations are different for your audience, you&rsquo;d want your code to match that expectation.</p>
<p>Now we can filter by IMDB rating:</p>
<p>
<a href="#image-609897a39c007dd27df75b0863130cfa" class="lightbox-link">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/6.8.6.png" alt="Filtering By IMDB" style="height: auto; width: auto;" loading="lazy">
</a>
<a href="javascript:history.back();" class="lightbox" id="image-609897a39c007dd27df75b0863130cfa">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/6.8.6.png" alt="Filtering By IMDB" class="lightbox-image" loading="lazy">
</a></p>
<h2 id="finishing-up">Finishing Up</h2>
<p>Since we&rsquo;re displaying the Rotten Tomatoes rating, we should probably also have a filter for it.  This will work almost exactly like the IMDB rating - but with the range from 0 to 100.  I&rsquo;ll leave this as an exercise for the reader.</p>

            <footer class="footline">

            </footer>
          </article>

    
    
          <article class="default">
            <header class="headline">
            </header>
<h1 id="numerical-filters">Numerical Filters</h1>

<p>Let&rsquo;s tackle one of the critics ratings next.  While we could create categories and use checkboxes, this doesn&rsquo;t capture the incremental values (i.e. 4.3), and it would be a <em>lot</em> of checkboxes for Rotten Tomatoes ratings!  Instead, we&rsquo;ll use a <em>numerical filter</em>, which limits our possible results to a range - between a minimum and maximum value.</p>
<p>Moreover, let&rsquo;s clean up our Index page, as it is getting difficult to determine what filter(s) go together, and and are adding more.</p>
<h2 id="refactoring-the-index-page">Refactoring the Index Page</h2>
<p>Let&rsquo;s move the filters to a column on the left, leave the search bar above, and show our results on the right.  This will require refactoring our <em>Index.cshtml</em> file:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>    &lt;form id=<span style="color:#e6db74">&#34;movie-database&#34;</span>&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        &lt;div id=<span style="color:#e6db74">&#34;search&#34;</span>&gt;
</span></span><span style="display:flex;"><span>            &lt;input type=<span style="color:#e6db74">&#34;text&#34;</span> name=<span style="color:#e6db74">&#34;SearchTerms&#34;</span> <span style="color:#66d9ef">value</span>=<span style="color:#e6db74">&#34;@Model.SearchTerms&#34;</span> /&gt;
</span></span><span style="display:flex;"><span>            &lt;input type=<span style="color:#e6db74">&#34;submit&#34;</span> <span style="color:#66d9ef">value</span>=<span style="color:#e6db74">&#34;Search&#34;</span>&gt;
</span></span><span style="display:flex;"><span>        &lt;/div&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        &lt;div id=<span style="color:#e6db74">&#34;filters&#34;</span>&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            &lt;h4&gt;MPAA Rating&lt;/h4&gt;
</span></span><span style="display:flex;"><span>            @foreach (<span style="color:#66d9ef">string</span> rating <span style="color:#66d9ef">in</span> MovieDatabase.MPAARating)
</span></span><span style="display:flex;"><span>            {
</span></span><span style="display:flex;"><span>                &lt;label&gt;
</span></span><span style="display:flex;"><span>                    &lt;input type=<span style="color:#e6db74">&#34;checkbox&#34;</span> name=<span style="color:#e6db74">&#34;MPAARatings&#34;</span> <span style="color:#66d9ef">value</span>=<span style="color:#e6db74">&#34;@rating&#34;</span> <span style="color:#66d9ef">checked</span>=<span style="color:#e6db74">&#34;@Model.MPAARatings.Contains(rating)&#34;</span> /&gt;
</span></span><span style="display:flex;"><span>                    @rating
</span></span><span style="display:flex;"><span>                &lt;/label&gt;
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            &lt;h4&gt;Genre&lt;/h4&gt;
</span></span><span style="display:flex;"><span>            @foreach (<span style="color:#66d9ef">string</span> genre <span style="color:#66d9ef">in</span> MovieDatabase.Genres)
</span></span><span style="display:flex;"><span>            {
</span></span><span style="display:flex;"><span>                &lt;label&gt;
</span></span><span style="display:flex;"><span>                    &lt;input type=<span style="color:#e6db74">&#34;checkbox&#34;</span> name=<span style="color:#e6db74">&#34;Genres&#34;</span> <span style="color:#66d9ef">value</span>=<span style="color:#e6db74">&#34;@genre&#34;</span> /&gt;
</span></span><span style="display:flex;"><span>                    @genre
</span></span><span style="display:flex;"><span>                &lt;/label&gt;
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            &lt;h4&gt;IMDB Rating&lt;/h4&gt;
</span></span><span style="display:flex;"><span>            &lt;div&gt;
</span></span><span style="display:flex;"><span>                Between
</span></span><span style="display:flex;"><span>                &lt;input name=<span style="color:#e6db74">&#34;IMDBMin&#34;</span> type=<span style="color:#e6db74">&#34;number&#34;</span> min=<span style="color:#e6db74">&#34;0&#34;</span> max=<span style="color:#e6db74">&#34;10&#34;</span> step=<span style="color:#e6db74">&#34;0.1&#34;</span> placeholder=<span style="color:#e6db74">&#34;min&#34;</span>/&gt;
</span></span><span style="display:flex;"><span>                and
</span></span><span style="display:flex;"><span>                &lt;input name=<span style="color:#e6db74">&#34;IMDBMax&#34;</span> type=<span style="color:#e6db74">&#34;number&#34;</span> min=<span style="color:#e6db74">&#34;0&#34;</span> max=<span style="color:#e6db74">&#34;10&#34;</span> step=<span style="color:#e6db74">&#34;0.1&#34;</span> placeholder=<span style="color:#e6db74">&#34;max&#34;</span>/&gt;
</span></span><span style="display:flex;"><span>            &lt;/div&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        &lt;/div&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        &lt;div id=<span style="color:#e6db74">&#34;results&#34;</span>&gt;
</span></span><span style="display:flex;"><span>            &lt;h1&gt;Movie Results&lt;/h1&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            &lt;ul class=<span style="color:#e6db74">&#34;movie-list&#34;</span>&gt;
</span></span><span style="display:flex;"><span>                @foreach (Movie movie <span style="color:#66d9ef">in</span> @Model.Movies)
</span></span><span style="display:flex;"><span>                {
</span></span><span style="display:flex;"><span>                    &lt;li&gt;
</span></span><span style="display:flex;"><span>                        &lt;div class=<span style="color:#e6db74">&#34;details&#34;</span>&gt;
</span></span><span style="display:flex;"><span>                            &lt;h3 class=<span style="color:#e6db74">&#34;title&#34;</span>&gt;@movie.Title&lt;/h3&gt;
</span></span><span style="display:flex;"><span>                            &lt;div class=<span style="color:#e6db74">&#34;mpaa&#34;</span>&gt;@movie.MPAARating&lt;/div&gt;
</span></span><span style="display:flex;"><span>                            &lt;div class=<span style="color:#e6db74">&#34;genre&#34;</span>&gt;@movie.MajorGenre&lt;/div&gt;
</span></span><span style="display:flex;"><span>                        &lt;/div&gt;
</span></span><span style="display:flex;"><span>                        &lt;div class=<span style="color:#e6db74">&#34;ratings&#34;</span>&gt;
</span></span><span style="display:flex;"><span>                            @if (movie.IMDBRating != <span style="color:#66d9ef">null</span>)
</span></span><span style="display:flex;"><span>                            {
</span></span><span style="display:flex;"><span>                                &lt;div class=<span style="color:#e6db74">&#34;imdb&#34;</span>&gt;
</span></span><span style="display:flex;"><span>                                    @movie.IMDBRating
</span></span><span style="display:flex;"><span>                                &lt;/div&gt;
</span></span><span style="display:flex;"><span>                            }
</span></span><span style="display:flex;"><span>                            @if (movie.RottenTomatoesRating != <span style="color:#66d9ef">null</span>)
</span></span><span style="display:flex;"><span>                            {
</span></span><span style="display:flex;"><span>                                &lt;div class=<span style="color:#e6db74">&#34;rotten-tomatoes&#34;</span>&gt;
</span></span><span style="display:flex;"><span>                                    @movie.RottenTomatoesRating
</span></span><span style="display:flex;"><span>                                &lt;/div&gt;
</span></span><span style="display:flex;"><span>                            }
</span></span><span style="display:flex;"><span>                        &lt;/div&gt;
</span></span><span style="display:flex;"><span>                    &lt;/li&gt;
</span></span><span style="display:flex;"><span>                }
</span></span><span style="display:flex;"><span>            &lt;/ul&gt;
</span></span><span style="display:flex;"><span>        &lt;/div&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    &lt;/form&gt;</span></span></code></pre></div><p>Most of this is simply moving elements around the page, but note that we are using inputs of <code>type=number</code> to represent our range of IMDB values.  We can specify a minimum and maximum for this range, as well as an allowable increment.  Also, we use the <code>placeholder</code> attribute to put text into the <code>input</code> until a value is added.</p>
<h2 id="adding-more-styles">Adding More Styles</h2>
<p>Now we&rsquo;ll need to add some rules to our <em>wwwroot/css/styles.css</em>.  First, we&rsquo;ll use a <code>grid</code> for the layout of the form:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-css" data-lang="css"><span style="display:flex;"><span><span style="color:#f92672">form</span>#movie-database {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">display</span>: <span style="color:#66d9ef">grid</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">grid-template-columns</span>: <span style="color:#ae81ff">1</span>fr <span style="color:#ae81ff">3</span>fr;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">grid-template-rows</span>: <span style="color:#66d9ef">auto</span> <span style="color:#66d9ef">auto</span>;
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>The right column will be three times as big as the left.</p>
<p>We can make our search bar span both columns with <code>grid-column-start</code> and <code>grid-column-end</code>:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-css" data-lang="css"><span style="display:flex;"><span>#search {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">grid-column-start</span>: <span style="color:#ae81ff">1</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">grid-column-end</span>: <span style="color:#ae81ff">3</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">text-align</span>: <span style="color:#66d9ef">center</span>;
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>Notice too that for CSS, we start counting at 1, not 0.  The filters and the results will fall in the next row automatically, each taking up their own respective grid cell.  You can read more about the grid layout in <a href="https://css-tricks.com/snippets/css/complete-guide-grid/" target="_blank">A Complete Guide to Grid</a>
.</p>
<p>Let&rsquo;s go ahead and use flexbox to lay out our filters in a column:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-css" data-lang="css"><span style="display:flex;"><span>#filters {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">display</span>: <span style="color:#66d9ef">flex</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">flex-direction</span>: <span style="color:#66d9ef">column</span>;
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>And make our number inputs bigger:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-css" data-lang="css"><span style="display:flex;"><span>#filters <span style="color:#f92672">input</span><span style="color:#f92672">[</span><span style="color:#f92672">type</span><span style="color:#f92672">=</span><span style="color:#f92672">number</span><span style="color:#f92672">]</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">width</span>: <span style="color:#ae81ff">4</span><span style="color:#66d9ef">rem</span>;
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>Notice the use of square brackets in our CSS Selector to only apply to inputs with type number.</p>
<p>Also, let&rsquo;s add a margin above and remove most of the margin below our <code>&lt;h4&gt;</code> elements:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-css" data-lang="css"><span style="display:flex;"><span>#filters <span style="color:#f92672">h4</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">margin-bottom</span>: <span style="color:#ae81ff">0.2</span><span style="color:#66d9ef">rem</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">margin-top</span>: <span style="color:#ae81ff">2</span><span style="color:#66d9ef">rem</span>;
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>The resulting page looks much cleaner:</p>
<p>
<a href="#image-b295cc18c2125f20d5fe983141302295" class="lightbox-link">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/6.8.5.png" alt="The Styled Page" style="height: auto; width: auto;" loading="lazy">
</a>
<a href="javascript:history.back();" class="lightbox" id="image-b295cc18c2125f20d5fe983141302295">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/6.8.5.png" alt="The Styled Page" class="lightbox-image" loading="lazy">
</a></p>
<h2 id="capturing-the-filter-values">Capturing the Filter Values</h2>
<p>Now we need to get the filter values from our GET request query string.  We could do this like we&rsquo;ve been doing before, with:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>    Request.Query[<span style="color:#e6db74">&#34;IMDBMin&#34;</span>];</span></span></code></pre></div><p>But the returned value would be a string, so we&rsquo;d need to parse it:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>    IMDBMin = <span style="color:#66d9ef">double</span>.Parse(Request.Query[<span style="color:#e6db74">&#34;IMDBMin&#34;</span>]);</span></span></code></pre></div><p>If the query was <code>null</code>, then this would evaluate to <code>NaN</code>, which we wouldn&rsquo;t want to set our <code>&lt;input&gt;</code> to&hellip;</p>
<p>Instead, we&rsquo;ll look at some options built into the PageModel.</p>
<h2 id="parameter-binding">Parameter Binding</h2>
<p>The first of these options is <a href="https://docs.microsoft.com/en-us/aspnet/web-api/overview/formats-and-model-binding/parameter-binding-in-aspnet-web-api" target="_blank"><em>Parameter Binding</em></a>
.  In this approach, we define parameters to our <code>OnGet()</code> method to be parsed out of the request automatically, i.e.:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// Gets the search results for display on the page</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> OnGet(<span style="color:#66d9ef">string</span> SearchTerms, <span style="color:#66d9ef">string</span>[] MPAARatings, <span style="color:#66d9ef">string</span>[] Genres, <span style="color:#66d9ef">double?</span> IMDBMin, <span style="color:#66d9ef">double?</span> IMDBMax) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">this</span>.SearchTerms = SearchTerms;
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">this</span>.MPAARatings = MPAARatings;
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">this</span>.Genres = Genres;
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">this</span>.IMDBMin = IMDBMin;
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">this</span>.IMDBMax = IMDBMax;
</span></span><span style="display:flex;"><span>        Movies = MovieDatabase.Search(SearchTerms);
</span></span><span style="display:flex;"><span>        Movies = MovieDatabase.FilterByMPAARating(Movies, MPAARatings);
</span></span><span style="display:flex;"><span>        Movies = MovieDatabase.FilterByGenre(Movies, Genres);
</span></span><span style="display:flex;"><span>        Movies = MovieDatabase.FilterByIMDBRating(Movies, IMDBMin, IMDBMax);
</span></span><span style="display:flex;"><span>    }</span></span></code></pre></div><p>The benefit of this approach is that as long as C# knows a conversion into the type we specify, the conversion is done automatically.  Note that the parameter name matches the <code>name</code> property of the corresponding <code>&lt;input&gt;</code> - this must be the case for the Razor Page to bind the parameter to the corresponding input value.</p>
<p>Note that we still need to assign these parameter values to the corresponding properties of our PageModel.  If we don&rsquo;t, then those properties will all be <code>null</code>, and the <code>&lt;inputs&gt;</code> rendered on our page will always be blank.</p>
<h2 id="model-binding">Model Binding</h2>
<p>A second option is to use <a href="https://docs.microsoft.com/en-us/aspnet/core/mvc/models/model-binding?view=aspnetcore-3.1" target="_blank"><em>Model Binding</em></a>
.  Model binding also automatically converts incoming form data, but in this case it binds directly to the properties of our PageModel.  We indicate this form of binding with a <code>[BindProperty]</code> attribute, i.e.:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">IndexModel</span> : PageModel {
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">
</span></span></span><span style="display:flex;"><span><span style="color:#a6e22e">    [BindProperty(SupportsGet=true)]</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">string</span> SearchTerms {<span style="color:#66d9ef">get</span>; <span style="color:#66d9ef">set</span>;}
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">
</span></span></span><span style="display:flex;"><span><span style="color:#a6e22e">    [BindProperty(SupportsGet=true)]</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">string</span>[] MPAARatings {<span style="color:#66d9ef">get</span>; <span style="color:#66d9ef">set</span>;}
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">
</span></span></span><span style="display:flex;"><span><span style="color:#a6e22e">    [BindProperty(SupportsGet=true)]</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">string</span>[] Genres {<span style="color:#66d9ef">get</span>; <span style="color:#66d9ef">set</span>;}
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">
</span></span></span><span style="display:flex;"><span><span style="color:#a6e22e">    [BindProperty(SupportsGet=true)]</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">double?</span> IMDBMin {<span style="color:#66d9ef">get</span>; <span style="color:#66d9ef">set</span>;}
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">
</span></span></span><span style="display:flex;"><span><span style="color:#a6e22e">    [BindProperty(SupportsGet=true)]</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">double?</span> IMDBMax {<span style="color:#66d9ef">get</span>; <span style="color:#66d9ef">set</span>;}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// Gets the search results for display on the page</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> OnGet() {
</span></span><span style="display:flex;"><span>        Movies = MovieDatabase.Search(SearchTerms);
</span></span><span style="display:flex;"><span>        Movies = MovieDatabase.FilterByMPAARating(Movies, MPAARatings);
</span></span><span style="display:flex;"><span>        Movies = MovieDatabase.FilterByGenre(Movies, Genres);
</span></span><span style="display:flex;"><span>        Movies = MovieDatabase.FilterByIMDBRating(Movies, IMDBMin, IMDBMax);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>Note that with this approach, the incoming data is directly bound to the properties, so we don&rsquo;t need to do any special assignments within our <code>OnGet()</code> method.  Also, note that we have to use <code>SupportsGet=true</code> in order for this binding to occur on GET requests (by default, model binding only happens with POST requests).</p>

  
  
<div class="box notices cstyle note">
  <div class="box-label"><i class="fa-fw fas fa-exclamation-circle"></i> Note</div>
  <div class="box-content">

<p>You only need to do <em>one</em> binding approach per property in a PageModel.  I.e. you can just use the property decorator:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">SomePageModel</span> : PageModel
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">    [BindProperty(SupportsGet=true)]</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">float</span> SomeProperty { <span style="color:#66d9ef">get</span>; <span style="color:#66d9ef">set</span>; }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> OnGet() {
</span></span><span style="display:flex;"><span>        DoSomething(SomeProperty);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p><em>or</em> you might use parameter binding:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">SomePageModel</span> : PageModel
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> OnGet(<span style="color:#66d9ef">float</span> SomeProperty) {
</span></span><span style="display:flex;"><span>        DoSomething(SomeProperty);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p><em>or</em> you can parse it from the request:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">SomePageModel</span> : PageModel
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> OnGet() {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">var</span> someProperty = <span style="color:#66d9ef">float</span>.Parse(Request.Query[<span style="color:#e6db74">&#34;SomeProperty&#34;</span>]);
</span></span><span style="display:flex;"><span>        DoSomething(someProperty);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>These are all <em>different means</em> of accessing the <em>same data</em> from the incoming request.</p>
</div>
</div>
<p>Now all we need to do is implement the actual filter.</p>
<h3 id="implementing-the-imdb-rating-filter">Implementing the IMDB Rating Filter</h3>
<p>We&rsquo;ll define the new filter in our <code>MovieDatabase</code> class as another static method:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// Filters the provided collection of movies</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// to those with IMDB ratings falling within</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// the specified range</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;param name=&#34;movies&#34;&gt;The collection of movies to filter&lt;/param&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;param name=&#34;min&#34;&gt;The minimum range value&lt;/param&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;param name=&#34;max&#34;&gt;The maximum range value&lt;/param&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;returns&gt;The filtered movie collection&lt;/returns&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> IEnumerable&lt;Movie&gt; FilterByIMDBRating(IEnumerable&lt;Movie&gt; movies, <span style="color:#66d9ef">double?</span> min, <span style="color:#66d9ef">double?</span> max)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// TODO: Filter movies</span>
</span></span><span style="display:flex;"><span>    }</span></span></code></pre></div><p>Notice that here too we use the nullable double value.  So our first step is probably to do a <code>null</code> check:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> (min == <span style="color:#66d9ef">null</span> &amp;&amp; max == <span style="color:#66d9ef">null</span>) <span style="color:#66d9ef">return</span> movies;</span></span></code></pre></div><p>But what if only one is null?  Should we filter for that part of the range?  It wouldn&rsquo;t be hard to do:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>    <span style="color:#66d9ef">var</span> results = <span style="color:#66d9ef">new</span> List&lt;Movie&gt;();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// only a maximum specified</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span>(min == <span style="color:#66d9ef">null</span>)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">foreach</span>(Movie movie <span style="color:#66d9ef">in</span> movies)
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">if</span> (movie.IMDBRating &lt;= max) results.Add(movie);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> results;
</span></span><span style="display:flex;"><span>    }</span></span></code></pre></div><p>And the minimum would mirror that:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>    <span style="color:#75715e">// only a minimum specified</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span>(max == <span style="color:#66d9ef">null</span>)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">foreach</span>(Movie movie <span style="color:#66d9ef">in</span> movies)
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">if</span> (movie.IMDBRating &gt;= min) results.Add(movie);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> results;
</span></span><span style="display:flex;"><span>    }</span></span></code></pre></div><p>Finally, we could handle the case where we have both a min and max value to our range:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>    <span style="color:#75715e">// Both minimum and maximum specified</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">foreach</span>(Movie movie <span style="color:#66d9ef">in</span> movies)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span>(movie.IMDBRating &gt;= min &amp;&amp; movie.IMDBRating &lt;= max)
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            results.Add(movie);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> results;</span></span></code></pre></div><p>Notice too, that in each of these cases we&rsquo;re treating the range as <em>inclusive</em> (including the specified minimum and maximum).  This is the behavior most casual internet users will expect.  If the database and user expectations are different for your audience, you&rsquo;d want your code to match that expectation.</p>
<p>Now we can filter by IMDB rating:</p>
<p>
<a href="#image-3010cf2f70c93ff97a102de2b3a07556" class="lightbox-link">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/6.8.6.png" alt="Filtering By IMDB" style="height: auto; width: auto;" loading="lazy">
</a>
<a href="javascript:history.back();" class="lightbox" id="image-3010cf2f70c93ff97a102de2b3a07556">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/6.8.6.png" alt="Filtering By IMDB" class="lightbox-image" loading="lazy">
</a></p>
<h2 id="finishing-up">Finishing Up</h2>
<p>Since we&rsquo;re displaying the Rotten Tomatoes rating, we should probably also have a filter for it.  This will work almost exactly like the IMDB rating - but with the range from 0 to 100.  I&rsquo;ll leave this as an exercise for the reader.</p>

            <footer class="footline">

            </footer>
          </article>

    
    
          <article class="default">
            <header class="headline">
            </header>
<h1 id="using-linq">Using LINQ</h1>

<p>In our movie website, we&rsquo;ve been using a custom &ldquo;database&rdquo; object, <code>MovieDatabase</code> to provide the movie data and search and filter functionality.  In professional practice, we would probably replace this with an external database program.  These programs have been developed specifically for persisting and accessing data, and leverage specialized data structures like B+ trees that allow them to do searches and filters much more efficiently.</p>
<p>Some of the most widely adopted database programs are <em>relational databases</em> like MySQL, MsSQL, Postgres, and SQLLite.  These predate object-orientation, and accept requests for data in the form of SQL (Structured Query Language).  You will learn more about these databases and how to use them in CIS560.</p>
<h2 id="linq">LINQ</h2>
<p>Microsoft, inspired by SQL, introduced Language Integrated Query (LINQ) in 2007 to bring the concept of a query language into .NET.  LINQ allows you to construct queries in either chained method calls or in a syntax similar to SQL that can operate on collections or relational databases.</p>
<p>For relational databases, LINQ queries are converted internally to SQL queries, and dispatched to the database.  But their real power is that they can also be used with any collection that supports either the <code>IEnumerable</code> or <code>IEnumerable&lt;T&gt;</code> interfaces.  LINQ can be used to replace the kinds of filter and search functions we wrote for our <code>MovieDatabase</code>.  Let&rsquo;s try it out with our movie website.</p>
<p>LINQ operates through extension methods, so we need to be sure to add the LINQ namespace to our CS files where we are going to employ them.  We&rsquo;ll be adding our LINQ commands to our page model, so sure that is the case with your <em>Pages/Index.cshtml.cs</em>:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">using</span> System.Linq;</span></span></code></pre></div><p>Adding this using statement will bring in all the extension methods for LINQ, and will also prompt Visual Studio to recognize the query-style syntax.</p>
<h2 id="searching-with-linq">Searching with LINQ</h2>
<p>One of the most useful extension methods in LINQ is <a href="https://docs.microsoft.com/en-us/dotnet/api/system.linq.enumerable.where?view=netcore-3.1" target="_blank">Where()</a>
.  It can be invoked on any <code>IEnumerable</code> and accepts a <code>Func</code> (a delegate type).  This delegate takes a single argument - the current item being enumerated over, and its body should return a boolean value - <code>true</code> if the item should be included in the results, and <code>false</code> if it should not.</p>
<p>We can thus use our existing <code>SearchTerms</code> property as the basis for our test: <code>movie =&gt; movie.Title != null &amp;&amp; movie.Title.Contains(SearchTerms)</code> (note that with lambda expressions, if the result is single expression we can omit the <code>{}</code> and the <code>return</code> is implied).  Also note that we incorporate the null check directly into the expression using the boolean and <code>&amp;&amp;</code> operator.</p>
<p>We can replace our current search with a <code>Where()</code> call invoking this method:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>Movies = MovieDatabase.All.Where(movie =&gt; movie.Title != <span style="color:#66d9ef">null</span> &amp;&amp; movie.Title.Contains(SearchTerms, String));</span></span></code></pre></div><p>However if we run the program we will encounter a null exception.  On our first GET request, the value of <code>SearchTerms</code> is null, which is <em>not</em> a legal argument for <code>String.Contains()</code>.</p>
<h2 id="making-search-conditional">Making Search Conditional</h2>
<p>If the <code>SearchTerms</code> is null, that indicates that the user did not enter a search term - accordingly, we probably don&rsquo;t want to search.  We can wrap our filter in an <code>if</code> test to prevent applying the filter when there is no search term.  Thus, we would refactor our filtering expression to:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>Movies = MovieDatabase.All;
</span></span><span style="display:flex;"><span><span style="color:#75715e">// Search movie titles for the SearchTerms</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">if</span>(SearchTerms != <span style="color:#66d9ef">null</span>) {
</span></span><span style="display:flex;"><span>    Movies = Movies.Where(movie =&gt; movie.Title != <span style="color:#66d9ef">null</span> &amp;&amp; movie.Title.Contains(SearchTerms, StringComparison.InvariantCultureIgnoreCase));
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>Now if we run the program, and search for a specific term, we&rsquo;ll see our results is modified to contain <em>only</em> those movies with the terms in their title!</p>
<p>We can also use the query syntax instead of the extension method syntax, which is similar to SQL:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>Movies = MovieDatabase.All;
</span></span><span style="display:flex;"><span><span style="color:#75715e">// Search movie titles for the SearchTerms</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">if</span>(SerchTerms != <span style="color:#66d9ef">null</span>)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    Movies = <span style="color:#66d9ef">from</span> movie <span style="color:#66d9ef">in</span> Movies
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">where</span> movie.Title != <span style="color:#66d9ef">null</span> &amp;&amp; movie.Title.Contains(SearchTerms, StringComparison.InvariantCultureIgnoreCase)
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">select</span> movie;
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>This syntax is converted by the C# compiler to use the extension methods as part of the compilation process.</p>

  
  
<div class="box notices cstyle info">
  <div class="box-label"><i class="fa-fw fas fa-info-circle"></i> Info</div>
  <div class="box-content">

<p>The search approach listed above will only find the <em>exact</em> search terms, i.e. searching for &ldquo;Clear Present Danger&rdquo; will <em>not</em> match the film &ldquo;Clear and Present Danger&rdquo;.  How might you tweak the search approach so that terms would be found individually?</p>
</div>
</div>
<p>You can use either form for writing your queries, though it is best to stay consistent within a single program.</p>
<h2 id="filtering-with-linq">Filtering with LINQ</h2>
<p>Filtering is also accomplished through the <a href="https://docs.microsoft.com/en-us/dotnet/api/system.linq.enumerable.where?view=netcore-3.1" target="_blank">Where()</a>
.  We can add additional tests within our search <code>Where()</code>, but it is more legible to add <em>additional</em> <code>Where</code> calls:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>Movies = MovieDatabase.All
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// Search movie titles for the SearchTerms</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span>(SearchTerms != <span style="color:#66d9ef">null</span>) {
</span></span><span style="display:flex;"><span>        Movies = Movies.Where(movie =&gt; movie.Title != <span style="color:#66d9ef">null</span> &amp;&amp; movie.Title.Contains(SearchTerms, StringComparison.InvariantCultureIgnoreCase));
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// Filter by MPAA Rating</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span>(MPAARatings != <span style="color:#66d9ef">null</span> &amp;&amp; MPAARatings.Length != <span style="color:#ae81ff">0</span>)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        Movies = Movies.Where(movie =&gt;
</span></span><span style="display:flex;"><span>            movie.MPAARating != <span style="color:#66d9ef">null</span> &amp;&amp;
</span></span><span style="display:flex;"><span>            MPAARatings.Contains(movie.MPAARating)
</span></span><span style="display:flex;"><span>            );
</span></span><span style="display:flex;"><span>    }</span></span></code></pre></div>
  
  
<div class="box notices cstyle todo">
  <div class="box-label"></div>
  <div class="box-content">

<p>The numerical filters are handled the same way - with additional <code>Where</code> clauses.  I leave this as an exercise for the reader to complete.</p>
</div>
</div>
<h2 id="benefits-of-linq">Benefits of LINQ</h2>
<p>While LINQ is a bit less code for us to write, there is another big benefit - the actual filtering is only applied <em>when we start iterating through the results</em>.  This means that LINQ queries with multiple <code>Where()</code> invocations can combine them into a single iteration.</p>
<p>Consider our movie website example.  We have four filters - the search, the MPAA Ratings, the IMDB Ratings, and the Rotten Tomato Rating.  In the worst case, each movie in the database would pass each filter, so that our list never got smaller.  With the filter functions we wrote in <code>MovieDatabase</code>, we would have to iterate over that full list <em>four times</em>.  In terms of complexity, that&rsquo;s $O(4n)$.</p>
<p>In contrast, because LINQ doesn&rsquo;t actually run the filters until we start iterating, it can combine all the <code>While</code> tests into a single boolean expression.  The result is it only has to iterate through the list <em>once</em>.  Hence, its complexity becomes $O(n)$.  There is a little additional overhead for holding onto the query information that way, but it&rsquo;s small compared to the benefit.</p>
<p>Also, we could have done the same kind of optimization ourselves, but it takes a lot of work to set up, and may not be worth it for a single web app.  But LINQ provides us that benefit for free.</p>

            <footer class="footline">

            </footer>
          </article>

          </section>
    
    
          <article class="default">
            <header class="headline">
            </header>
<h1 id="deployment">Deployment</h1>

<p>Now that we have a well-functioning web application, we are ready to publish it to a production environment, where eveyrone on the web will have access to it!  This exercise walks you through deploying your new application using Microsoft&rsquo;s Azure Web Services, utilizing the built-in support for this deployment process in Visual Studio.</p>

            <footer class="footline">

            </footer>
          </article>

          <section>
            <h1 class="a11y-only">Subsections of Deployment</h1>
    
    
          <article class="default">
            <header class="headline">
            </header>
<h1 id="creating-an-azure-account">Creating an Azure Account</h1>

<iframe width="560" height="315" src="https://www.youtube.com/embed/8XikqJSXHDI" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
            <footer class="footline">

            </footer>
          </article>

    
    
          <article class="default">
            <header class="headline">
            </header>
<h1 id="deploying-our-movie-site-to-azure">Deploying our Movie Site to Azure</h1>

<p>Before you start this exercise, you should:</p>
<ol>
<li>Set up your Azure account (see the <a href="https://ksu-cs-textbooks.github.io/cis400/c-exercises-s23/13-deployment/01-azure/">previous section</a>
).</li>
<li><a href="https://docs.microsoft.com/en-us/visualstudio/ide/signing-in-to-visual-studio?view=vs-2019" target="_blank">Sign into Visual Studio</a>
 using the same account as you used for Azure</li>
</ol>
<iframe width="560" height="315" src="https://www.youtube.com/embed/rFgET9SLZTk" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
<p>Open your Movie Site project from your previous web data exercises.  If you right-click on the project name in the Solution Explorer, you can choose <code>publish</code> from the context menu:</p>
<p>
<a href="#image-0b2b8811f672f88baa5d7e97c7bf55ed" class="lightbox-link">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/c.13.2.1.png" alt="The Publish option in the Solution Explorer" style="height: auto; width: auto;" loading="lazy">
</a>
<a href="javascript:history.back();" class="lightbox" id="image-0b2b8811f672f88baa5d7e97c7bf55ed">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/c.13.2.1.png" alt="The Publish option in the Solution Explorer" class="lightbox-image" loading="lazy">
</a></p>
<p>The first time you choose this option in a project, it will launch a publish wizard.  The first step is to choose your deployment target:</p>
<p>
<a href="#image-95835da619fa9f21702dfcdc1047627d" class="lightbox-link">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/c.13.2.2.png" alt="Deployment Targets in the Publish Wizard" style="height: auto; width: auto;" loading="lazy">
</a>
<a href="javascript:history.back();" class="lightbox" id="image-95835da619fa9f21702dfcdc1047627d">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/c.13.2.2.png" alt="Deployment Targets in the Publish Wizard" class="lightbox-image" loading="lazy">
</a></p>
<p>For this exercise, we&rsquo;ll choose &ldquo;Azure&rdquo;, but feel free to explore the other options.  Once you&rsquo;ve chosen Azure and clicked the <code>Next</code> button, you&rsquo;ll see the second step of the wizard, which seeks more detail on your deployment target:</p>
<p>
<a href="#image-6421f26857783723a63776ec5d1f3d89" class="lightbox-link">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/c.13.2.3.png" alt="Azure Deployment Targets in the Publish Wizard" style="height: auto; width: auto;" loading="lazy">
</a>
<a href="javascript:history.back();" class="lightbox" id="image-6421f26857783723a63776ec5d1f3d89">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/c.13.2.3.png" alt="Azure Deployment Targets in the Publish Wizard" class="lightbox-image" loading="lazy">
</a></p>
<p>The options here include deploying to a Windows or Linux infrastructure, or as a Docker image, or as an Azure VM (in which case you would need to set up the OS and environment).  Let&rsquo;s choose the &ldquo;Linux&rdquo; option and click <code>Next</code> to reach the next step in the wizard.</p>
<p>
<a href="#image-a9cca6a13685745290c914f7db29046f" class="lightbox-link">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/c.13.2.4.png" alt="Azure App Service in the Publish Wizard" style="height: auto; width: auto;" loading="lazy">
</a>
<a href="javascript:history.back();" class="lightbox" id="image-a9cca6a13685745290c914f7db29046f">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/c.13.2.4.png" alt="Azure App Service in the Publish Wizard" class="lightbox-image" loading="lazy">
</a></p>
<p>This step lists the subscription(s) available to your account, as well as any Resource Groups and App Services you have created.  Most likely the latter two are empty, and your Subscription will be &ldquo;Azure for Students&rdquo; (this is the $100 of credit you receive as a K-State student).  If you have used Azure previously, you may have additional options.  For this project, choose the &ldquo;Create a new Azure App Service&hellip;&rdquo;</p>
<p>This launches another dialog, for creating a new App Service:</p>
<p>
<a href="#image-961fb21b9f96ed4aec1cd0a703541e5e" class="lightbox-link">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/c.13.2.5.png" alt="App Service creation dialog" style="height: auto; width: auto;" loading="lazy">
</a>
<a href="javascript:history.back();" class="lightbox" id="image-961fb21b9f96ed4aec1cd0a703541e5e">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/c.13.2.5.png" alt="App Service creation dialog" class="lightbox-image" loading="lazy">
</a></p>
<p>You may change the name to any available name (by default it will be your project name followed by a timestamp).  When you&rsquo;re happy with your name, click the <code>Create</code> button.  It will take a few minutes to create your App Service, so please be patient.  Once it finishes, you&rsquo;ll be back in the Wizard with your new app service selected:</p>
<p>
<a href="#image-d41dc7cb002c0143ef741bdbf66c938d" class="lightbox-link">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/c.13.2.6.png" alt="Finishing the Publish Wizard" style="height: auto; width: auto;" loading="lazy">
</a>
<a href="javascript:history.back();" class="lightbox" id="image-d41dc7cb002c0143ef741bdbf66c938d">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/c.13.2.6.png" alt="Finishing the Publish Wizard" class="lightbox-image" loading="lazy">
</a></p>
<p>Go ahead and click the <code>Finish</code> button.  This will close the wizard and return you to Visual Studio, where the Publish configuration screen is now visible:</p>
<p>
<a href="#image-b35c7ff00d1d9b700f7eeec72f61dae5" class="lightbox-link">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/c.13.2.7.png" alt="The Publish Configuration" style="height: auto; width: auto;" loading="lazy">
</a>
<a href="javascript:history.back();" class="lightbox" id="image-b35c7ff00d1d9b700f7eeec72f61dae5">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/c.13.2.7.png" alt="The Publish Configuration" class="lightbox-image" loading="lazy">
</a></p>
<p>Two elements are important here - the <em>Site URL</em> is the URL where you will be able to visit your published web application (after you publish it), and the <code>Publish</code> button launches the publishing process.  Go ahead and click the <code>Publish</code> button.  It will take a few minutes, but you&rsquo;ll see the project is built and deployed to the Azure service.  When the process completes, it will open your site in the default web browser (or you can navigate there using the supplied URL).</p>
<p>Your published website will now look something like this:</p>
<p>
<a href="#image-f1ff5664f9cc3578f063bab2d26693b1" class="lightbox-link">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/c.13.2.8.png" alt="The published website" style="height: auto; width: auto;" loading="lazy">
</a>
<a href="javascript:history.back();" class="lightbox" id="image-f1ff5664f9cc3578f063bab2d26693b1">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/c.13.2.8.png" alt="The published website" class="lightbox-image" loading="lazy">
</a></p>
<p>While the website is now loaded and functional, it does not look like our debug build - it seems to be missing all of our styles!  If we inspect the CSS in the browser development tools, we&rsquo;ll see that it is loading <em>site.min.css</em>, and this file contains the minified boilerplate CSS from the original site template, but none of the changes we made!  If we examine our <em>Layout.csthml</em> template file, we can find the lines where the <code>&lt;link&gt;</code> element for the CSS is defined:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>&lt;<span style="color:#f92672">environment</span> <span style="color:#a6e22e">include</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;Development&#34;</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">link</span> <span style="color:#a6e22e">rel</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;stylesheet&#34;</span> <span style="color:#a6e22e">href</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;~/css/site.css&#34;</span> <span style="color:#a6e22e">asp-append-version</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;true&#34;</span> /&gt;
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#f92672">environment</span>&gt;
</span></span><span style="display:flex;"><span>&lt;<span style="color:#f92672">environment</span> <span style="color:#a6e22e">exclude</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;Development&#34;</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">link</span> <span style="color:#a6e22e">rel</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;stylesheet&#34;</span> <span style="color:#a6e22e">href</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;~/css/site.min.css&#34;</span> <span style="color:#a6e22e">asp-append-version</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;true&#34;</span> /&gt;
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#f92672">environment</span>&gt;</span></span></code></pre></div><p>Notice the use of the ASP.NET-specific <code>&lt;environment&gt;</code> element?  This conditionally includes its children based on the environment the web server is running in.  Debug mode corresponds to our &ldquo;Development&rdquo; environment, so in debug we are including <em>site.css</em>.  However, when we run it in &ldquo;Production&rdquo; mode, i.e. in our Azure service, we&rsquo;re instead using <em>site.min.css</em>.  This is intended to be a minified and bundled version of <em>site.css</em>.  Minification is a transpiling process where we strip out unnecessary content, i.e. whitespace and comments.  Bundling refers to gathering multiple files - i.e. multiple CSS files, and combining them into a single file (this is helpful if we like to keep our CSS rules separated according to what pages they correspond to).</p>
<p>The issue is that the <em>site.min.css</em> file is not currently being updated when we build our project - instead we&rsquo;re still using the example file that came with the project template.  We&rsquo;ll need to install and configure a NuGet package within the Movie project to enable this extra building step.  You can read more about bundling and minification within ASP.NET Core <a href="https://docs.microsoft.com/aspnet/core/client-side/bundling-and-minification" target="_blank">here</a>
.</p>
<p>Start by selecting <code>Tools &gt; NuGet Package Manager &gt; Manage Nuget Packages for Solution...</code> from the <code>Tools</code> menu:</p>
<p>
<a href="#image-d9cae21e2a0a4f7873e8781c85d8aa86" class="lightbox-link">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/c.13.2.9.png" alt="Launching the NuGet Package Manager" style="height: auto; width: auto;" loading="lazy">
</a>
<a href="javascript:history.back();" class="lightbox" id="image-d9cae21e2a0a4f7873e8781c85d8aa86">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/c.13.2.9.png" alt="Launching the NuGet Package Manager" class="lightbox-image" loading="lazy">
</a></p>
<p>This loads the NuGet Package Manager, which allows us to install additional components into our project.  By default it starts with the &ldquo;Installed&rdquo; tab, which shows which packages are currently installed.  Not surprisingly, we have several Microsoft.NETCore packages - these contain the library code for .NETCore and for procesing Razor pages.  We also have a third-party library, Newtonsoft.Json, which is used to parse the JSON database file.  We&rsquo;ll want to install a new package, so select the &ldquo;Browse&rdquo; tab:</p>
<p>
<a href="#image-a4f9ad438ed5fbe3e4f360cc8f4fc35f" class="lightbox-link">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/c.13.2.10.png" alt="The NuGet Package Manager" style="height: auto; width: auto;" loading="lazy">
</a>
<a href="javascript:history.back();" class="lightbox" id="image-a4f9ad438ed5fbe3e4f360cc8f4fc35f">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/c.13.2.10.png" alt="The NuGet Package Manager" class="lightbox-image" loading="lazy">
</a></p>
<p>Then type into the search box &ldquo;BuildBundlerMinifier&rdquo;.  The corresponding package should show up in the results below. This tool will add the bundling and minification step to the build process of Visual Studio.  Clicking on the project will open a checklist allowing you to choose which projects you want to install the package into.  Check the box next to the <em>Movies</em> project, and then click the <code>Install</code> button.</p>
<p>
<a href="#image-06bab079166c8a9d823e8482175576b9" class="lightbox-link">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/c.13.2.11.png" alt="Installing the BuildBundlerMinifier Package" style="height: auto; width: auto;" loading="lazy">
</a>
<a href="javascript:history.back();" class="lightbox" id="image-06bab079166c8a9d823e8482175576b9">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/c.13.2.11.png" alt="Installing the BuildBundlerMinifier Package" class="lightbox-image" loading="lazy">
</a></p>
<p>YOu will need to click <code>Ok</code> in the confirmation dialog, and then the package will be installed.  Visual Studio will report that the <em>bundleconfig.json</em> files does not exist.  This file configures the new package to create the minified bundle file - we&rsquo;ll need to add it.  It should be created at the root of the Move project, and it consists of a simple JSON structure:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>[
</span></span><span style="display:flex;"><span>  {
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;outputFileName&#34;</span>: <span style="color:#e6db74">&#34;wwwroot/css/site.min.css&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;inputFiles&#34;</span>: [
</span></span><span style="display:flex;"><span>      <span style="color:#e6db74">&#34;wwwroot/css/site.css&#34;</span>
</span></span><span style="display:flex;"><span>    ]
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>]</span></span></code></pre></div><p>The <code>&quot;outputFileName&quot;</code> is the name of the file we want to write to (in this case, _site.min.css), and the <code>&quot;inputFiles&quot;</code> is an array containing file names of all the files we want to bundle (in this case, <em>site.css</em>).  If we had additional CSS files in our project, we could also list those here as well, and all of the listed files would be combined into the single output file.</p>
<p>We can bundle and minify Javascript files the same way, by adding a second JSON object defining the <code>&quot;outputFileName&quot;</code> for the minified and bundled Javascript file (which we conventionally give the extension <em>.min.js</em>), and an <code>&quot;inputFiles&quot;</code> array consisting of all the JavaScript files we want to bundle.</p>
<p>With this change, now whenever we build our project, we will also rebuild the minified <em>site.min.css</em> file.  Click the <code>Publish</code> button in the Publish screen again, and when the project finishes loading, you&rsquo;ll now see the CSS rules being applied to your site:</p>
<p>
<a href="#image-94c27fe08bdb44cece9dc340660c9417" class="lightbox-link">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/c.13.2.12.png" alt="Final Deployed Site" style="height: auto; width: auto;" loading="lazy">
</a>
<a href="javascript:history.back();" class="lightbox" id="image-94c27fe08bdb44cece9dc340660c9417">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/c.13.2.12.png" alt="Final Deployed Site" class="lightbox-image" loading="lazy">
</a></p>
<p>That&rsquo;s all there is to it!  You now have a published ASP.NET Core Web Application that can be accessed from any internet-connected browser!</p>
<p>Turn in the URL to your published site.  After it is graded, feel free to take down your Azure service.</p>

            <footer class="footline">

            </footer>
          </article>

          </section>
          </section>

        </div>
      </main>
    
<div class="git-footer">
<p class="theme-version-footer">5.18.0</p>
<p>Last modified by: 
            <i class='fas fa-user'></i> Julie Thornton
            <i class='fas fa-calendar'></i> <a href="https://gitlab.cs.ksu.edu/cs-textbooks/cis400-textbook/-/commit/1918e4b3753773e28f9dbf232246ba26fe9d64c7">Nov 6, 2023</a>
</p>
</div>

    
    </div>
    <script src="https://ksu-cs-textbooks.github.io/cis400/js/clipboard.min.js?1712954552" defer></script>
    <script src="https://ksu-cs-textbooks.github.io/cis400/js/perfect-scrollbar.min.js?1712954552" defer></script>
    <script>
      function useMathJax( config ){
        if( !Object.assign ){
          
          return;
        }
        window.MathJax = Object.assign( window.MathJax || {}, {
          loader: {
            load: ['[tex]/mhchem']
          },
          startup: {
            elements: [
              '.math'
            ]
          },
          tex: {
            inlineMath: [
              ['$', '$'], 
              ['\\(', '\\)']
            ]
          },
          options: {
            enableMenu: false 
          }
        }, config );
      }
      useMathJax( JSON.parse("{}") );
    </script>
    <script id="MathJax-script" async src="https://ksu-cs-textbooks.github.io/cis400/js/mathjax/tex-mml-chtml.js?1712954552"></script>
    <script src="https://ksu-cs-textbooks.github.io/cis400/js/theme.js?1712954552" defer></script>
  </body>
</html>
