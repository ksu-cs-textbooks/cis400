<!doctype html><html lang=en-us dir=ltr itemscope itemtype=http://schema.org/Article><head><meta charset=utf-8><meta name=viewport content="height=device-height,width=device-width,initial-scale=1,minimum-scale=1"><meta name=generator content="Hugo 0.128.0"><meta name=generator content="Relearn 6.0.0"><meta name=description content="Let’s tackle one of the critics ratings next. While we could create categories and use checkboxes, this doesn’t capture the incremental values (i.e. 4.3), and it would be a lot of checkboxes for Rotten Tomatoes ratings! Instead, we’ll use a numerical filter, which limits our possible results to a range - between a minimum and maximum value.
Moreover, let’s clean up our Index page, as it is getting difficult to determine what filter(s) go together, and and are adding more."><meta name=author content="Nathan Bean"><meta name=twitter:card content="summary"><meta name=twitter:title content="Numerical Filters :: K-State CIS 400 Textbook"><meta name=twitter:description content="Let’s tackle one of the critics ratings next. While we could create categories and use checkboxes, this doesn’t capture the incremental values (i.e. 4.3), and it would be a lot of checkboxes for Rotten Tomatoes ratings! Instead, we’ll use a numerical filter, which limits our possible results to a range - between a minimum and maximum value.
Moreover, let’s clean up our Index page, as it is getting difficult to determine what filter(s) go together, and and are adding more."><meta property="og:url" content="https://textbooks.cs.ksu.edu/cis400/c-exercises-s23/12-web-data/03-numerical-filters/embed.html"><meta property="og:site_name" content="K-State CIS 400 Textbook"><meta property="og:title" content="Numerical Filters :: K-State CIS 400 Textbook"><meta property="og:description" content="Let’s tackle one of the critics ratings next. While we could create categories and use checkboxes, this doesn’t capture the incremental values (i.e. 4.3), and it would be a lot of checkboxes for Rotten Tomatoes ratings! Instead, we’ll use a numerical filter, which limits our possible results to a range - between a minimum and maximum value.
Moreover, let’s clean up our Index page, as it is getting difficult to determine what filter(s) go together, and and are adding more."><meta property="og:locale" content="en-us"><meta property="og:type" content="article"><meta property="article:section" content="Exercises"><meta property="article:published_time" content="2018-08-24T10:53:26-05:00"><meta property="article:modified_time" content="2023-11-06T09:58:11-06:00"><meta itemprop=name content="Numerical Filters :: K-State CIS 400 Textbook"><meta itemprop=description content="Let’s tackle one of the critics ratings next. While we could create categories and use checkboxes, this doesn’t capture the incremental values (i.e. 4.3), and it would be a lot of checkboxes for Rotten Tomatoes ratings! Instead, we’ll use a numerical filter, which limits our possible results to a range - between a minimum and maximum value.
Moreover, let’s clean up our Index page, as it is getting difficult to determine what filter(s) go together, and and are adding more."><meta itemprop=datePublished content="2018-08-24T10:53:26-05:00"><meta itemprop=dateModified content="2023-11-06T09:58:11-06:00"><meta itemprop=wordCount content="1343"><title>Numerical Filters :: K-State CIS 400 Textbook</title>
<link href=https://textbooks.cs.ksu.edu/cis400/c-exercises-s23/12-web-data/03-numerical-filters/ rel=canonical type=text/html title="Numerical Filters :: K-State CIS 400 Textbook"><link href=/cis400/c-exercises-s23/12-web-data/03-numerical-filters/index.xml rel=alternate type=application/rss+xml title="Numerical Filters :: K-State CIS 400 Textbook"><link href=/cis400/c-exercises-s23/12-web-data/03-numerical-filters/index.print.html rel=alternate type=text/html title="Numerical Filters :: K-State CIS 400 Textbook"><link href=/cis400/c-exercises-s23/12-web-data/03-numerical-filters/tele.html rel=alternate type=text/html title="Numerical Filters :: K-State CIS 400 Textbook"><link href=/cis400/css/fontawesome-all.min.css?1731949278 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/cis400/css/fontawesome-all.min.css?1731949278 rel=stylesheet></noscript><link href=/cis400/css/nucleus.css?1731949278 rel=stylesheet><link href=/cis400/css/auto-complete.css?1731949278 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/cis400/css/auto-complete.css?1731949278 rel=stylesheet></noscript><link href=/cis400/css/perfect-scrollbar.min.css?1731949278 rel=stylesheet><link href=/cis400/css/fonts.css?1731949278 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/cis400/css/fonts.css?1731949278 rel=stylesheet></noscript><link href=/cis400/css/theme.css?1731949278 rel=stylesheet><link href=/cis400/css/theme-light-theme.css?1731949278 rel=stylesheet id=R-variant-style><link href=/cis400/css/chroma-relearn-light.css?1731949278 rel=stylesheet id=R-variant-chroma-style><link href=/cis400/css/variant.css?1731949278 rel=stylesheet><link href=/cis400/css/print.css?1731949278 rel=stylesheet media=print><script>window.relearn=window.relearn||{},window.relearn.relBasePath="../../..",window.relearn.relBaseUri="../../../..",window.relearn.absBaseUri="https://textbooks.cs.ksu.edu/cis400",window.index_js_url="/cis400/index.search.js",window.variants&&variants.init(["light-theme"]),window.T_Copy_to_clipboard=`Copy to clipboard`,window.T_Copied_to_clipboard=`Copied to clipboard!`,window.T_Copy_link_to_clipboard=`Copy link to clipboard`,window.T_Link_copied_to_clipboard=`Copied link to clipboard!`,window.T_Reset_view=`Reset view`,window.T_View_reset=`View reset!`,window.T_No_results_found=`No results found for "{0}"`,window.T_N_results_found=`{1} results found for "{0}"`</script><link href=/cis400/css/custom.css?1731949278 rel=stylesheet></head><body class="mobile-support embed disableInlineCopyToClipboard" data-url=/cis400/c-exercises-s23/12-web-data/03-numerical-filters/embed.html><div id=R-body class=default-animation><div id=R-body-overlay></div><div id=R-main-overlay></div><main id=R-body-inner class="highlightable default" tabindex=-1><div class=flex-block-wrapper><article class=default><p>Let&rsquo;s tackle one of the critics ratings next. While we could create categories and use checkboxes, this doesn&rsquo;t capture the incremental values (i.e. 4.3), and it would be a <em>lot</em> of checkboxes for Rotten Tomatoes ratings! Instead, we&rsquo;ll use a <em>numerical filter</em>, which limits our possible results to a range - between a minimum and maximum value.</p><p>Moreover, let&rsquo;s clean up our Index page, as it is getting difficult to determine what filter(s) go together, and and are adding more.</p><h2 id=refactoring-the-index-page>Refactoring the Index Page</h2><p>Let&rsquo;s move the filters to a column on the left, leave the search bar above, and show our results on the right. This will require refactoring our <em>Index.cshtml</em> file:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl>    <span class=p>&lt;</span><span class=n>form</span> <span class=n>id</span><span class=p>=</span><span class=s>&#34;movie-database&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=p>&lt;</span><span class=n>div</span> <span class=n>id</span><span class=p>=</span><span class=s>&#34;search&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>            <span class=p>&lt;</span><span class=n>input</span> <span class=n>type</span><span class=p>=</span><span class=s>&#34;text&#34;</span> <span class=n>name</span><span class=p>=</span><span class=s>&#34;SearchTerms&#34;</span> <span class=k>value</span><span class=p>=</span><span class=s>&#34;@Model.SearchTerms&#34;</span> <span class=p>/&gt;</span>
</span></span><span class=line><span class=cl>            <span class=p>&lt;</span><span class=n>input</span> <span class=n>type</span><span class=p>=</span><span class=s>&#34;submit&#34;</span> <span class=k>value</span><span class=p>=</span><span class=s>&#34;Search&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>        <span class=p>&lt;/</span><span class=n>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=p>&lt;</span><span class=n>div</span> <span class=n>id</span><span class=p>=</span><span class=s>&#34;filters&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>            <span class=p>&lt;</span><span class=n>h4</span><span class=p>&gt;</span><span class=n>MPAA</span> <span class=n>Rating</span><span class=p>&lt;/</span><span class=n>h4</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>            <span class=n>@foreach</span> <span class=p>(</span><span class=kt>string</span> <span class=n>rating</span> <span class=k>in</span> <span class=n>MovieDatabase</span><span class=p>.</span><span class=n>MPAARating</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=p>&lt;</span><span class=n>label</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>                    <span class=p>&lt;</span><span class=n>input</span> <span class=n>type</span><span class=p>=</span><span class=s>&#34;checkbox&#34;</span> <span class=n>name</span><span class=p>=</span><span class=s>&#34;MPAARatings&#34;</span> <span class=k>value</span><span class=p>=</span><span class=s>&#34;@rating&#34;</span> <span class=k>checked</span><span class=p>=</span><span class=s>&#34;@Model.MPAARatings.Contains(rating)&#34;</span> <span class=p>/&gt;</span>
</span></span><span class=line><span class=cl>                    <span class=n>@rating</span>
</span></span><span class=line><span class=cl>                <span class=p>&lt;/</span><span class=n>label</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>            <span class=p>&lt;</span><span class=n>h4</span><span class=p>&gt;</span><span class=n>Genre</span><span class=p>&lt;/</span><span class=n>h4</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>            <span class=n>@foreach</span> <span class=p>(</span><span class=kt>string</span> <span class=n>genre</span> <span class=k>in</span> <span class=n>MovieDatabase</span><span class=p>.</span><span class=n>Genres</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=p>&lt;</span><span class=n>label</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>                    <span class=p>&lt;</span><span class=n>input</span> <span class=n>type</span><span class=p>=</span><span class=s>&#34;checkbox&#34;</span> <span class=n>name</span><span class=p>=</span><span class=s>&#34;Genres&#34;</span> <span class=k>value</span><span class=p>=</span><span class=s>&#34;@genre&#34;</span> <span class=p>/&gt;</span>
</span></span><span class=line><span class=cl>                    <span class=n>@genre</span>
</span></span><span class=line><span class=cl>                <span class=p>&lt;/</span><span class=n>label</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>            <span class=p>&lt;</span><span class=n>h4</span><span class=p>&gt;</span><span class=n>IMDB</span> <span class=n>Rating</span><span class=p>&lt;/</span><span class=n>h4</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>            <span class=p>&lt;</span><span class=n>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>                <span class=n>Between</span>
</span></span><span class=line><span class=cl>                <span class=p>&lt;</span><span class=n>input</span> <span class=n>name</span><span class=p>=</span><span class=s>&#34;IMDBMin&#34;</span> <span class=n>type</span><span class=p>=</span><span class=s>&#34;number&#34;</span> <span class=n>min</span><span class=p>=</span><span class=s>&#34;0&#34;</span> <span class=n>max</span><span class=p>=</span><span class=s>&#34;10&#34;</span> <span class=n>step</span><span class=p>=</span><span class=s>&#34;0.1&#34;</span> <span class=n>placeholder</span><span class=p>=</span><span class=s>&#34;min&#34;</span><span class=p>/&gt;</span>
</span></span><span class=line><span class=cl>                <span class=n>and</span>
</span></span><span class=line><span class=cl>                <span class=p>&lt;</span><span class=n>input</span> <span class=n>name</span><span class=p>=</span><span class=s>&#34;IMDBMax&#34;</span> <span class=n>type</span><span class=p>=</span><span class=s>&#34;number&#34;</span> <span class=n>min</span><span class=p>=</span><span class=s>&#34;0&#34;</span> <span class=n>max</span><span class=p>=</span><span class=s>&#34;10&#34;</span> <span class=n>step</span><span class=p>=</span><span class=s>&#34;0.1&#34;</span> <span class=n>placeholder</span><span class=p>=</span><span class=s>&#34;max&#34;</span><span class=p>/&gt;</span>
</span></span><span class=line><span class=cl>            <span class=p>&lt;/</span><span class=n>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=p>&lt;/</span><span class=n>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=p>&lt;</span><span class=n>div</span> <span class=n>id</span><span class=p>=</span><span class=s>&#34;results&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>            <span class=p>&lt;</span><span class=n>h1</span><span class=p>&gt;</span><span class=n>Movie</span> <span class=n>Results</span><span class=p>&lt;/</span><span class=n>h1</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>            <span class=p>&lt;</span><span class=n>ul</span> <span class=n>class</span><span class=p>=</span><span class=s>&#34;movie-list&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>                <span class=n>@foreach</span> <span class=p>(</span><span class=n>Movie</span> <span class=n>movie</span> <span class=k>in</span> <span class=n>@Model</span><span class=p>.</span><span class=n>Movies</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                <span class=p>{</span>
</span></span><span class=line><span class=cl>                    <span class=p>&lt;</span><span class=n>li</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>                        <span class=p>&lt;</span><span class=n>div</span> <span class=n>class</span><span class=p>=</span><span class=s>&#34;details&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>                            <span class=p>&lt;</span><span class=n>h3</span> <span class=n>class</span><span class=p>=</span><span class=s>&#34;title&#34;</span><span class=p>&gt;</span><span class=n>@movie</span><span class=p>.</span><span class=n>Title</span><span class=p>&lt;/</span><span class=n>h3</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>                            <span class=p>&lt;</span><span class=n>div</span> <span class=n>class</span><span class=p>=</span><span class=s>&#34;mpaa&#34;</span><span class=p>&gt;</span><span class=n>@movie</span><span class=p>.</span><span class=n>MPAARating</span><span class=p>&lt;/</span><span class=n>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>                            <span class=p>&lt;</span><span class=n>div</span> <span class=n>class</span><span class=p>=</span><span class=s>&#34;genre&#34;</span><span class=p>&gt;</span><span class=n>@movie</span><span class=p>.</span><span class=n>MajorGenre</span><span class=p>&lt;/</span><span class=n>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>                        <span class=p>&lt;/</span><span class=n>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>                        <span class=p>&lt;</span><span class=n>div</span> <span class=n>class</span><span class=p>=</span><span class=s>&#34;ratings&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>                            <span class=n>@if</span> <span class=p>(</span><span class=n>movie</span><span class=p>.</span><span class=n>IMDBRating</span> <span class=p>!=</span> <span class=kc>null</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                            <span class=p>{</span>
</span></span><span class=line><span class=cl>                                <span class=p>&lt;</span><span class=n>div</span> <span class=n>class</span><span class=p>=</span><span class=s>&#34;imdb&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>                                    <span class=n>@movie</span><span class=p>.</span><span class=n>IMDBRating</span>
</span></span><span class=line><span class=cl>                                <span class=p>&lt;/</span><span class=n>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>                            <span class=p>}</span>
</span></span><span class=line><span class=cl>                            <span class=n>@if</span> <span class=p>(</span><span class=n>movie</span><span class=p>.</span><span class=n>RottenTomatoesRating</span> <span class=p>!=</span> <span class=kc>null</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                            <span class=p>{</span>
</span></span><span class=line><span class=cl>                                <span class=p>&lt;</span><span class=n>div</span> <span class=n>class</span><span class=p>=</span><span class=s>&#34;rotten-tomatoes&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>                                    <span class=n>@movie</span><span class=p>.</span><span class=n>RottenTomatoesRating</span>
</span></span><span class=line><span class=cl>                                <span class=p>&lt;/</span><span class=n>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>                            <span class=p>}</span>
</span></span><span class=line><span class=cl>                        <span class=p>&lt;/</span><span class=n>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>                    <span class=p>&lt;/</span><span class=n>li</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>                <span class=p>}</span>
</span></span><span class=line><span class=cl>            <span class=p>&lt;/</span><span class=n>ul</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>        <span class=p>&lt;/</span><span class=n>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=p>&lt;/</span><span class=n>form</span><span class=p>&gt;</span></span></span></code></pre></div><p>Most of this is simply moving elements around the page, but note that we are using inputs of <code>type=number</code> to represent our range of IMDB values. We can specify a minimum and maximum for this range, as well as an allowable increment. Also, we use the <code>placeholder</code> attribute to put text into the <code>input</code> until a value is added.</p><h2 id=adding-more-styles>Adding More Styles</h2><p>Now we&rsquo;ll need to add some rules to our <em>wwwroot/css/styles.css</em>. First, we&rsquo;ll use a <code>grid</code> for the layout of the form:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-css data-lang=css><span class=line><span class=cl><span class=nt>form</span><span class=p>#</span><span class=nn>movie-database</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>display</span><span class=p>:</span> <span class=k>grid</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>grid-template-columns</span><span class=p>:</span> <span class=mi>1</span><span class=n>fr</span> <span class=mi>3</span><span class=n>fr</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>grid-template-rows</span><span class=p>:</span> <span class=kc>auto</span> <span class=kc>auto</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div><p>The right column will be three times as big as the right.</p><p>We can make our search bar span both columns with <code>grid-column-start</code> and <code>grid-column-end</code>:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-css data-lang=css><span class=line><span class=cl><span class=p>#</span><span class=nn>search</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>grid-column-start</span><span class=p>:</span> <span class=mi>1</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>grid-column-end</span><span class=p>:</span> <span class=mi>3</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>text-align</span><span class=p>:</span> <span class=kc>center</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div><p>Notice too that for CSS, we start counting at 1, not 0. The filters and the results will fall in the next row automatically, each taking up their own respective grid cell. You can read more about the grid layout in <a href=https://css-tricks.com/snippets/css/complete-guide-grid/ rel=external target=_blank>A Complete Guide to Grid</a>.</p><p>Let&rsquo;s go ahead and use flexbox to lay out our filters in a column:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-css data-lang=css><span class=line><span class=cl><span class=p>#</span><span class=nn>filters</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>display</span><span class=p>:</span> <span class=kc>flex</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>flex-direction</span><span class=p>:</span> <span class=kc>column</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div><p>And make our number inputs bigger:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-css data-lang=css><span class=line><span class=cl><span class=p>#</span><span class=nn>filters</span> <span class=nt>input</span><span class=o>[</span><span class=nt>type</span><span class=o>=</span><span class=nt>number</span><span class=o>]</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>width</span><span class=p>:</span> <span class=mi>4</span><span class=kt>rem</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div><p>Notice the use of square brackets in our CSS Selector to only apply to inputs with type number.</p><p>Also, let&rsquo;s add a margin above and remove most of the margin below our <code>&lt;h4></code> elements:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-css data-lang=css><span class=line><span class=cl><span class=p>#</span><span class=nn>filters</span> <span class=nt>h4</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>margin-bottom</span><span class=p>:</span> <span class=mf>0.2</span><span class=kt>rem</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>margin-top</span><span class=p>:</span> <span class=mi>2</span><span class=kt>rem</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div><p>The resulting page looks much cleaner:</p><p><a href=#R-image-b7013a2f648209fa5cf89959fc66399e class=lightbox-link><img alt="The Styled Page" class="border lazy lightbox noshadow figure-image" loading=lazy src=/cis400/images/6.8.5.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-b7013a2f648209fa5cf89959fc66399e><img alt="The Styled Page" class="border lazy lightbox noshadow lightbox-image" loading=lazy src=/cis400/images/6.8.5.png></a></p><h2 id=capturing-the-filter-values>Capturing the Filter Values</h2><p>Now we need to get the filter values from our GET request query string. We could do this like we&rsquo;ve been doing before, with:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl>    <span class=n>Request</span><span class=p>.</span><span class=n>Query</span><span class=p>[</span><span class=s>&#34;IMDBMin&#34;</span><span class=p>];</span></span></span></code></pre></div><p>But the returned value would be a string, so we&rsquo;d need to parse it:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl>    <span class=n>IMDBMin</span> <span class=p>=</span> <span class=kt>double</span><span class=p>.</span><span class=n>Parse</span><span class=p>(</span><span class=n>Request</span><span class=p>.</span><span class=n>Query</span><span class=p>[</span><span class=s>&#34;IMDBMin&#34;</span><span class=p>]);</span></span></span></code></pre></div><p>If the query was <code>null</code>, then this would evaluate to <code>NaN</code>, which we wouldn&rsquo;t want to set our <code>&lt;input></code> to&mldr;</p><p>Instead, we&rsquo;ll look at some options built into the PageModel.</p><h2 id=parameter-binding>Parameter Binding</h2><p>The first of these options is <a href=https://docs.microsoft.com/en-us/aspnet/web-api/overview/formats-and-model-binding/parameter-binding-in-aspnet-web-api rel=external target=_blank><em>Parameter Binding</em></a>. In this approach, we define parameters to our <code>OnGet()</code> method to be parsed out of the request automatically, i.e.:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl>    <span class=cs>/// &lt;summary&gt;</span>
</span></span><span class=line><span class=cl>    <span class=cs>/// Gets the search results for display on the page</span>
</span></span><span class=line><span class=cl>    <span class=cs>/// &lt;/summary&gt;</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=k>void</span> <span class=n>OnGet</span><span class=p>(</span><span class=kt>string</span> <span class=n>SearchTerms</span><span class=p>,</span> <span class=kt>string</span><span class=p>[]</span> <span class=n>MPAARatings</span><span class=p>,</span> <span class=kt>string</span><span class=p>[]</span> <span class=n>Genres</span><span class=p>,</span> <span class=kt>double?</span> <span class=n>IMDBMin</span><span class=p>,</span> <span class=kt>double?</span> <span class=n>IMDBMax</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=p>.</span><span class=n>SearchTerms</span> <span class=p>=</span> <span class=n>SearchTerms</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=p>.</span><span class=n>MPAARatings</span> <span class=p>=</span> <span class=n>MPAARatings</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=p>.</span><span class=n>Genres</span> <span class=p>=</span> <span class=n>Genres</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=p>.</span><span class=n>IMDBMin</span> <span class=p>=</span> <span class=n>IMDBMin</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=p>.</span><span class=n>IMDBMax</span> <span class=p>=</span> <span class=n>IMDBMax</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=n>Movies</span> <span class=p>=</span> <span class=n>MovieDatabase</span><span class=p>.</span><span class=n>Search</span><span class=p>(</span><span class=n>SearchTerms</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=n>Movies</span> <span class=p>=</span> <span class=n>MovieDatabase</span><span class=p>.</span><span class=n>FilterByMPAARating</span><span class=p>(</span><span class=n>Movies</span><span class=p>,</span> <span class=n>MPAARatings</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=n>Movies</span> <span class=p>=</span> <span class=n>MovieDatabase</span><span class=p>.</span><span class=n>FilterByGenre</span><span class=p>(</span><span class=n>Movies</span><span class=p>,</span> <span class=n>Genres</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=n>Movies</span> <span class=p>=</span> <span class=n>MovieDatabase</span><span class=p>.</span><span class=n>FilterByIMDBRating</span><span class=p>(</span><span class=n>Movies</span><span class=p>,</span> <span class=n>IMDBMin</span><span class=p>,</span> <span class=n>IMDBMax</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span></span></span></code></pre></div><p>The benefit of this approach is that as long as C# knows a conversion into the type we specify, the conversion is done automatically. Note that the parameter name matches the <code>name</code> property of the corresponding <code>&lt;input></code> - this must be the case for the Razor Page to bind the parameter to the corresponding input value.</p><p>Note that we still need to assign these parameter values to the corresponding properties of our PageModel. If we don&rsquo;t, then those properties will all be <code>null</code>, and the <code>&lt;inputs></code> rendered on our page will always be blank.</p><h2 id=model-binding>Model Binding</h2><p>A second option is to use <a href="https://docs.microsoft.com/en-us/aspnet/core/mvc/models/model-binding?view=aspnetcore-3.1" rel=external target=_blank><em>Model Binding</em></a>. Model binding also automatically converts incoming form data, but in this case it binds directly to the properties of our PageModel. We indicate this form of binding with a <code>[BindProperty]</code> attribute, i.e.:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=kd>public</span> <span class=k>class</span> <span class=nc>IndexModel</span> <span class=p>:</span> <span class=n>PageModel</span> <span class=p>{</span>
</span></span><span class=line><span class=cl><span class=na>
</span></span></span><span class=line><span class=cl><span class=na>    [BindProperty(SupportsGet=true)]</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kt>string</span> <span class=n>SearchTerms</span> <span class=p>{</span><span class=k>get</span><span class=p>;</span> <span class=k>set</span><span class=p>;}</span>
</span></span><span class=line><span class=cl><span class=na>
</span></span></span><span class=line><span class=cl><span class=na>    [BindProperty(SupportsGet=true)]</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kt>string</span><span class=p>[]</span> <span class=n>MPAARatings</span> <span class=p>{</span><span class=k>get</span><span class=p>;</span> <span class=k>set</span><span class=p>;}</span>
</span></span><span class=line><span class=cl><span class=na>
</span></span></span><span class=line><span class=cl><span class=na>    [BindProperty(SupportsGet=true)]</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kt>string</span><span class=p>[]</span> <span class=n>Genres</span> <span class=p>{</span><span class=k>get</span><span class=p>;</span> <span class=k>set</span><span class=p>;}</span>
</span></span><span class=line><span class=cl><span class=na>
</span></span></span><span class=line><span class=cl><span class=na>    [BindProperty(SupportsGet=true)]</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kt>double?</span> <span class=n>IMDBMin</span> <span class=p>{</span><span class=k>get</span><span class=p>;</span> <span class=k>set</span><span class=p>;}</span>
</span></span><span class=line><span class=cl><span class=na>
</span></span></span><span class=line><span class=cl><span class=na>    [BindProperty(SupportsGet=true)]</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kt>double?</span> <span class=n>IMDBMax</span> <span class=p>{</span><span class=k>get</span><span class=p>;</span> <span class=k>set</span><span class=p>;}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=cs>/// &lt;summary&gt;</span>
</span></span><span class=line><span class=cl>    <span class=cs>/// Gets the search results for display on the page</span>
</span></span><span class=line><span class=cl>    <span class=cs>/// &lt;/summary&gt;</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=k>void</span> <span class=n>OnGet</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>Movies</span> <span class=p>=</span> <span class=n>MovieDatabase</span><span class=p>.</span><span class=n>Search</span><span class=p>(</span><span class=n>SearchTerms</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=n>Movies</span> <span class=p>=</span> <span class=n>MovieDatabase</span><span class=p>.</span><span class=n>FilterByMPAARating</span><span class=p>(</span><span class=n>Movies</span><span class=p>,</span> <span class=n>MPAARatings</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=n>Movies</span> <span class=p>=</span> <span class=n>MovieDatabase</span><span class=p>.</span><span class=n>FilterByGenre</span><span class=p>(</span><span class=n>Movies</span><span class=p>,</span> <span class=n>Genres</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=n>Movies</span> <span class=p>=</span> <span class=n>MovieDatabase</span><span class=p>.</span><span class=n>FilterByIMDBRating</span><span class=p>(</span><span class=n>Movies</span><span class=p>,</span> <span class=n>IMDBMin</span><span class=p>,</span> <span class=n>IMDBMax</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div><p>Note that with this approach, the incoming data is directly bound to the properties, so we don&rsquo;t need to do any special assignments within our <code>OnGet()</code> method. Also, note that we have to use <code>SupportsGet=true</code> in order for this binding to occur on GET requests (by default, model binding only happens with POST requests).</p><div class="box notices cstyle note"><div class=box-label><i class="fa-fw fas fa-exclamation-circle"></i> Note</div><div class=box-content><p>You only need to do <em>one</em> binding approach per property in a PageModel. I.e. you can just use the property decorator:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=kd>public</span> <span class=k>class</span> <span class=nc>SomePageModel</span> <span class=p>:</span> <span class=n>PageModel</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl><span class=na>    [BindProperty(SupportsGet=true)]</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kt>float</span> <span class=n>SomeProperty</span> <span class=p>{</span> <span class=k>get</span><span class=p>;</span> <span class=k>set</span><span class=p>;</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=k>void</span> <span class=n>OnGet</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>DoSomething</span><span class=p>(</span><span class=n>SomeProperty</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div><p><em>or</em> you might use parameter binding:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=kd>public</span> <span class=k>class</span> <span class=nc>SomePageModel</span> <span class=p>:</span> <span class=n>PageModel</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=k>void</span> <span class=n>OnGet</span><span class=p>(</span><span class=kt>float</span> <span class=n>SomeProperty</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>DoSomething</span><span class=p>(</span><span class=n>SomeProperty</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div><p><em>or</em> you can parse it from the request:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=kd>public</span> <span class=k>class</span> <span class=nc>SomePageModel</span> <span class=p>:</span> <span class=n>PageModel</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=k>void</span> <span class=n>OnGet</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=kt>var</span> <span class=n>someProperty</span> <span class=p>=</span> <span class=kt>float</span><span class=p>.</span><span class=n>Parse</span><span class=p>(</span><span class=n>Request</span><span class=p>.</span><span class=n>Query</span><span class=p>[</span><span class=s>&#34;SomeProperty&#34;</span><span class=p>]);</span>
</span></span><span class=line><span class=cl>        <span class=n>DoSomething</span><span class=p>(</span><span class=n>someProperty</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div><p>These are all <em>different means</em> of accessing the <em>same data</em> from the incoming request.</p></div></div><p>Now all we need to do is implement the actual filter.</p><h3 id=implementing-the-imdb-rating-filter>Implementing the IMDB Rating Filter</h3><p>We&rsquo;ll define the new filter in our <code>MovieDatabase</code> class as another static method:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl>    <span class=cs>/// &lt;summary&gt;</span>
</span></span><span class=line><span class=cl>    <span class=cs>/// Filters the provided collection of movies</span>
</span></span><span class=line><span class=cl>    <span class=cs>/// to those with IMDB ratings falling within</span>
</span></span><span class=line><span class=cl>    <span class=cs>/// the specified range</span>
</span></span><span class=line><span class=cl>    <span class=cs>/// &lt;/summary&gt;</span>
</span></span><span class=line><span class=cl>    <span class=cs>/// &lt;param name=&#34;movies&#34;&gt;The collection of movies to filter&lt;/param&gt;</span>
</span></span><span class=line><span class=cl>    <span class=cs>/// &lt;param name=&#34;min&#34;&gt;The minimum range value&lt;/param&gt;</span>
</span></span><span class=line><span class=cl>    <span class=cs>/// &lt;param name=&#34;max&#34;&gt;The maximum range value&lt;/param&gt;</span>
</span></span><span class=line><span class=cl>    <span class=cs>/// &lt;returns&gt;The filtered movie collection&lt;/returns&gt;</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kd>static</span> <span class=n>IEnumerable</span><span class=p>&lt;</span><span class=n>Movie</span><span class=p>&gt;</span> <span class=n>FilterByIMDBRating</span><span class=p>(</span><span class=n>IEnumerable</span><span class=p>&lt;</span><span class=n>Movie</span><span class=p>&gt;</span> <span class=n>movies</span><span class=p>,</span> <span class=kt>double?</span> <span class=n>min</span><span class=p>,</span> <span class=kt>double?</span> <span class=n>max</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=c1>// TODO: Filter movies</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span></span></span></code></pre></div><p>Notice that here too we use the nullable double value. So our first step is probably to do a <code>null</code> check:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl>    <span class=k>if</span> <span class=p>(</span><span class=n>min</span> <span class=p>==</span> <span class=kc>null</span> <span class=p>&amp;&amp;</span> <span class=n>max</span> <span class=p>==</span> <span class=kc>null</span><span class=p>)</span> <span class=k>return</span> <span class=n>movies</span><span class=p>;</span></span></span></code></pre></div><p>But what if only one is null? Should we filter for that part of the range? It wouldn&rsquo;t be hard to do:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl>    <span class=kt>var</span> <span class=n>results</span> <span class=p>=</span> <span class=k>new</span> <span class=n>List</span><span class=p>&lt;</span><span class=n>Movie</span><span class=p>&gt;();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// only a maximum specified</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span><span class=p>(</span><span class=n>min</span> <span class=p>==</span> <span class=kc>null</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>foreach</span><span class=p>(</span><span class=n>Movie</span> <span class=n>movie</span> <span class=k>in</span> <span class=n>movies</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=p>(</span><span class=n>movie</span><span class=p>.</span><span class=n>IMDBRating</span> <span class=p>&lt;=</span> <span class=n>max</span><span class=p>)</span> <span class=n>results</span><span class=p>.</span><span class=n>Add</span><span class=p>(</span><span class=n>movie</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>results</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span></span></span></code></pre></div><p>And the minimum would mirror that:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl>    <span class=c1>// only a minimum specified</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span><span class=p>(</span><span class=n>max</span> <span class=p>==</span> <span class=kc>null</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>foreach</span><span class=p>(</span><span class=n>Movie</span> <span class=n>movie</span> <span class=k>in</span> <span class=n>movies</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=p>(</span><span class=n>movie</span><span class=p>.</span><span class=n>IMDBRating</span> <span class=p>&gt;=</span> <span class=n>min</span><span class=p>)</span> <span class=n>results</span><span class=p>.</span><span class=n>Add</span><span class=p>(</span><span class=n>movie</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>results</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span></span></span></code></pre></div><p>Finally, we could handle the case where we have both a min and max value to our range:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl>    <span class=c1>// Both minimum and maximum specified</span>
</span></span><span class=line><span class=cl>    <span class=k>foreach</span><span class=p>(</span><span class=n>Movie</span> <span class=n>movie</span> <span class=k>in</span> <span class=n>movies</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span><span class=p>(</span><span class=n>movie</span><span class=p>.</span><span class=n>IMDBRating</span> <span class=p>&gt;=</span> <span class=n>min</span> <span class=p>&amp;&amp;</span> <span class=n>movie</span><span class=p>.</span><span class=n>IMDBRating</span> <span class=p>&lt;=</span> <span class=n>max</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=n>results</span><span class=p>.</span><span class=n>Add</span><span class=p>(</span><span class=n>movie</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>results</span><span class=p>;</span></span></span></code></pre></div><p>Notice too, that in each of these cases we&rsquo;re treating the range as <em>inclusive</em> (including the specified minimum and maximum). This is the behavior most casual internet users will expect. If the database and user expectations are different for your audience, you&rsquo;d want your code to match that expectation.</p><p>Now we can filter by IMDB rating:</p><p><a href=#R-image-d5eadae6f1c9e36732fc4bc4bae1a261 class=lightbox-link><img alt="Filtering By IMDB" class="border lazy lightbox noshadow figure-image" loading=lazy src=/cis400/images/6.8.6.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-d5eadae6f1c9e36732fc4bc4bae1a261><img alt="Filtering By IMDB" class="border lazy lightbox noshadow lightbox-image" loading=lazy src=/cis400/images/6.8.6.png></a></p><h2 id=finishing-up>Finishing Up</h2><p>Since we&rsquo;re displaying the Rotten Tomatoes rating, we should probably also have a filter for it. This will work almost exactly like the IMDB rating - but with the range from 0 to 100. I&rsquo;ll leave this as an exercise for the reader.</p><footer class=footline></footer></article></div></main></div><script src=/cis400/js/clipboard.min.js?1731949278 defer></script><script src=/cis400/js/perfect-scrollbar.min.js?1731949278 defer></script><script src=/cis400/js/theme.js?1731949278 defer></script><script src=/cis400/js/embed-iframe.js?1731949278 defer></script></body></html>