




	
	
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		
		

	
	
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		
		

	
	
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		
		
<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="height=device-height, width=device-width, initial-scale=1.0, minimum-scale=1.0">
    <meta name="generator" content="Hugo 0.117.0">
    <meta name="generator" content="Relearn 5.18.0">
    <meta name="description" content="K-State CIS 400 Textbook">
    <meta name="author" content="Nathan Bean">
    <title>Numerical Filters :: K-State CIS 400 Textbook</title>
    <link href="https://ksu-cs-textbooks.github.io/cis400/c-exercises-s23/12-web-data/03-numerical-filters-edit2/index.html" rel="canonical" type="text/html" title="Numerical Filters :: K-State CIS 400 Textbook">
    <link href="https://ksu-cs-textbooks.github.io/cis400/c-exercises-s23/12-web-data/03-numerical-filters-edit2/index.xml" rel="alternate" type="application/rss+xml" title="Numerical Filters :: K-State CIS 400 Textbook">
    <link href="https://ksu-cs-textbooks.github.io/cis400/c-exercises-s23/12-web-data/03-numerical-filters-edit2/index.print.html" rel="alternate" type="text/html" title="Numerical Filters :: K-State CIS 400 Textbook">
    <link href="https://ksu-cs-textbooks.github.io/cis400/c-exercises-s23/12-web-data/03-numerical-filters-edit2/embed.html" rel="alternate" type="text/html" title="Numerical Filters :: K-State CIS 400 Textbook">
    <!-- https://github.com/filamentgroup/loadCSS/blob/master/README.md#how-to-use -->
    <link href="https://ksu-cs-textbooks.github.io/cis400/css/fontawesome-all.min.css?1714501683" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="https://ksu-cs-textbooks.github.io/cis400/css/fontawesome-all.min.css?1714501683" rel="stylesheet"></noscript>
    <link href="https://ksu-cs-textbooks.github.io/cis400/css/nucleus.css?1714501683" rel="stylesheet">
    <link href="https://ksu-cs-textbooks.github.io/cis400/css/auto-complete.css?1714501683" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="https://ksu-cs-textbooks.github.io/cis400/css/auto-complete.css?1714501683" rel="stylesheet"></noscript>
    <link href="https://ksu-cs-textbooks.github.io/cis400/css/perfect-scrollbar.min.css?1714501683" rel="stylesheet">
    <link href="https://ksu-cs-textbooks.github.io/cis400/css/fonts.css?1714501683" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="https://ksu-cs-textbooks.github.io/cis400/css/fonts.css?1714501683" rel="stylesheet"></noscript>
    <link href="https://ksu-cs-textbooks.github.io/cis400/css/theme.css?1714501683" rel="stylesheet">
    <link href="https://ksu-cs-textbooks.github.io/cis400/css/theme-auto.css?1714501683" rel="stylesheet" id="variant-style">
    <link href="https://ksu-cs-textbooks.github.io/cis400/css/variant.css?1714501683" rel="stylesheet">
    <link href="https://ksu-cs-textbooks.github.io/cis400/css/print.css?1714501683" rel="stylesheet" media="print">
    <link href="https://ksu-cs-textbooks.github.io/cis400/css/ie.css?1714501683" rel="stylesheet">
    <script src="https://ksu-cs-textbooks.github.io/cis400/js/url.js?1714501683"></script>
    <script src="https://ksu-cs-textbooks.github.io/cis400/js/variant.js?1714501683"></script>
    <script>
      // hack to let hugo tell us how to get to the root when using relativeURLs, it needs to be called *url= for it to do its magic:
      // https://github.com/gohugoio/hugo/blob/145b3fcce35fbac25c7033c91c1b7ae6d1179da8/transform/urlreplacers/absurlreplacer.go#L72
      window.index_js_url="https://ksu-cs-textbooks.github.io/cis400/index.search.js";
      var root_url="https://ksu-cs-textbooks.github.io/cis400/";
      var baseUri=root_url.replace(/\/$/, '');
      // translations
      window.T_Copy_to_clipboard = 'Copy to clipboard';
      window.T_Copied_to_clipboard = 'Copied to clipboard!';
      window.T_Copy_link_to_clipboard = 'Copy link to clipboard';
      window.T_Link_copied_to_clipboard = 'Copied link to clipboard!';
      window.T_No_results_found = 'No results found for \u0022{0}\u0022';
      window.T_N_results_found = '{1} results found for \u0022{0}\u0022';
      // some further base stuff
      var baseUriFull='https:\/\/ksu-cs-textbooks.github.io\/cis400/';
      window.variants && variants.init( [ 'auto', 'light-theme', 'dark-theme' ] );
    </script>
    
    <link href="https://ksu-cs-textbooks.github.io/cis400/css/custom.css?1714501683" rel="stylesheet">

  </head>
  <body class="mobile-support tele disableInlineCopyToClipboard" data-url="https://ksu-cs-textbooks.github.io/cis400/c-exercises-s23/12-web-data/03-numerical-filters-edit2/index.html">
    
    <div id="tele" class="tele mirror">
    
    <div id="body" class="default-animation">
      
      
      
      <main id="body-inner" class="highlightable default" tabindex="-1">
        <div class="flex-block-wrapper">
          <article class="default">
            <header class="headline">
            </header>
<h1 id="numerical-filters">Numerical Filters</h1>

<p>Let&rsquo;s tackle one of the critics ratings next.  While we could create categories and use checkboxes, this doesn&rsquo;t capture the incremental values (i.e. 4.3), and it would be a <em>lot</em> of checkboxes for Rotten Tomatoes ratings!  Instead, we&rsquo;ll use a <em>numerical filter</em>, which limits our possible results to a range - between a minimum and maximum value.</p>
<p>Moreover, let&rsquo;s clean up our Index page, as it is getting difficult to determine what filter(s) go together, and and are adding more.</p>
<h2 id="refactoring-the-index-page">Refactoring the Index Page</h2>
<p>Let&rsquo;s move the filters to a column on the left, leave the search bar above, and show our results on the right.  This will require refactoring our <em>Index.cshtml</em> file:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>    &lt;form id=<span style="color:#e6db74">&#34;movie-database&#34;</span>&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        &lt;div id=<span style="color:#e6db74">&#34;search&#34;</span>&gt;
</span></span><span style="display:flex;"><span>            &lt;input type=<span style="color:#e6db74">&#34;text&#34;</span> name=<span style="color:#e6db74">&#34;SearchTerms&#34;</span> <span style="color:#66d9ef">value</span>=<span style="color:#e6db74">&#34;@Model.SearchTerms&#34;</span> /&gt;
</span></span><span style="display:flex;"><span>            &lt;input type=<span style="color:#e6db74">&#34;submit&#34;</span> <span style="color:#66d9ef">value</span>=<span style="color:#e6db74">&#34;Search&#34;</span>&gt;
</span></span><span style="display:flex;"><span>        &lt;/div&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        &lt;div id=<span style="color:#e6db74">&#34;filters&#34;</span>&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            &lt;h4&gt;MPAA Rating&lt;/h4&gt;
</span></span><span style="display:flex;"><span>            @foreach (<span style="color:#66d9ef">string</span> rating <span style="color:#66d9ef">in</span> MovieDatabase.MPAARatings)
</span></span><span style="display:flex;"><span>            {
</span></span><span style="display:flex;"><span>                &lt;label&gt;
</span></span><span style="display:flex;"><span>                    &lt;input type=<span style="color:#e6db74">&#34;checkbox&#34;</span> name=<span style="color:#e6db74">&#34;MPAARatings&#34;</span> <span style="color:#66d9ef">value</span>=<span style="color:#e6db74">&#34;@rating&#34;</span> <span style="color:#66d9ef">checked</span>=<span style="color:#e6db74">&#34;@Model.MPAARatings.Contains(rating)&#34;</span> /&gt;
</span></span><span style="display:flex;"><span>                    @rating
</span></span><span style="display:flex;"><span>                &lt;/label&gt;
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            &lt;h4&gt;Genre&lt;/h4&gt;
</span></span><span style="display:flex;"><span>            @foreach (<span style="color:#66d9ef">string</span> genre <span style="color:#66d9ef">in</span> MovieDatabase.Genres)
</span></span><span style="display:flex;"><span>            {
</span></span><span style="display:flex;"><span>                &lt;label&gt;
</span></span><span style="display:flex;"><span>                    &lt;input type=<span style="color:#e6db74">&#34;checkbox&#34;</span> name=<span style="color:#e6db74">&#34;Genres&#34;</span> <span style="color:#66d9ef">value</span>=<span style="color:#e6db74">&#34;@genre&#34;</span> /&gt;
</span></span><span style="display:flex;"><span>                    @genre
</span></span><span style="display:flex;"><span>                &lt;/label&gt;
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            &lt;h4&gt;IMDB Rating&lt;/h4&gt;
</span></span><span style="display:flex;"><span>            &lt;div&gt;
</span></span><span style="display:flex;"><span>                Between
</span></span><span style="display:flex;"><span>                &lt;input name=<span style="color:#e6db74">&#34;IMDBMin&#34;</span> type=<span style="color:#e6db74">&#34;number&#34;</span> min=<span style="color:#e6db74">&#34;0&#34;</span> max=<span style="color:#e6db74">&#34;10&#34;</span> step=<span style="color:#e6db74">&#34;0.1&#34;</span> placeholder=<span style="color:#e6db74">&#34;min&#34;</span>/&gt;
</span></span><span style="display:flex;"><span>                and
</span></span><span style="display:flex;"><span>                &lt;input name=<span style="color:#e6db74">&#34;IMDBMax&#34;</span> type=<span style="color:#e6db74">&#34;number&#34;</span> min=<span style="color:#e6db74">&#34;0&#34;</span> max=<span style="color:#e6db74">&#34;10&#34;</span> step=<span style="color:#e6db74">&#34;0.1&#34;</span> placeholder=<span style="color:#e6db74">&#34;max&#34;</span>/&gt;
</span></span><span style="display:flex;"><span>            &lt;/div&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        &lt;/div&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        &lt;div id=<span style="color:#e6db74">&#34;results&#34;</span>&gt;
</span></span><span style="display:flex;"><span>            &lt;h1&gt;Movie Results&lt;/h1&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            &lt;ul class=<span style="color:#e6db74">&#34;movie-list&#34;</span>&gt;
</span></span><span style="display:flex;"><span>                @foreach (Movie movie <span style="color:#66d9ef">in</span> @Model.Movies)
</span></span><span style="display:flex;"><span>                {
</span></span><span style="display:flex;"><span>                    &lt;li&gt;
</span></span><span style="display:flex;"><span>                        &lt;div class=<span style="color:#e6db74">&#34;details&#34;</span>&gt;
</span></span><span style="display:flex;"><span>                            &lt;h3 class=<span style="color:#e6db74">&#34;title&#34;</span>&gt;@movie.Title&lt;/h3&gt;
</span></span><span style="display:flex;"><span>                            &lt;div class=<span style="color:#e6db74">&#34;mpaa&#34;</span>&gt;@movie.MPAARating&lt;/div&gt;
</span></span><span style="display:flex;"><span>                            &lt;div class=<span style="color:#e6db74">&#34;genre&#34;</span>&gt;@movie.MajorGenre&lt;/div&gt;
</span></span><span style="display:flex;"><span>                        &lt;/div&gt;
</span></span><span style="display:flex;"><span>                        &lt;div class=<span style="color:#e6db74">&#34;ratings&#34;</span>&gt;
</span></span><span style="display:flex;"><span>                            @if (movie.IMDBRating != <span style="color:#66d9ef">null</span>)
</span></span><span style="display:flex;"><span>                            {
</span></span><span style="display:flex;"><span>                                &lt;div class=<span style="color:#e6db74">&#34;imdb&#34;</span>&gt;
</span></span><span style="display:flex;"><span>                                    @movie.IMDBRating
</span></span><span style="display:flex;"><span>                                &lt;/div&gt;
</span></span><span style="display:flex;"><span>                            }
</span></span><span style="display:flex;"><span>                            @if (movie.RottenTomatoesRating != <span style="color:#66d9ef">null</span>)
</span></span><span style="display:flex;"><span>                            {
</span></span><span style="display:flex;"><span>                                &lt;div class=<span style="color:#e6db74">&#34;rotten-tomatoes&#34;</span>&gt;
</span></span><span style="display:flex;"><span>                                    @movie.RottenTomatoesRating
</span></span><span style="display:flex;"><span>                                &lt;/div&gt;
</span></span><span style="display:flex;"><span>                            }
</span></span><span style="display:flex;"><span>                        &lt;/div&gt;
</span></span><span style="display:flex;"><span>                    &lt;/li&gt;
</span></span><span style="display:flex;"><span>                }
</span></span><span style="display:flex;"><span>            &lt;/ul&gt;
</span></span><span style="display:flex;"><span>        &lt;/div&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    &lt;/form&gt;</span></span></code></pre></div><p>Most of this is simply moving elements around the page, but note that we are using inputs of <code>type=number</code> to represent our range of IMDB values.  We can specify a minimum and maximum for this range, as well as an allowable increment.  Also, we use the <code>placeholder</code> attribute to put text into the <code>input</code> until a value is added.</p>
<h2 id="adding-more-styles">Adding More Styles</h2>
<p>Now we&rsquo;ll need to add some rules to our <em>wwwroot/css/styles.css</em>.  First, we&rsquo;ll use a <code>grid</code> for the layout of the form:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-css" data-lang="css"><span style="display:flex;"><span><span style="color:#f92672">form</span>#movie-database {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">display</span>: <span style="color:#66d9ef">grid</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">grid-template-columns</span>: <span style="color:#ae81ff">1</span>fr <span style="color:#ae81ff">3</span>fr;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">grid-template-rows</span>: <span style="color:#66d9ef">auto</span> <span style="color:#66d9ef">auto</span>;
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>The right column will be three times as big as the left.</p>
<p>We can make our search bar span both columns with <code>grid-column-start</code> and <code>grid-column-end</code>:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-css" data-lang="css"><span style="display:flex;"><span>#search {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">grid-column-start</span>: <span style="color:#ae81ff">1</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">grid-column-end</span>: <span style="color:#ae81ff">3</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">text-align</span>: <span style="color:#66d9ef">center</span>;
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>Notice too that for CSS, we start counting at 1, not 0.  The filters and the results will fall in the next row automatically, each taking up their own respective grid cell.  You can read more about the grid layout in <a href="https://css-tricks.com/snippets/css/complete-guide-grid/" target="_blank">A Complete Guide to Grid</a>
.</p>
<p>Let&rsquo;s go ahead and use flexbox to lay out our filters in a column:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-css" data-lang="css"><span style="display:flex;"><span>#filters {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">display</span>: <span style="color:#66d9ef">flex</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">flex-direction</span>: <span style="color:#66d9ef">column</span>;
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>And make our number inputs bigger:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-css" data-lang="css"><span style="display:flex;"><span>#filters <span style="color:#f92672">input</span><span style="color:#f92672">[</span><span style="color:#f92672">type</span><span style="color:#f92672">=</span><span style="color:#f92672">number</span><span style="color:#f92672">]</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">width</span>: <span style="color:#ae81ff">4</span><span style="color:#66d9ef">rem</span>;
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>Notice the use of square brackets in our CSS Selector to only apply to inputs with type number.</p>
<p>Also, let&rsquo;s add a margin above and remove most of the margin below our <code>&lt;h4&gt;</code> elements:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-css" data-lang="css"><span style="display:flex;"><span>#filters <span style="color:#f92672">h4</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">margin-bottom</span>: <span style="color:#ae81ff">0.2</span><span style="color:#66d9ef">rem</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">margin-top</span>: <span style="color:#ae81ff">2</span><span style="color:#66d9ef">rem</span>;
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>The resulting page looks much cleaner:</p>
<p>
<a href="#image-e789fc3adc28751ff6cb706cd65d119d" class="lightbox-link">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/6.8.5.png" alt="The Styled Page" style="height: auto; width: auto;" loading="lazy">
</a>
<a href="javascript:history.back();" class="lightbox" id="image-e789fc3adc28751ff6cb706cd65d119d">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/6.8.5.png" alt="The Styled Page" class="lightbox-image" loading="lazy">
</a></p>
<h2 id="capturing-the-filter-values">Capturing the Filter Values</h2>
<p>Now we need to get the filter values from our GET request query string.  We could do this like we&rsquo;ve been doing before, with:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>    Request.Query[<span style="color:#e6db74">&#34;IMDBMin&#34;</span>];</span></span></code></pre></div><p>But the returned value would be a string, so we&rsquo;d need to parse it:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>    IMDBMin = <span style="color:#66d9ef">double</span>.Parse(Request.Query[<span style="color:#e6db74">&#34;IMDBMin&#34;</span>]);</span></span></code></pre></div><p>If the query was <code>null</code>, then this would evaluate to <code>NaN</code>, which we wouldn&rsquo;t want to set our <code>&lt;input&gt;</code> to&hellip;</p>
<p>Instead, we&rsquo;ll look at some options built into the PageModel.</p>
<h2 id="parameter-binding">Parameter Binding</h2>
<p>The first of these options is <a href="https://docs.microsoft.com/en-us/aspnet/web-api/overview/formats-and-model-binding/parameter-binding-in-aspnet-web-api" target="_blank"><em>Parameter Binding</em></a>
.  In this approach, we define parameters to our <code>OnGet()</code> method to be parsed out of the request automatically, i.e.:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// Gets the search results for display on the page</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> OnGet(<span style="color:#66d9ef">string</span> SearchTerms, <span style="color:#66d9ef">string</span>[] MPAARatings, <span style="color:#66d9ef">string</span>[] Genres, <span style="color:#66d9ef">double?</span> IMDBMin, <span style="color:#66d9ef">double?</span> IMDBMax) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">this</span>.SearchTerms = SearchTerms;
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">this</span>.MPAARatings = MPAARatings;
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">this</span>.Genres = Genres;
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">this</span>.IMDBMin = IMDBMin;
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">this</span>.IMDBMax = IMDBMax;
</span></span><span style="display:flex;"><span>        Movies = MovieDatabase.Search(SearchTerms);
</span></span><span style="display:flex;"><span>        Movies = MovieDatabase.FilterByMPAARating(Movies, MPAARatings);
</span></span><span style="display:flex;"><span>        Movies = MovieDatabase.FilterByGenre(Movies, Genres);
</span></span><span style="display:flex;"><span>        Movies = MovieDatabase.FilterByIMDBRating(Movies, IMDBMin, IMDBMax);
</span></span><span style="display:flex;"><span>    }</span></span></code></pre></div><p>The benefit of this approach is that as long as C# knows a conversion into the type we specify, the conversion is done automatically.  Note that the parameter name matches the <code>name</code> property of the corresponding <code>&lt;input&gt;</code> - this must be the case for the Razor Page to bind the parameter to the corresponding input value.</p>
<p>Note that we still need to assign these parameter values to the corresponding properties of our PageModel.  If we don&rsquo;t, then those properties will all be <code>null</code>, and the <code>&lt;inputs&gt;</code> rendered on our page will always be blank.</p>
<h2 id="model-binding">Model Binding</h2>
<p>A second option is to use <a href="https://docs.microsoft.com/en-us/aspnet/core/mvc/models/model-binding?view=aspnetcore-3.1" target="_blank"><em>Model Binding</em></a>
.  Model binding also automatically converts incoming form data, but in this case it binds directly to the properties of our PageModel.  We indicate this form of binding with a <code>[BindProperty]</code> attribute, i.e.:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">IndexModel</span> : PageModel {
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">
</span></span></span><span style="display:flex;"><span><span style="color:#a6e22e">    [BindProperty(SupportsGet=true)]</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">string</span> SearchTerms {<span style="color:#66d9ef">get</span>; <span style="color:#66d9ef">set</span>;}
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">
</span></span></span><span style="display:flex;"><span><span style="color:#a6e22e">    [BindProperty(SupportsGet=true)]</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">string</span>[] MPAARatings {<span style="color:#66d9ef">get</span>; <span style="color:#66d9ef">set</span>;}
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">
</span></span></span><span style="display:flex;"><span><span style="color:#a6e22e">    [BindProperty(SupportsGet=true)]</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">string</span>[] Genres {<span style="color:#66d9ef">get</span>; <span style="color:#66d9ef">set</span>;}
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">
</span></span></span><span style="display:flex;"><span><span style="color:#a6e22e">    [BindProperty(SupportsGet=true)]</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">double?</span> IMDBMin {<span style="color:#66d9ef">get</span>; <span style="color:#66d9ef">set</span>;}
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">
</span></span></span><span style="display:flex;"><span><span style="color:#a6e22e">    [BindProperty(SupportsGet=true)]</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">double?</span> IMDBMax {<span style="color:#66d9ef">get</span>; <span style="color:#66d9ef">set</span>;}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// Gets the search results for display on the page</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> OnGet() {
</span></span><span style="display:flex;"><span>        Movies = MovieDatabase.Search(SearchTerms);
</span></span><span style="display:flex;"><span>        Movies = MovieDatabase.FilterByMPAARating(Movies, MPAARatings);
</span></span><span style="display:flex;"><span>        Movies = MovieDatabase.FilterByGenre(Movies, Genres);
</span></span><span style="display:flex;"><span>        Movies = MovieDatabase.FilterByIMDBRating(Movies, IMDBMin, IMDBMax);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>Note that with this approach, the incoming data is directly bound to the properties, so we don&rsquo;t need to do any special assignments within our <code>OnGet()</code> method.  Also, note that we have to use <code>SupportsGet=true</code> in order for this binding to occur on GET requests (by default, model binding only happens with POST requests).</p>

  
  
<div class="box notices cstyle note">
  <div class="box-label"><i class="fa-fw fas fa-exclamation-circle"></i> Note</div>
  <div class="box-content">

<p>You only need to do <em>one</em> binding approach per property in a PageModel.  I.e. you can just use the property decorator:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">SomePageModel</span> : PageModel
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">    [BindProperty(SupportsGet=true)]</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">float</span> SomeProperty { <span style="color:#66d9ef">get</span>; <span style="color:#66d9ef">set</span>; }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> OnGet() {
</span></span><span style="display:flex;"><span>        DoSomething(SomeProperty);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p><em>or</em> you might use parameter binding:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">SomePageModel</span> : PageModel
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> OnGet(<span style="color:#66d9ef">float</span> SomeProperty) {
</span></span><span style="display:flex;"><span>        DoSomething(SomeProperty);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p><em>or</em> you can parse it from the request:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">SomePageModel</span> : PageModel
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> OnGet() {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">var</span> someProperty = <span style="color:#66d9ef">float</span>.Parse(Request.Query[<span style="color:#e6db74">&#34;SomeProperty&#34;</span>]);
</span></span><span style="display:flex;"><span>        DoSomething(someProperty);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>These are all <em>different means</em> of accessing the <em>same data</em> from the incoming request.</p>
</div>
</div>
<p>Now all we need to do is implement the actual filter.</p>
<h3 id="implementing-the-imdb-rating-filter">Implementing the IMDB Rating Filter</h3>
<p>We&rsquo;ll define the new filter in our <code>MovieDatabase</code> class as another static method:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// Filters the provided collection of movies</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// to those with IMDB ratings falling within</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// the specified range</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;param name=&#34;movies&#34;&gt;The collection of movies to filter&lt;/param&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;param name=&#34;min&#34;&gt;The minimum range value&lt;/param&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;param name=&#34;max&#34;&gt;The maximum range value&lt;/param&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;returns&gt;The filtered movie collection&lt;/returns&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> IEnumerable&lt;Movie&gt; FilterByIMDBRating(IEnumerable&lt;Movie&gt; movies, <span style="color:#66d9ef">double?</span> min, <span style="color:#66d9ef">double?</span> max)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// TODO: Filter movies</span>
</span></span><span style="display:flex;"><span>    }</span></span></code></pre></div><p>Notice that here too we use the nullable double value.  So our first step is probably to do a <code>null</code> check:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> (min == <span style="color:#66d9ef">null</span> &amp;&amp; max == <span style="color:#66d9ef">null</span>) <span style="color:#66d9ef">return</span> movies;</span></span></code></pre></div><p>But what if only one is null?  Should we filter for that part of the range?  It wouldn&rsquo;t be hard to do:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>    <span style="color:#66d9ef">var</span> results = <span style="color:#66d9ef">new</span> List&lt;Movie&gt;();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// only a maximum specified</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span>(min == <span style="color:#66d9ef">null</span>)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">foreach</span>(Movie movie <span style="color:#66d9ef">in</span> movies)
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">if</span> (movie.IMDBRating &lt;= max) results.Add(movie);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> results;
</span></span><span style="display:flex;"><span>    }</span></span></code></pre></div><p>And the minimum would mirror that:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>    <span style="color:#75715e">// only a minimum specified</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span>(max == <span style="color:#66d9ef">null</span>)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">foreach</span>(Movie movie <span style="color:#66d9ef">in</span> movies)
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">if</span> (movie.IMDBRating &gt;= min) results.Add(movie);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> results;
</span></span><span style="display:flex;"><span>    }</span></span></code></pre></div><p>Finally, we could handle the case where we have both a min and max value to our range:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>    <span style="color:#75715e">// Both minimum and maximum specified</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">foreach</span>(Movie movie <span style="color:#66d9ef">in</span> movies)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span>(movie.IMDBRating &gt;= min &amp;&amp; movie.IMDBRating &lt;= max)
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            results.Add(movie);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> results;</span></span></code></pre></div><p>Notice too, that in each of these cases we&rsquo;re treating the range as <em>inclusive</em> (including the specified minimum and maximum).  This is the behavior most casual internet users will expect.  If the database and user expectations are different for your audience, you&rsquo;d want your code to match that expectation.</p>
<p>Now we can filter by IMDB rating:</p>
<p>
<a href="#image-06b97ea3234578a6ece6e72bec71b33a" class="lightbox-link">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/6.8.6.png" alt="Filtering By IMDB" style="height: auto; width: auto;" loading="lazy">
</a>
<a href="javascript:history.back();" class="lightbox" id="image-06b97ea3234578a6ece6e72bec71b33a">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/6.8.6.png" alt="Filtering By IMDB" class="lightbox-image" loading="lazy">
</a></p>
<h2 id="finishing-up">Finishing Up</h2>
<p>Since we&rsquo;re displaying the Rotten Tomatoes rating, we should probably also have a filter for it.  This will work almost exactly like the IMDB rating - but with the range from 0 to 100.  I&rsquo;ll leave this as an exercise for the reader.</p>

            <footer class="footline">

            </footer>
          </article>
        </div>
      </main>
    </div>
    
    </div>
    
    
    
    
    <script src="https://ksu-cs-textbooks.github.io/cis400/js/clipboard.min.js?1714501687" defer></script>
    <script src="https://ksu-cs-textbooks.github.io/cis400/js/perfect-scrollbar.min.js?1714501687" defer></script>
    <script src="https://ksu-cs-textbooks.github.io/cis400/js/theme.js?1714501687" defer></script>
    
    <script src="https://ksu-cs-textbooks.github.io/cis400/js/tele-scroll.js?1714501687 defer"></script>
    
  </body>
</html>
