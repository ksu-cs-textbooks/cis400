<!doctype html><html lang=en-us dir=ltr itemscope itemtype=http://schema.org/Article><head><meta charset=utf-8><meta name=viewport content="height=device-height,width=device-width,initial-scale=1,minimum-scale=1"><meta name=generator content="Hugo 0.128.0"><meta name=generator content="Relearn 6.0.0"><meta name=description content="While events exist in Windows Forms, Windows Presentation Foundation adds a twist with their concept of routed events. Routed events are similar to regular C# events, but provide additional functionality. One of the most important of these is the ability of the routed event to “bubble” up the elements tree. Essentially, the event will be passed up each successive WPF element until one chooses to “handle” it, or the top of the tree is reached (in which case the event is ignored)."><meta name=author content="Nathan Bean"><meta name=twitter:card content="summary"><meta name=twitter:title content="Routed Events :: K-State CIS 400 Textbook"><meta name=twitter:description content="While events exist in Windows Forms, Windows Presentation Foundation adds a twist with their concept of routed events. Routed events are similar to regular C# events, but provide additional functionality. One of the most important of these is the ability of the routed event to “bubble” up the elements tree. Essentially, the event will be passed up each successive WPF element until one chooses to “handle” it, or the top of the tree is reached (in which case the event is ignored)."><meta property="og:url" content="https://textbooks.cs.ksu.edu/cis400/2-desktop-development/03-events/08-routed-events/"><meta property="og:site_name" content="K-State CIS 400 Textbook"><meta property="og:title" content="Routed Events :: K-State CIS 400 Textbook"><meta property="og:description" content="While events exist in Windows Forms, Windows Presentation Foundation adds a twist with their concept of routed events. Routed events are similar to regular C# events, but provide additional functionality. One of the most important of these is the ability of the routed event to “bubble” up the elements tree. Essentially, the event will be passed up each successive WPF element until one chooses to “handle” it, or the top of the tree is reached (in which case the event is ignored)."><meta property="og:locale" content="en-us"><meta property="og:type" content="article"><meta property="article:section" content="Desktop Development"><meta property="article:published_time" content="2018-08-24T10:53:26-05:00"><meta property="article:modified_time" content="2024-06-27T14:36:54-05:00"><meta itemprop=name content="Routed Events :: K-State CIS 400 Textbook"><meta itemprop=description content="While events exist in Windows Forms, Windows Presentation Foundation adds a twist with their concept of routed events. Routed events are similar to regular C# events, but provide additional functionality. One of the most important of these is the ability of the routed event to “bubble” up the elements tree. Essentially, the event will be passed up each successive WPF element until one chooses to “handle” it, or the top of the tree is reached (in which case the event is ignored)."><meta itemprop=datePublished content="2018-08-24T10:53:26-05:00"><meta itemprop=dateModified content="2024-06-27T14:36:54-05:00"><meta itemprop=wordCount content="483"><title>Routed Events :: K-State CIS 400 Textbook</title>
<link href=https://textbooks.cs.ksu.edu/cis400/2-desktop-development/03-events/08-routed-events/ rel=canonical type=text/html title="Routed Events :: K-State CIS 400 Textbook"><link href=/cis400/2-desktop-development/03-events/08-routed-events/index.xml rel=alternate type=application/rss+xml title="Routed Events :: K-State CIS 400 Textbook"><link href=/cis400/2-desktop-development/03-events/08-routed-events/index.print.html rel=alternate type=text/html title="Routed Events :: K-State CIS 400 Textbook"><link href=/cis400/2-desktop-development/03-events/08-routed-events/embed.html rel=alternate type=text/html title="Routed Events :: K-State CIS 400 Textbook"><link href=/cis400/css/fontawesome-all.min.css?1724766110 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/cis400/css/fontawesome-all.min.css?1724766110 rel=stylesheet></noscript><link href=/cis400/css/nucleus.css?1724766110 rel=stylesheet><link href=/cis400/css/auto-complete.css?1724766110 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/cis400/css/auto-complete.css?1724766110 rel=stylesheet></noscript><link href=/cis400/css/perfect-scrollbar.min.css?1724766110 rel=stylesheet><link href=/cis400/css/fonts.css?1724766110 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/cis400/css/fonts.css?1724766110 rel=stylesheet></noscript><link href=/cis400/css/theme.css?1724766110 rel=stylesheet><link href=/cis400/css/theme-auto.css?1724766110 rel=stylesheet id=R-variant-style><link href=/cis400/css/chroma-auto.css?1724766110 rel=stylesheet id=R-variant-chroma-style><link href=/cis400/css/variant.css?1724766110 rel=stylesheet><link href=/cis400/css/print.css?1724766110 rel=stylesheet media=print><script src=/cis400/js/variant.js?1724766110></script><script>window.relearn=window.relearn||{},window.relearn.relBasePath="../../..",window.relearn.relBaseUri="../../../..",window.relearn.absBaseUri="https://textbooks.cs.ksu.edu/cis400",window.index_js_url="/cis400/index.search.js",window.variants&&variants.init(["auto","light-theme","dark-theme"]),window.T_Copy_to_clipboard=`Copy to clipboard`,window.T_Copied_to_clipboard=`Copied to clipboard!`,window.T_Copy_link_to_clipboard=`Copy link to clipboard`,window.T_Link_copied_to_clipboard=`Copied link to clipboard!`,window.T_Reset_view=`Reset view`,window.T_View_reset=`View reset!`,window.T_No_results_found=`No results found for "{0}"`,window.T_N_results_found=`{1} results found for "{0}"`</script><link href=/cis400/css/custom.css?1724766110 rel=stylesheet></head><body class="mobile-support tele disableInlineCopyToClipboard" data-url=/cis400/2-desktop-development/03-events/08-routed-events/><div id=tele class="tele mirror"><div id=R-body class=default-animation><div id=R-body-overlay></div><div id=R-main-overlay></div><main id=R-body-inner class="highlightable default" tabindex=-1><div class=flex-block-wrapper><article class=default><header class=headline></header><h1 id=routed-events>Routed Events</h1><p>While events exist in Windows Forms, Windows Presentation Foundation adds a twist with their concept of <em>routed events</em>. Routed events are similar to regular C# events, but provide additional functionality. One of the most important of these is the ability of the routed event to &ldquo;bubble&rdquo; up the <a href=https://textbooks.cs.ksu.edu/cis400/2-desktop-development/02-element-tree/ rel=external target=_blank>elements tree</a>. Essentially, the event will be passed up each successive WPF element until one chooses to &ldquo;handle&rdquo; it, or the top of the tree is reached (in which case the event is ignored).</p><p>Consider a Click event handler for a button. In Windows Forms, we have to attach our listener <em>directly to the button</em>, i.e:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=k>namespace</span> <span class=nn>WindowsFormsApp1</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kd>partial</span> <span class=k>class</span> <span class=nc>Form1</span> <span class=p>:</span> <span class=n>Form</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=kd>public</span> <span class=n>Form1</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=n>InitializeComponent</span><span class=p>();</span>
</span></span><span class=line><span class=cl>            <span class=n>IncrementButton</span><span class=p>.</span><span class=n>Click</span> <span class=p>+=</span> <span class=n>HandleClick</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=kd>private</span> <span class=k>void</span> <span class=n>HandleClick</span><span class=p>(</span><span class=kt>object</span> <span class=n>sender</span><span class=p>,</span> <span class=n>EventArgs</span> <span class=n>e</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=c1>// TODO: Handle our click</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div><p>With WPF we can also attach an event listener directly to the button, but we can <em>also</em> attach an event listener to an <em>ancestor</em> of the button (a component further up the element tree). The click event will &ldquo;bubble&rdquo; up the element tree, and each successive parent will have the opportunity to handle it. I.e. we can define a button in the <code>ChildControl</code>:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-xml data-lang=xml><span class=line><span class=cl><span class=nt>&lt;UserControl</span> <span class=na>x:Class=</span><span class=s>&#34;WpfApp1.ChildControl&#34;</span>
</span></span><span class=line><span class=cl>             <span class=na>xmlns=</span><span class=s>&#34;http://schemas.microsoft.com/winfx/2006/xaml/presentation&#34;</span>
</span></span><span class=line><span class=cl>             <span class=na>xmlns:x=</span><span class=s>&#34;http://schemas.microsoft.com/winfx/2006/xaml&#34;</span>
</span></span><span class=line><span class=cl>             <span class=na>xmlns:mc=</span><span class=s>&#34;http://schemas.openxmlformats.org/markup-compatibility/2006&#34;</span> 
</span></span><span class=line><span class=cl>             <span class=na>xmlns:d=</span><span class=s>&#34;http://schemas.microsoft.com/expression/blend/2008&#34;</span> 
</span></span><span class=line><span class=cl>             <span class=na>xmlns:local=</span><span class=s>&#34;clr-namespace:WpfApp1&#34;</span>
</span></span><span class=line><span class=cl>             <span class=na>mc:Ignorable=</span><span class=s>&#34;d&#34;</span> 
</span></span><span class=line><span class=cl>             <span class=na>d:DesignHeight=</span><span class=s>&#34;450&#34;</span> <span class=na>d:DesignWidth=</span><span class=s>&#34;800&#34;</span><span class=nt>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;Grid&gt;</span>
</span></span><span class=line><span class=cl>        <span class=nt>&lt;Button</span> <span class=na>Name=</span><span class=s>&#34;IncrementButton&#34;</span><span class=nt>&gt;</span>Count<span class=nt>&lt;/Button&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;/Grid&gt;</span>
</span></span><span class=line><span class=cl><span class=nt>&lt;/UserControl&gt;</span></span></span></code></pre></div><p>And add an instance of <code>ChildControl</code> to our <code>MainWindow</code>:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=p>&lt;</span><span class=n>Window</span> <span class=n>x</span><span class=p>:</span><span class=n>Class</span><span class=p>=</span><span class=s>&#34;WpfApp1.MainWindow&#34;</span>
</span></span><span class=line><span class=cl>        <span class=n>xmlns</span><span class=p>=</span><span class=s>&#34;http://schemas.microsoft.com/winfx/2006/xaml/presentation&#34;</span>
</span></span><span class=line><span class=cl>        <span class=n>xmlns</span><span class=p>:</span><span class=n>x</span><span class=p>=</span><span class=s>&#34;http://schemas.microsoft.com/winfx/2006/xaml&#34;</span>
</span></span><span class=line><span class=cl>        <span class=n>xmlns</span><span class=p>:</span><span class=n>d</span><span class=p>=</span><span class=s>&#34;http://schemas.microsoft.com/expression/blend/2008&#34;</span>
</span></span><span class=line><span class=cl>        <span class=n>xmlns</span><span class=p>:</span><span class=n>mc</span><span class=p>=</span><span class=s>&#34;http://schemas.openxmlformats.org/markup-compatibility/2006&#34;</span>
</span></span><span class=line><span class=cl>        <span class=n>xmlns</span><span class=p>:</span><span class=n>local</span><span class=p>=</span><span class=s>&#34;clr-namespace:WpfApp1&#34;</span>
</span></span><span class=line><span class=cl>        <span class=n>mc</span><span class=p>:</span><span class=n>Ignorable</span><span class=p>=</span><span class=s>&#34;d&#34;</span>
</span></span><span class=line><span class=cl>        <span class=n>Title</span><span class=p>=</span><span class=s>&#34;MainWindow&#34;</span> <span class=n>Height</span><span class=p>=</span><span class=s>&#34;450&#34;</span> <span class=n>Width</span><span class=p>=</span><span class=s>&#34;800&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=n>Grid</span> <span class=n>Button</span><span class=p>.</span><span class=n>Click</span><span class=p>=</span><span class=s>&#34;HandleClick&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>        <span class=p>&lt;</span><span class=n>local</span><span class=p>:</span><span class=n>ChildControl</span><span class=p>/&gt;</span>        
</span></span><span class=line><span class=cl>    <span class=p>&lt;/</span><span class=n>Grid</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=n>Window</span><span class=p>&gt;</span></span></span></code></pre></div><p>Note that in our <code>&lt;Grid></code> we attached a <code>Button.Click</code> handler? The attached listener, <code>HandleClick</code>, will be invoked for <em>all</em> <code>Click</code> events arising from <code>Buttons</code> that are nested under the <code>&lt;Grid></code> in the elements tree. We can then write this event handler in the codebehind of our <code>MainWindow</code>:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=k>namespace</span> <span class=nn>WpfApp1</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=cs>/// &lt;summary&gt;</span>
</span></span><span class=line><span class=cl>    <span class=cs>/// Interaction logic for MainWindow.xaml</span>
</span></span><span class=line><span class=cl>    <span class=cs>/// &lt;/summary&gt;</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kd>partial</span> <span class=k>class</span> <span class=nc>MainWindow</span> <span class=p>:</span> <span class=n>Window</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=kd>public</span> <span class=n>MainWindow</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=n>InitializeComponent</span><span class=p>();</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=kd>private</span> <span class=k>void</span> <span class=n>HandleClick</span><span class=p>(</span><span class=n>Object</span> <span class=n>sender</span><span class=p>,</span> <span class=n>RoutedEventArgs</span> <span class=n>e</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span><span class=p>(</span><span class=n>e</span><span class=p>.</span><span class=n>OriginalSource</span> <span class=k>is</span> <span class=n>Button</span> <span class=n>button</span> <span class=p>&amp;&amp;</span> <span class=n>button</span><span class=p>.</span><span class=n>Name</span> <span class=p>==</span> <span class=s>&#34;IncrementButton&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=c1>// TODO: Handle increment;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>                <span class=n>e</span><span class=p>.</span><span class=n>Handled</span> <span class=p>=</span> <span class=kc>true</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div><p>Note that because this event listener will be triggered for <em>all</em> buttons, we need to make sure it&rsquo;s a button we care about - so we cast the <code>OriginalSource</code> of the event to be a button and check its <code>Name</code> property. We use the <code>RoutedEventArgs.OriginalSource</code> because the <code>sender</code> won&rsquo;t necessarily be the specific control the event originated in - in this case it actually is the <code>Grid</code> containing the button. Also, note that we mark <code>e.Handled</code> as <code>true</code>. This tells WPF it can stop &ldquo;bubbling&rdquo; the event, as we have taken care of it.</p><p>We&rsquo;ll cover routed events in more detail in the upcoming <a href=https://textbooks.cs.ksu.edu/cis400/2-desktop-development/05-dependency-objects/ rel=external target=_blank>Dependency Objects</a> chapter, but for now you need to know that the GUI events you know from Windows Forms (Click, Select, Focus, Blur), are all routed events in WPF, and therefore take a <code>RoutedEventArgs</code> object instead of the event arguments you may be used to.</p><footer class=footline></footer></article></div></main></div></div><script src=/cis400/js/clipboard.min.js?1724766110 defer></script><script src=/cis400/js/perfect-scrollbar.min.js?1724766110 defer></script><script src=/cis400/js/theme.js?1724766110 defer></script><script src=/cis400/js/tele-scroll.js?1724766110 defer></script></body></html>