<!doctype html><html lang=en-us dir=ltr itemscope itemtype=http://schema.org/Article><head><meta charset=utf-8><meta name=viewport content="height=device-height,width=device-width,initial-scale=1,minimum-scale=1"><meta name=generator content="Hugo 0.128.0"><meta name=generator content="Relearn 6.0.0"><meta name=description content="WPF controls are built on the foundation of dependency objects - the DependencyObject is at the bottom of their inheritance chain. But they also add additional functionality on top of that through another common base class, FrameworkElement. The FrameworkElement is involved in the layout algorithm, as well as helping to define the elements tree. Let’s add a second dependency property to our <NumberBox>, a Value property that will represent the value the <NumberBox> currently represents, which will be displayed in the <TextBox>."><meta name=author content="Nathan Bean"><meta name=twitter:card content="summary"><meta name=twitter:title content="Framework Elements :: K-State CIS 400 Textbook"><meta name=twitter:description content="WPF controls are built on the foundation of dependency objects - the DependencyObject is at the bottom of their inheritance chain. But they also add additional functionality on top of that through another common base class, FrameworkElement. The FrameworkElement is involved in the layout algorithm, as well as helping to define the elements tree. Let’s add a second dependency property to our <NumberBox>, a Value property that will represent the value the <NumberBox> currently represents, which will be displayed in the <TextBox>."><meta property="og:url" content="https://textbooks.cs.ksu.edu/cis400/2-desktop-development/05-dependency-objects/03-framework-elements/"><meta property="og:site_name" content="K-State CIS 400 Textbook"><meta property="og:title" content="Framework Elements :: K-State CIS 400 Textbook"><meta property="og:description" content="WPF controls are built on the foundation of dependency objects - the DependencyObject is at the bottom of their inheritance chain. But they also add additional functionality on top of that through another common base class, FrameworkElement. The FrameworkElement is involved in the layout algorithm, as well as helping to define the elements tree. Let’s add a second dependency property to our <NumberBox>, a Value property that will represent the value the <NumberBox> currently represents, which will be displayed in the <TextBox>."><meta property="og:locale" content="en-us"><meta property="og:type" content="article"><meta property="article:section" content="Desktop Development"><meta property="article:published_time" content="2018-08-24T10:53:26-05:00"><meta property="article:modified_time" content="2024-06-27T14:36:54-05:00"><meta itemprop=name content="Framework Elements :: K-State CIS 400 Textbook"><meta itemprop=description content="WPF controls are built on the foundation of dependency objects - the DependencyObject is at the bottom of their inheritance chain. But they also add additional functionality on top of that through another common base class, FrameworkElement. The FrameworkElement is involved in the layout algorithm, as well as helping to define the elements tree. Let’s add a second dependency property to our <NumberBox>, a Value property that will represent the value the <NumberBox> currently represents, which will be displayed in the <TextBox>."><meta itemprop=datePublished content="2018-08-24T10:53:26-05:00"><meta itemprop=dateModified content="2024-06-27T14:36:54-05:00"><meta itemprop=wordCount content="496"><title>Framework Elements :: K-State CIS 400 Textbook</title>
<link href=https://textbooks.cs.ksu.edu/cis400/2-desktop-development/05-dependency-objects/03-framework-elements/ rel=canonical type=text/html title="Framework Elements :: K-State CIS 400 Textbook"><link href=/cis400/2-desktop-development/05-dependency-objects/03-framework-elements/index.xml rel=alternate type=application/rss+xml title="Framework Elements :: K-State CIS 400 Textbook"><link href=/cis400/2-desktop-development/05-dependency-objects/03-framework-elements/tele.html rel=alternate type=text/html title="Framework Elements :: K-State CIS 400 Textbook"><link href=/cis400/2-desktop-development/05-dependency-objects/03-framework-elements/embed.html rel=alternate type=text/html title="Framework Elements :: K-State CIS 400 Textbook"><link href=/cis400/css/fontawesome-all.min.css?1724347205 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/cis400/css/fontawesome-all.min.css?1724347205 rel=stylesheet></noscript><link href=/cis400/css/nucleus.css?1724347205 rel=stylesheet><link href=/cis400/css/auto-complete.css?1724347205 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/cis400/css/auto-complete.css?1724347205 rel=stylesheet></noscript><link href=/cis400/css/perfect-scrollbar.min.css?1724347205 rel=stylesheet><link href=/cis400/css/fonts.css?1724347205 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/cis400/css/fonts.css?1724347205 rel=stylesheet></noscript><link href=/cis400/css/theme.css?1724347205 rel=stylesheet><link href=/cis400/css/theme-auto.css?1724347205 rel=stylesheet id=R-variant-style><link href=/cis400/css/chroma-auto.css?1724347205 rel=stylesheet id=R-variant-chroma-style><link href=/cis400/css/variant.css?1724347205 rel=stylesheet><link href=/cis400/css/print.css?1724347205 rel=stylesheet media=print><link href=/cis400/css/format-print.css?1724347205 rel=stylesheet><script src=/cis400/js/variant.js?1724347205></script><script>window.relearn=window.relearn||{},window.relearn.relBasePath="../../..",window.relearn.relBaseUri="../../../..",window.relearn.absBaseUri="https://textbooks.cs.ksu.edu/cis400",window.index_js_url="/cis400/index.search.js",window.variants&&variants.init(["auto","light-theme","dark-theme"]),window.T_Copy_to_clipboard=`Copy to clipboard`,window.T_Copied_to_clipboard=`Copied to clipboard!`,window.T_Copy_link_to_clipboard=`Copy link to clipboard`,window.T_Link_copied_to_clipboard=`Copied link to clipboard!`,window.T_Reset_view=`Reset view`,window.T_View_reset=`View reset!`,window.T_No_results_found=`No results found for "{0}"`,window.T_N_results_found=`{1} results found for "{0}"`</script><link href=/cis400/css/custom.css?1724347205 rel=stylesheet></head><body class="mobile-support print disableInlineCopyToClipboard" data-url=/cis400/2-desktop-development/05-dependency-objects/03-framework-elements/><div id=R-body class=default-animation><div id=R-body-overlay></div><nav id=R-topbar><div class=topbar-wrapper><div class=topbar-sidebar-divider></div><div class="topbar-area topbar-area-start" data-area=start><div class="topbar-button topbar-button-sidebar" data-content-empty=disable data-width-s=show data-width-m=hide data-width-l=hide><button class=topbar-control onclick=toggleNav() type=button title="Menu (CTRL+ALT+n)"><i class="fa-fw fas fa-bars"></i></button></div></div><ol class="topbar-breadcrumbs breadcrumbs highlightable" itemscope itemtype=http://schema.org/BreadcrumbList><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><a itemprop=item href=/cis400/2-desktop-development/><span itemprop=name>Desktop Development</span></a><meta itemprop=position content="1">&nbsp;>&nbsp;</li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><a itemprop=item href=/cis400/2-desktop-development/05-dependency-objects/><span itemprop=name>Dependency Objects</span></a><meta itemprop=position content="2">&nbsp;>&nbsp;</li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><span itemprop=name>Framework Elements</span><meta itemprop=position content="3"></li></ol><div class="topbar-area topbar-area-end" data-area=end><div class="topbar-button topbar-button-prev" data-content-empty=disable data-width-s=show data-width-m=show data-width-l=show><a class=topbar-control href=/cis400/2-desktop-development/05-dependency-objects/02-dependency-properties/ title="Dependency Properties (🡐)"><i class="fa-fw fas fa-chevron-left"></i></a></div><div class="topbar-button topbar-button-next" data-content-empty=disable data-width-s=show data-width-m=show data-width-l=show><a class=topbar-control href=/cis400/2-desktop-development/05-dependency-objects/04-routed-events/ title="Routed Events (🡒)"><i class="fa-fw fas fa-chevron-right"></i></a></div></div></div></nav><div id=R-main-overlay></div><main id=R-body-inner class="highlightable default" tabindex=-1><div class=flex-block-wrapper><article class=default><header class=headline></header><h1 id=framework-elements>Framework Elements</h1><p>WPF controls are built on the foundation of dependency objects - the <code>DependencyObject</code> is at the bottom of their inheritance chain. But they also add additional functionality on top of that through another common base class, <code>FrameworkElement</code>. The <code>FrameworkElement</code> is involved in the layout algorithm, as well as helping to define the <a href=https://textbooks.cs.ksu.edu/cis400/2-desktop-development/02-element-tree/ rel=external target=_blank>elements tree</a>. Let&rsquo;s add a <em>second</em> dependency property to our <code>&lt;NumberBox></code>, a <code>Value</code> property that will represent the value the <code>&lt;NumberBox></code> currently represents, which will be displayed in the <code>&lt;TextBox></code>.</p><p>We register this dependency property in much the same way as our <code>Step</code>. But instead of supplying the <code>DependencyProperty.Register()</code> method a <code>PropertyMetadata</code>, we&rsquo;ll instead supply a <code>FrameworkPropertyMetadata</code>, which extends <code>PropertyMetadata</code> to include additional data about how the property interacts with the WPF rendering and layout algorithms. This additional data is in the form of a bitmask defined in <a href="https://docs.microsoft.com/en-us/dotnet/api/system.windows.frameworkpropertymetadataoptions?view=netcore-3.1" rel=external target=_blank>FrameworkPropertyMetadataOptions</a> enumeration.</p><p>Some of the possible options are:</p><ul><li><code>FrameworkPropertyMetadataOptions.AffectsMeasure</code> - changes to the property may affect the size of the control</li><li><code>FrameworkPropertyMetadataOptions.AffectsArrange</code> - changes to the property may affect the layout of the control</li><li><code>FrameworkPropertyMetadataOptions.AffectsRender</code> - changes to the property may affect the appearance of the control</li><li><code>FrameworkPropertyMetadataOptions.BindsTwoWayByDefault</code> - This property uses two-way bindings by default (i.e. the control is an editable control)</li><li><code>FrameworkPropertyMetadataOptions.NotDataBindable</code> - This property does not allow data binding</li></ul><p>In this case, we want a two-way binding by default, so we&rsquo;ll include that flag, and also we&rsquo;ll note that it affects the rendering process. Multiple flags can be combined with a <a href=https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/operators/bitwise-and-shift-operators#logical-or-operator- rel=external target=_blank>bitwise OR</a>. Constructing our <code>FrameworkPropertyMetadata</code> object would then look like:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=k>new</span> <span class=n>FrameworkPropertyMetadata</span><span class=p>(</span><span class=m>0</span><span class=p>,</span> <span class=n>FrameworkPropertyMetadataOptions</span><span class=p>.</span><span class=n>AffectsRender</span> <span class=p>|</span> <span class=n>FrameworkPropertyMetadataOptions</span><span class=p>.</span><span class=n>BindsTwoWayByDefault</span><span class=p>)</span></span></span></code></pre></div><p>And registering the dependency property would be:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=cs>/// &lt;summary&gt;</span>
</span></span><span class=line><span class=cl><span class=cs>/// Identifies the NumberBox.Value XAML attached property</span>
</span></span><span class=line><span class=cl><span class=cs>/// &lt;/summary&gt;</span>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=kd>static</span> <span class=k>readonly</span> <span class=n>DependencyProperty</span> <span class=n>ValueProperty</span> <span class=p>=</span> <span class=n>DependencyProperty</span><span class=p>.</span><span class=n>Register</span><span class=p>(</span><span class=n>nameof</span><span class=p>(</span><span class=n>Value</span><span class=p>),</span> <span class=k>typeof</span><span class=p>(</span><span class=kt>double</span><span class=p>),</span> <span class=k>typeof</span><span class=p>(</span><span class=n>NumberBox</span><span class=p>),</span> <span class=k>new</span> <span class=n>FrameworkPropertyMetadata</span><span class=p>(</span><span class=m>0</span><span class=p>,</span> <span class=n>FrameworkPropertyMetadataOptions</span><span class=p>.</span><span class=n>AffectsRender</span> <span class=p>|</span> <span class=n>FrameworkPropertyMetadataOptions</span><span class=p>.</span><span class=n>BindsTwoWayByDefault</span><span class=p>));</span></span></span></code></pre></div><p>As with the <code>Step</code>, we also want to declare a traditional property with the name &ldquo;Value&rdquo;. But instead of declaring a backing field, we will use the key/value pair stored in our <code>DependencyObject</code> using <code>GetValue()</code> and <code>SetValue()</code>:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=cs>/// &lt;summary&gt;</span>
</span></span><span class=line><span class=cl><span class=cs>/// The NumberBox&#39;s displayed value</span>
</span></span><span class=line><span class=cl><span class=cs>/// &lt;/summary&gt;</span>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=kt>double</span> <span class=n>Value</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>get</span> <span class=p>{</span> <span class=k>return</span> <span class=p>(</span><span class=kt>double</span><span class=p>)</span><span class=n>GetValue</span><span class=p>(</span><span class=n>ValueProperty</span><span class=p>);</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=k>set</span> <span class=p>{</span> <span class=n>SetValue</span><span class=p>(</span><span class=n>ValueProperty</span><span class=p>,</span> <span class=k>value</span><span class=p>);</span> <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div><p>If we want to display the current value of <code>Value</code> in the textbox of our <code>NumberBox</code> control, we&rsquo;ll need to bind the <code>&lt;TextBox></code> element&rsquo;s <code>Text</code> property. This is accomplished in a similar fashion to the other bindings we&rsquo;ve done previously, only we need to specify a <code>RelativeSource</code>. This is a source relative to the control in the <a href=https://textbooks.cs.ksu.edu/cis400/2-desktop-development/02-element-tree/ rel=external target=_blank>elements tree</a>. We&rsquo;ll specify two properties on the <code>RelativeSource</code>: the <code>Mode</code> which we set to <code>FindAncestor</code> to search up the tree, and the <code>AncestorType</code> which we set to our <code>NumberBox</code>. Thus, instead of binding to the <code>DataContext</code>, we&rsquo;ll bind to the <code>NumberBox</code> the <code>&lt;TextBox></code> is located within. The full declaration would be:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-xml data-lang=xml><span class=line><span class=cl><span class=nt>&lt;TextBox</span> <span class=na>Grid.Column=</span><span class=s>&#34;1&#34;</span> <span class=na>Text=</span><span class=s>&#34;{Binding Path=Value, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType=local:NumberBox}}&#34;</span><span class=nt>/&gt;</span></span></span></code></pre></div><p>Now a two-way binding exists between the <code>Value</code> of the <code>&lt;NumberBox></code> and the <code>Text</code> value of the textbox. Updating either one will update the other. We&rsquo;ve in effect made an editable control!</p><footer class=footline></footer></article></div></main><div class=git-footer><p class=theme-version-footer>6.0.0</p><p>Last modified by:
<i class='fas fa-user'></i> Russell Feldhausen
<i class='fas fa-calendar'></i> <a href=https://github.com/ksu-cs-textbooks/cis400/commit/7c4ed95cab7ce3716b0506b021a9ec88e64d24d8>Jun 27, 2024</a></p></div></div><script src=/cis400/js/clipboard.min.js?1724347205 defer></script><script src=/cis400/js/perfect-scrollbar.min.js?1724347205 defer></script><script src=/cis400/js/theme.js?1724347205 defer></script></body></html>