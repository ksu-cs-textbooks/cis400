<!doctype html><html lang=en-us dir=ltr itemscope itemtype=http://schema.org/Article><head><meta charset=utf-8><meta name=viewport content="height=device-height,width=device-width,initial-scale=1,minimum-scale=1"><meta name=generator content="Hugo 0.128.0"><meta name=generator content="Relearn 6.0.0"><meta name=description content="For this milestone, you will be adding functionality to your Point-of-Sale system (POS). Specifically, we will be adding support for putting together an order and customizing the elements within it. To do this, we will be leveraging data binding.
General requirements: You need to follow the style laid out in the C# Coding Conventions
All classes should be declared in their respective namespace (see below)
Document your classes using XML-Style comments"><meta name=author content="Nathan Bean"><meta name=twitter:card content="summary"><meta name=twitter:title content="Milestone 5 Requirements :: K-State CIS 400 Textbook"><meta name=twitter:description content="For this milestone, you will be adding functionality to your Point-of-Sale system (POS). Specifically, we will be adding support for putting together an order and customizing the elements within it. To do this, we will be leveraging data binding.
General requirements: You need to follow the style laid out in the C# Coding Conventions
All classes should be declared in their respective namespace (see below)
Document your classes using XML-Style comments"><meta property="og:url" content="https://textbooks.cs.ksu.edu/cis400/d-milestones-u21/07-milestone-5/"><meta property="og:site_name" content="K-State CIS 400 Textbook"><meta property="og:title" content="Milestone 5 Requirements :: K-State CIS 400 Textbook"><meta property="og:description" content="For this milestone, you will be adding functionality to your Point-of-Sale system (POS). Specifically, we will be adding support for putting together an order and customizing the elements within it. To do this, we will be leveraging data binding.
General requirements: You need to follow the style laid out in the C# Coding Conventions
All classes should be declared in their respective namespace (see below)
Document your classes using XML-Style comments"><meta property="og:locale" content="en-us"><meta property="og:type" content="article"><meta property="article:section" content="Project Milestones"><meta property="article:published_time" content="2018-08-24T10:53:26-05:00"><meta property="article:modified_time" content="2024-06-27T14:36:54-05:00"><meta itemprop=name content="Milestone 5 Requirements :: K-State CIS 400 Textbook"><meta itemprop=description content="For this milestone, you will be adding functionality to your Point-of-Sale system (POS). Specifically, we will be adding support for putting together an order and customizing the elements within it. To do this, we will be leveraging data binding.
General requirements: You need to follow the style laid out in the C# Coding Conventions
All classes should be declared in their respective namespace (see below)
Document your classes using XML-Style comments"><meta itemprop=datePublished content="2018-08-24T10:53:26-05:00"><meta itemprop=dateModified content="2024-06-27T14:36:54-05:00"><meta itemprop=wordCount content="2561"><title>Milestone 5 Requirements :: K-State CIS 400 Textbook</title>
<link href=https://textbooks.cs.ksu.edu/cis400/d-milestones-u21/07-milestone-5/ rel=canonical type=text/html title="Milestone 5 Requirements :: K-State CIS 400 Textbook"><link href=/cis400/d-milestones-u21/07-milestone-5/index.xml rel=alternate type=application/rss+xml title="Milestone 5 Requirements :: K-State CIS 400 Textbook"><link href=/cis400/d-milestones-u21/07-milestone-5/tele.html rel=alternate type=text/html title="Milestone 5 Requirements :: K-State CIS 400 Textbook"><link href=/cis400/d-milestones-u21/07-milestone-5/embed.html rel=alternate type=text/html title="Milestone 5 Requirements :: K-State CIS 400 Textbook"><link href=/cis400/css/fontawesome-all.min.css?1728334435 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/cis400/css/fontawesome-all.min.css?1728334435 rel=stylesheet></noscript><link href=/cis400/css/nucleus.css?1728334435 rel=stylesheet><link href=/cis400/css/auto-complete.css?1728334435 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/cis400/css/auto-complete.css?1728334435 rel=stylesheet></noscript><link href=/cis400/css/perfect-scrollbar.min.css?1728334435 rel=stylesheet><link href=/cis400/css/fonts.css?1728334435 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/cis400/css/fonts.css?1728334435 rel=stylesheet></noscript><link href=/cis400/css/theme.css?1728334435 rel=stylesheet><link href=/cis400/css/theme-auto.css?1728334435 rel=stylesheet id=R-variant-style><link href=/cis400/css/chroma-auto.css?1728334435 rel=stylesheet id=R-variant-chroma-style><link href=/cis400/css/variant.css?1728334435 rel=stylesheet><link href=/cis400/css/print.css?1728334435 rel=stylesheet media=print><link href=/cis400/css/format-print.css?1728334435 rel=stylesheet><script src=/cis400/js/variant.js?1728334435></script><script>window.relearn=window.relearn||{},window.relearn.relBasePath="../..",window.relearn.relBaseUri="../../..",window.relearn.absBaseUri="https://textbooks.cs.ksu.edu/cis400",window.index_js_url="/cis400/index.search.js",window.variants&&variants.init(["auto","light-theme","dark-theme"]),window.T_Copy_to_clipboard=`Copy to clipboard`,window.T_Copied_to_clipboard=`Copied to clipboard!`,window.T_Copy_link_to_clipboard=`Copy link to clipboard`,window.T_Link_copied_to_clipboard=`Copied link to clipboard!`,window.T_Reset_view=`Reset view`,window.T_View_reset=`View reset!`,window.T_No_results_found=`No results found for "{0}"`,window.T_N_results_found=`{1} results found for "{0}"`</script><link href=/cis400/css/custom.css?1728334435 rel=stylesheet></head><body class="mobile-support print disableInlineCopyToClipboard" data-url=/cis400/d-milestones-u21/07-milestone-5/><div id=R-body class=default-animation><div id=R-body-overlay></div><nav id=R-topbar><div class=topbar-wrapper><div class=topbar-sidebar-divider></div><div class="topbar-area topbar-area-start" data-area=start><div class="topbar-button topbar-button-sidebar" data-content-empty=disable data-width-s=show data-width-m=hide data-width-l=hide><button class=topbar-control onclick=toggleNav() type=button title="Menu (CTRL+ALT+n)"><i class="fa-fw fas fa-bars"></i></button></div></div><ol class="topbar-breadcrumbs breadcrumbs highlightable" itemscope itemtype=http://schema.org/BreadcrumbList><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><span itemprop=name>Project Milestones</span><meta itemprop=position content="1">&nbsp;>&nbsp;</li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><span itemprop=name>Milestone 5 Requirements</span><meta itemprop=position content="2"></li></ol><div class="topbar-area topbar-area-end" data-area=end><div class="topbar-button topbar-button-prev" data-content-empty=disable data-width-s=show data-width-m=show data-width-l=show><a class=topbar-control href=/cis400/c-exercises-s23/13-deployment/02-deploying/ title="Deploying our Movie Site to Azure (🡐)"><i class="fa-fw fas fa-chevron-left"></i></a></div><div class="topbar-button topbar-button-next" data-content-empty=disable data-width-s=show data-width-m=show data-width-l=show><span class=topbar-control><i class="fa-fw fas fa-chevron-right"></i></span></div></div></div></nav><div id=R-main-overlay></div><main id=R-body-inner class="highlightable default" tabindex=-1><div class=flex-block-wrapper><article class=default><header class=headline></header><h1 id=milestone-5-requirements>Milestone 5 Requirements</h1><p>For this milestone, you will be adding functionality to your Point-of-Sale system (POS). Specifically, we will be adding support for putting together an order and customizing the elements within it. To do this, we will be leveraging data binding.</p><h3 id=general-requirements>General requirements:</h3><ul><li><p>You need to follow the style laid out in the <a href=https://docs.microsoft.com/en-us/dotnet/csharp/programming-guide/inside-a-program/coding-conventions rel=external target=_blank>C# Coding Conventions</a></p></li><li><p>All classes should be declared in their respective namespace (see below)</p></li><li><p>Document your classes using XML-Style comments</p></li><li><p>Create UML class diagrams to represent your project</p></li></ul><h3 id=assignment-requirements>Assignment requirements:</h3><ul><li><p>Implement the <code>INotifyPropertyChanged</code> interface on all <code>IOrderItem</code> implementing classes</p></li><li><p>Implement the <code>ICollection</code>, <code>INotifyPropertyChanged</code>, and <code>INotifyCollectionChanged</code> interface on the <code>Order</code> class</p></li><li><p>Bind an <code>Order</code> instance to your <code>MainWindow</code></p></li><li><p>Create an event listener to cancel the order and tie it to the corresponding button</p></li><li><p>Create event listener(s) to add items to your bound <code>Order</code> and open the corresponding customization screen, binding the item to the customization screen&rsquo;s <code>DataContext</code></p></li><li><p>Add event listeners to customize the bound <code>IOrderItem</code> in in the customization screen</p></li><li><p>Bind the <code>OrderSummaryControl</code> UI controls to the corresponding <code>Order</code> properties to display the order details</p></li><li><p>Provide a means for removing items from the order in your GUI</p></li><li><p>Update your UML Class Diagrams to reflect the current state of both projects:</p><ul><li>Data</li><li>PointOfSale</li></ul></li></ul><p>(You don&rsquo;t need to create a UML of your test project, though you can if you want)</p><h3 id=purpose>Purpose:</h3><p>This assignment is intended to familiarize you to Microsoft’s Windows Presentation Foundations&rsquo; approach to events and data binding. Data Binding allows you to tie a user interface element to an object that provides its data, and enable one- or two-way flow for updating that data.</p><h3 id=recommendations>Recommendations:</h3><ul><li><p>Get in the habit of reading the entire assignment before you start to code. Make sure you understand what is being asked of you. Please do not stub your toe and have to redo work because you did not read the entire assignment.</p></li><li><p>Accuracy is <em>important</em>. Your class, property, enumeration and other names, along with the descriptions <em>must match the specification given here</em>. Otherwise, your code is <strong>not correct</strong>. While typos may be a small issue in writing intended for human consumption, in computer code <em>it is a big problem!</em></p></li><li><p>Remember that you must document your classes. This includes a general identity comment at the top of your files, i.e.:</p></li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=cm>/*
</span></span></span><span class=line><span class=cl><span class=cm>* Author: Nathan Bean
</span></span></span><span class=line><span class=cl><span class=cm>* Edited by: (Only include if you are not the original author)
</span></span></span><span class=line><span class=cl><span class=cm>* File name: Something.cs
</span></span></span><span class=line><span class=cl><span class=cm>* Purpose: To inform the students of the requirements for this milestone
</span></span></span><span class=line><span class=cl><span class=cm>*/</span></span></span></code></pre></div><p><strong>AND</strong> XML-Style comments above every public class, field, property, and method!</p><h3 id=implement-inotifypropertychanged-on-your-order-items>Implement INotifyPropertyChanged on your Order Items</h3><p>In order for an object to support WPF data binding, it needs to implement the <code>INotifyPropertyChanged</code> interface from the <code>System.ComponentModel</code> namespace. This requires you to:</p><ol><li><p>Add a <code>PropertyChanged</code> event to your class</p></li><li><p>Invoke that <code>PropertyChanged</code> event <em>any time a property of the class changes</em>, specifying the property that changed <em>by its exact name</em> in the supplied <code>PropertyChangedEventArgs</code></p></li></ol><h3 id=test-the-inotifypropertychanged-functionality-of-your-order-items>Test the INotifyPropertyChanged functionality of your Order Items</h3><p>To ensure that you&rsquo;ve implemented the interface correctly, you should add unit tests to each of your order items to verify:</p><ol><li><p>That the <code>INotifyPropertyChanged</code> interface is implemented, and</p></li><li><p>That all changing properties are notified.</p></li></ol><p>The first can be accomplished with the <code>Assert.IsAssignableFrom&lt;T>(Object obj)</code> assertion. The second can be done with <code>Assert.PropertyChanged(Object obj, string propertyName, Action action)</code>. For example, to test that the <code>CheddarCheese</code> property notifies of a change, we could:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=na>[Fact]</span>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=k>void</span> <span class=n>CheddarCheeseTriggersPropertyChanged</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=kt>var</span> <span class=n>dog</span> <span class=p>=</span> <span class=k>new</span> <span class=n>Dog</span><span class=p>();</span>
</span></span><span class=line><span class=cl>  <span class=c1>// Since dog should have no cheddar cheese by default, we first set it to true</span>
</span></span><span class=line><span class=cl>  <span class=n>Assert</span><span class=p>.</span><span class=n>propertyChanged</span><span class=p>(</span><span class=n>dog</span><span class=p>,</span> <span class=s>&#34;CheddarCheese&#34;</span><span class=p>,</span> <span class=p>()</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// Inside the action, we make a change to the object that should trigger</span>
</span></span><span class=line><span class=cl>    <span class=c1>// the PropertyChanged event</span>
</span></span><span class=line><span class=cl>    <span class=n>dog</span><span class=p>.</span><span class=n>CheddarCheese</span> <span class=p>=</span> <span class=kc>true</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=p>});</span>
</span></span><span class=line><span class=cl>  <span class=n>Assert</span><span class=p>.</span><span class=n>propertyChanged</span><span class=p>(</span><span class=n>dog</span><span class=p>,</span> <span class=s>&#34;CheddarCheese&#34;</span><span class=p>,</span> <span class=p>()</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>dog</span><span class=p>.</span><span class=n>CheddarCheese</span> <span class=p>=</span> <span class=kc>false</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=p>});</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div><h3 id=implement-interfaces-on-the-order-class>Implement interfaces on the Order class</h3><p>We will be using the <code>Order</code> class as a collection of <code>IOrderItem</code>s. This means we should implement the <code>ICollection&lt;T></code> interface, so we can treat it as a collection similar to <code>List</code>, <code>Dictionary</code>, and the other collections you have worked with previously. We will also be data-binding to this list, which means it needs to implement the <code>INotifyPropertyChanged</code> interface to update the GUI properly, and <em>also</em> the <code>INotifyCollectionChanged</code> (as it is also a collection).</p><p>In addition to the interfaces, you will need to add a readonly <code>Number</code> property of type <code>uint</code> to your order. Its value should be set when the order is constructed, and not be changed after that. Each successive order created should use a different number (preferably increasing by one). This is most easily accomplished by declaring a private static variable to keep track of the next order number to use.</p><h4 id=implement-the-icollectiont-interface-on-the-order-class>Implement the <code>ICollection&lt;T></code> interface on the Order class</h4><p>The <code>Order</code> class will need to implement the <a href="https://docs.microsoft.com/en-us/dotnet/api/system.collections.generic.icollection-1?view=net-5.0" rel=external target=_blank><code>ICollection&lt;T></code></a> interface. This is a generic collection interface which specifies methods that all collections should have. It is also a <em>generic</em> interface (hence the <code>&lt;T></code>), and we can either implement our own <em>generic</em> collection on top of it, or (because we know we want a collection of <code>IOrderItems</code>) specify the collection type when we implement it, i.e.:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=kd>public</span> <span class=k>class</span> <span class=nc>Order</span> <span class=p>:</span> <span class=n>ICollection</span><span class=p>&lt;</span><span class=n>IOrderItem</span><span class=p>&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=c1>// TODO: Class definition here</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div><div class="box notices cstyle info"><div class=box-label><i class="fa-fw fas fa-info-circle"></i> Info</div><div class=box-content><p>Alternatively, we can implement the <code>ICollection&lt;T></code> interface by <em>inheriting</em> from a class that already implements it, like <code>List&lt;T></code> or <code>Collection&lt;T></code>.</p></div></div><p>To implement the <code>ICollection&lt;T></code> interface, you will need to define the following properties and methods on the <code>Order</code>:</p><ul><li><p><code>Count</code> - a read-only <code>int</code> property that indicates how many items are in the order</p></li><li><p><code>IsReadOnly</code> - a read-only boolean that indicates if the collection can be changed after it is created. As we want to add and remove items from the order, this will always be <code>false</code>.</p></li><li><p><code>Add(T)</code> - a method that adds an item (in our case, this would be a <code>IOrderItem</code>) to the collection. You should already have written this method in the previous milestones.</p></li><li><p><code>Remove(T)</code> - a method that removes the specified item (in our case, an <code>IOrderItem</code>) from the collection. It returns <code>true</code> if the item was removed, <code>false</code> otherwise. You should already have written this method in a previous milestone.</p></li><li><p><code>Contains(T)</code> - method that returns <code>true</code> if the specified item is in the collection, <code>false</code> otherwise.</p></li><li><p><code>CopyTo(T[], int)</code> - Copies the number of items specified by the <code>int</code> the from the <code>Order</code> into the supplied <code>IOrderItem[]</code> array.</p></li><li><p><code>GetEnumerator&lt;T>()</code> - The <code>ICollection&lt;T></code> interface also includes the <code>IEnumerable&lt;T></code> interface, so you will need to implement a method to get an Enumerator.</p></li><li><p><code>GetEnumerator()</code> - The <code>ICollection&lt;T></code> interface also includes the <code>IEnumerable</code> interface, so you will need to implement a method to get an Enumerator.</p></li><li><p>Optional: It might be useful to implement the bracket operator <code>[]</code>, which allows access to a specific item at a specific position in the collection. It is defined as an operator override, i.e.:</p></li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=kd>public</span> <span class=n>IOrderItem</span> <span class=k>this</span><span class=p>[</span><span class=kt>int</span> <span class=n>index</span><span class=p>]</span> <span class=p>{</span> <span class=k>get</span><span class=p>;</span> <span class=k>set</span><span class=p>;</span> <span class=p>}</span></span></span></code></pre></div><p>Note: You must provide implementations for <code>get</code> and <code>set</code>.</p><h5 id=hints>Hints</h5><p>Many of these methods can be implemented as pass-through methods from the collection you are using internally to hold the order items (essentially, return the result of calling the same method on the collection).</p><h4 id=implement-inotifypropertychanged-on-the-order-class>Implement INotifyPropertyChanged on the Order class</h4><p>Since you will be data binding the order, you will <em>also</em> need to implement the <code>INotifyPropertyChanged</code> interface on it. You should notify when any of the order properties change, which are:</p><ul><li><p><code>Size</code> - the count of items in the order</p></li><li><p><code>Subtotal</code> - the total cost of items in the order</p></li><li><p><code>Tax</code> - the amount of tax to be charged in the order</p></li><li><p><code>Total</code> - the subtotal and tax together</p></li></ul><p>If your <code>DateTime</code> and <code>Number</code> properties do not change, then there is no need to notify of them changing. But if you <em>do</em> allow it to change, you will also need to notify for it.</p><p>Note that if an item in the collection changes, i.e. a <code>Dog</code> in the order is modified to add additional ingredients, <em>its price will change</em>. Therefore the <code>Subtotal</code>, <code>Tax</code>, and <code>Total</code> <em>order</em> will change as well. Thus, when items are added to the collection you will need to listen to their <code>PropertyChanged</code> event from the <code>Order</code> class and trigger your own <code>PropertyChanged</code> for these dependent properties!</p><h5 id=hints-1>Hints</h5><p>Attaching a <code>PropertyChanged</code> event listener to the <code>IOrderItem</code> in your <code>Add()</code> method and detaching it in the <code>Remove()</code> method can fulfil the last requirement and ensure you don&rsquo;t have orphaned event listeners (and the corresponding memory leak).</p><h4 id=implement-icollectionchanged-on-the-order-class>Implement ICollectionChanged on the Order class</h4><p>You will also need to implement the <a href="https://docs.microsoft.com/en-us/dotnet/api/system.collections.specialized.inotifycollectionchanged?view=net-5.0" rel=external target=_blank>INotifyCollectionChanged</a> interface in the <code>System.Collections.Specialized</code> namespace. This interface is similar to the <code>INotifyPropertyChanged</code>, but adds specific requirements for when a <em>collection</em> used as a data source changes, i.e when items are added or removed.</p><p>This interface requires you to implement one event, a <code>NotifyCollectionChanged</code> event:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=kd>public</span> <span class=k>event</span> <span class=n>NotifyCollectionChangedEventHandler</span> <span class=n>CollectionChanged</span><span class=p>;</span></span></span></code></pre></div><p>As you might imagine, this is triggered any time the collection changes. It uses a corresponding event args, <a href="https://docs.microsoft.com/en-us/dotnet/api/system.collections.specialized.notifycollectionchangedeventargs?view=net-5.0" rel=external target=_blank>NotifyPropertyChangedEventArgs</a> which has multiple constructors. You need to to utilize the appropriate one for the situation you are reporting:</p><ul><li><p>Adding a single item: <code>new NotifyCollectionChangedEventArgs(CollectionChangedAction.Add, item)</code> where <code>item</code> is the item added</p></li><li><p>Removing a single item <code>new NotifyCollectionChangedEventArgs(CollectionChanged.Remove, item, index)</code> where <code>item</code> is the item removed, and <code>index</code> is an integer specifying the index it was located at.</p></li><li><p>Changing the entire collection (i.e. on a clear): <code>new NotifyCollectionChangedEventArgs(CollectionChanged.Reset)</code></p></li></ul><p>Using the appropriate event args allows the UI to update itself with the least amount of changes, making it more efficient.</p><h3 id=test-the-inotifypropertychanged-inotifycollectionchanged-and-icollection-functionality-of-your-order-items>Test the INotifyPropertyChanged, INotifyCollectionChanged, and ICollection functionality of your Order Items</h3><p>You will need to write additional tests to ensure that your <code>Order</code> class&rsquo;s new functionality behaves as expected. At a minimum, you should be testing:</p><ul><li><p>That adding an item triggers a corresponding <code>CollectionChanged</code> event</p></li><li><p>That removing an item triggers a corresponding <code>CollectionChanged</code> event</p></li><li><p>That adding an item triggers <code>PropertyChanged</code> events for each property that is changing (i.e. <code>Count</code>, <code>Subtotal</code>, <code>Tax</code>, and <code>Total</code>)</p></li><li><p>That removing an item triggers <code>PropertyChanged</code> events for each property that is changing (i.e. <code>Count</code>, <code>Subtotal</code>, <code>Tax</code>, and <code>Total</code>)</p></li><li><p>That modifying an item in the order triggers <code>PropertyChanged</code> events for each property that is changing (i.e. <code>Count</code>, <code>Subtotal</code>, <code>Tax</code>, and <code>Total</code>)</p></li><li><p>That <code>Count</code> accurately reflects the number of items in the order</p></li><li><p>That <code>IsReadOnly</code> is <code>false</code></p></li></ul><h3 id=bind-an-order-instance-to-your-mainwindow>Bind an Order instance to your MainWindow</h3><p>Since the Point-of-Sale only deals with one order at a time, you can bind an instance of <code>Order</code> to the <code>MainWindow.DataContext</code> property and use it in any controls that are children of the <code>MainWindow</code> (provided they or their ancestors don&rsquo;t set their own <code>DataContext</code> property).</p><p>You can change this order at any time by replacing the current one with a new one, i.e.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=n>DataContext</span> <span class=p>=</span> <span class=k>new</span> <span class=n>Order</span><span class=p>();</span></span></span></code></pre></div><p>You should implement this functionality for the &ldquo;Cancel Order&rdquo; button by writing an event listener and attaching it to the button.</p><h3 id=add-items-to-the-order>Add Items to the Order</h3><p>You should also add items to the bound <code>Order</code> instance when the buttons corresponding to that item are clicked. You can do this with either a single event listener used by <em>all</em> menu item buttons, or have individual event listeners for each one.</p><p>As the <code>DataContext</code> of the <code>MenuItemSelection</code> control is received from the <code>MainWindow</code>, you can simply use it to access the order, i.e.:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=kt>var</span> <span class=n>order</span> <span class=p>=</span> <span class=n>DataContext</span> <span class=k>as</span> <span class=n>Order</span><span class=p>;</span></span></span></code></pre></div><p>Note we have to <em>cast</em> the data context (as it is stored as an <code>Object</code>). If you are uncertain if the <code>DataContext</code> in this case is actually an order, you can use the pattern-match cast:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=k>if</span><span class=p>(</span><span class=n>DataContext</span> <span class=k>is</span> <span class=n>Order</span> <span class=n>order</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=c1>// Inside this body, `order` is the DataContext cast to be an order</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div><p>If the <code>DataContext</code> is <em>not</em> an <code>order</code> instance, the true branch of this conditional statement is skipped.</p><p>If the item has a customization screen, this even listener should also display that control after the item is added to the order, to allow it to be customized.</p><h3 id=customizing-the-order-items>Customizing the Order Items</h3><p>For those customization screens, you want to bind the specific order item instance as the <code>DataContext</code> so that you can data-bind the controls directly to the order item. I.e. if our <code>DataContext</code> is a <code>Dog</code> class, we can bind a <code>&lt;CheckBox></code> control to its <code>YellowMustard</code> property with:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-xml data-lang=xml><span class=line><span class=cl><span class=nt>&lt;CheckBox</span> <span class=na>isChecked=</span><span class=s>{Binding</span> <span class=na>Path=</span><span class=s>YellowMustard}</span><span class=nt>&gt;</span>Yellow Mustard<span class=nt>&lt;/CheckBox&gt;</span></span></span></code></pre></div><p>If your data binding is set up correctly, the checkbox will reflect the current state of the <code>Dog.YellowMustard</code> property, and clicking it will update that state.</p><p>All of your customization screens need to be data bound this way.</p><h4 id=hint>Hint</h4><p>It is easiest to bind the order item at the same time you display the customization screen, i.e. in the button click listener of the <code>MenuItemSelectionControl</code>.</p><p>Radio buttons are easiest to handle by restyling a <code>&lt;List></code> to use the radiobutton template. Refer to the textbook section on <a href=https://textbooks.cs.ksu.edu/cis400/2-desktop-development/04-data-binding/05-binding-enums/ rel=external target=_blank>Binding Enums</a> for guidance on this process.</p><h3 id=displaying-the-order-properties>Displaying the Order Properties</h3><p>Likewise, you will want to data-bind the <code>Order</code> properties to your <code>OrderSummaryControl</code>, including the <code>Subtotal</code>, <code>Tax</code>, <code>Total</code>, <code>Number</code> and <code>DateTime</code>. These would be one-way bindings (as you don&rsquo;t want the user to be able to edit these values, as they are calculated from the order). If you do this correctly, the values in the UI will update automatically as you make changes to the order.</p><p>You will also want to bind the <code>Order.Items</code> property to your <code>OrderSummaryControl</code>&rsquo;s <code>&lt;List></code>, so that the individual order items are displayed. However, if you use the default functionality the list will show the fully-qualified name of the class the item is, not the details we want. Thus, you will need to replace the <code>&lt;List></code>&rsquo;s <code>ItemTemplate</code> to use a custom <code>&lt;DataTemplate></code> you define. This should display the item&rsquo;s name, price, and its special instructions.</p><p>An example of what this might look like is displayed below:</p><p><a href=#R-image-1c16fecdb6d255932223f70cdb6178f5 class=lightbox-link><img alt="An example of the order summary list" class="border lazy lightbox noshadow figure-image" loading=lazy src=/cis400/images/d.u21.7.1.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-1c16fecdb6d255932223f70cdb6178f5><img alt="An example of the order summary list" class="border lazy lightbox noshadow lightbox-image" loading=lazy src=/cis400/images/d.u21.7.1.png></a></p><p>Refer to the textbook section on <a href=https://textbooks.cs.ksu.edu/cis400/2-desktop-development/04-data-binding/04-binding-lists/ rel=external target=_blank>Binding Lists</a> for guidance on this process.</p><h3 id=removing-items-from-the-order>Removing Items from the Order</h3><p>You need to allow the user to remove an item from the order. The exact details of the implementation are left to you, but some possibilities are:</p><ol><li>Adding a &ldquo;remove&rdquo; button to the list of order items in the <code>OrderSummaryControl</code></li><li>Adding a &ldquo;remove&rdquo; button to the customization screen for each order item (note you may need to add additional customization screens)</li><li>Adding a &ldquo;remove selected&rdquo; button to the <code>OrderSummaryControl</code> that removes the currently selected item from the displayed order list</li></ol><h3 id=xml-style-documentation>XML Style Documentation</h3><p>All public classes, properties, methods, fields, etc. in the <code>Data</code> and <code>PointOfSale</code> projects should be documented inline using UML-Style documentation, as covered in the [documentation chapter]{((&lt;ref 03-documentation>))}.</p><h3 id=uml-class-diagram>UML Class Diagram</h3><p>You will need to update the UML Class Diagram for the <code>Data</code> project and the <code>PointOfSale</code> project, which should follow the guidelines set out in the <a href=https://textbooks.cs.ksu.edu/cis400/1-object-orientation/05-uml/ rel=external target=_blank>UML Chapter</a>. This should be added to a <em>documentation</em> folder in your project, which <strong>must</strong> be added to source control. See (<a href=https://textbooks.cs.ksu.edu/cis400/b-git-and-github/13-adding-documentation-files/ rel=external target=_blank>https://textbooks.cs.ksu.edu/cis400/b-git-and-github/13-adding-documentation-files/</a>) for guidance on ensuring the files are correctly added. You may include either Visio, PDF, or an image file, but including a Visio file ensures you can continue to edit your UML to keep it up-to-date with changes you will make in future milestones.</p><p>Note that WPF controls define a single class in two parts (the <em>.xaml</em> file and the <em>.xaml.cs</em> file). Despite it being spread over two files, it is still a single class and should have only a single box in the UML diagram.</p><h2 id=submissions>Submissions</h2><ul><li><p>Create a new release tag - Submit the release URL</p><ul><li><p>If you do not remember how to do this, please revisit the <a href=https://textbooks.cs.ksu.edu/cis400/b-git-and-github/12-release/ rel=external target=_blank>Create a Release page</a></p></li><li><p>Keep in mind the version!!!</p></li></ul></li></ul><h3 id=review-of-the-week>Review of the week</h3><ul><li><a href="https://docs.microsoft.com/en-us/dotnet/desktop/wpf/?view=netdesktop-5.0" rel=external target=_blank>Windows Presentation Foundation Docs</a></li></ul><footer class=footline></footer></article></div></main><div class=git-footer><p class=theme-version-footer>6.0.0</p><p>Last modified by:
<i class='fas fa-user'></i> Russell Feldhausen
<i class='fas fa-calendar'></i> <a href=https://github.com/ksu-cs-textbooks/cis400/commit/7c4ed95cab7ce3716b0506b021a9ec88e64d24d8>Jun 27, 2024</a></p></div></div><script src=/cis400/js/clipboard.min.js?1728334435 defer></script><script src=/cis400/js/perfect-scrollbar.min.js?1728334435 defer></script><script src=/cis400/js/theme.js?1728334435 defer></script></body></html>