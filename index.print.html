




	
	
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		
		

	
	
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		
		

	
	
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="height=device-height, width=device-width, initial-scale=1.0, minimum-scale=1.0">
    <meta name="generator" content="Hugo 0.117.0">
    <meta name="generator" content="Relearn 5.18.0">
    <meta name="description" content="K-State CIS 400 Textbook">
    <meta name="author" content="Nathan Bean">
    <title>CIS 400: Object-Oriented Design, Implementation, and Testing :: K-State CIS 400 Textbook</title>
    <link href="https://ksu-cs-textbooks.github.io/cis400/index.html" rel="canonical" type="text/html" title="CIS 400: Object-Oriented Design, Implementation, and Testing :: K-State CIS 400 Textbook">
    <link href="https://ksu-cs-textbooks.github.io/cis400/index.xml" rel="alternate" type="application/rss+xml" title="CIS 400: Object-Oriented Design, Implementation, and Testing :: K-State CIS 400 Textbook">
    <!-- https://github.com/filamentgroup/loadCSS/blob/master/README.md#how-to-use -->
    <link href="https://ksu-cs-textbooks.github.io/cis400/css/fontawesome-all.min.css?1696172878" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="https://ksu-cs-textbooks.github.io/cis400/css/fontawesome-all.min.css?1696172878" rel="stylesheet"></noscript>
    <link href="https://ksu-cs-textbooks.github.io/cis400/css/nucleus.css?1696172878" rel="stylesheet">
    <link href="https://ksu-cs-textbooks.github.io/cis400/css/auto-complete.css?1696172878" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="https://ksu-cs-textbooks.github.io/cis400/css/auto-complete.css?1696172878" rel="stylesheet"></noscript>
    <link href="https://ksu-cs-textbooks.github.io/cis400/css/perfect-scrollbar.min.css?1696172878" rel="stylesheet">
    <link href="https://ksu-cs-textbooks.github.io/cis400/css/fonts.css?1696172878" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="https://ksu-cs-textbooks.github.io/cis400/css/fonts.css?1696172878" rel="stylesheet"></noscript>
    <link href="https://ksu-cs-textbooks.github.io/cis400/css/theme.css?1696172878" rel="stylesheet">
    <link href="https://ksu-cs-textbooks.github.io/cis400/css/theme-auto.css?1696172878" rel="stylesheet" id="variant-style">
    <link href="https://ksu-cs-textbooks.github.io/cis400/css/variant.css?1696172878" rel="stylesheet">
    <link href="https://ksu-cs-textbooks.github.io/cis400/css/print.css?1696172878" rel="stylesheet" media="print">
    <link href="https://ksu-cs-textbooks.github.io/cis400/css/format-print.css?1696172878" rel="stylesheet">
    <link href="https://ksu-cs-textbooks.github.io/cis400/css/ie.css?1696172878" rel="stylesheet">
    <script src="https://ksu-cs-textbooks.github.io/cis400/js/url.js?1696172878"></script>
    <script src="https://ksu-cs-textbooks.github.io/cis400/js/variant.js?1696172878"></script>
    <script>
      // hack to let hugo tell us how to get to the root when using relativeURLs, it needs to be called *url= for it to do its magic:
      // https://github.com/gohugoio/hugo/blob/145b3fcce35fbac25c7033c91c1b7ae6d1179da8/transform/urlreplacers/absurlreplacer.go#L72
      window.index_js_url="https://ksu-cs-textbooks.github.io/cis400/index.search.js";
      var root_url="https://ksu-cs-textbooks.github.io/cis400/";
      var baseUri=root_url.replace(/\/$/, '');
      // translations
      window.T_Copy_to_clipboard = 'Copy to clipboard';
      window.T_Copied_to_clipboard = 'Copied to clipboard!';
      window.T_Copy_link_to_clipboard = 'Copy link to clipboard';
      window.T_Link_copied_to_clipboard = 'Copied link to clipboard!';
      window.T_No_results_found = 'No results found for \u0022{0}\u0022';
      window.T_N_results_found = '{1} results found for \u0022{0}\u0022';
      // some further base stuff
      var baseUriFull='https:\/\/ksu-cs-textbooks.github.io\/cis400/';
      window.variants && variants.init( [ 'auto', 'light-theme', 'dark-theme' ] );
    </script>
    
    <link href="https://ksu-cs-textbooks.github.io/cis400/css/custom.css?1696172878" rel="stylesheet">

  </head>
  <body class="mobile-support print disableInlineCopyToClipboard" data-url="https://ksu-cs-textbooks.github.io/cis400/index.html">
    <div id="body" class="default-animation">
      <div id="sidebar-overlay"></div>
      <div id="toc-overlay"></div>
      <nav id="topbar" class="highlightable">
        <div>
          <div id="breadcrumbs">
            <span id="sidebar-toggle-span">
              <a href="#" id="sidebar-toggle" class="topbar-link" title='Menu (CTRL+ALT+n)'><i class="fas fa-bars fa-fw"></i></a>
            </span>
            <ol class="links" itemscope itemtype="http://schema.org/BreadcrumbList">
              <li itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement"><span itemprop="name">CIS 400: Object-Oriented Design, Implementation, and Testing</span><meta itemprop="position" content="1"></li>
            </ol>
          </div>
        </div>
      </nav>
      <main id="body-inner" class="highlightable home" tabindex="-1">
        <div class="flex-block-wrapper">
          <article class="home">
            <header class="headline">
            </header>
<h1 id="cis-400-object-oriented-design-implementation-and-testing">CIS 400: Object-Oriented Design, Implementation, and Testing</h1>

<p>Author: Nathan Bean
<br>
Edited by: Julie Thornton</p>
<p>Kansas State University</p>
<p>Â© 2020-present</p>
<p><a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-sa/4.0/88x31.png" /></a><br />This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/">Creative Commons Attribution-NonCommercial-ShareAlike 4.0 International License</a>.</p>

            <footer class="footline">

            </footer>
          </article>

          <section>
            <h1 class="a11y-only">Subsections of CIS 400: Object-Oriented Design, Implementation, and Testing</h1>
    
    
          <article class="chapter">
            <header class="headline">
            </header>


<div class="article-subheading">Chapter 0</div>
<h1 id="course-information">Course Information</h1>

<p>Getting Oriented</p>

  
    
    
  
  
<div class="box notices cstyle noiframe">
  <div class="box-label"><i class="fa-fw fas fa-times-circle"></i> Web Only</div>
  <div class="box-content">

<p>This textbook was authored for the <strong>CIS 400 - Object-Oriented Design, Implementation, and Testing</strong> course at Kansas State University.  This front matter is specific to that course.  If you are not enrolled in the course, please disregard this section.</p>
</div>
</div>

            <footer class="footline">

            </footer>
          </article>

          <section>
            <h1 class="a11y-only">Subsections of Course Information</h1>
    
    
          <article class="default">
            <header class="headline">
            </header>
<h1 id="course-structure">Course Structure</h1>


  
    
    
  
  
<div class="box notices cstyle noiframe">
  <div class="box-label"><i class="fa-fw fas fa-times-circle"></i> Web Only</div>
  <div class="box-content">

<p>This textbook was authored for the <strong>CIS 400 - Object-Oriented Design, Implementation, and Testing</strong> course at Kansas State University.  This front matter is specific to that course.  If you are not enrolled in the course, please disregard this section.</p>
</div>
</div>
<p>This course is taught in the &ldquo;flipped&rdquo; style.  This means you will be watching videos and working through tutorials <em>before</em> you come to class.  Your class sessions will be used for asking questions, working on and getting help with your projects, and taking exams.</p>
<h3 id="the-big-software-solution">The Big Software Solution</h3>
<p>Up to this point, you&rsquo;ve likely done a lot of what I like to call &ldquo;Baby Projects&rdquo; - programming projects that are useful to demonstrate a concept or technique, but really don&rsquo;t do anything beyond that.  In contrast, we&rsquo;ll be building a large, multi-project software solution to meet a real-world problem - the software needed to run a fast-food franchise chain!</p>
<p>We&rsquo;ll be building this software <em>iteratively</em> over the entire semester!  Each week, you&rsquo;ll turn in one milestone as a GitHub release, just like you might do as a professional software developer.  Because each milestone builds upon your prior work, it is critical that you keep up.  Falling behind will very quickly tank your grade and impact your ability to learn and develop strong programming skills.</p>
<h3 id="modules">Modules</h3>
<p>The course is organized into modules focused on a specific topic, accessible from the Canvas <strong>modules</strong> menu.  Each module introduces one or more topics, and 1) covers the vocabulary and concepts with assigned readings, 2) puts those concepts into practice with guided tutorials, and 3) tasks you with applying those techniques you just practiced in a weekly milestone.</p>

  
  
<div class="box notices cstyle info">
  <div class="box-label"><i class="fa-fw fas fa-info-circle"></i> Info</div>
  <div class="box-content">

<p>Most non-exam weeks will consist of <em>two</em> video-guided tutorials and the weekly milestone.  The first module will be due by Monday, the second Tuesday, and the milestone on Friday. Each regular tutorial will take several hours to complete, and milestones can often take ten hours or more. You should plan your learning schedule accordingly.</p>
<p>The modules, and all of their associated assignments, are available through Canvas.  You must complete each module item <em>in order</em>, and the prior week&rsquo;s module must be finished before you can move on to those in the next week. Be aware that if you procrastinate and don&rsquo;t start until Friday, it is unlikely that you will finish. Which means you will fall behind.  You can very quickly find yourself in a hole you cannot climb out of.  So time management is a <em>critical</em> skill you need to be developing.</p>
</div>
</div>

  
  
<div class="box notices cstyle warning">
  <div class="box-label"><i class="fa-fw fas fa-exclamation-triangle"></i> Warning</div>
  <div class="box-content">

<p>Remember that in the CS Professional Program, a grade of <strong>less than C</strong> in a professional program course (like CIS 400) results in a &ldquo;<strong>Warning of Unsatisfactory Progress</strong>.&rdquo;  This warning sticks with you the rest of your time in Computer Science at K-State. If you earn a second, similar grade, you will be dismissed from the CS Professional Program!</p>
</div>
</div>

            <footer class="footline">

            </footer>
          </article>

    
    
          <article class="default">
            <header class="headline">
            </header>
<h1 id="where-to-find-help">Where to Find Help</h1>


  
    
    
  
  
<div class="box notices cstyle noiframe">
  <div class="box-label"><i class="fa-fw fas fa-times-circle"></i> Web Only</div>
  <div class="box-content">

<p>This textbook was authored for the <strong>CIS 400 - Object-Oriented Design, Implementation, and Testing</strong> course at Kansas State University.  This front matter is specific to that course.  If you are not enrolled in the course, please disregard this section.</p>
</div>
</div>
<p>As you work on the materials in this course, you may run into questions or problems and need assistance.</p>
<h2 id="course-sessions">Course Sessions</h2>
<p>As mentioned before, the course sessions are one of the best time to get help with your assignments - during this time the instructor and TAs are scheduled to be available and on-hand in the computer lab.</p>
<h2 id="discord">Discord</h2>
<p>For questions that crop up outside of class times, your first line of communication for this course is the departmental Discord server.   If you have not yet signed into the course discord channel, or are not yet a Discord user, please visit <a href="https://discordbot.cs.ksu.edu" target="_blank">https://discordbot.cs.ksu.edu</a>
.  This assistant will link your K-State and Discord accounts and set your username for the server in accordance with K-State policy.</p>

  
  
<div class="box notices cstyle tip">
  <div class="box-label"><i class="fa-fw fas fa-lightbulb"></i> Tip</div>
  <div class="box-content">

<p>In addition to class channels, the Discord server hosts channels for student clubs, announcements, and general discussion.  It is a good place to find information and socialize when you are unable to meet face-to-face.</p>
</div>
</div>
<h4 id="course-channel">Course Channel</h4>
<p>Discord uses <em>channels</em> - the equivalent of chat rooms - to provide a place for related conversations.  The channel for this course is <strong>#cis-400</strong>.  It is the best place to go to get help with anything related to this course, from the tutorials and projects to issues with Visual Studio and Canvas. Before you post on Discord, use the search feature in the channel or scroll back in the chat history to make sure the question has not already been posted before. It will save everyone quite a bit of time.</p>
<p>Additionally, all course announcements will be made in the course channel (as well as through the Canvas announcements), so make a habit of checking the channel regularly.</p>

  
  
<div class="box notices cstyle tip">
  <div class="box-label"><i class="fa-fw fas fa-lightbulb"></i> Tip</div>
  <div class="box-content">

<p>The <strong>helping hand</strong> extra credit assignment provides bonus points for students who are caught helping other students in the class Discord channel.</p>
</div>
</div>
<h4 id="other-features">Other Features</h4>
<p>Discord includes lots of useful features:</p>
<ul>
<li>Use the <code>@</code> symbol with a username in a message to create a mention, which notifies that user immediately, i.e. <strong>@Nathan Bean (he/him)</strong> will alert me that you&rsquo;ve made a post that mentions me.</li>
<li>Use <code>Shift</code>+<code>Enter</code> for new lines in a multi-line message</li>
<li>Use the backtick mark (, i.e. <code>`var c = 4;`</code>) to enclose code snippets to format them as programming code, and triple backtick marks to enclose multiline code comments (<code>```[multiline code]```</code>).</li>
<li>You can also set your status to indicate your current availability.</li>
</ul>
<h2 id="email">Email</h2>
<p>The Discord class channel is the preferred communication medium for the course because 1) you will generally get a faster response than email, and 2) writing code in email is <em>a terrible experience</em>, both to write and to read.  Discord&rsquo;s support of markdown syntax makes including code comments much easier on both of us.</p>
<p>For general questions, asking them in the course channel will give you the best chance of a fast answer, from the course instructors, TAs, or your fellow students.  And if you help a fellow student, you might get bonus points!</p>
<p>If you have a more personal question, however, you are welcome to email the instructor.</p>
<h2 id="other-avenues-for-help">Other Avenues for Help</h2>
<p>There are a few resources available to you that you should be aware of. First, if you have any issues working with K-State Canvas, K-State IT resources, or any other technology related to the delivery of the course, your first source of help is the K-State IT Helpdesk. They can easily be reached via email at <a href="mailto:helpdesk@ksu.edu">helpdesk@ksu.edu</a>
. Beyond them, there are many online resources for using Canvas, all of which are linked in the resources section below the video. As a last resort, you may also want to post in Discord, but in most cases we may simply redirect you to the K-State helpdesk for assistance.</p>
<p>If you have issues with the technical content of the course, specifically related to completing the tutorials and projects, there are several resources available to you. First and foremost, make sure you consult the vast amount of material available in the course modules, including the links to resources. Usually, most answers you need can be found there.</p>
<p>If you are still stuck or unsure of where to go, the next best thing is to post your question on Discord, or review existing discussions for a possible answer. You can find the link to the left of this video. As discussed earlier, the instructors, TAs, and fellow students can all help answer your question quickly.</p>
<p>Of course, as another step you can always exercise your information-gathering skills and use online search tools such as Google to answer your question. While you are not allowed to search online for direct solutions to assignments or projects, you are more than welcome to use Google to access programming resources such as the <a href="https://developer.microsoft.com/en-us/" target="_blank">Microsoft Developer Network</a>
, <a href="https://docs.microsoft.com/en-us/dotnet/csharp/tour-of-csharp/" target="_blank">C# language documentation</a>
, <a href="https://www.wpf-tutorial.com/" target="_blank">WPF-tutorial.com</a>
, and other tutorials. I can definitely assure you that programmers working in industry are often using Google and other online resources to solve problems, so there is no reason why you shouldnât start building that skill now.</p>
<p>Next, we have grading and administrative issues. This could include problems or mistakes in the grade you received on a project, missing course resources, or any concerns you have regarding the course and the conduct of myself and your peers. Youâll be interacting with us on a variety of online platforms and sometimes things happen that are inappropriate or offensive. There are lots of resources at K-State to help you with those situations. First and foremost, please DM me on Discord as soon as possible and let me know about your concern, if it is appropriate for me to be involved. If not, or if youâd rather talk with someone other than me about your issue, I encourage you to contact either your academic advisor, the CS department staff, College of Engineering Student Services, or the K-State Office of Student Life. Finally, if you have any concerns that you feel should be reported to K-State, you can do so at <a href="https://www.k-state.edu/report/" target="_blank">https://www.k-state.edu/report/</a>
. That site also has links to a large number of resources at K-State that you can use when you need help.</p>
<p>Finally, if you find any errors or omissions in the course content, or have suggestions for additional resources to include in the course, either post on Discord or email the instructor. There are some extra credit points available for helping to improve the course, so be on the lookout for anything that you feel could be changed or improved.</p>

  
  
<div class="box notices cstyle info">
  <div class="box-label"><i class="fa-fw fas fa-info-circle"></i> Info</div>
  <div class="box-content">

<p>The <strong>Bug Bounty</strong> extra credit assignment gives points for finding errors in the course materials.  Remember, your instructors are human, and do make mistakes!  But we don&rsquo;t want those occasional mistakes to trip you and your peers up in your learning efforts, so bringing them to our attention is appreciated.</p>
</div>
</div>
<p>So, in summary, Discord should always be your first stop when you have a question or run into a problem. For issues with Canvas or Visual Studio, you are also welcome to refer directly to the resources for those platforms. For questions specifically related to the projects, use Discord for sure. For grading questions and errors in the course content or any other issues, please email the instructor for assistance.</p>
<p>Our goal in this program is to make sure that you have the resources available to you to be successful. Please donât be afraid to take advantage of them and ask questions whenever you want.</p>
<h4 id="resources">Resources</h4>
<ul>
<li><a href="https://discordbot.cs.ksu.edu" target="_blank">CS Discordbot</a>
</li>
<li><a href="https://www.k-state.edu/its/helpdesk/" target="_blank">K-State IT Help Desk</a>
 - Email: <a href="mailto:helpdesk@ksu.edu">helpdesk@ksu.edu</a>
</li>
<li><a href="http://public.online.k-state.edu/help/" target="_blank">K-State Online Canvas Help</a>
</li>
<li><a href="https://community.canvaslms.com/community/answers/guides" target="_blank">Instructure Canvas Guides</a>
</li>
<li><a href="http://www.lib.k-state.edu/" target="_blank">K-State Libraries</a>
</li>
<li><a href="https://support.cs.ksu.edu/" target="_blank">K-State CS Support</a>
</li>
<li><a href="https://www.cs.ksu.edu/undergraduate/advising/" target="_blank">K-State CS Advising</a>
</li>
<li><a href="https://www.engg.ksu.edu/studentservices/" target="_blank">K-State Engineering Student Services</a>
</li>
<li><a href="https://www.k-state.edu/studentlife/" target="_blank">K-State Office of Student Life</a>
</li>
<li><a href="https://www.k-state.edu/report/" target="_blank">K-State Report It</a>
</li>
<li><a href="https://visualstudio.microsoft.com/support/" target="_blank">Visual Studio Support</a>
</li>
</ul>

            <footer class="footline">

            </footer>
          </article>

    
    
          <article class="default">
            <header class="headline">
            </header>
<h1 id="what-youll-learn">What You&#39;ll Learn</h1>


  
    
    
  
  
<div class="box notices cstyle noiframe">
  <div class="box-label"><i class="fa-fw fas fa-times-circle"></i> Web Only</div>
  <div class="box-content">

<p>This textbook was authored for the <strong>CIS 400 - Object-Oriented Design, Implementation, and Testing</strong> course at Kansas State University.  This front matter is specific to that course.  If you are not enrolled in the course, please disregard this section.</p>
</div>
</div>
<p>The following is an outline of the topics we will be covering and when.</p>

  
  
<div class="box notices cstyle info">
  <div class="box-label"><i class="fa-fw fas fa-info-circle"></i> Info</div>
  <div class="box-content">

<p>Please be aware that this schedule and topic list will likely undergo some revision during the semester.</p>
</div>
</div>
<h2 id="schedule">Schedule</h2>
<p>Week 1</p>
<ul>
<li>Introduction to the Course</li>
<li>Pretest</li>
<li>Setting the Stage (The context in which object-orientation emerged)</li>
<li>Git and GitHub</li>
<li>Milestone 0</li>
</ul>
<p>Week 2</p>
<ul>
<li>Encapsulation</li>
<li>Milestone 1</li>
</ul>
<p>Week 3</p>
<ul>
<li>Classes and Objects</li>
<li>Documentation</li>
<li>Milestone 2</li>
</ul>
<p>Week 4</p>
<ul>
<li>Polymorphism</li>
<li>UML</li>
<li>Milestone 3</li>
</ul>
<p>Week 5</p>
<ul>
<li>Testing</li>
<li>Advanced C# Syntax</li>
<li>Milestone 4</li>
</ul>
<p>Week 6</p>
<ul>
<li>Exam I</li>
</ul>
<p>Week 7</p>
<ul>
<li>Windows Presentation Foundation</li>
<li>The Elements Tree</li>
<li>Milestone 5</li>
</ul>
<p>Week 8</p>
<ul>
<li>Events</li>
<li>Data Binding</li>
<li>Milestone 6</li>
</ul>
<p>Week 9</p>
<ul>
<li>Testing WPF Apps</li>
<li>Milestone 7</li>
</ul>
<p>Week 10</p>
<ul>
<li>Dependency Objects</li>
<li>MVVM</li>
<li>Milestone 8</li>
</ul>
<p>Week 11</p>
<ul>
<li>Exam II</li>
</ul>
<p>Week 12</p>
<ul>
<li>Core Web Technologies</li>
<li>ASP.NET</li>
<li>Milestone 9</li>
</ul>
<p>Week 13</p>
<ul>
<li>Web Forms</li>
<li>LINQ</li>
<li>Milestone 10</li>
</ul>
<p>Week 14</p>
<ul>
<li>Web APIs</li>
<li>Milestone 11</li>
</ul>
<p>Week 15</p>
<ul>
<li>Deployment</li>
<li>Milestone 12</li>
</ul>
<p>Week 16</p>
<ul>
<li>Final Exam</li>
</ul>

            <footer class="footline">

            </footer>
          </article>

    
    
          <article class="default">
            <header class="headline">
            </header>
<h1 id="course-textbooks">Course Textbooks</h1>


  
    
    
  
  
<div class="box notices cstyle noiframe">
  <div class="box-label"><i class="fa-fw fas fa-times-circle"></i> Web Only</div>
  <div class="box-content">

<p>This textbook was authored for the <strong>CIS 400 - Object-Oriented Design, Implementation, and Testing</strong> course at Kansas State University.  This front matter is specific to that course.  If you are not enrolled in the course, please disregard this section.</p>
</div>
</div>
<p>This course does not have a required print textbook.  The resources presented in the modules are also organized into an online textbook that can be accessed here: <a href="https://textbooks.cs.ksu.edu/cis400">https://textbooks.cs.ksu.edu/cis400</a>
.  You may find this a useful reference if you prefer a traditional textbook layout.  Additionally, since the textbook exists outside of Canvas&rsquo; access control, you can continue to utilize it after the course ends.</p>

  
  
<div class="box notices cstyle warning">
  <div class="box-label"><i class="fa-fw fas fa-exclamation-triangle"></i> Warning</div>
  <div class="box-content">

<p>Please note that the materials presented in Canvas have additional graded assignments and exercises worked into the reading order that do not appear in the online edition of the textbook.  You are responsible for completing these!</p>
</div>
</div>
<h3 id="cs-departmental-textbook-server">CS Departmental Textbook Server</h3>
<p>The CIS 400 course textbook is only one of several textbooks authored by your instructors and made available on the departmental server.  For example, your CIS 300 textbook is also available there for you to go back and review.  You can access any of these textbooks at the site <a href="https://textbooks.cs.ksu.edu" target="_blank"><a href="https://textbooks.cs.ksu.edu" target="_blank">https://textbooks.cs.ksu.edu</a>
</a></p>
<h3 id="oriley-for-higher-education">O&rsquo;Riley for Higher Education</h3>
<p>If you are looking for additional resources to support your learning, a great resource that is available to Kansas State University students is the <a href="https://go.oreilly.com/kansas-state-university" target="_blank">O&rsquo;Riley For Higher Education</a> digital library offered through the Kansas State University Library.  These include electronic editions of thousands of popular textbooks as well as videos and tutorials.  As of this writing, a search for object-orientation returns 13,237 results and C# returns 5,984 results.  In particular, I would recommend these books:</p>
<ul>
<li>&ldquo;<a href="https://learning.oreilly.com/library/view/the-object-oriented-thought/9780135182130/" target="_blank">The Object-Oriented Thought Process</a>
&rdquo; by Matt Weisfeld for learning more about object-orientation.</li>
<li>&ldquo;<a href="https://learning.oreilly.com/library/view/mastering-windows-presentation/9781838643416/" target="_blank">Mastering Windows Presentation Foundation</a>
&rdquo; by Sheridan Yuen for learning about WPF.</li>
<li>&ldquo;<a href="https://learning.oreilly.com/library/view/xunit-test-patterns/9780131495050/" target="_blank">xUnit Test Patterns: Refactoring Test Code</a>
&rdquo; by Gerard Meszaros for learning about the xUnit framework.</li>
</ul>
<p>There are likewise materials for other computer science topics you may have an interest in - it is a great resource for all your CS coursework.  It costs you nothing (technically, your access was paid for by your tuition and fees), so you might as well make use of it!</p>

            <footer class="footline">

            </footer>
          </article>

    
    
          <article class="default">
            <header class="headline">
            </header>
<h1 id="course-software">Course Software</h1>


  
    
    
  
  
<div class="box notices cstyle noiframe">
  <div class="box-label"><i class="fa-fw fas fa-times-circle"></i> Web Only</div>
  <div class="box-content">

<p>This textbook was authored for the <strong>CIS 400 - Object-Oriented Design, Implementation, and Testing</strong> course at Kansas State University.  This front matter is specific to that course.  If you are not enrolled in the course, please disregard this section.</p>
</div>
</div>
<p>For this course, we will be using a number of software packages including:</p>
<ul>
<li>Microsoft Visual Studio 2022</li>
<li>Microsoft Visio 2021</li>
</ul>
<p>These have been installed in the classroom lab, as well as all Engineering and Computer Science labs.  It is strongly suggested that you install the same versions on your own development machines if you plan on working from home.  Alternatively, you can <em>remote desktop</em> into a lab computer and use the installed software there.</p>

  
  
<div class="box notices cstyle warning">
  <div class="box-label"><i class="fa-fw fas fa-exclamation-triangle"></i> Warning</div>
  <div class="box-content">

<p>Please note that the &ldquo;Show whole line completions&rdquo; option must be disabled in Visual Studio IntelliCode. You can disable it in Visual Studio by going to: Tools-&gt;Options, searching for &ldquo;IntelliCode&rdquo;, and unchecking the box that says &ldquo;Show whole line completions&rdquo;.</p>
<p>Using the whole line completions to help code the milestones is an academic honesty violation.</p>
</div>
</div>
<h2 id="remote-desktop-access">Remote Desktop Access</h2>
<p>To use a remote desktop, you must first install a remote desktop client on your computer. Microsoft supplies a client for most platforms (Mac, Windows, etc.), which you can find links to and information about <a href="https://docs.microsoft.com/en-us/windows-server/remote/remote-desktop-services/clients/remote-desktop-clients?redirectedfrom=MSDN" target="_blank">here</a>
.</p>
<p>The remote desktop server is behind a network firewall, so when accessing it from off-campus, you must be using the K-State Virtual Private Network (VPN).  It has its own client that also must be installed.  You can learn about K-State&rsquo;s VPN and download the client on <a href="https://www.k-state.edu/its/security/secure-data/vpn/" target="_blank">the K-State VPN Page</a>
</p>
<p>For remote desktop servers, you can use either those maintained by <a href="https://support.cs.ksu.edu/CISDocs/wiki/Remote_Access" target="_blank">The Department of Computer Science</a>
 or the <a href="https://cecs.engg.ksu.edu/labs/vdi" target="_blank">College of Engineering</a>
.</p>
<h2 id="installing-on-your-machine">Installing on Your Machine</h2>
<p>If you would prefer to install the software on your own development machine, you can obtain no-cost copies of Microsoft Visual Studio Professional Edition and Microsoft Visio through Microsoft&rsquo;s <a href="https://azureforeducation.microsoft.com/devtools" target="_blank">Azure Portal</a>
 and signing in with your K-State eid and password.</p>
<p>After signing in, click the &ldquo;Software&rdquo; option in the left menu, and browse the available software for what you need.</p>
<p>The Visual Studio Community Edition is also available as a free download <a href="https://visualstudio.microsoft.com/downloads/" target="_blank">here</a>
. While not as full-featured as the Professional edition you can download through Azure Portal, it will be sufficient for the needs of this class.</p>
<h2 id="discord">Discord</h2>
<p>Discord can be used through its web app at <a href="https://discord.com/webapp" target="_blank">https://discord.com/webapp</a>
 or you can <a href="https://discord.com/download" target="_blank">download a native app</a>
 for Windows, Linux, Mac, iOS, or Android devices.</p>

            <footer class="footline">

            </footer>
          </article>

          </section>
    
    
          <article class="chapter">
            <header class="headline">
            </header>


<div class="article-subheading">Chapter I</div>
<h1 id="object-orientation">Object-Orientation</h1>

<p>Every object tells a story</p>

            <footer class="footline">

            </footer>
          </article>

          <section>
            <h1 class="a11y-only">Subsections of Object-Orientation</h1>
    
    
          <article class="chapter">
            <header class="headline">
            </header>


<div class="article-subheading">Chapter 0</div>
<h1 id="introduction">Introduction</h1>

<p>Setting the Stage</p>

            <footer class="footline">

            </footer>
          </article>

          <section>
            <h1 class="a11y-only">Subsections of Introduction</h1>
    
    
          <article class="default">
            <header class="headline">
            </header>
<h1 id="introduction">Introduction</h1>

<p>Before we delve too deeply into how to reason about Object-Orientation and how to utilize it in your programming efforts, it would be useful to understand <em>why</em> object-orientation came to exist.  This initial chapter seeks to explore the origins behind object-oriented programming.</p>
<h2 id="key-terms">Key Terms</h2>
<p>Some key terms to learn in this chapter are:</p>
<ul>
<li>The Software Crisis</li>
<li>GOTO statements</li>
<li>Programming Language Paradigm</li>
<li>Imperative Programming</li>
<li>Functional Programming</li>
<li>Structured Programming</li>
<li>Object-Orientation</li>
</ul>

            <footer class="footline">

            </footer>
          </article>

    
    
          <article class="default">
            <header class="headline">
            </header>
<h1 id="the-growth-of-computing">The Growth of Computing</h1>

<p>By this point, you should be familiar enough with the history of computers to be aware of the evolution from the massive room-filling vacuum tube implementations of ENIAC, UNIVAC, and other first-generation computers to transistor-based mainframes like the PDP-1, and the eventual introduction of the microcomputer (desktop computers that are the basis of the modern PC) in the late 1970&rsquo;s.  Along with a declining size, each generation of these machines also cost less:</p>
<table>
 <tr>
    <th>Machine</th>
    <th>Release Year</th>
    <th>Cost at Release</th>
    <th>Adjusted for Inflation</th>
  </tr>
  <tr>
    <td>ENIAC</td>
    <td>1945</td>
    <td>$400,000</td>
    <td>$5,288,143</td>
  </tr>
  <tr>
    <td>UNIVAC</td>
    <td>1951</td>
    <td>$159,000</td>
    <td>$1,576,527</td>
  </tr>
  <tr>
    <td>PDP-1</td>
    <td>1963</td>
    <td>$120,000</td>
    <td>$1,010,968</td>
  </tr>
  <tr>
    <td>Commodore PET</td>
    <td>1977</td>
    <td>$795</td>
    <td>$5,282</td>
  </tr>
  <tr>
    <td>Apple II (4K RAM model)</td>
    <td>1977</td>
    <td>$1,298</td>
    <td>$8,624</td>
  </tr>
  <tr>
    <td>IBM PC</td>
    <td>1981</td>
    <td>$1,565</td>
    <td>$4,438</td>
  </tr>
  <tr>
    <td>Commodore 64</td>
    <td>1982</td>
    <td>$595</td>
    <td>$1,589</td>
  </tr>
</table>
<p>This increase in affordability was also coupled with an increase in computational power.  Consider the ENIAC, which computed at 100,000 cycles per second.  In contrast, the relatively inexpensive Commodore 64 ran at 1,000,000 cycles per second, while the more pricy IBM PC ran 4,770,000 cycles per second.</p>
<p>Not surprisingly, governments, corporations, schools, and even individuals purchased computers in larger and larger quantities, and the demand for software to run on these platforms and meet these customers&rsquo; needs likewise grew. Moreover, the sophistication expected from this software also grew.  Edsger Dijkstra described it in these terms:</p>
<blockquote>
The major cause of the software crisis is that the machines have become several orders of magnitude more powerful! To put it quite bluntly: as long as there were no machines, programming was no problem at all; when we had a few weak computers, programming became a mild problem, and now we have gigantic computers, programming has become an equally gigantic problem.
<p><em>Edsger Dijkstra, The Humble Programmer (EWD340), Communications of the ACM</em></p>
</blockquote>
<p>Coupled with this rising demand for programs was a demand for skilled software developers, as reflected in the following table of graduation rates in programming-centric degrees (the dashed line represents the growth of <em>all</em> bachelor degrees, not just computer-related ones):</p>
<p>
<a href="#image-b446c9e8c0a2449fa51a1a4517eeeadc" class="lightbox-link">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/1.1.2.1.png" alt="Annual Computer-Related Bachelor Degrees Awarded in the US" style="height: auto; width: auto;" loading="lazy">
</a>
<a href="javascript:history.back();" class="lightbox" id="image-b446c9e8c0a2449fa51a1a4517eeeadc">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/1.1.2.1.png" alt="Annual Computer-Related Bachelor Degrees Awarded in the US" class="lightbox-image" loading="lazy">
</a></p>
<p>Unfortunately, this graduation rate often lagged far behind the demand for skilled graduates, and was marked by several periods of intense growth (the period from 1965 to 1985, 1995-2003, and the current surge beginning around 2010).  During these surges, it was not uncommon to see students hired directly into the industry after only a course or two of learning programming (coding boot camps are a modern equivalent of this trend).</p>
<p>All of these trends contributed to what we now call the <em>Software Crisis</em>.</p>

            <footer class="footline">

            </footer>
          </article>

    
    
          <article class="default">
            <header class="headline">
            </header>
<h1 id="the-software-crisis">The Software Crisis</h1>

<p>At the 1968 NATO Software Engineering Conference held in Garmisch Germany, the term &ldquo;Software Crisis&rdquo; was coined to describe the current state of the software development industry, where common problems included:</p>
<ul>
<li>Projects that ran over-budget</li>
<li>Projects that ran over-time</li>
<li>Software that made inefficient use of calculations and memory</li>
<li>Software was of low quality</li>
<li>Software that failed to meet the requirements it was developed to meet</li>
<li>Projects that became unmanageable and code difficult to maintain</li>
<li>Software that never finished development</li>
</ul>
<p>The software development industry sought to counter these problems through a variety of efforts:</p>
<ul>
<li>The development of new programming languages with features intended to make it harder for programmers to make errors.</li>
<li>The development of Integrated Development Environments (IDEs) with developer-centric tools to aid in the software development process, including syntax highlighting, interactive debuggers, and profiling tools</li>
<li>The development of code repository tools like SVN and GIT</li>
<li>The development and adoption of code documentation standards</li>
<li>The development and adoption of program modeling languages like UML</li>
<li>The use of automated testing frameworks and tools to verify expected functionality</li>
<li>The adoption of software development practices that adopted ideas from other engineering disciplines</li>
</ul>
<p>This course will seek to instill many of these ideas and approaches into your programming practice through adopting them in our everyday work.  It is important to understand that unless these practices are used, the same problems that defined the software crisis continue to occur!</p>
<p>In fact, some software engineering experts suggest the software crisis isn&rsquo;t over, pointing to recent failures like the <a href="http://calleam.com/WTPF/?page_id=2086" target="_blank">Denver Airport Baggage System</a>
 in 1995, the <a href="http://www-users.math.umn.edu/~arnold//disasters/ariane.html" target="_blank">Ariane 5 Rocket Explosion</a>
 in 1996, the <a href="https://www.dw.com/en/german-government-cancels-toll-contract/a-1116772-0" target="_blank">German Toll Collect</a>
 system cancelled in 2003, the rocky <a href="https://en.wikipedia.org/wiki/HealthCare.gov#Issues_during_launch" target="_blank">healthcare.gov launch</a>
 in 2013, and the massive vulnerabilities known as the <a href="https://meltdownattack.com/" target="_blank">Meltdown and Spectre exploits</a>
 discovered in 2018.</p>

            <footer class="footline">

            </footer>
          </article>

    
    
          <article class="default">
            <header class="headline">
            </header>
<h1 id="language-evolution">Language Evolution</h1>

<p>One of the strategies that computer scientists employed to counter the software crisis was the development of new programing languages.  These new languages would often 1) adopt new techniques intended to make errors harder to make while programming, and 2) remove problematic features that had existed in earlier languages.</p>
<h2 id="a-fortran-example">A Fortran Example</h2>
<p>Let&rsquo;s take a look at a working (and in current use) program built using Fortran, one of the most popular programming languages at the onset of the software crisis.  This software is the Environmental Policy Integrated Climate (EPIC) Model, created by researchers at Texas A&amp;M:</p>
<blockquote>
Environmental Policy Integrated Climate (EPIC) model is a cropping systems model that was developed to estimate soil productivity as affected by erosion as part of the Soil and Water Resources Conservation Act analysis for 1980, which revealed a significant need for improving technology for evaluating the impacts of soil erosion on soil productivity.  EPIC simulates approximately eighty crops with one crop growth model using unique parameter values for each crop.  It predicts effects of management decisions on soil, water, nutrient and pesticide movements, and their combined impact on soil loss, water quality, and crop yields for areas with homogeneous soils and management. 
<a href="https://epicapex.tamu.edu/epic/">EPIC Homepage</a>
</blockquote>
<p>You can download the <a href="https://my.syncplicity.com/share/qkybbapeauicx0l/epic1102_code%20032819" target="_blank">raw source code</a>
 and the <a href="https://agrilifecdn.tamu.edu/epicapex/files/2015/05/EpicModelDocumentation.pdf" target="_blank">accompanying documentation</a>
.  Open and unzip the source code, and open a file at random using your favorite code editor.  See if you can determine what it does, and how it fits into the overall application.</p>
<p>Try this with a few other files.  What do you think of the organization?  Would you be comfortable adding a new feature to this program?</p>
<h2 id="new-language-features">New Language Features</h2>
<p>You probably found the Fortran code in the example difficult to wrap your mind around - and that&rsquo;s not surprising, as more recent languages have moved away from many of the practices employed in Fortran.  Additionally, our computing environment has dramatically changed since this time.</p>
<h3 id="symbol-character-limits">Symbol Character Limits</h3>
<p>One clear example is symbol names for variables and procedures (functions) - notice that in the Fortran code they are typically short and cryptic: <code>RT</code>, <code>HU</code>, <code>IEVI</code>, <code>HUSE</code>, and <code>NFALL</code>, for example.  You&rsquo;ve been told since your first class that variable and function names should express clearly what the variable represents or a function does.  Would <code>rainFall</code>, <code>dailyHeatUnits</code>, <code>cropLeafAreaIndexDevelopment</code>, <code>CalculateWaterAndNutrientUse()</code>, <code>CalculateConversionOfStandingDeadCropResidueToFlatResidue()</code> be easier to decipher? (Hint: the documentation contains some of the variable notations in a list starting on page 70, and some in-code documentation of global variables occurs in <em>MAIN_1102.f90</em>.).</p>
<p>Believe it or not, there was an actual <em>reason</em> for short names in these early programs.  A six character name would fit into a 36-bit register, allowing for fast dictionary lookups - accordingly, early version of FORTRAN enforced a limit of six characters for variable names<sup id="fnref:1"><a href="#fn:1" class="footnote-ref" role="doc-noteref">1</a></sup>. However, it is easy to replace a symbol name with an automatically generated symbol during compilation, allowing for <em>both</em> fast lookup and human readability at a cost of some extra computation during compilation.  This step is built into the compilation process of most current programming languages, allowing for arbitrary-length symbol names with no runtime performance penalty.</p>
<!-- TODO: Type Checking, Linting -->
<h2 id="paradigm-shifts">Paradigm Shifts</h2>
<p>In addition to these less drastic changes, some evolutionary language changes had sweeping effects, changing the way we approach and think about how programs should be written and executed. These &ldquo;big ideas&rdquo; of how programming languages should work are often called <em>paradigms</em>.  In the early days of computing, we had two common ones: <em>imperative</em> and <em>functional</em>.</p>
<p>At its core, imperative programming simply means the idea of writing a program as a sequence of commands, i.e. this Python script uses a sequence of commands to write to a file:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>f <span style="color:#f92672">=</span> open(<span style="color:#e6db74">&#34;example.txt&#34;</span>)
</span></span><span style="display:flex;"><span>f<span style="color:#f92672">.</span>write(<span style="color:#e6db74">&#34;Hello from a file!&#34;</span>)
</span></span><span style="display:flex;"><span>f<span style="color:#f92672">.</span>close()</span></span></code></pre></div><p>An imperative program would start executing the first line of code, and then continue executing line-by-line until the end of the file or a command to stop execution was reached. In addition to moving one line through the program code, imperative programs could jump to a specific spot in the code and continue execution from there, using a <code>GOTO</code> statement.  We&rsquo;ll revisit that aspect shorty.</p>
<p>In contrast, functional programming consisted primarily of functions. One function was designated as the &lsquo;main&rsquo; function that would start the execution of the program. It would then call one or more functions, which would in turn call more functions. Thus, the entire program consisted of function definitions. Consider this Python program:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">concatenateList</span>(str, list):
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">if</span>(len(list) <span style="color:#f92672">==</span> <span style="color:#ae81ff">0</span>):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> str
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">elif</span>(len(list) <span style="color:#f92672">==</span> <span style="color:#ae81ff">1</span>):
</span></span><span style="display:flex;"><span>    head <span style="color:#f92672">=</span> list<span style="color:#f92672">.</span>pop(<span style="color:#ae81ff">0</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> concatenateList(str <span style="color:#f92672">+</span> head, list)
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">else</span>:
</span></span><span style="display:flex;"><span>    head <span style="color:#f92672">=</span> list<span style="color:#f92672">.</span>pop(<span style="color:#ae81ff">0</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> concatenateList(str <span style="color:#f92672">+</span> head <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34;, &#34;</span>, list)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">printToFile</span>(filename, body):
</span></span><span style="display:flex;"><span>  f <span style="color:#f92672">=</span> open(filename)
</span></span><span style="display:flex;"><span>  f<span style="color:#f92672">.</span>write(body)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">printListToFile</span>(filename, list):
</span></span><span style="display:flex;"><span>  body <span style="color:#f92672">=</span> concatenateList(<span style="color:#e6db74">&#34;&#34;</span>, list)
</span></span><span style="display:flex;"><span>  printToFile(filename, body)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">main</span>():
</span></span><span style="display:flex;"><span>  printListToFile(<span style="color:#e6db74">&#34;list.txt&#34;</span>, [<span style="color:#e6db74">&#34;Dog&#34;</span>, <span style="color:#e6db74">&#34;Cat&#34;</span>, <span style="color:#e6db74">&#34;Mouse&#34;</span>])
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>main()</span></span></code></pre></div><p>You probably see elements of your favorite higher-order programming language in both of these descriptions.  That&rsquo;s not surprising as modern languages often draw from multiple programming paradigms (after all, both the above examples were written in Python). This, too, is part of language evolution - language developers borrow good ideas as the find them.</p>
<p>But as languages continued to evolve and language creators sought ways to make programming easier, more reliable, and more secure to address the software crisis, new ideas emerged that were large enough to be considered new paradigms. Two of the most impactful of these new paradigms these are <em>structured programming</em> and <em>object orientation</em>.  We&rsquo;ll talk about each next.</p>
<div class="footnotes" role="doc-endnotes">
<hr>
<ol>
<li id="fn:1">
<p>Weishart, Conrad (2010). &ldquo;<a href="https://www.idinews.com/history/nameLength.html" target="_blank">How Long Can a Data Name Be?</a>
&rdquo;&#160;<a href="#fnref:1" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
</ol>
</div>

            <footer class="footline">

            </footer>
          </article>

    
    
          <article class="default">
            <header class="headline">
            </header>
<h1 id="structured-programming">Structured Programming</h1>

<p>Another common change to programming languages was the removal of the <code>GOTO</code> statement, which allowed the program execution to jump to an arbitrary point in the code (much like a <a href="https://en.wikipedia.org/wiki/Choose_Your_Own_Adventure" target="_blank">choose-your-own adventure</a>
 book will direct you to jump to a page). The GOTO came to be considered too primitive, and too easy for a programmer to misuse <sup id="fnref:1"><a href="#fn:1" class="footnote-ref" role="doc-noteref">1</a></sup>.</p>
<p>While the <code>GOTO</code> statement is absent from most modern programming languages the actual <em>functionality</em> remains, abstracted into control-flow structures like conditionals, loops, and switch statements.  This is the basis of <a href="https://en.wikipedia.org/wiki/Structured_programming" target="_blank">structured programming</a>
, a paradigm adopted by all modern higher-order programming languages.</p>
<p>Each of these control-flow structures can be represented by careful use of <code>GOTO</code> statements (and, in fact the resulting assembly code from compiling these languages does just that). The benefit of using structured programming is it promotes &ldquo;reliability, correctness, and organizational clarity&rdquo; by clearly defining the circumstances and effects of code jumps <sup id="fnref:2"><a href="#fn:2" class="footnote-ref" role="doc-noteref">2</a></sup>.</p>
<p>You probably aren&rsquo;t very familiar with GOTO statements because the structured programming paradigm has become so dominant.  Before we move on, let&rsquo;s see how some familiar structured programming patterns were originally implemented using GOTOs:</p>
<h3 id="conditional-if-statement">Conditional (if statement)</h3>
<p>In C#, you are probably used to writing if statements with a true branch:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">int</span> x = <span style="color:#ae81ff">4</span>;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">if</span>(x &lt; <span style="color:#ae81ff">5</span>) 
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  x = x * <span style="color:#ae81ff">2</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>Console.WriteLine(<span style="color:#e6db74">&#34;The value is:&#34;</span> + x);</span></span></code></pre></div><p>With GOTOs, it would look something like:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">int</span> x = <span style="color:#ae81ff">4</span>;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">if</span>(x &lt; <span style="color:#ae81ff">5</span>) <span style="color:#66d9ef">goto</span> TrueBranch;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>AfterElse:
</span></span><span style="display:flex;"><span>  Console.WriteLine(<span style="color:#e6db74">&#34;The value is:&#34;</span> + x);
</span></span><span style="display:flex;"><span>  Environment.Exit(<span style="color:#ae81ff">0</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>TrueBranch:
</span></span><span style="display:flex;"><span>  x = x * <span style="color:#ae81ff">2</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">goto</span> AfterElse</span></span></code></pre></div><h3 id="conditional-if-else-statement">Conditional (if-else statement)</h3>
<p>Similarly, a C# if statement with an else branch:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">int</span> x = <span style="color:#ae81ff">4</span>;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">if</span>(x &lt; <span style="color:#ae81ff">5</span>) 
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  x = x * <span style="color:#ae81ff">2</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">else</span> 
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  x = <span style="color:#ae81ff">7</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>Console.WriteLine(<span style="color:#e6db74">&#34;The value is:&#34;</span> + x);</span></span></code></pre></div><p>And using GOTOs:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">int</span> x = <span style="color:#ae81ff">4</span>;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">if</span>(x &lt; <span style="color:#ae81ff">5</span>) <span style="color:#66d9ef">goto</span> TrueBranch;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">goto</span> FalseBranch;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>AfterElse:
</span></span><span style="display:flex;"><span>  Console.WriteLine(<span style="color:#e6db74">&#34;The value is:&#34;</span> + x);
</span></span><span style="display:flex;"><span>  Environment.Exit(<span style="color:#ae81ff">0</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>TrueBranch:
</span></span><span style="display:flex;"><span>  x = x * <span style="color:#ae81ff">2</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">goto</span> AfterElse;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>FalseBranch: 
</span></span><span style="display:flex;"><span>  x = <span style="color:#ae81ff">7</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">goto</span> AfterElse;</span></span></code></pre></div><p>Note that with the goto, we must tell the program to stop running explicitly with <code>Environment.Exit(0)</code> or it will continue on to execute the labeled code (we could also place the TrueBranch and FalseBranch <em>before</em> the main program, and use a goto to jump to the main program).</p>
<h3 id="while-loop">While Loop</h3>
<p>Loops were also originally constructed entirely from GOTOs, so the familiar while loop:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">int</span> times = <span style="color:#ae81ff">5</span>;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">while</span>(times &gt; <span style="color:#ae81ff">0</span>)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  Console.WriteLine(<span style="color:#e6db74">&#34;Counting Down: &#34;</span> + times);
</span></span><span style="display:flex;"><span>  times = times - <span style="color:#ae81ff">1</span>;
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>Can be written:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">int</span> times = <span style="color:#ae81ff">5</span>;
</span></span><span style="display:flex;"><span>Test:
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">if</span>(times &gt; <span style="color:#ae81ff">0</span>) <span style="color:#66d9ef">goto</span> Loop;
</span></span><span style="display:flex;"><span>  Environment.Exit(<span style="color:#ae81ff">0</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Loop: 
</span></span><span style="display:flex;"><span>  Console.WriteLine(<span style="color:#e6db74">&#34;Counting Down: &#34;</span> + times);
</span></span><span style="display:flex;"><span>  times = times - <span style="color:#ae81ff">1</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">goto</span> Test;</span></span></code></pre></div><p>The <code>do while</code> and <code>for</code> loops are implemented similarly. As you can probably imagine, as more control flow is added to a program, using GOTOs and corresponding labels to jump to becomes very hard to follow.</p>

  
  
<div class="box notices cstyle info">
  <div class="box-label"><i class="fa-fw fas fa-info-circle"></i> Info</div>
  <div class="box-content">

<p>Interestingly, the <a href="https://learn.microsoft.com/en-us/dotnet/csharp/language-reference/statements/jump-statements#the-goto-statement" target="_blank">C# language does have a goto statement</a>
 (Java does not). Likely this is because C# was designed to compile to intermediate language like Visual Basic, which is an evolution of BASIC which was old enough to have a goto.</p>
<p>Accordingly, the above examples with the <code>goto</code> statements are valid C# code. You can even compile and run them. However, you should avoid using <code>goto</code> statements in your code.</p>
</div>
</div>
<div class="footnotes" role="doc-endnotes">
<hr>
<ol>
<li id="fn:1">
<p>Dijkstra, Edgar (1968). <a href="https://homepages.cwi.nl/~storm/teaching/reader/Dijkstra68.pdf" target="_blank">&ldquo;Go To Statement Considered Harmful&rdquo;</a>
&#160;<a href="#fnref:1" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
<li id="fn:2">
<p>Wirth, Nicklaus (1974). <a href="https://oberoncore.ru/_media/library/wirth_on_the_composition_of_well-structured_programs.pdf" target="_blank">&ldquo;On the Composition of Well-Structured Programs&rdquo;</a>
&#160;<a href="#fnref:2" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
</ol>
</div>

            <footer class="footline">

            </footer>
          </article>

    
    
          <article class="default">
            <header class="headline">
            </header>
<h1 id="object-orientation">Object-Orientation</h1>

<p>The object-orientation paradigm was similarly developed to make programming large projects easier and less error-prone.</p>
<p>The term &ldquo;Object Orientation&rdquo; was coined by Alan Kay while he was a graduate student in the late 60&rsquo;s. Alan Kay, Dan Ingalls, Adele Goldberg, and others created the first object-oriented language, <a href="https://en.wikipedia.org/wiki/Smalltalk" target="_blank">Smalltalk</a>
, which became a very influential language from which many ideas were borrowed.  To Alan, the essential core of object-orientation was three properties a language could possess: <sup id="fnref:1"><a href="#fn:1" class="footnote-ref" role="doc-noteref">1</a></sup></p>
<ul>
<li>Encapsulation &amp; Information Hiding</li>
<li>Message passing</li>
<li>Dynamic binding</li>
</ul>
<p>Let&rsquo;s break down each of these ideas, and see how they helped address some of the problems we&rsquo;ve identified in this chapter.</p>
<p><strong>Encapsulation</strong> refers to breaking programs into smaller units that are easier to read and reason about. In an object-oriented language these units are <em>classes and objects</em>, and the data contained in this units is protected from being changed by code outside the unit through <em>information hiding</em>.</p>
<p><strong>Message Passing</strong> allows us to send well-defined messages between objects. This gives us a well-defined and <em>controlled</em> method for accessing and potentially changing the data contained in an encapsulated unit. In an object oriented language, calling a method on an object is a form of message passing, as are events.</p>
<p><strong>Dynamic Binding</strong> means we can have more than one possible way to handle messages and the appropriate one can be determined at run-time.  This is the basis for <em>polymorphism</em>, an important idea in many object-oriented languages.</p>
<p>Remember these terms and pay attention to how they are implemented in the languages you are learning.  They can help you understand the ideas that inspired the features of these languages.</p>
<p>We&rsquo;ll take a deeper look at each of these in the next few chapters. But before we do, you might want to see how language popularity has fared since the onset of the software crisis, and how new languages have appeared and grown in popularity in this animated chart from <em>Data is Beautiful</em>:</p>
<iframe width="560" height="315" src="https://www.youtube-nocookie.com/embed/Og847HVwRSI" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
<p>Interestingly, the four top languages in 2019 (Python, JavaScript, Java, and C#) all adopt the object-oriented paradigm - though the exact details of how they implement it vary dramatically.</p>
<div class="footnotes" role="doc-endnotes">
<hr>
<ol>
<li id="fn:1">
<p>Eric Elliot, &ldquo;The Forgotten History of Object-Oriented Programming,&rdquo; <em>Medium</em>, Oct. 31, 2018.&#160;<a href="#fnref:1" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
</ol>
</div>

            <footer class="footline">

            </footer>
          </article>

    
    
          <article class="default">
            <header class="headline">
            </header>
<h1 id="summary">Summary</h1>

<p>In this chapter, we&rsquo;ve discussed the environment in which object-orientation emerged.  Early computers were limited in their computational power, and languages and programming techniques had to work around these limitations. Similarly, these computers were very expensive, so their purchasers were very concerned about getting the largest possible return on their investment.  In the words of Niklaus Wirth:</p>
<blockquote>
Tricks were necessary at this time, simply because machines were built with limitations imposed by a technology in its early development stage, and because even problems that would be termed "simple" nowadays could not be handled in a straightforward way.  It was the programmers' very task to push computers to their limits by whatever means available.
</blockquote>
<p>As computers became more powerful and less expensive, the demand for programs (and therefore programmers) grew faster than universities could train new programmers.  Unskilled programmers, unwieldy programming languages, and programming approaches developed to address the problems of older technology led to what became known as the &ldquo;software crisis&rdquo; where many projects failed or floundered.</p>
<p>This led to the development of new programming techniques, languages, and paradigms to make the process of programming easier and less error-prone. Among the many new programming paradigms was <em>structured programming paradigm</em>, which introduced control-flow structures into programming languages to help programmers reason about the order of program execution in a clear and consistent manner.</p>
<p>Also developed during this time was the <em>object-oriented paradigm</em>, which brings together four big ideas: <em>encapsulation &amp; information hiding</em>, <em>message passing</em>, and <em>dynamic binding</em>.  We will be studying this paradigm, its ideas, and implementation in the C# language throughout this course.</p>

            <footer class="footline">

            </footer>
          </article>

          </section>
    
    
          <article class="chapter">
            <header class="headline">
            </header>


<div class="article-subheading">Chapter 1</div>
<h1 id="classes-and-objects">Classes and Objects</h1>

<p>Getting Object Oriented</p>

            <footer class="footline">

            </footer>
          </article>

          <section>
            <h1 class="a11y-only">Subsections of Classes and Objects</h1>
    
    
          <article class="default">
            <header class="headline">
            </header>
<h1 id="introduction">Introduction</h1>

<p>A signature aspect of object-oriented languages is (as you might expect from the name), the existence of <em>objects</em> within the language.  In this chapter, we take a deep look at objects, exploring why they were created, what they are at both a theoretical and practical level, and how they are used.</p>
<h2 id="key-terms">Key Terms</h2>
<p>Some key terms to learn in this chapter are:</p>
<ul>
<li>
<p>Encapsulation</p>
</li>
<li>
<p>Information Hiding</p>
</li>
<li>
<p>Message Passing</p>
</li>
<li>
<p>State</p>
</li>
<li>
<p>Class</p>
</li>
<li>
<p>Object</p>
</li>
<li>
<p>Field</p>
</li>
<li>
<p>Method</p>
</li>
<li>
<p>Constructor</p>
</li>
<li>
<p>Parameterless Constructor</p>
</li>
<li>
<p>Property</p>
</li>
<li>
<p>Public</p>
</li>
<li>
<p>Private</p>
</li>
<li>
<p>Static</p>
</li>
</ul>
<p>To begin, weâll examine the term <em>encapsulation</em>.</p>

            <footer class="footline">

            </footer>
          </article>

    
    
          <article class="default">
            <header class="headline">
            </header>
<h1 id="encapsulation">Encapsulation</h1>

<p>The first criteria that Alan Kay set for an object-oriented language was <em>encapsulation</em>.  In computer science, the term encapsulation refers to organizing code into units.  This provides a mechanism for organizing complex software</p>
<p>A second related idea is <em>information hiding</em>, which provides mechanisms for controlling access to encapsulated data and how it can be changed.</p>
<p>Think back to the FORTRAN EPIC model we <a href="https://ksu-cs-textbooks.github.io/cis400/1-object-orientation/00-introduction/04-language-evolution/">introduced earlier</a>
. All of the variables in that program were declared <em>globally</em>, and there were <em>thousands</em>.  How easy was it to find where a variable was declared?  Initialized?  Used?  Are you sure you found <em>all</em> the spots it was used?</p>
<p>Also, how easy was it to determine what <em>part</em> of the system a particular block of code belonged to?  If I told you the program involved modeling hydrology (how water moves through the soils), weather, erosion, plant growth, plant residue decomposition, soil chemistry, planting, harvesting, and chemical applications, would you be able to find the code for each of those processes?</p>
<p>Remember from our discussion on <a href="https://ksu-cs-textbooks.github.io/cis400/1-object-orientation/00-introduction/02-the-growth-of-computing/">the growth of computing</a>
 the idea that as computers grew more powerful, we wanted to use them in more powerful ways?  The EPIC project grew from that desire - what if we could model <em>all the aspects influencing how well a crop grows</em>?  Then we could use that model to help us make better decisions in agriculture.  Or, what if we could model all the processes involved in weather?  If we could do so, we could help save lives by predicting dangerous storms!  A century ago, you knew a tornado was coming when you heard its roaring winds approaching your home.  Now we have warnings that conditions are favorable to produce one hours in advance.  This is all thanks to using computers to model some very complex systems.</p>
<p>But how do we go about writing those complex systems?  I don&rsquo;t know about you, but I wouldn&rsquo;t want to write a model the way the EPIC programmers did.  And neither did most software developers at the time - so computer scientists set out to define better ways to write programs.  David Parnas formalized some of the best ideas emerging from those efforts in his 1972 paper &ldquo;On the Criteria To Be Used in Decomposing Systems into Modules&rdquo;. <sup id="fnref:1"><a href="#fn:1" class="footnote-ref" role="doc-noteref">1</a></sup></p>
<blockquote>
A <i>data structure</i>, its internal linkings, <i>accessing procedures and modifying procedures</i> are part of a single module.  
</blockquote>
<p>Here he suggests organizing code into <em>modules</em> that group related variables and the procedures that operate upon them.  For the EPIC module, this might mean all the code related to weather modeling would be moved into its own module.  That meant that if we needed to understand how weather was being modeled, we <em>only</em> had to look at the weather module.</p>
<blockquote>
They are not shared by many modules as is conventionally done. 
</blockquote>
<p>Here he is laying the foundations for the concept we now call <a href="https://en.wikipedia.org/wiki/Scope_%28computer_science%29" target="_blank">scope</a>
 - the idea of where a specific symbol (a variable or function name) is accessible within a program&rsquo;s code.  By limiting access to variables to the scope of a particular module, only code in that module can change the value.  That way, we can&rsquo;t accidentally change a variable declared in the weather module from the soil chemistry module (which would be a very hard error to find, as if the weather module doesn&rsquo;t seem to be working, that&rsquo;s what we would probably focus on trying to fix).</p>
<p>Programmers of the time referred to this practice as <a href="https://en.wikipedia.org/wiki/Information_hiding" target="_blank">information hiding</a>
, as we &lsquo;hid&rsquo; parts of the program from other parts of the program. Parnas and his peers pushed for not just hiding the data, but <em>also</em> how the data was manipulated.  By hiding these implementation details, they could prevent programmers who were used to the globally accessible variables of early programming languages from looking into our code and using a variable that we might change in the future.</p>
<blockquote>
<i>The sequence of instructions necessary to call a given routine and the routine itself are part of the same module.</i>
</blockquote>
<p>As the actual implementation of the code is hidden from other parts of the program, a mechanism for sharing controlled access to some part of that module in order to use it needed to be made.  An interface, if you will, that describes how the other parts of the program might trigger some behavior or access some value.</p>
<div class="footnotes" role="doc-endnotes">
<hr>
<ol>
<li id="fn:1">
<p>D. L. Parnas, &ldquo;<a href="https://dl-acm-org.er.lib.k-state.edu/doi/10.1145/361598.361623" target="_blank">On the criteria to be used in decomposing systems into modules</a>
&rdquo; <em>Communications of the ACM</em>, Dec. 1972.&#160;<a href="#fnref:1" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
</ol>
</div>

            <footer class="footline">

            </footer>
          </article>

    
    
          <article class="default">
            <header class="headline">
            </header>
<h1 id="c-encapsulation-examples">C# Encapsulation Examples</h1>

<p>Let&rsquo;s start by focusing on encapsulation&rsquo;s benefits to organizing our code by exploring some examples of encapsulation you may already be familiar with.</p>
<h2 id="namespaces">Namespaces</h2>
<p>The C# libraries are organized into discrete units called <strong><em>namespaces</em></strong>.  The primary purpose of this is to separate code units that potentially use the same name, which causes <em>name collisions</em> where the interpreter isnât sure which of the possibilities you mean in your program.  This means you can use the same name to refer to two different things in your program, provided they are in different namespaces.</p>
<p>For example, there are two definitions for a Point Struct in the .NET core libraries: <a href="https://docs.microsoft.com/en-us/dotnet/api/system.drawing.point" target="_blank">System.Drawing.Point</a>
 and <a href="https://docs.microsoft.com/en-us/dotnet/api/system.windows.point" target="_blank">System.Windows.Point</a>
.  The two have a very different internal structures (the former uses integers and the latter doubles), and we would not want to mix them up.  If we needed to create an instance of both in our program, we would use their fully-quantified name to help the interpreter know which we mean:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>System.Drawing.Point pointA = <span style="color:#66d9ef">new</span> System.Drawing.Point(<span style="color:#ae81ff">500</span>, <span style="color:#ae81ff">500</span>);
</span></span><span style="display:flex;"><span>System.Windows.Point pointB = <span style="color:#66d9ef">new</span> System.Windows.Point(<span style="color:#ae81ff">300.0</span>, <span style="color:#ae81ff">200.0</span>);</span></span></code></pre></div><p>The <a href="https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/keywords/using-directive" target="_blank">using directive</a>
 allows you reference the type without quantification, i.e.:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">using</span> System.Drawing;
</span></span><span style="display:flex;"><span>Point pointC = <span style="color:#66d9ef">new</span> Point(<span style="color:#ae81ff">400</span>, <span style="color:#ae81ff">400</span>);</span></span></code></pre></div><p>You can also create an <em>alias</em> with the using directive, providing an alternative (and usually abbreviated) name for the type:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">using</span> WinPoint = System.Windows.Point;
</span></span><span style="display:flex;"><span>WinPoint pointD = <span style="color:#66d9ef">new</span> WinPoint(<span style="color:#ae81ff">100.0</span>, <span style="color:#ae81ff">100.0</span>);</span></span></code></pre></div><p>We can also declare our own namespaces, allowing us to use namespaces to organize our own code just as Microsoft has done with its .NET libraries.</p>
<p>Encapsulating code within a namespace helps ensure that the types defined within are only accessible with a fully qualified name, or when the using directive is employed.  In either case, the intended type is clear, and knowing the namespace can help other programmers find the typeâs definition.</p>
<h2 id="structs">Structs</h2>
<p>In the discussion of namespaces, we used a <a href="https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/keywords/struct" target="_blank">struct</a>
.  A C# struct is what computer scientists refer to as a <em><a href="https://en.wikipedia.org/wiki/Composite_data_type" target="_blank">compound type</a>
</em>, a type <em>composed</em> from other types.  This too, is a form of encapsulation, as it allows us to collect several values into a single data structure.  Consider the concept of a vector from mathematics - if we wanted to store three-dimensional vectors in a program, we could do so in several ways.  Perhaps the easiest would be as an array:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">double</span>[] vectorA = {<span style="color:#ae81ff">3</span>, <span style="color:#ae81ff">4</span>, <span style="color:#ae81ff">5</span>};</span></span></code></pre></div><p>However, other than the variable name, there is no indication to other programmers that this is intended to be a three-element vector.  And, if we were to accept it in a function, say a dot product:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">double</span> DotProduct(<span style="color:#66d9ef">double</span>[] a, <span style="color:#66d9ef">double</span>[] b) {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span>(a.Length &lt; <span style="color:#ae81ff">3</span> || b.Length &lt; <span style="color:#ae81ff">3</span>) <span style="color:#66d9ef">throw</span> <span style="color:#66d9ef">new</span> ArgumentException();
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> a[<span style="color:#ae81ff">0</span>] * b[<span style="color:#ae81ff">0</span>] + a[<span style="color:#ae81ff">1</span>] * b[<span style="color:#ae81ff">1</span>] + a[<span style="color:#ae81ff">2</span>] * b[<span style="color:#ae81ff">2</span>];
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>We would need to check that both arrays were of length threeâ¦  A struct provides a much cleaner option, by allowing us to define a type that is composed of exactly three doubles:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// A 3-element vector </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">struct</span> <span style="color:#a6e22e">Vector3</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">double</span> x;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">double</span> y;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">double</span> z;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> Vector3(<span style="color:#66d9ef">double</span> x, <span style="color:#66d9ef">double</span> y, <span style="color:#66d9ef">double</span> z) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">this</span>.x = x;
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">this</span>.y = y;
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">this</span>.z = z;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>Then, our DotProduct can take two arguments of the Vector3 struct:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">double</span> DotProduct(Vector3 a, Vector3 b) {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> a.x * b.x + a.y * b.y + a.z * b.z;
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>There is no longer any concern about having the wrong number of elements in our vectors - it will always be three.  We also get the benefit of having unique names for these <em>fields</em> (in this case, x, y, and z).</p>
<p>Thus, a struct allows us to create <em>structure</em> to represent multiple values in one variable, encapsulating the related values into a single data structure.  Variables, and compound data types, represent the <em>state</em> of a program.  Weâll examine this concept in detail next.</p>
<h2 id="modules">Modules</h2>
<p>You might think that the kind of modules that Parnas was describing don&rsquo;t exist in C#, but they actually do - we just don&rsquo;t call them &lsquo;modules&rsquo;.  Consider how you would raise a number by a power, say 10 to the 8th power:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>Math.Pow(<span style="color:#ae81ff">10</span>, <span style="color:#ae81ff">8</span>);</span></span></code></pre></div><p>The <code>Math</code> class in this example is actually used <em>just like a module!</em>  We can&rsquo;t see the underlying implementation of the <code>Pow()</code> method, it provides to us a well-defined interface (i.e. you call it with the symbol <code>Pow</code> and two doubles for parameters), and this method and other related math functions (<code>Sin()</code>, <code>Abs()</code>, <code>Floor()</code>, etc.) are encapsulated within the <code>Math</code> class.</p>
<p>We can define our own module-like classes by using the <code>static</code> keyword, i.e. we could group our vector math functions into a static <code>VectorMath</code> class:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// A library of vector math functions</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">VectorMath</span>() {
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// Computes the dot product of two vectors </span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">double</span> DotProduct(Vector3 a, Vector3 b) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> a.x * b.x + a.y * b.y + a.z * b.z;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// Computes the magnitude of a vector</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">double</span> Magnitude(Vector3 a) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> Math.Sqrt(Math.Pow(a.x, <span style="color:#ae81ff">2</span>) + Math.Pow(a.y, <span style="color:#ae81ff">2</span>) + Math.Pow(a.z, <span style="color:#ae81ff">2</span>));
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div>
  
  
<div class="box notices cstyle note">
  <div class="box-label"><i class="fa-fw fas fa-exclamation-circle"></i> Note</div>
  <div class="box-content">

<p>To duplicate the module behavior with C#, we must declare both the class and its methods <code>static</code>.</p>
</div>
</div>
<h2 id="classes">Classes</h2>
<p>But what most distinguishes C# is that it is an <em>object-oriented</em> language, and as such, it&rsquo;s primary form of encapsulation is <em>classes</em> and <em>objects</em>.  The key idea behind encapsulation in an object-oriented language is that we encapsulate both <em>state</em> and <em>behavior</em> in the class definition.  Let&rsquo;s explore that idea more deeply in the next section.</p>

            <footer class="footline">

            </footer>
          </article>

    
    
          <article class="default">
            <header class="headline">
            </header>
<h1 id="state-and-behavior">State and Behavior</h1>

<p>The data stored in a program at any given moment (in the form of variables, objects, etc.) is the <em>state</em> of the program.  Consider a variable:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">int</span> a = <span style="color:#ae81ff">5</span>;</span></span></code></pre></div><p>The state of the variable <strong>a</strong> after this line is <strong>5</strong>.  If we then run:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>a = a * <span style="color:#ae81ff">3</span>;</span></span></code></pre></div><p>The state is now <strong>15</strong>. Consider the Vector3 struct we defined in the last section:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">struct</span> <span style="color:#a6e22e">Vector3</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">double</span> x;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">double</span> y;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">double</span> z;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// constructor</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> Vector3(<span style="color:#66d9ef">double</span> x, <span style="color:#66d9ef">double</span> y, <span style="color:#66d9ef">double</span> z) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">this</span>.x = x;
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">this</span>.y = y;
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">this</span>.z = z;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>If we create an instance of that struct in the variable <code>b</code>:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>Vector3 b = <span style="color:#66d9ef">new</span> Vector3(<span style="color:#ae81ff">1.2</span>, <span style="color:#ae81ff">3.7</span>, <span style="color:#ae81ff">5.6</span>);</span></span></code></pre></div><p>The state of our variable <code>b</code> is 
<span class="math align-center">$\{1.2, 3.7, 5.6\}$</span>.  If we change one of <code>b</code>âs fields:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>b.x = <span style="color:#ae81ff">6.0</span>;</span></span></code></pre></div><p>The state of our variable <code>b</code> is now 
<span class="math align-center">$\{6.0, 3.7, 5.6\}$</span>.</p>
<p>We can also think about the state of the <em>program</em>, which would be something like: 
<span class="math align-center">$\{a: 5, b: \{x: 6.0, y: 3.7, z: 5.6\}\}$</span>, or a state vector like: 
<span class="math align-center">$|5, 6.0, 3.7, 5.6|$</span>.  We can therefore think of a program as a <em>state machine</em>. We can in fact, draw our entire program as a state table listing all possible legal states (combinations of variable values) and the transitions between those states. Techniques like this can be used to reason about our programs and even prove them correct!</p>
<p>This way of reasoning about programs is the heart of <a href="https://en.wikipedia.org/wiki/Automata_theory" target="_blank">Automata Theory</a>
, a subject you may choose to learn more about if you pursue graduate studies in computer science.</p>
<p>What causes our program to transition between states?  If we look at our earlier examples, it is clear that <em>assignment</em> is a strong culprit.  Expressions clearly have a role to play, as do control-flow structures decide which transformations take place.  In fact, we can say that our program code is what drives state changes - the <em>behavior</em> of the program.</p>
<p>Thus, programs are composed of both state (the values stored in memory at a particular moment in time) and <em>behavior</em> (the instructions to change that state).</p>
<p>Now, can you imagine trying to draw the state table for a large program?  Something on the order of EPIC?</p>
<p>On the other hand, with encapsulation we can reason about state and behavior on a much smaller scale.  Consider this function working with our <code>Vector3</code> struct:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// Returns the the supplied vector scaled by the provided scalar</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> Vector3 Scale(Vector3 vec, <span style="color:#66d9ef">double</span> scale) {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">double</span> x = vec.x * scale;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">double</span> y = vec.y * scale;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">double</span> z = vec.z * scale;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">new</span> Vector3(x, y, z);
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>If this method was invoked with a vector 
<span class="math align-center">$\langle4.0, 1.0, 3.4\rangle$</span> and a scalar 
<span class="math align-center">$2.0$</span>
our state table would look something like:</p>
<table>
  <tr>
    <th>step</th>
    <th>vec.x</th>
    <th>vec.y</th>
    <th>vec.z</th>
    <th>scale</th>
    <th>x</th>
    <th>y</th>
    <th>z</th>
    <th>return.x</th>
    <th>return.y</th>
    <th>return.z</th>
  <tr>
  <tr>
    <td>0</td>
    <td>4.0</td>
    <td>1.0</td>
    <td>3.4</td>
    <td>2.0</td>
    <td>0.0</td>
    <td>0.0</td>
    <td>0.0</td>
    <td>0.0</td>
    <td>0.0</td>
    <td>0.0</td>
  </tr>
  <tr>
    <td>1</td>
    <td>4.0</td>
    <td>1.0</td>
    <td>3.4</td>
    <td>2.0</td>
    <td>8.0</td>
    <td>0.0</td>
    <td>0.0</td>
    <td>0.0</td>
    <td>0.0</td>
    <td>0.0</td>
  </tr>
  <tr>
    <td>2</td>
    <td>4.0</td>
    <td>1.0</td>
    <td>3.4</td>
    <td>2.0</td>
    <td>8.0</td>
    <td>2.0</td>
    <td>0.0</td>
    <td>0.0</td>
    <td>0.0</td>
    <td>0.0</td>
  </tr>
  <tr>
    <td>3</td>
    <td>4.0</td>
    <td>1.0</td>
    <td>3.4</td>
    <td>2.0</td>
    <td>8.0</td>
    <td>2.0</td>
    <td>6.8</td>
    <td>0.0</td>
    <td>0.0</td>
    <td>0.0</td>
  </tr>
  <tr>
    <td>4</td>
    <td>4.0</td>
    <td>1.0</td>
    <td>3.4</td>
    <td>2.0</td>
    <td>8.0</td>
    <td>2.0</td>
    <td>6.8</td>
    <td>8.0</td>
    <td>2.0</td>
    <td>6.8</td>
  </tr>
</table>
<p>Because the parameters <code>vec</code> and <code>scale</code>, as well as the variables <code>x</code>, <code>y</code>, <code>z</code>, and the unnamed <code>Vector3</code> we return are all defined only within the scope of the method, we can reason about them and the associated state changes <em>independently</em> of the rest of the program. Essentially, we have encapsulated a portion of the program <em>state</em> in our <code>Vector3</code> struct, and encapsulated a portion of the program behavior in the static <code>Vector3</code> library.  This greatly simplifies both writing and debugging programs.</p>
<p>However, we really will only use the <code>Vector3</code> library in conjunction with <code>Vector3</code> structures, so it makes a certain amount of sense to define them in the same place.  This is where <em>classes</em> and <em>objects</em> come into the picture, which we&rsquo;ll discuss next.</p>

            <footer class="footline">

            </footer>
          </article>

    
    
          <article class="default">
            <header class="headline">
            </header>
<h1 id="classes-and-objects">Classes and Objects</h1>

<p>The module-based encapsulation suggested by Parnas and his contemporaries grouped state and behavior together into smaller, self-contained units.  Alan Kay and his co-developers took this concept a step farther.  Alan Kay was heavily influenced by ideas from biology, and saw this encapsulation in similar terms to <em>cells</em>.</p>
<p>
<a href="#image-88c400c6330155f1b9698b1b5363dc8c" class="lightbox-link">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/1.1.5.1.png" alt="Typical Animal Cell" style="height: auto; width: auto;" loading="lazy">
</a>
<a href="javascript:history.back();" class="lightbox" id="image-88c400c6330155f1b9698b1b5363dc8c">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/1.1.5.1.png" alt="Typical Animal Cell" class="lightbox-image" loading="lazy">
</a></p>
<p>Biological cells are also encapsulated - the complex structures of the cell and the functions they perform are all within a cell wall.  This wall is only bridged in carefully-controlled ways, i.e. cellular pumps that move resources into the cell and waste out. While single-celled organisms do exist, far more complex forms of life are made possible by many similar cells working together.</p>
<p>This idea became embodied in object-orientation in the form of <em>classes</em> and <em>objects</em>.  An object is like a specific cell.  You can create many, very similar objects that all function identically, but each have their own individual and different <em>state</em>.  The <em>class</em> is therefore a definition of that type of object&rsquo;s structure and behavior.  It defines the shape of the object&rsquo;s state, and how that state can change.  But each individual <em>instance</em> of the class (an object) has its own current state.</p>
<p>Let&rsquo;s re-write our <code>Vector3</code> struct as a class using this concept:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#75715e">/// &lt;summary&gt;A class representing a 3-element vector&lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Vector3</span> {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt;The X component of the vector&lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">double</span> X;
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt;The Y component of the vector&lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">double</span> Y;
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt;The Z component of the vector&lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">double</span> Z;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt;Constructs a new vector&lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;param name=&#34;x&#34;&gt;The value of the vector&#39;s x component&lt;/param&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;param name=&#34;y&#34;&gt;The value of the vector&#39;s y component&lt;/param&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;param name=&#34;z&#34;&gt;The value of the vector&#39;s z component&lt;/param&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> Vector3(<span style="color:#66d9ef">double</span> x, <span style="color:#66d9ef">double</span> y, <span style="color:#66d9ef">double</span> z) {
</span></span><span style="display:flex;"><span>        X = x;
</span></span><span style="display:flex;"><span>        Y = y;
</span></span><span style="display:flex;"><span>        Z = z;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt;Computes the dot product of this and &lt;paramref name=&#34;other&#34;/&gt; vector&lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;param name=&#34;other&#34;&gt;The other vector to compute with&lt;/param&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;returns&gt;The dot product&lt;/returns&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">double</span> DotProduct(Vector3 other) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> X * other.X + Y * other.Y + Z * other.Z;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt;Scales this vector by &lt;paramref name=&#34;scalar&#34;/&gt;&lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;paramref name=&#34;scalar&#34;&gt;The value to scale by&lt;/paramref&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> Scale(<span style="color:#66d9ef">double</span> scalar) {
</span></span><span style="display:flex;"><span>        X *= scalar;
</span></span><span style="display:flex;"><span>        Y *= scalar;
</span></span><span style="display:flex;"><span>        Z *= scalar;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>Here we have defined:</p>
<ol>
<li>The <em>structure</em> of the object state - three doubles, <code>X</code>, <code>Y</code>, and <code>Z</code></li>
<li>How the object is constructed - the <code>Vector3()</code> constructor that takes a value for the object&rsquo;s initial state</li>
<li>Instructions for how that object state can be changed, i.e. our <code>Scale()</code> method</li>
</ol>
<p>We can create as many objects from this class definition as we might want:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>Vector3 one = <span style="color:#66d9ef">new</span> Vector3(<span style="color:#ae81ff">1.0</span>, <span style="color:#ae81ff">1.0</span>, <span style="color:#ae81ff">1.0</span>);
</span></span><span style="display:flex;"><span>Vector3 up = <span style="color:#66d9ef">new</span> Vector3(<span style="color:#ae81ff">0.0</span>, <span style="color:#ae81ff">1.0</span>, <span style="color:#ae81ff">0.0</span>);
</span></span><span style="display:flex;"><span>Vector3 a = <span style="color:#66d9ef">new</span> Vector3(<span style="color:#ae81ff">5.4</span>, -<span style="color:#ae81ff">21.4</span>, <span style="color:#ae81ff">3.11</span>);</span></span></code></pre></div><p>Conceptually, what we are doing is not that different from using a compound data type like a struct and a module of functions that work upon that struct.  But practically, it means <em>all the code for working with Vectors appears in one place</em>.  This arguably makes it much easier to find all the pertinent parts of working with vectors, and makes the resulting code better organized and easier to maintain and add features to.</p>
<p>Classes also provide additional benefits over structs in the form of <em>polymorphism</em>, which we&rsquo;ll discuss in <a href="https://ksu-cs-textbooks.github.io/cis400/1-object-orientation/02-polymorphism/">Chapter 2</a>
.</p>

            <footer class="footline">

            </footer>
          </article>

    
    
          <article class="default">
            <header class="headline">
            </header>
<h1 id="information-hiding">Information Hiding</h1>

<p>Now let&rsquo;s return to the concept of <a href="https://en.wikipedia.org/wiki/Information_hiding" target="_blank">information hiding</a>
, and how it applies in object-oriented languages.</p>
<p>Unanticipated changes in state are a major source of errors in programs. Again, think back to the EPIC source code we <a href="https://ksu-cs-textbooks.github.io/cis400/1-object-orientation/00-introduction/04-language-evolution/">looked at earlier</a>
. It may have seemed unusual now, but it used a common pattern from the early days of programming, where <em>all</em> the variables the program used were declared in one spot, and were <em>global</em> in scope (i.e. any part of the program could reassign any of those variables).</p>
<p>If we consider the program as a state machine, that means that any part of the program code could change any part of the program state.  Provided those changes were intended, everything works fine. But if the <em>wrong</em> part of the state was changed problems would ensue.</p>
<p>For example, if you were to make a typo in the part of the program dealing with water run-off in a field which ends up assigning a new value to a variable that was supposed to be used for crop growth, you&rsquo;ve just introduced a very subtle and difficult-to-find error.  When the crop growth modeling functionality fails to work properly, we&rsquo;ll probably spend serious time and effort looking for a problem in the crop growth portion of the code&hellip; but the problem doesn&rsquo;t lie there at all!</p>
<h3 id="access-modifiers">Access Modifiers</h3>
<p>There are several techniques involved in data hiding in an object-oriented language.  One of these is <a href="https://docs.microsoft.com/en-us/dotnet/csharp/programming-guide/classes-and-structs/access-modifiers" target="_blank">access modifiers</a>
, which determine what parts of the program code can access a particular class, field, property, or method.  Consider a class representing a student:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Student</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">string</span> first;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">string</span> last;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">uint</span> wid;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> Student(<span style="color:#66d9ef">string</span> first, <span style="color:#66d9ef">string</span> last, <span style="color:#66d9ef">uint</span> wid) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">this</span>.first = first;
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">this</span>.last = last;
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">this</span>.wid = wid;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>By using the access modifier <code>private</code>, we have indicated that our fields <code>first</code>, <code>last</code>, and <code>wid</code> cannot be accessed (seen or assigned to) outside of the code that makes up the <code>Student</code> class.  If we were to create a specific student:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>Student willie = <span style="color:#66d9ef">new</span> Student(<span style="color:#e6db74">&#34;Willie&#34;</span>, <span style="color:#e6db74">&#34;Wildcat&#34;</span>, <span style="color:#ae81ff">888888888</span>);</span></span></code></pre></div><p>We would not be able to change his name, i.e. <code>willie.first = &quot;Bob&quot;</code> would fail, because the field <code>first</code> is private.  In fact, we cannot even see his name, so <code>Console.WriteLine(willie.first);</code> would also fail.</p>
<p>If we want to allow a field or method to be accessible <em>outside</em> of the object, we must declare it <code>public</code>.  While we <em>can</em> declare fields public, this violates the core principles of encapsulation, as any outside code can modify our object&rsquo;s state in uncontrolled ways.</p>
<h3 id="accessor-methods">Accessor Methods</h3>
<p>Instead, in a true object-oriented approach we would write public  <strong><em>accessor methods</em></strong>, a.k.a. <em>getters</em> and <em>setters</em> (so called because they <em>get</em> or <em>set</em> the value of a field).  These methods allow us to see and change field values <em>in a controlled way</em>.  Adding accessors to our Student class might look like:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#75715e">/// &lt;summary&gt;A class representing a K-State student&lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Student</span>
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">string</span> _first;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">string</span> _last;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">uint</span> _wid;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt;Constructs a new student object&lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;param name=&#34;first&#34;&gt;The new student&#39;s first name&lt;/param&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;param name=&#34;last&#34;&gt;The new student&#39;s last name&lt;/param&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;param wid=&#34;wid&#34;&gt;The new student&#39;s Wildcat ID number&lt;/param&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> Student(<span style="color:#66d9ef">string</span> first, <span style="color:#66d9ef">string</span> last, <span style="color:#66d9ef">uint</span> wid)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        _first = first;
</span></span><span style="display:flex;"><span>        _last = last;
</span></span><span style="display:flex;"><span>        _wid = wid;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt;Gets the first name of the student&lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;returns&gt;The student&#39;s first name&lt;/returns&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">string</span> GetFirst()
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> _first;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt;Sets the first name of the student&lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> SetFirst(<span style="color:#66d9ef">string</span> <span style="color:#66d9ef">value</span>)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> (<span style="color:#66d9ef">value</span>.Length &gt; <span style="color:#ae81ff">0</span>) _first = <span style="color:#66d9ef">value</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt;Gets the last name of the student&lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;returns&gt;The student&#39;s last name&lt;/returns&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">string</span> GetLast()
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> _last;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt;Sets the last name of the student&lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;param name=&#34;value&#34;&gt;The new name&lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;remarks&gt;The &lt;paramref name=&#34;value&#34;/&gt; must be a non-empty string&lt;/remarks&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> SetLast(<span style="color:#66d9ef">string</span> <span style="color:#66d9ef">value</span>)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> (<span style="color:#66d9ef">value</span>.Length &gt; <span style="color:#ae81ff">0</span>) _last = <span style="color:#66d9ef">value</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt;Gets the student&#39;s Wildcat ID Number&lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;returns&gt;The student&#39;s Wildcat ID Number&lt;/returns&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">uint</span> GetWid()
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> _wid;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt;Gets the full name of the student&lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;returns&gt;The first and last name of the student as a string&lt;/returns&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">string</span> GetFullName()
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#e6db74">$&#34;{_first} {_last}&#34;</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>Notice how the <code>SetFirst()</code> and <code>SetLast()</code> method check that the provided name has at least one character?  We can use setters to make sure that we never allow the object state to be set to something that makes no sense.</p>
<p>Also, notice that the <code>wid</code> field only has a getter.  This effectively means once a studentâs Wid is set by the constructor, it cannot be changed.  This allows us to share data without allowing it to be changed outside of the class.</p>
<p>Finally, the <code>GetFullName()</code> is also a getter method, but it does not have its own private backing field. Instead it <em>derives</em> its value from the class state. We sometimes call this a derived getter for that reason.</p>

            <footer class="footline">

            </footer>
          </article>

    
    
          <article class="default">
            <header class="headline">
            </header>
<h1 id="c-properties">C# Properties</h1>

<p>While accessor methods provide a powerful control mechanism in object-oriented languages, they also require a lot of typing the same code syntax over and over (we often call this <a href="https://en.wikipedia.org/wiki/Boilerplate_text" target="_blank">boilerplate</a>
).  Many languages therefore introduce a mechanism for quickly defining basic accessors.  In C#, we have <a href="https://docs.microsoft.com/en-us/dotnet/csharp/programming-guide/classes-and-structs/properties" target="_blank">Properties</a>
.  Letâs rewrite our Student class with Properties:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Student</span> {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">string</span> _first;
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt;The student&#39;s first name&lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">string</span> First {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">get</span> { <span style="color:#66d9ef">return</span> _first; }
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">set</span> { <span style="color:#66d9ef">if</span>(<span style="color:#66d9ef">value</span>.Length &gt; <span style="color:#ae81ff">0</span>) _first = <span style="color:#66d9ef">value</span>;}
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">string</span> _last;
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt;The student&#39;s last name&lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">string</span> Last {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">get</span> { <span style="color:#66d9ef">return</span> _last; }
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">set</span> { <span style="color:#66d9ef">if</span>(<span style="color:#66d9ef">value</span>.Length &gt; <span style="color:#ae81ff">0</span>) _last = <span style="color:#66d9ef">value</span>; }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">uint</span> _wid;
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt;The student&#39;s Wildcat ID number&lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">uint</span> Wid {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">get</span> { <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">this</span>.wid; }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt;The student&#39;s full name&lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">string</span> FullName 
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>      <span style="color:#66d9ef">get</span> 
</span></span><span style="display:flex;"><span>      {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#e6db74">$&#34;{First} {Last}&#34;</span>
</span></span><span style="display:flex;"><span>      }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt;Constructs a new student object&lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;param name=&#34;first&#34;&gt;The new student&#39;s first name&lt;/param&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;param name=&#34;last&#34;&gt;The new student&#39;s last name&lt;/param&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;param wid=&#34;wid&#34;&gt;The new student&#39;s Wildcat ID number&lt;/param&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> Student(<span style="color:#66d9ef">string</span> first, <span style="color:#66d9ef">string</span> last, <span style="color:#66d9ef">uint</span> wid) {
</span></span><span style="display:flex;"><span>        _first = first;
</span></span><span style="display:flex;"><span>        _last = last;
</span></span><span style="display:flex;"><span>        _wid = wid;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>If you compare this example to the previous one, you will note that the code contained in bodies of the <code>get</code> and <code>set</code> are identical to the corresponding getter and setter methods. Essentially, C# properties are shorthand for writing out the accessor methods.  In fact, when you compile a C# program it transforms the <code>get</code> and <code>set</code> back into methods, i.e. the <code>get</code> in first is used to generate a method named <code>get_First()</code>.</p>
<p>While properties <em>are</em> methods, the syntax for working with them in code is identical to that of fields, i.e. if we were to create and then print a <code>Student</code>&rsquo;s identifying information, we&rsquo;d do something like:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>Student willie = <span style="color:#66d9ef">new</span> Student(<span style="color:#e6db74">&#34;Willie&#34;</span>, <span style="color:#e6db74">&#34;Wildcat&#34;</span>, <span style="color:#ae81ff">99999999</span>);
</span></span><span style="display:flex;"><span>Console.Write(<span style="color:#e6db74">&#34;Hello, &#34;</span>)
</span></span><span style="display:flex;"><span>Console.WriteLine(willie.FullName);
</span></span><span style="display:flex;"><span>Console.Write(<span style="color:#e6db74">&#34;Your WID is:&#34;</span>);
</span></span><span style="display:flex;"><span>Console.WriteLine(willie.Wid);</span></span></code></pre></div><p>Note too that we can declare properties with only a <code>get</code> or a <code>set</code> body, and that properties can be derived from other state rather than having a private backing field.</p>

  
  
<div class="box notices cstyle info">
  <div class="box-label"><i class="fa-fw fas fa-info-circle"></i> Info</div>
  <div class="box-content">

<h4 id="properties-are-_methods_">Properties are <em>Methods</em></h4>
<p>While C# properties are used like fields, i.e. <code>Console.WriteLine(willie.Wid)</code> or <code>willie.First = &quot;William&quot;</code>, they are actually <em>methods</em>.  As such, they <em>do not add structure to hold state</em>, hence the need for a <em>backing variable</em>.</p>
<p>The <code>Nickname</code> property in the example above is special syntax for an <em>implicit</em> backing field - the C# compiler creates the necessary space to hold the value.  But we can <em>only</em> access the value stored through that property.  If you need direct access to it, you <em>must</em> create a backing variable.</p>
<p>However, we don&rsquo;t always need a backing variable for a Property getter if the value of a property can be calculated from the current state of the class, i.e., we could add a property <code>FullName</code> to our <code>Student</code> class:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">string</span> FullName {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">get</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> first + <span style="color:#e6db74">&#34; &#34;</span> + last;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>Here we&rsquo;re effectively generating the value of the <code>FullName</code> property from the <code>first</code> and <code>last</code> backing variables every time the <code>FullName</code> property is requested.  This does cause a bit more computation, but we also know that it will always reflect the current state of the first and last names.</p>
</div>
</div>
<h2 id="auto-property-syntax">Auto-Property Syntax</h2>
<p>Not all properties need to do extra logic in the <code>get</code> or <code>set</code> body.  Consider our <code>Vector3</code> class we discussed earlier. We used public fields to represent the <code>X</code>, <code>Y</code>, and <code>Z</code> components, i.e.:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">double</span> X = <span style="color:#ae81ff">0</span>;</span></span></code></pre></div><p>If we wanted to switch to using properties, the <code>X</code> property would end up like this:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">private</span> <span style="color:#66d9ef">double</span> _x = <span style="color:#ae81ff">0</span>;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">double</span> X 
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">get</span> 
</span></span><span style="display:flex;"><span>  {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> _x;
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">set</span> 
</span></span><span style="display:flex;"><span>  {
</span></span><span style="display:flex;"><span>    _x = <span style="color:#66d9ef">value</span>;
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>Which seems like a lot more work for the same effect. To counter this perception and encourage programmers to use properties even in cases like this, C# also supports <em>auto-property</em> syntax. An auto-property is written like:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">double</span> X {<span style="color:#66d9ef">get</span>; <span style="color:#66d9ef">set</span>;} = <span style="color:#ae81ff">0</span>;</span></span></code></pre></div><p>Note the addition of the <code>{get, set}</code> - this is what tells the compiler we want a property and not a field.  When compiled, this code is transformed into a full getter and setter whose bodies match the basic <code>get</code> and <code>set</code> in the example above. The compiler even creates a private backing field (but we cannot access it in our code, because it is only created at compile time).  Any time you don&rsquo;t need to do any additional logic in a get or set, you can use this syntax.</p>
<p>Note that in the example above, we set a default value of <code>0</code>.  You can omit setting a default value.  You can also define a get-only autoproperty that always returns the default value (remember, you cannot access the compiler-generated backing field, so it can never be changed):</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">double</span> Pi {<span style="color:#66d9ef">get</span>} = <span style="color:#ae81ff">3.14</span>;</span></span></code></pre></div><p>In practice, this is effectively a constant field, so consider carefully if it is more appropriate to use that instead:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">const</span> PI = <span style="color:#ae81ff">3.14</span>;</span></span></code></pre></div><p>While it is possible to create a set-only auto-property, you will not be able access its value, so it is of limited use.</p>
<h2 id="expression-bodied-members">Expression-Bodied Members</h2>
<p>Later versions of C# introduced a concise way of writing functions common to functional languages known as lambda syntax, which C# calls <a href="https://learn.microsoft.com/en-us/dotnet/csharp/programming-guide/statements-expressions-operators/expression-bodied-members" target="_blank">Expression-Bodied Members</a>
.</p>
<p>Properties can be written using this concise syntax.  For example, our <code>FullName</code> get-only derived property in the <code>Student</code> written as an expression-bodied read-only property would be:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> FullName =&gt; <span style="color:#e6db74">$&#34;{FirstName} {LastName}&#34;</span></span></span></code></pre></div><p>Note the use of the arrow formed by an equals and greater than symbol <code>=&gt;</code>.  Properties with both a getter and setter can also be written as expression-bodied properties.  For example, our <code>FirstName</code> property could be rewritten:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> FirstName 
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">get</span> =&gt; _first;
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">set</span> =&gt; <span style="color:#66d9ef">if</span>(<span style="color:#66d9ef">value</span>.Length &gt; <span style="color:#ae81ff">0</span>) _first = <span style="color:#66d9ef">value</span>;
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>This syntax works well if your property bodies are a single expression.  However, if you need multiple lines, you should use the regular property syntax instead (you can also mix and match, i.e. use an expression-bodied <code>get</code> with a regular <code>set</code>).</p>
<h2 id="different-access-levels">Different Access Levels</h2>
<p>It is possible to declare your property as <code>public</code> and give a different access level to one of the accessors, i.e. if we wanted to add a GPA property ot our student:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">double</span> GPA { <span style="color:#66d9ef">get</span>; <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">set</span>; } = <span style="color:#ae81ff">4.0</span>;</span></span></code></pre></div><p>In this case, we can access the value of the GPA outside of the student class, but we can only set it from code inside the class. This approach works with all ways of defining a property.</p>
<h2 id="init-property-accessor">Init Property Accessor</h2>
<p>C# 9.0 introduced a third accessor, <code>init</code>.  This also sets the value of the property, but can <em>only</em> be used when the class is being initialized, and it can only be used once. This allows us to have some properties that are <em>immutable</em> (unable to be changed).</p>
<p>Our student example treats the <code>Wid</code> as immutable, but we can use the <code>init</code> keyword with an auto-property for a more concise representation:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">uint</span> Wid {<span style="color:#66d9ef">get</span>; <span style="color:#66d9ef">init</span>;}</span></span></code></pre></div><p>And in the constructor, replace setting the backing field (<code>_wid = wid</code>) with setting the property (<code>Wid = wid</code>). This approach is similar to the public property/private setter, but won&rsquo;t allow the property to ever change once declared.</p>

            <footer class="footline">

            </footer>
          </article>

    
    
          <article class="default">
            <header class="headline">
            </header>
<h1 id="programs-in-memory">Programs in Memory</h1>


<a href="https://www.youtube.com/watch?v=2g3TC5mdYLI">YouTube Video</a>


  
  
<div class="box notices cstyle info">
  <div class="box-label"><i class="fa-fw fas fa-info-circle"></i> Info</div>
  <div class="box-content">

<p>The above video and below textbook content cover the same ideas (but are not identical). Feel free to pick one or the other.</p>
</div>
</div>
<p>Before we move on to our next concept, it is helpful to explore how programs use memory. Remember that modern computers are <a href="https://en.wikipedia.org/wiki/Stored-program_computer" target="_blank">stored program computers</a>
, which means the <em>program</em> as well as the <em>data</em> are stored in the computer&rsquo;s memory. A Universal Turing Machine, the standard example of stored program computer, reads the program from the same paper tape that it reads its inputs to and writes its output to. In contrast, to load a program in the ENIAC, the first electronic computer in the United States, programmers had to physically rewire the computer (it was later modified to be a stored-program computer).</p>
<p>When a program is run, the operating system allocates part of the computer&rsquo;s memory (RAM) for the program to use. This memory is divided into three parts - the <em>static</em> memory, the <em>stack</em>, and the <em>heap</em>.</p>
<p>
<a href="#image-4de0d52f6528f97e3c88dc87bc934da2" class="lightbox-link">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/1.1.8.1.png" alt="A diagram of the memory allocated to a program" style="height: auto; width: auto;" loading="lazy">
</a>
<a href="javascript:history.back();" class="lightbox" id="image-4de0d52f6528f97e3c88dc87bc934da2">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/1.1.8.1.png" alt="A diagram of the memory allocated to a program" class="lightbox-image" loading="lazy">
</a></p>
<p>The program code itself is copied into the <em>static</em> section of that memory, along with any literals (<code>1</code>, <code>&quot;Foo&quot;</code>). Additionally, the space to hold any variables that are declared <code>static</code> is allocated here.  The reason this memory space is called static is that it is allocated when the program begins, and remains allocated for as long as the program is running. It does not grow or shrink (though the value of <code>static</code> variables may change).</p>
<p>The <em>stack</em> is where the space for scoped variables is allocated.  We often call it the stack because functionally it is used like the stack data structure. The space for global variables is allocated first, at the &ldquo;bottom&rdquo; of the stack. Then, every time the program enters a new scope (i.e. a new function, a new loop body, etc.) the variables declared there are allocated on the stack.  When the program exits that scope (i.e. the function returns, the loop ends), the memory that had been reserved for those values is released (like the stack pop operation).</p>
<p>Thus, the stack grows and shrinks over the life of the program. The base of the stack is against the static memory section, and it grows towards the heap.  If it grows too much, it runs out of space.  This is the root cause of the nefarious <strong>stack overflow</strong> exception. The stack has run out of memory, most often because an infinite recursion or infinite loop.</p>
<p>Finally, the <em>heap</em> is where dynamically allocated memory comes from - memory the programmer specifically reserved for a purpose.  In C programming, you use the <code>calloc()</code>, <code>malloc()</code>, or <code>realloc()</code> to allocate space manually.  In Object-Oriented languages, the data for individual <em>objects</em> are stored here.  Calling a constructor with the <code>new</code> keyword allocates memory on the heap, the constructor then initializes that memory, and then the address of that memory is returned.  We&rsquo;ll explore this process in more depth shortly.</p>
<p>This is also where the difference between a <em>value</em> type and a <em>reference</em> type comes into play.  Value types include numeric objects like integers, floating point numbers, and also booleans.  Reference types include strings and classes.  When you create a variable that represents a value type, the memory to hold its value is created in the stack.  When you create a variable to hold a reference type, it also has memory in the stack - but this memory holds a pointer to where the object&rsquo;s actual data is allocated in the heap.  Hence the term <em>reference type</em>, as the variable doesn&rsquo;t hold the object&rsquo;s data directly - instead it holds a reference to where that object exists in the heap!</p>
<p>This is also where <code>null</code> comes from - a value of <code>null</code> means that a reference variable is not pointing at anything.</p>
<p>The objects in the heap are not limited to a scope like the variables stored in the stack. Some may exist for the entire running time of the program.  Others may be released almost immediately. Accordingly, as this memory is released, it leaves &ldquo;holes&rdquo; that can be re-used for other objects (provided they fit). Many modern programming languages use a garbage collector to monitor how fragmented the heap is becoming, and will occasionally reorganize the data in the heap to make more contiguous space available.</p>

            <footer class="footline">

            </footer>
          </article>

    
    
          <article class="default">
            <header class="headline">
            </header>
<h1 id="objects-in-memory">Objects in Memory</h1>

<p>We often talk about the <strong><em>class</em></strong> as a <em>blueprint</em> for an <strong><em>object</em></strong>.  This is because classes define what properties and methods an object should have, in the form of the class definition.  An object is created from this blueprint by invoking the class&rsquo; <strong>constructor</strong>. Consider this class representing a planet:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// A class representing a planet</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Planet</span> {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// The planet&#39;s mass in Earth Mass units (~5.9722 x 10^24kg)</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">double</span> mass;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">double</span> Mass 
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">get</span> { <span style="color:#66d9ef">return</span> mass; }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// The planet&#39;s radius in Earth Radius units (~6.738 x 10^6m)</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">double</span> radius;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">double</span> Radius 
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">get</span> { <span style="color:#66d9ef">return</span> radius; }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// Constructs a new planet</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;param name=&#34;mass&#34;&gt;The planet&#39;s mass&lt;/param&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;param name=&#34;radius&#34;&gt;The planet&#39;s radius&lt;/param&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> Planet(<span style="color:#66d9ef">double</span> mass, <span style="color:#66d9ef">double</span> radius) 
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">this</span>.mass = mass;
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">this</span>.radius = radius;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>It describes a planet as having a mass and a radius. But a class does more than just labeling the properties and fields and providing methods to mutate the state they contain.  It also specifies how <em>memory needs to be allocated</em> to hold those values as the program runs. In memory, we would need to hold <em>both</em> the mass and radius values.  These are stored side-by-side, as a series of bits that are on or off.  You probably remember from CIS 115 that a <code>double</code> is stored as a <strong>sign bit</strong>, <strong>mantissa</strong> and <strong>exponent</strong>.  This is also the case here - a C# <code>double</code> requires 64 bits to hold these three parts, and we can represent it with a memory diagram:</p>
<p>
<a href="#image-66e0b74f732992b5cc6aede6233d4d4d" class="lightbox-link">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/1.1.7.1.png" alt="The Planet memory diagram" style="height: auto; width: auto;" loading="lazy">
</a>
<a href="javascript:history.back();" class="lightbox" id="image-66e0b74f732992b5cc6aede6233d4d4d">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/1.1.7.1.png" alt="The Planet memory diagram" class="lightbox-image" loading="lazy">
</a></p>
<p>We can create a specific planet by invoking its constructor, i.e.:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">new</span> Planet(<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">1</span>);</span></span></code></pre></div><p>This <em>allocates</em> (sets aside) the memory to hold the planet, and populates the mass and radius with the supplied values.  We can represent this with a memory diagram:</p>
<p>
<a href="#image-290ddced980090dedda44213d0ea258a" class="lightbox-link">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/1.1.7.2.png" alt="The constructed planet&amp;rsquo;s memory diagram" style="height: auto; width: auto;" loading="lazy">
</a>
<a href="javascript:history.back();" class="lightbox" id="image-290ddced980090dedda44213d0ea258a">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/1.1.7.2.png" alt="The constructed planet&amp;rsquo;s memory diagram" class="lightbox-image" loading="lazy">
</a></p>
<p>With memory diagrams, we typically write the values of variables in their human-readable form.  Technically the values we are storing are in binary, and would each be <code>0000000000010000000000000000000000000000000000000000000000000001</code>, so our overall object would be the bits: <code>00000000000100000000000000000000000000000000000000000000000000010000000000010000000000000000000000000000000000000000000000000001</code>.</p>
<p>And this is <em>exactly</em> how it is stored in memory!  The nice boxes we drew in our memory diagram are a tool for us to reason about the memory, <strong>not</strong> something that actually exists in memory.  Instead, the compiler determines the starting point for each <code>double</code> by looking at the structure defined in our <code>class</code>, i.e. the first field defined is <code>mass</code>, so it will be the first 64 bits of the object in memory.  The second field is <code>radius</code>, so it starts 65 bits into the object and consists of the next (and final) 64 bits.</p>
<p>If we assign the created <code>Planet</code> object to a variable, we allocate memory for that variable:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>Planet earth = <span style="color:#66d9ef">new</span> Planet(<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">1</span>);</span></span></code></pre></div><p>Unlike our <code>double</code> and other primitive values, this allocated memory holds a <em>reference</em> (a starting address of the memory where the object was allocated).  We indicate this with a box and arrow connecting the variable and object in our memory diagram:</p>
<p>
<a href="#image-560fe4bfeb039aef1602ad8f0eda58b0" class="lightbox-link">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/1.1.7.3.png" alt="The memory diagram for the earth variable" style="height: auto; width: auto;" loading="lazy">
</a>
<a href="javascript:history.back();" class="lightbox" id="image-560fe4bfeb039aef1602ad8f0eda58b0">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/1.1.7.3.png" alt="The memory diagram for the earth variable" class="lightbox-image" loading="lazy">
</a></p>
<p>A reference is either 32 bits (on a computer with a 32-bit CPU) or 64 bits (on a computer with a 64-bit CPU), and essentially is an offset from the memory address $0$ indicating where the object will be located in memory (in the computer&rsquo;s RAM).  You&rsquo;ll see this in far more detail in <strong>CIS 450 - Computer Architecture and Operations</strong>, but the important idea for now is the variable stores <em>where the object is located in memory</em> <strong>not</strong> <em>the object&rsquo;s data itself</em>.  This is also why if we define a class variable but don&rsquo;t assign it an object, i.e.:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>Planet mars;</span></span></code></pre></div><p>
<a href="#image-2be35cecce4dbcbe5e1cc961782e979f" class="lightbox-link">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/1.1.7.4.png" alt="The memory diagram for the mars variable" style="height: auto; width: auto;" loading="lazy">
</a>
<a href="javascript:history.back();" class="lightbox" id="image-2be35cecce4dbcbe5e1cc961782e979f">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/1.1.7.4.png" alt="The memory diagram for the mars variable" class="lightbox-image" loading="lazy">
</a></p>
<p>The value of this variable will be <code>null</code>.  It&rsquo;s because it doesn&rsquo;t point anywhere!</p>
<p>Returning to our Earth example, <code>earth</code> is an <em>instance</em> of the class <code>Planet</code>.  We can create other instances, i.e.</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>Planet mars = <span style="color:#66d9ef">new</span> Planet(<span style="color:#ae81ff">0.107</span>, <span style="color:#ae81ff">0.53</span>);</span></span></code></pre></div><p>
<a href="#image-e02e040c64b04bb97a1b4e7c615fdc10" class="lightbox-link">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/1.1.7.5.png" alt="The memory diagram for the initialized mars variable" style="height: auto; width: auto;" loading="lazy">
</a>
<a href="javascript:history.back();" class="lightbox" id="image-e02e040c64b04bb97a1b4e7c615fdc10">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/1.1.7.5.png" alt="The memory diagram for the initialized mars variable" class="lightbox-image" loading="lazy">
</a></p>
<p>We can even create a <strong>Planet</strong> instance to represent one of the exoplanets discovered by <a href="https://www.nasa.gov/tess-transiting-exoplanet-survey-satellite" title="Testing Exoplanet Survey Satellite" target="_blank">NASAâs TESS</a>
:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>Planet hd21749b = <span style="color:#66d9ef">new</span> Planet(<span style="color:#ae81ff">23.20</span>, <span style="color:#ae81ff">2.836</span>);</span></span></code></pre></div><p>
<a href="#image-591893a5942a5045f211a2615f6cb7e2" class="lightbox-link">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/1.1.7.6.png" alt="The memory diagram for three planets" style="height: auto; width: auto;" loading="lazy">
</a>
<a href="javascript:history.back();" class="lightbox" id="image-591893a5942a5045f211a2615f6cb7e2">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/1.1.7.6.png" alt="The memory diagram for three planets" class="lightbox-image" loading="lazy">
</a></p>
<p>Letâs think more deeply about the idea of a class as a blueprint.  A blueprint for what, exactly?  For one thing, it serves to describe the <em>state</em> of the object, and helps us label that state.  If we were to check our variable <strong>marsâ</strong> radius, we do so based on the property <strong>Radius</strong> defined in our class:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>mars.Radius</span></span></code></pre></div><p>This would follow the <code>mars</code> reference to the <code>Planet</code> object it represents, and access the second group of 64 bits stored there, interpreting them as a <code>double</code> (basically it adds 64 to the <code>reference</code> address and then reads the next 64 bits)</p>

  
  
<div class="box notices cstyle info">
  <div class="box-label"><i class="fa-fw fas fa-info-circle"></i> Info</div>
  <div class="box-content">

<p>Incidentally, this is why we start counting at 0 in computer science.  The <code>mass</code> bits start at the start of our <code>Planet</code> object, referenced by <code>mars</code> i.e. if <code>mars</code> holds the reference address $5234$, then the bits of <code>mass</code> <em>also</em> begin at $5234$, or $5234+0$.  And the <code>radius</code> bits start at $5234 + 64$.</p>
</div>
</div>
<p>State and memory are clearly related - the current state is what data is stored in memory.  It is possible to take that memoryâs current state, write it to persistent storage (like the hard drive), and then read it back out at a later point in time and restore the program to exactly the state we left it with.  This is actually what Windows does when you put it into hibernation mode.</p>
<p>The process of writing out the state is known as <em>serialization</em>, and itâs a topic weâll revisit later.</p>

  
  
<div class="box notices cstyle info">
  <div class="box-label"><i class="fa-fw fas fa-info-circle"></i> Info</div>
  <div class="box-content">

<h4 id="the-static-modifier-and-memory">The Static Modifier and Memory</h4>
<p>You might have wondered how the <code>static</code> modifier plays into objects.  Essentially, the <code>static</code> keyword indicates the field or method it modifies <em>exists in only one memory location</em>.  I.e. a static field references the <em>same</em> memory location for all objects that possess it.  Hence, if we had a simple class like:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Simple</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">int</span> A;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">int</span> B;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> Simple(<span style="color:#66d9ef">int</span> a, <span style="color:#66d9ef">int</span> b) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">this</span>.A = a;
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">this</span>.B = b;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>And created a couple of instances:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>Simple first = <span style="color:#66d9ef">new</span> Simple(<span style="color:#ae81ff">10</span>, <span style="color:#ae81ff">12</span>);
</span></span><span style="display:flex;"><span>Simple second = <span style="color:#66d9ef">new</span> Simple(<span style="color:#ae81ff">8</span>, <span style="color:#ae81ff">5</span>);</span></span></code></pre></div><p>The value of <code>first.A</code> would be 8 - because <code>first.A</code> and <code>second.A</code> reference the <em>same</em> memory location, and <code>second.A</code> was set <em>after</em> <code>first.A</code>.  If we changed it again:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>first.A = <span style="color:#ae81ff">3</span>;</span></span></code></pre></div><p>Then both <code>first.A</code> and <code>second.A</code> would have the value 3, as they share the same memory.  <code>first.B</code> would still be 12, and <code>second.B</code> would be 5.</p>
<p>Another way to think about <code>static</code> is that it means the field or method we are modifying belongs to the <em>class</em> and not the individual <em>object</em>.  Hence, each object <em>shares</em> a <code>static</code> variable, because it belongs to their class.  Used on a method, <code>static</code> indicates that the method belongs to the class definition, not the object instance.  Hence, we must invoke it <em>from the class</em>, not an object instance: i.e. <code>Math.Pow()</code>, not <code>Math m = new Math(); m.Pow();</code>.</p>
<p>Finally, when used with a class, <code>static</code> indicates we can&rsquo;t create objects from the class - the class definition exists on its own.  Hence, the <code>Math m = new Math();</code>  is actually an error, as the <code>Math</code> class is declared static.</p>
</div>
</div>

            <footer class="footline">

            </footer>
          </article>

    
    
          <article class="default">
            <header class="headline">
            </header>
<h1 id="c-object-initialization">C# Object Initialization</h1>

<p>With our broader understanding of objects in memory, let&rsquo;s re-examine something you&rsquo;ve been working with already, how the values in that memory are <em>initialized</em> (set to their initial values).  In C#, there are four primary ways a value is initialized:</p>
<ol>
<li>By zeroing the memory</li>
<li>By setting a default value</li>
<li>By the constructor</li>
<li>With Initialization syntax</li>
</ol>
<p>This also happens to be the order in which these operations occur - i.e. the default value can be overridden by code in the constructor. Only after all of these steps are completed is the initialized object returned from the constructor.</p>
<h2 id="zeroing-the-memory">Zeroing the Memory</h2>
<p>This step is actually done for you - it is a feature of the C# language.  Remember, allocated memory is simply a series of bits. Those bits have likely been used previously to represent something else, so they will already be set to 0s or 1s.  Once you treat it as a variable, it will have a specific meaning.  Consider this statement:</p>
<div class="wrap-code highlight"><pre tabindex="0"><code>int foo;</code></pre></div><p>That statement allocates the space to hold the value of <code>foo</code>.  But what is that value?  In many older languages, it would be whatever is specified by how the bits were set previously - i.e. it could be any integer within the available range.  And each time you ran the program, it would probably be a <em>different</em> value!  This is why it is always a good idea to <em>assign</em> a value to a variable immediately after you declare it.</p>
<p>The creators of C# wanted to avoid this potential problem, so in C# any memory that is allocated by a variable declaration is also <em>zeroed</em> (all bits are set to 0).  Exactly what this means depends on the variable&rsquo;s type. Essentially, for numerics (integers, floating points, etc) the value would be <code>0</code>, for booleans it would be <code>false</code>.  And for reference types, the value would be <code>null</code>.</p>
<h2 id="default-values">Default Values</h2>
<p>A second way a field&rsquo;s value can be set is by assigning a default value after it is declared.  Thus, if we have a private backing <code>_count</code> in our <code>CardDeck</code> class, we could set it to have a default value of 52:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">CardDeck</span>
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">int</span> _count = <span style="color:#ae81ff">52</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">int</span> Count 
</span></span><span style="display:flex;"><span>  {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">get</span> 
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>      <span style="color:#66d9ef">return</span> _count;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">set</span> 
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>      _count = <span style="color:#66d9ef">value</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>This ensures that <code>_count</code> starts with a value of 52, instead of 0.</p>
<p>We can also set a default value when using auto-property syntax:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">CardDeck</span>
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">int</span> Count {<span style="color:#66d9ef">get</span>; <span style="color:#66d9ef">set</span>;} = <span style="color:#ae81ff">52</span>;
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div>
  
  
<div class="box notices cstyle info">
  <div class="box-label"><i class="fa-fw fas fa-info-circle"></i> Info</div>
  <div class="box-content">

<p>It is important to understand that the default value is assigned <em>as the memory is allocated</em>, which means the object doesn&rsquo;t exist yet.  Basically, we cannot use methods, fields, or properties of the class to set a default value.  For example:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">CardDeck</span>
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">int</span> Count {<span style="color:#66d9ef">get</span>; <span style="color:#66d9ef">set</span>;} = <span style="color:#ae81ff">52</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">int</span> PricePerCard {<span style="color:#66d9ef">get</span>;} = <span style="color:#ae81ff">5</span>m / Count; 
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>Won&rsquo;t compile, because we don&rsquo;t have access to the <code>Count</code> property when setting the default for <code>PricePerCard</code>.</p>
</div>
</div>
<h2 id="constructors">Constructors</h2>
<p>This brings us to the constructor, the standard way for an object-oriented program to initialize the state of the object as it is created. In C#, the constructor always has the same name as the class it constructs and has no return type.  For example, if we defined a class <code>Square</code>, we might type:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Square</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">float</span> length;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> Square(<span style="color:#66d9ef">float</span> length) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">this</span>.length = length;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">float</span> Area() {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> length * length;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>Note that unlike the regular method, <code>Area()</code>, our constructor <code>Square()</code> does not have a return type.  In the constructor, we set the <code>length</code> field of the newly constructed object to the value supplied as the parameter <code>length</code>.  Note too that we use the <code>this</code> keyword to distinguish between the <em>field</em> <code>length</code> and the <em>parameter</em> <code>length</code>.  Since both have the same name, the C# compiler assumes we mean the parameter, unless we use <code>this.length</code> to indicate the field that belongs to <code>this</code> - i.e. this object.</p>
<h3 id="parameterless-constructors">Parameterless Constructors</h3>
<p>A parameterless constructor is one that does not have any parameters.  For example:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Ball</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">int</span> x;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">int</span> y;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> Ball() {
</span></span><span style="display:flex;"><span>        x = <span style="color:#ae81ff">50</span>;
</span></span><span style="display:flex;"><span>        y = <span style="color:#ae81ff">10</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>Notice how no parameters are defined for <code>Ball()</code> - the parentheses are empty.</p>
<p>If we don&rsquo;t provide a constructor for a class the C# compiler automatically creates a <em>parameterless</em> constructor for us, i.e. the class <code>Bat</code>:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Bat</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">bool</span> wood = <span style="color:#66d9ef">true</span>;
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>Can be created by invoking <code>new Bat()</code>, even though we did not define a constructor for the class.  If we define <em>any</em> constructors, parameterless or otherwise, then the C# compiler will not create an automatic parameterless constructor.</p>
<h2 id="initializer-syntax">Initializer Syntax</h2>
<p>Finally, C# introduces some special syntax for setting initial values after the constructor code has run, but before initialization is completed - <a href="https://learn.microsoft.com/en-us/dotnet/csharp/programming-guide/classes-and-structs/object-and-collection-initializers" target="_blank">Object initializers</a>
.  For example, if we have a class representing a rectangle:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Rectangle</span> 
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">int</span> Width {<span style="color:#66d9ef">get</span>; <span style="color:#66d9ef">set</span>;}
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">int</span> Height {<span style="color:#66d9ef">get</span>; <span style="color:#66d9ef">set</span>;}
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>We could initialize it with:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>Rectangle r = <span style="color:#66d9ef">new</span> Rectangle() {
</span></span><span style="display:flex;"><span>  Width = <span style="color:#ae81ff">20</span>,
</span></span><span style="display:flex;"><span>  Height = <span style="color:#ae81ff">10</span>
</span></span><span style="display:flex;"><span>};</span></span></code></pre></div><p>The resulting rectangle would have its width and height set to 20 and 10 respectively <em>before</em> it was assigned to the variable <code>r</code>.</p>

  
  
<div class="box notices cstyle info">
  <div class="box-label"><i class="fa-fw fas fa-info-circle"></i> Info</div>
  <div class="box-content">

<p>In addition to the <code>get</code> and <code>set</code> accessor, C# has an <code>init</code> operator that works like the <code>set</code> operator but can <em>only</em> be used during object initialization.</p>
</div>
</div>

            <footer class="footline">

            </footer>
          </article>

    
    
          <article class="default">
            <header class="headline">
            </header>
<h1 id="message-passing">Message Passing</h1>

<p>The second criteria Alan Kay set for object-oriented languages was <a href="https://en.wikipedia.org/wiki/Message_passing" target="_blank">message passing</a>
.  Message passing is a way to request a unit of code engage in a behavior, i.e. changing its state, or sharing some aspect of its state.</p>
<p>Consider the real-world analogue of a letter sent via the postal service.  Such a message consists of: an address the message needs to be sent to, a return address, the message itself (the letter), and any data that needs to accompany the letter (the enclosures).  A specific letter might be a wedding invitation.  The message includes the details of the wedding (the host, the location, the time), an enclosure might be a refrigerator magnet with these details duplicated.  The recipient should (per custom) send a response to the host addressed to the return address letting them know if they will be attending.</p>
<p>In an object-oriented language, message passing primarily take the form of methods. Let&rsquo;s revisit our example <code>Vector3</code> class:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Vector3</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">double</span> X {<span style="color:#66d9ef">get</span>; <span style="color:#66d9ef">set</span>;}
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">double</span> Y {<span style="color:#66d9ef">get</span>; <span style="color:#66d9ef">set</span>;}
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">double</span> Z {<span style="color:#66d9ef">get</span>; <span style="color:#66d9ef">set</span>;}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt; </span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// Creates a new Vector3 object</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> Vector3(<span style="color:#66d9ef">double</span> x, <span style="color:#66d9ef">double</span> y, <span style="color:#66d9ef">double</span> z) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">this</span>.X = x;
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">this</span>.Y = y;
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">this</span>.Z = z;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// Computes the dot product of this vector and another one </span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;param name=&#34;other&#34;&gt;The other vector&lt;/param&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">double</span> DotProduct(Vector3 other) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">this</span>.X * other.X + <span style="color:#66d9ef">this</span>.Y * other.Y + <span style="color:#66d9ef">this</span>.Z * other.Z;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>And let&rsquo;s use its <code>DotProduct()</code> method:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>Vector3 a = <span style="color:#66d9ef">new</span> Vector3(<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">2</span>);
</span></span><span style="display:flex;"><span>Vector3 b = <span style="color:#66d9ef">new</span> Vector3(<span style="color:#ae81ff">4</span>, <span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">1</span>);
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">double</span> c = a.DotProduct(b);</span></span></code></pre></div><p>Consider the invocation of <code>a.DotProduct(b)</code> above.  The method name, <code>DotProduct</code> provides the details of what the message is intended to accomplish (the letter).  Invoking it on a specific variable, i.e. <code>a</code>, tells us who the message is being sent to (the recipient address).  The return type indicates what we need to send back to the recipient (the invoking code), and the parameters provide any data needed by the class to address the task (the enclosures).</p>
<p>Letâs define a new method for our Vector3 class that emphasizes the role message passing plays in mutating object state:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Vector3</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">double</span> X {<span style="color:#66d9ef">get</span>; <span style="color:#66d9ef">set</span>;}
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">double</span> Y {<span style="color:#66d9ef">get</span>; <span style="color:#66d9ef">set</span>;}
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">double</span> Z {<span style="color:#66d9ef">get</span>; <span style="color:#66d9ef">set</span>;}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt; </span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// Creates a new Vector3 object</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> Vector3(<span style="color:#66d9ef">double</span> x, <span style="color:#66d9ef">double</span> y, <span style="color:#66d9ef">double</span> z) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">this</span>.X = x;
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">this</span>.Y = y;
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">this</span>.Z = z;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> Normalize() {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">var</span> magnitude = Math.Sqrt(Math.pow(<span style="color:#66d9ef">this</span>.X, <span style="color:#ae81ff">2</span>) + Math.Pow(<span style="color:#66d9ef">this</span>.Y, <span style="color:#ae81ff">2</span>) + Math.Pow(<span style="color:#66d9ef">this</span>.Z, <span style="color:#ae81ff">2</span>));
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">this</span>.X /= magnitude;
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">this</span>.Y /= magnitude;
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">this</span>.Z /= magnitude;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>We can now invoke the <code>Normalize()</code> method on a Vector3 to mutate its state, shortening the magnitude of the vector to length 1.</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>Vector3 f = <span style="color:#66d9ef">new</span> Vector3(<span style="color:#ae81ff">9.0</span>, <span style="color:#ae81ff">3.0</span>, <span style="color:#ae81ff">2.0</span>);
</span></span><span style="display:flex;"><span>f.Normalize();</span></span></code></pre></div><p>Note how here, <code>f</code> is the object receiving the message <code>Normalize</code>.  There is no additional data needed, so there are no parameters being passed in.  Our earlier <code>DotProduct()</code> method took a second vector as its argument, and used that vector&rsquo;s values to mutate its state.</p>
<p>Message passing therefore acts like those special molecular pumps and other gate mechanisms of a cell that control what crosses the cell wall.  The methods defined on a class determine how outside code can interact with the object. An extra benefit of this approach is that a method becomes an abstraction for the behavior of the code, and the associated state changes it embodies.  As a programmer using the method, we don&rsquo;t need to know the exact implementation of that behavior - just what data we need to provide, and what it should return or how it will alter the program state.  This makes it far easier to reason about our program, and also means we can change the internal details of a class (perhaps to make it run faster) without impacting the other aspects of the program.</p>
<p>This is also the reason we want to use getters and setters (or properties in C#) instead of public fields in an object-oriented language.  Getters, setters, and C# properties are all methods, and therefore are a form of message passing, and they ensure that outside code is not modifying the state of the object (rather, the outside code is requesting the object to change its state).  It is a fine distinction, but one that can be very important.</p>

  
  
<div class="box notices cstyle info">
  <div class="box-label"><i class="fa-fw fas fa-info-circle"></i> Info</div>
  <div class="box-content">

<p>You probably have noticed that in many programming languages we speak of <em>functions</em>, but in C# and other object-oriented languages, we&rsquo;ll often speak of <em>methods</em>.  You might be wondering just what is the difference?</p>
<p>Both are forms of message passing, and share many of the same characteristics.  Broadly speaking though, <em>methods</em> are <em>functions</em> defined as part of an object.  Therefore, their bodies can access the state of the object.  In fact, that&rsquo;s what the <code>this</code> keyword in C# means - it refers to <em>this object</em>, i.e. the instance of the class that the method is currently executing for.  For non-object-oriented languages, there is no concept of <code>this</code> (or <code>self</code> as it appears in some other languages).</p>
</div>
</div>

            <footer class="footline">

            </footer>
          </article>

    
    
          <article class="default">
            <header class="headline">
            </header>
<h1 id="summary">Summary</h1>

<p>In this chapter, we looked at how Object-Orientation adopted the concept of encapsulation to combine related state and behavior within a single unit of code, known as a class.  We also discussed the three key features found in the implementation of classes and objects in Object-Oriented languages:</p>
<ol>
<li>Encapsulation of state and behavior within an object, defined by its class</li>
<li>Information hiding applied to variables defined within that class to prevent unwanted mutations of object state</li>
<li>Message passing to allow controlled mutations of object state in well-defined ways</li>
</ol>
<p>We explored how objects are instances of a class created through invoking a constructor method, and how each object has its own independent state but shares behavior definitions with other objects constructed from the same class.  We discussed several different ways of looking at and reasoning about objects - as a state machine, and as structured data stored in memory. We saw how the constructor creates the memory to hold the object state and initializes its values.  We saw how access modifiers and accessor methods can be used to limit and control access to the internal state of an object through message passing.</p>
<p>Finally, we explored how all of these concepts are implemented in the C# language.</p>

            <footer class="footline">

            </footer>
          </article>

          </section>
    
    
          <article class="chapter">
            <header class="headline">
            </header>


<div class="article-subheading">Chapter 2</div>
<h1 id="polymorphism">Polymorphism</h1>

<p>It&rsquo;s a shapeshifter!</p>

            <footer class="footline">

            </footer>
          </article>

          <section>
            <h1 class="a11y-only">Subsections of Polymorphism</h1>
    
    
          <article class="default">
            <header class="headline">
            </header>
<h1 id="introduction">Introduction</h1>

<p>The term <em>polymorphism</em> means <em>many forms.</em>  In computer science, it refers to the ability of a single symbol (i.e. a function or class name) to represent multiple <em>types</em>.  Some form of polymorphism can be found in nearly all programming languages.</p>
<p>While encapsulation of state and behavior into objects is the most central theoretical idea of object-oriented languages, polymorphism - specifically in the form of <em>inheritance</em> is a close second.  In this chapter weâll look at how polymorphism is commonly implemented in object-oriented languages.</p>
<h2 id="key-terms">Key Terms</h2>
<p>Some key terms to learn in this chapter are:</p>
<ul>
<li>Polymorphism</li>
<li>Type</li>
<li>Type Checking</li>
<li>Casting</li>
<li>Implicit Casting</li>
<li>Explicit Casting</li>
<li>Interface</li>
<li>Inheritance</li>
<li>Superclass</li>
<li>Subclass</li>
<li>Abstract Classes</li>
</ul>
<p>C# Keywords:</p>
<ul>
<li><code>Interface</code></li>
<li><code>protected</code></li>
<li><code>abstract</code></li>
<li><code>virtual</code></li>
<li><code>override</code></li>
<li><code>sealed</code></li>
<li><code>as</code></li>
<li><code>is</code></li>
<li><code>dyanamic</code></li>
</ul>

            <footer class="footline">

            </footer>
          </article>

    
    
          <article class="default">
            <header class="headline">
            </header>
<h1 id="types">Types</h1>

<p>Before we can discuss polymorphism in detail, we must first understand the concept of <em>types</em>.  In computer science, a <em>type</em> is a way of categorizing a variable by its storage strategy, i.e., how it is represented in the computer&rsquo;s memory.</p>
<p>You&rsquo;ve already used types extensively in your programming up to this point.  Consider the declaration:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">int</span> number = <span style="color:#ae81ff">5</span>;</span></span></code></pre></div><p>The variable <strong>number</strong> is declared to have the type <strong>int</strong>.  This lets the .NET interpreter know that the value of number will be stored using a specific scheme.  This scheme will use 32 bits and contain the number in <a href="https://en.wikipedia.org/wiki/Two%27s_complement" target="_blank">Two&rsquo;s compliment binary form</a>.  This form, and the number of bytes, allows us to represent numbers in the range -2,147,483,648 to 2,147,483,647.  If we need to store larger values, we might instead use a <em>long</em> which uses 64 bits of storage.  Or, if we only need positive numbers, we might instead use a <em>uint</em>, which uses 32 bits and stores the number in regular <a href="https://en.wikipedia.org/wiki/Binary_number" target="_blank">base 2 (binary) form</a>
.</p>
<p>This is why languages like C# provide multiple <a href="https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/builtin-types/integral-numeric-types" target="_blank">integral</a>
 and <a href="https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/builtin-types/floating-point-numeric-types" target="_blank">float</a>
 types.  Each provides a different representation, representing a tradeoff between memory required to store the variable and the range or precision that variable can represent.</p>
<p>In addition to integral and float types, most programming languages include types for booleans, characters, arrays, and often strings.  C# is no exception - you can read about its built-in value types <a href="https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/keywords/value-types" target="_blank">in the documentation</a>
.</p>
<h2 id="user-defined-types">User-Defined Types</h2>
<p>In addition to built-in types, most programming languages support <em>user-defined types</em>, that is, new types defined by the programmer.  For example, if we were to define a C# enum:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">enum</span> Grade {
</span></span><span style="display:flex;"><span>  A,
</span></span><span style="display:flex;"><span>  B,
</span></span><span style="display:flex;"><span>  C,
</span></span><span style="display:flex;"><span>  D,
</span></span><span style="display:flex;"><span>  F
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>Defines the type <em>Grade</em>.  We can then create variables with that type:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>Grade courseGrade = Grade.A;</span></span></code></pre></div><p>Similarly, <em>structs</em> provide a way of creating user-defined compound data types.</p>
<h2 id="classes-are-types">Classes are Types</h2>
<p>In an object-oriented programming language, a Class also <em>defines a new type</em>.  As we discussed in the previous chapter, the Class defines the structure for the <em>state</em> (what is represented) and <em>memory</em> (how it is represented) for objects implementing that type.  Consider the C# class Student:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Student</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">// backing variables</span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">float</span> creditPoints = <span style="color:#ae81ff">0</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">uint</span> creditHours = <span style="color:#ae81ff">0</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">/// Gets and sets first name.</span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">string</span> First { <span style="color:#66d9ef">get</span>; <span style="color:#66d9ef">set</span>; }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">/// Gets and sets last name.</span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">string</span> Last { <span style="color:#66d9ef">get</span>; <span style="color:#66d9ef">set</span>; }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">/// Gets the student&#39;s GPA</span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">float</span> GPA {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">get</span> {
</span></span><span style="display:flex;"><span>      <span style="color:#66d9ef">return</span> creditPoints / creditHours;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">/// Adds a final grade for a course to the</span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">// student&#39;s GPA.</span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">/// &lt;param name=&#34;grade&#34;&gt;The student&#39;s final letter grade in the course&lt;/param&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">/// &lt;param name=&#34;hours&#34;&gt;The course&#39;s credit hours&lt;/param&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> AddCourseGrade(Grade grade, <span style="color:#66d9ef">uint</span> hours) {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">this</span>.creditHours += hours;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">switch</span>(grade) {
</span></span><span style="display:flex;"><span>      <span style="color:#66d9ef">case</span> Grade.A:
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">this</span>.creditPoints += <span style="color:#ae81ff">4.0</span> * hours;
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">break</span>;
</span></span><span style="display:flex;"><span>      <span style="color:#66d9ef">case</span> Grade.B:
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">this</span>.creditPoints += <span style="color:#ae81ff">3.0</span> * hours;
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">break</span>;
</span></span><span style="display:flex;"><span>      <span style="color:#66d9ef">case</span> Grade.C:
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">this</span>.creditPoints += <span style="color:#ae81ff">2.0</span> * hours;
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">break</span>;
</span></span><span style="display:flex;"><span>      <span style="color:#66d9ef">case</span> Grade.D:
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">this</span>.creditPoints += <span style="color:#ae81ff">1.0</span> * hours;
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">break</span>;
</span></span><span style="display:flex;"><span>      <span style="color:#66d9ef">case</span> Grade.F:
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">this</span>.creditPoints += <span style="color:#ae81ff">0.0</span> * hours;
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">break</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>If we want to create a new student, we would create an instance of the class <strong>Student</strong> which is an object of <em>type</em> <strong>Student</strong>:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>Student willie = <span style="color:#66d9ef">new</span> Student(<span style="color:#e6db74">&#34;Willie&#34;</span>, <span style="color:#e6db74">&#34;Wildcat&#34;</span>);</span></span></code></pre></div><p>Hence, the <em>type</em> of an object is <em>the class it is an instance of</em>.  This is a staple across all object-oriented languages.</p>
<h2 id="static-vs-dynamic-typed-languages">Static vs. Dynamic Typed Languages</h2>
<p>A final note on types.  You may hear languages being referred to as <em>statically</em> or <em>dynamically</em> typed.  A <em>statically</em> typed language is one where the type is set by the code itself, either <em>explicitly</em>:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">int</span> foo = <span style="color:#ae81ff">5</span>;</span></span></code></pre></div><p>or <em>implicitly</em> (where the complier determines the type based on the assigned value):</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">var</span> bar = <span style="color:#ae81ff">6</span>;</span></span></code></pre></div><p>In a statically typed language, a variable <em>cannot</em> be assigned a value of a different type, i.e.:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>foo = <span style="color:#ae81ff">8.3</span>;</span></span></code></pre></div><p>Will fail with an error, as a float is a different type than an int.  Similarly, because <em>bar</em> has an implied type of int, this code will fail:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>bar = <span style="color:#ae81ff">4.3</span>;</span></span></code></pre></div><p>However, we can <em>cast</em> the value to a new type (changing how it is represented), i.e.:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>foo = (<span style="color:#66d9ef">int</span>)<span style="color:#ae81ff">8.9</span>;</span></span></code></pre></div><p>For this to work, the language must know how to perform the cast. The cast may also lose some information - in the above example, the resulting value of <strong>foo</strong> is <em>8</em> (the fractional part is discarded).</p>
<p>In contrast, in a <em>dynamically</em> typed language the type of the variable changes when a value of a different type is assigned to it.  For example, in JavaScript, this expression is legal:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">a</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">5</span>;
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">a</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;foo&#34;</span>;</span></span></code></pre></div><p>and the type of <strong>a</strong> changes from int (at the first assignment) to string (at the second assignment).</p>
<p>C#, Java, C, C++, and Kotlin are all <em>statically typed languages</em>, while Python, JavaScript, and Ruby are <em>dynamically typed languages</em>.</p>

            <footer class="footline">

            </footer>
          </article>

    
    
          <article class="default">
            <header class="headline">
            </header>
<h1 id="interfaces">Interfaces</h1>

<p>If we think back to the concept of <em>message passing</em> in object-oriented languages, it can be useful to think of the collection of public methods available in a class as an <em>interface</em>, i.e., a list of messages you can dispatch to an object created from that class.  When you were first learning a language (and probably even now), you find yourself referring to these kinds of lists, either in the language documentation, or via Intellisense in Visual Studio.</p>
<p>
<a href="#image-3de1ce5de74adb54500e9f1713f40f51" class="lightbox-link">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/2.1.3.1.png" alt="The Java API" style="height: auto; width: auto;" loading="lazy">
</a>
<a href="javascript:history.back();" class="lightbox" id="image-3de1ce5de74adb54500e9f1713f40f51">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/2.1.3.1.png" alt="The Java API" class="lightbox-image" loading="lazy">
</a></p>
<p>
<a href="#image-78b3cca87574f6624667be9f46478d55" class="lightbox-link">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/2.1.3.2.png" alt="Visual Studio Intellisense" style="height: auto; width: auto;" loading="lazy">
</a>
<a href="javascript:history.back();" class="lightbox" id="image-78b3cca87574f6624667be9f46478d55">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/2.1.3.2.png" alt="Visual Studio Intellisense" class="lightbox-image" loading="lazy">
</a></p>
<p>Essentially, programmers use these &lsquo;interfaces&rsquo; to determine what methods can be invoked on an object.  In other words, which <em>messages</em> can be <em>passed</em> to the object.  This &lsquo;interface&rsquo; (note the lowercase i) is determined by the class definition, specifically what methods it contains.</p>
<p>In dynamically typed programming languages, like Python, JavaScript, and Ruby, if two classes accept the same message, you can treat them interchangeably, i.e. the <code>Kangaroo</code> class and <code>Car</code> class both define a <code>jump()</code> method, you could populate a list with both, and call the <code>jump()</code> method on each:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">jumpables</span> <span style="color:#f92672">=</span> [<span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Kangaroo</span>(), <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Car</span>(), <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Kangaroo</span>()];
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span>(<span style="color:#66d9ef">int</span> <span style="color:#a6e22e">i</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; <span style="color:#a6e22e">i</span> <span style="color:#f92672">&lt;</span> <span style="color:#a6e22e">jumpables</span>.<span style="color:#a6e22e">length</span>; <span style="color:#a6e22e">i</span><span style="color:#f92672">++</span>) {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">jumpables</span>[<span style="color:#a6e22e">i</span>].<span style="color:#a6e22e">jump</span>();
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>This is sometimes called <a href="https://en.wikipedia.org/wiki/Duck_typing" target="_blank">duck typing</a>
, from the sense that &ldquo;if it walks like a duck, and quacks like a duck, it might as well be a duck.&rdquo;</p>
<p>However, for statically typed languages we must explicitly indicate that two types both possess the same message definition, by making the interface <em>explicit</em>.  We do this by declaring an <code>Interface</code>.  I.e., the Interface for classes that possess a parameter-less jump method might be:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// An interface indicating an object&#39;s ability to jump</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> Interface IJumpable {
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// A method that causes the object to jump</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">void</span> Jump();
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>In C#, it is common practice to preface Interface names with the character <code>I</code>. The <code>Interface</code> declaration defines an &lsquo;interface&rsquo; - the shape of the messages that can be passed to an object implementing the interface - in the form of a method signature.  Note that this signature <em>does not include a body</em>, but instead ends in a semicolon (<code>;</code>).  An interface simply indicates the message to be sent, <em>not the behavior it will cause!</em>  We can specify as many methods in an <code>Interface</code> declaration as we want.</p>
<p>Also note that the method signatures in an <code>Interface</code> declaration <em>do not have access modifiers</em>.  This is because the whole purpose of defining an interface is to signify methods <em>that can be used by other code</em>.  In other words, <code>public</code> access is implied by including the method signature in the <code>Interface</code> declaration.</p>
<p>This <code>Interface</code> can then be implemented by other classes by listing it after the class name, after a colon <code>:</code>.  Any <code>Class</code> declaration implementing the interface <em>must define public methods whose signatures match those were specified by the interface</em>:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#75715e">/// &lt;summary&gt;A class representing a kangaroo&lt;/summary&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Kangaroo</span> <span style="color:#f92672">:</span> <span style="color:#a6e22e">IJumpable</span> 
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt;Causes the Kangaroo to jump into the air&lt;/summary&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">Jump</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// TODO: Implement jumping...
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;summary&gt;A class representing an automobile&lt;/summary&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Car</span> <span style="color:#f92672">:</span> <span style="color:#a6e22e">IJumpable</span> 
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt;Helps a stalled car to start by providing electricity from another car&#39;s battery&lt;/summary&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">Jump</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// TODO: Implement jumping a car...
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt;Starts the car&lt;/summary&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">Start</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// TODO: Implement starting a car...
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    }
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>We can then treat these two disparate classes as though they shared the same type, defined by the <code>IJumpable</code> interface:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>List&lt;IJumpable&gt; jumpables = <span style="color:#66d9ef">new</span> List&lt;IJumpable&gt;() {<span style="color:#66d9ef">new</span> Kangaroo(), <span style="color:#66d9ef">new</span> Car(), <span style="color:#66d9ef">new</span> Kangaroo()};
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span>(<span style="color:#66d9ef">int</span> i = <span style="color:#ae81ff">0</span>; i &lt; jumpables.Count; i++)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    jumpables[i].Jump();
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>Note that while we are treating the Kangaroo and Car instances <em>as</em> <code>IJumpable</code> instances, we can <em>only</em> invoke the methods defined in the <code>IJumpable</code> interface, even if these objects have other methods. Essentially, the interface represents a new <em>type</em> that can be shared amongst disparate objects in a statically-typed language. The Interface definition serves to assure the static type checker that the objects implementing it can be treated as this new type - i.e. the <code>Interface</code> provides a mechanism for implementing polymorphism.</p>
<p>We often describe the relationship between the interface and the class that implements it as a <em>is-a</em> relationship, i.e. a Kangaroo <em>is an</em> IJumpable (i.e. a Kangaroo is a thing that can jump).  We further distinguish this from a related polymorphic mechanism, inheritance, by the strength of the relationship.  We consider the relationship between interfaces and classes implementing them to be <strong>weak is-a</strong> connections.  For example, other than the shared interface, a Kangaroo and a Car don&rsquo;t have much to do with one another.</p>
<p>A C# class can implement as many interfaces as we want, they just need to be separated by commas, i.e.:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Frog</span> : IJumpable, ICroakable, ICatchFlies
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// TODO: Implement frog class...</span>
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div>
            <footer class="footline">

            </footer>
          </article>

    
    
          <article class="default">
            <header class="headline">
            </header>
<h1 id="object-inheritance">Object Inheritance</h1>

<p>In an object-oriented language, inheritance is a mechanism for deriving part of a class definition from another existing class definition.  This allows the programmer to &ldquo;share&rdquo; code between classes, reducing the amount of code that must be written.</p>
<p>Consider a <strong>Student</strong> class:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// A class representing a student</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Student</span> {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">// private backing variables</span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">double</span> hours;
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">double</span> points;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">/// Gets the students&#39; GPA</span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">double</span> GPA {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">get</span> {
</span></span><span style="display:flex;"><span>      <span style="color:#66d9ef">return</span> points / hours;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">/// Gets or sets the first name</span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">string</span> First { <span style="color:#66d9ef">get</span>; <span style="color:#66d9ef">set</span>; }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">/// Gets or sets the last name</span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">string</span> Last { <span style="color:#66d9ef">get</span>; <span style="color:#66d9ef">set</span>; }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">/// Constructs a new instance of Student</span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">/// &lt;param name=&#34;first&#34;&gt;The student&#39;s first name &lt;/param&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">/// &lt;param name=&#34;last&#34;&gt;The student&#39;s last name&lt;/param&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">public</span> Student(<span style="color:#66d9ef">string</span> first, <span style="color:#66d9ef">string</span> last) {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">this</span>.First = first;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">this</span>.Last = last;
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">/// Adds a new course grade to the student&#39;s record.</span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">/// &lt;param name=&#34;creditHours&#34;&gt;The number of credit hours in the course &lt;/param&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">/// &lt;param name=&#34;finalGrade&#34;&gt;The final grade earned in the course&lt;/param&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">///</span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">public</span> AddCourseGrade(<span style="color:#66d9ef">uint</span> creditHours, Grade finalGrade) {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">this</span>.hours += creditHours;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">switch</span>(finalGrade) {
</span></span><span style="display:flex;"><span>      <span style="color:#66d9ef">case</span> Grade.A:
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">this</span>.credits += <span style="color:#ae81ff">4</span> * creditHours;
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">break</span>;
</span></span><span style="display:flex;"><span>      <span style="color:#66d9ef">case</span> Grade.B:
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">this</span>.credits += <span style="color:#ae81ff">3</span> * creditHours;
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">break</span>;
</span></span><span style="display:flex;"><span>      <span style="color:#66d9ef">case</span> Grade.C:
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">this</span>.credits += <span style="color:#ae81ff">2</span> * creditHours;
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">break</span>;
</span></span><span style="display:flex;"><span>      <span style="color:#66d9ef">case</span> Grade.D:
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">this</span>.credits += <span style="color:#ae81ff">1</span> * creditHours;
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">break</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>This would work well for representing a student.  But what if we are representing multiple <em>kinds</em> of students, like undergraduate and graduate students?  We&rsquo;d need separate classes for each, but both would still have names and calculate their GPA the same way.  So it would be handy if we could say &ldquo;an undergraduate is a student, and has all the properties and methods a student has&rdquo; and &ldquo;a graduate student is a student, and has all the properties and methods a student has.&rdquo;  This is exactly what inheritance does for us, and we often describe it as a <em>is a</em> relationship.  We distinguish this from the Interface mechanism we looked at earlier by saying it is a <strong>strong is a</strong> relationship, as an <code>Undergraduate</code> student is, for all purposes, <em>also</em> a <code>Student</code>.</p>
<p>Let&rsquo;s define an undergraduate student class:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// A class representing an undergraduate student</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">UndergraduateStudent</span> : Student {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">/// Constructs a new instance of UndergraduateStudent</span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">/// &lt;param name=&#34;first&#34;&gt;The student&#39;s first name &lt;/param&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">/// &lt;param name=&#34;last&#34;&gt;The student&#39;s last name&lt;/param&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">public</span> UndergraduateStudent(<span style="color:#66d9ef">string</span> first, <span style="color:#66d9ef">string</span> last) : <span style="color:#66d9ef">base</span>(first, last) {
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>In C#, the <code>:</code> indicates inheritance - so <code>public class UndergraduateStudent : Student</code> indicates that <code>UndergraduateStudent</code> inherits from (is a) <code>Student</code>.  Thus, it has properties <code>First</code>, <code>Last</code>, and <code>GPA</code> that are inherited from <code>Student</code>.  Similarly, it inherits the <code>AddCourseGrade()</code> method.</p>
<p>In fact, the only method we need to define in our <code>UndergraduateStudent</code> class is the constructor - and we only need to define this because the base class has a defined constructor taking two parameters, <code>first</code> and <code>last</code> names.  This <code>Student</code> constructor must be invoked by the <code>UndergraduateStudent</code> constructor - that&rsquo;s what the <code>:base(first, last)</code> portion does - it invokes the <code>Student</code> constructor with the <code>first</code> and <code>last</code> parameters passed into the <code>UndergraduateStudent</code> constructor.</p>
<h2 id="inheritance-state-and-behavior">Inheritance, State, and Behavior</h2>
<p>Let&rsquo;s define a <code>GraduateStudent</code> class as well.  This will look much like an <code>UndergraduateStudent</code>, but all graduates have a bachelor&rsquo;s degree:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// A class representing an undergraduate student</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">GraduateStudent</span> : Student {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">/// Gets the student&#39;s bachelor degree</span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">string</span> BachelorDegree {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">get</span>; <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">set</span>;
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">/// Constructs a new instance of UndergraduateStudent</span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">/// &lt;param name=&#34;first&#34;&gt;The student&#39;s first name &lt;/param&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">/// &lt;param name=&#34;last&#34;&gt;The student&#39;s last name&lt;/param&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">/// &lt;param name=&#34;degree&#34;&gt;The student&#39;s bachelor degree&lt;/param&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">public</span> GraduateStudent(<span style="color:#66d9ef">string</span> first, <span style="color:#66d9ef">string</span> last, <span style="color:#66d9ef">string</span> degree) : <span style="color:#66d9ef">base</span>(first, last) {
</span></span><span style="display:flex;"><span>    BachelorDegree = degree;
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>Here we add a property for <code>BachelorDegree</code>.  Since it&rsquo;s setter is marked as <code>private</code>, it can only be written to by the class, as is done in the constructor.  To the outside world, it is treated as read-only.</p>
<p>Thus, the <code>GraduateStudent</code> has all the state and behavior encapsulated in <code>Student</code>, <em>plus</em> the additional state of the bachelor&rsquo;s degree title.</p>
<h2 id="the-protected-keyword">The <code>protected</code> Keyword</h2>
<p>What you might not expect is that any fields declared <code>private</code> in the base class are inaccessible in the derived class.  Thus, the private fields <code>points</code> and <code>hours</code> cannot be used in a method defined in <code>GraduateStudent</code>.  This is again part of the <em>encapsulation</em> and <em>data hiding</em> ideals - we&rsquo;ve encapsulated and hid those variables within the base class, and any code outside that assembly, even in a derived class, is not allowed to mess with it.</p>
<p>However, we often will want to allow access to such variables in a derived class.  C# uses the access modifier <code>protected</code> to allow for this access in derived classes, but not the wider world.</p>
<h2 id="inheritance-and-memory">Inheritance and Memory</h2>
<p>What happens when we construct an instance of <code>GraduateStudent</code>?  First, we invoke the constructor of the <code>GraduateStudent</code> class:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>GraduateStudent bobby = <span style="color:#66d9ef">new</span> GraduateStudent(<span style="color:#e6db74">&#34;Bobby&#34;</span>, <span style="color:#e6db74">&#34;TwoSocks&#34;</span>, <span style="color:#e6db74">&#34;Economics&#34;</span>);</span></span></code></pre></div><p>This constructor then invokes the constructor of the base class, <code>Student</code>, with the arguments <code>&quot;Bobby&quot;</code> and <code>&quot;Twosocks&quot;</code>.  Thus, we allocate space to hold the state of a student, and populate it with the values set by the constructor.  Finally, execution returns to the derived class of <code>GraduateStudent</code>, which allocates the additional memory for the reference to the <code>BachelorDegree</code> property.  Thus, the memory space of the <code>GraduateStudent</code> <em>contains</em> an instance of the <code>Student</code>, somewhat like nesting dolls.</p>
<p>Because of this, we can treat a <code>GraduateStudent</code> object as a <code>Student</code> object.  For example, we can store it in a list of type <code>Student</code>, along with <code>UndergraduateStudent</code> objects:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>List&lt;Student&gt; students = <span style="color:#66d9ef">new</span> List&lt;Student&gt;();
</span></span><span style="display:flex;"><span>students.Add(bobby);
</span></span><span style="display:flex;"><span>students.Add(<span style="color:#66d9ef">new</span> UndergraduateStudent(<span style="color:#e6db74">&#34;Mary&#34;</span>, <span style="color:#e6db74">&#34;Contrary&#34;</span>));</span></span></code></pre></div><p>Because of their relationship through inheritance, both <code>GraduateStudent</code> class instances and <code>UndergraduateStudent</code> class instances are considered to be of type <code>Student</code>, as well as their supertypes.</p>
<h2 id="nested-inheritance">Nested Inheritance</h2>
<p>We can go as deep as we like with inheritance - each base type can be a superclass of another base type, and has all the state and behavior of all the inherited base classes.</p>
<p>This said, having too many levels of inheritance can make it difficult to reason about an object.  In practice, a good guideline is to limit nested inheritance to two or three levels of depth.</p>
<h2 id="abstract-classes">Abstract Classes</h2>
<p>If we have a base class that only exists to inherit from (like our <code>Student</code> class in the example), we can mark it as <em>abstract</em> with the <code>abstract</code> keyword.  An abstract class <em>cannot be instantiated</em> (that is, we cannot create an instance of it using the <code>new</code> keyword).  It can still define fields and methods, but you can&rsquo;t construct it.  If we were to re-write our <code>Student</code> class as an abstract class:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// A class representing a student</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">abstract</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Student</span> {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">// private backing variables</span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">double</span> hours;
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">double</span> points;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">/// Gets the students&#39; GPA</span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">double</span> GPA {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">get</span> {
</span></span><span style="display:flex;"><span>      <span style="color:#66d9ef">return</span> points / hours;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">/// Gets or sets the first name</span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">string</span> First { <span style="color:#66d9ef">get</span>; <span style="color:#66d9ef">set</span>; }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">/// Gets or sets the last name</span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">string</span> Last { <span style="color:#66d9ef">get</span>; <span style="color:#66d9ef">set</span>; }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">/// Constructs a new instance of Student</span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">/// &lt;param name=&#34;first&#34;&gt;The student&#39;s first name &lt;/param&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">/// &lt;param name=&#34;last&#34;&gt;The student&#39;s last name&lt;/param&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">public</span> Student(<span style="color:#66d9ef">string</span> first, <span style="color:#66d9ef">string</span> last) {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">this</span>.First = first;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">this</span>.Last = last;
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">/// Adds a new course grade to the student&#39;s record.</span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">/// &lt;param name=&#34;creditHours&#34;&gt;The number of credit hours in the course &lt;/param&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">/// &lt;param name=&#34;finalGrade&#34;&gt;The final grade earned in the course&lt;/param&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">///</span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">public</span> AddCourseGrade(<span style="color:#66d9ef">uint</span> creditHours, Grade finalGrade) {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">this</span>.hours += creditHours;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">switch</span>(finalGrade) {
</span></span><span style="display:flex;"><span>      <span style="color:#66d9ef">case</span> Grade.A:
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">this</span>.credits += <span style="color:#ae81ff">4</span> * creditHours;
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">break</span>;
</span></span><span style="display:flex;"><span>      <span style="color:#66d9ef">case</span> Grade.B:
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">this</span>.credits += <span style="color:#ae81ff">3</span> * creditHours;
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">break</span>;
</span></span><span style="display:flex;"><span>      <span style="color:#66d9ef">case</span> Grade.C:
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">this</span>.credits += <span style="color:#ae81ff">2</span> * creditHours;
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">break</span>;
</span></span><span style="display:flex;"><span>      <span style="color:#66d9ef">case</span> Grade.D:
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">this</span>.credits += <span style="color:#ae81ff">1</span> * creditHours;
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">break</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>Now with <code>Student</code> as an abstract class, attempting to create a <code>Student</code> instance i.e. <code>Student mark = new Student(&quot;Mark&quot;, &quot;Guy&quot;)</code> would fail with an exception.  However, we can still create instances of the derived classes <code>GraduateStudent</code> and <code>UndergraduateStudent</code>, and treat them as <code>Student</code> instances.  It is best practice to make any class that serves only as a base class for derived classes and will never be created directly abstract.</p>
<h2 id="sealed-classes">Sealed Classes</h2>
<p>Conversely, C# also offers the <code>sealed</code> keyword, which can be used to indicate that a class should <em>not</em> be inheritable.  For example:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// A class that cannot be inherited from</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">sealed</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">DoNotDerive</span> {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>Derived classes can <em>also</em> be sealed.  I.e., we could seal our <code>UndergraduateStudent</code> class to prevent further derivation:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// A sealed version  of the class representing an undergraduate student</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">sealed</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">UndergraduateStudent</span> : Student {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">/// Constructs a new instance of UndergraduateStudent</span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">/// &lt;param name=&#34;first&#34;&gt;The student&#39;s first name &lt;/param&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">/// &lt;param name=&#34;last&#34;&gt;The student&#39;s last name&lt;/param&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">public</span> UndergraduateStudent(<span style="color:#66d9ef">string</span> first, <span style="color:#66d9ef">string</span> last) : <span style="color:#66d9ef">base</span>(first, last) {
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>Many of the library classes provided with the C# installation are sealed.  This helps prevent developers from making changes to well-known classes that would make their code harder to maintain.  It is good practice to seal classes that you expect will never be inherited from.</p>
<h2 id="interfaces-and-inheritance">Interfaces and Inheritance</h2>
<p>A class can use both inheritance and interfaces.  In C#, a class can only inherit <em>one</em> base class, and it should always be the first after the colon (<code>:</code>).  Following that we can have as many interfaces as we want, all separated from each other and the base class by commas (<code>,</code>):</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">UndergraduateStudent</span> : Student, ITeachable, IEmailable 
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">// TODO: Implement student class </span>
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div>
            <footer class="footline">

            </footer>
          </article>

    
    
          <article class="default">
            <header class="headline">
            </header>
<h1 id="casting">Casting</h1>

<p>You have probably used casting to convert numeric values from one type to another, i.e.:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">int</span> a = <span style="color:#ae81ff">5</span>;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">double</span> b = a;</span></span></code></pre></div><p>And</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">int</span> c = (<span style="color:#66d9ef">int</span>)b;</span></span></code></pre></div><p>What you are actually doing when you cast is <em>transforming a value from one type to another</em>.  In the first case, you are taking the value of <code>a</code> (5), and converting it to the equivalent double (5.0).  If you consider the internal representation of an integer (a 2&rsquo;s complement binary number) to a double (an <a href="https://en.wikipedia.org/wiki/IEEE_754" target="_blank">IEEE 754 standard</a>
 representation), we are actually applying a conversion algorithm to the binary representations.</p>
<p>We call the first operation an <em>implicit cast</em>, as we don&rsquo;t expressly tell the compiler to perform the cast. In contrast, the second assignment is an <em>explicit cast</em>, as we signify the cast by wrapping the <em>type</em> we are casting to in parenthesis before the variable we are casting.  We <em>have</em> to perform an explicit cast in the second case, as the conversion has the possibility of losing some precision (i.e. if we cast 7.2 to an integer, it would be truncated to 7).  In any case where the conversion may lose precision or possibly throw an error, an <em>explicit</em> cast is required.</p>
<h2 id="custom-casting-conversions">Custom Casting Conversions</h2>
<p>We can actually <a href="https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/operators/user-defined-conversion-operators" target="_blank">extend the C# language to add additional conversions</a>
 to provide additional casting operations.  Consider if we had <code>Rectangle</code> and <code>Square</code> structs:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#75715e">/// &lt;summary&gt;A struct representing a rectangle&lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">struct</span> <span style="color:#a6e22e">Rectangle</span> {
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt;The length of the short side of the rectangle&lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">int</span> ShortSideLength;
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt;The length of the long side of the rectangle&lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">int</span> LongSideLength;
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt;Constructs a new rectangle&lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;param name=&#34;shortSideLength&#34;&gt;The length of the shorter sides of the rectangle&lt;/param&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;param name=&#34;longSideLength&#34;&gt;The length of the longer sides of the rectangle&lt;/param&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> Rectangle(<span style="color:#66d9ef">int</span> shortSideLength, <span style="color:#66d9ef">int</span> longSideLength){
</span></span><span style="display:flex;"><span>        ShortSideLength = shortSideLength;
</span></span><span style="display:flex;"><span>        LongSideLength = longSideLength;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;summary&gt;A struct representing a square&lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">struct</span> <span style="color:#a6e22e">Square</span> {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt; The length of the square&#39;s sides&lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">int</span> SideLength;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt;Constructs a new square&lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;param name=&#34;sideLength&#34;&gt;The length of the square&#39;s sides&lt;/param&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> Square(<span style="color:#66d9ef">int</span> sideLength){
</span></span><span style="display:flex;"><span>        SideLength = sideLength;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>Since we know that a square is a special case of a rectangle (where all sides are the same length), we might define an implicit casting operator to convert it into a <code>Rectangle</code> (this would be placed inside the <code>Square</code> struct definition):</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt;Casts the &lt;paramref name=&#34;square&#34;/&gt; into a Rectangle&lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;param name=&#34;square&#34;&gt;The square to cast&lt;/param&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">implicit</span> <span style="color:#66d9ef">operator</span> Rectangle(Square square) 
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">new</span> Rectangle(square.SideLength, square.SideLength);
</span></span><span style="display:flex;"><span>    }</span></span></code></pre></div><p>Similarly, we might create a cast operator to convert a rectangle to a square.  But as this can <em>only</em> happen when the sides of the rectangle are all the same size, it would need to be an <em>explicit</em> cast operator , and throw an exception when that condition is not met (this method is placed in the <code>Rectangle</code> struct definition):</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt;Casts the &lt;paramref name=&#34;rectangle&#34;/&gt; into a Square&lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;param name=&#34;rectangle&#34;&gt;The rectangle to cast&lt;/param&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;exception cref=&#34;System.InvalidCastOperation&#34;&gt;The rectangle sides must be equal to cast to a square&lt;/exception&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">explicit</span> <span style="color:#66d9ef">operator</span> Square(Rectangle rectangle){
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span>(rectangle.LongSideLength != rectangle.ShortSideLength) <span style="color:#66d9ef">throw</span> <span style="color:#66d9ef">new</span> InvalidCastException(<span style="color:#e6db74">&#34;The sides of a square must be of equal lengths&#34;</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">new</span> Square(rectangle.LongSideLength);
</span></span><span style="display:flex;"><span>    }</span></span></code></pre></div><h2 id="casting-and-inheritance">Casting and Inheritance</h2>
<p>Casting becomes a bit more involved when we consider inheritance.  As you saw in the previous discussion of inheritance, we can treat derived classes <em>as the base class</em>, i.e. the code:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>Student sam = <span style="color:#66d9ef">new</span> UndergraduateStudent(<span style="color:#e6db74">&#34;Sam&#34;</span>, <span style="color:#e6db74">&#34;Malone&#34;</span>);</span></span></code></pre></div><p>Is actually <em>implicitly casting</em> the undergraduate student &ldquo;Sam Malone&rdquo; into a student class.  Because an <code>UndergraduateStudent</code> is a <code>Student</code>, this cast can be <em>implicit</em>.  Moreover, we don&rsquo;t need to define a casting operator - we can always implicitly cast a class to one of its ancestor classes, it&rsquo;s built into the inheritance mechanism of C#.</p>
<p>Going the other way requires an <em>explicit cast</em> as there is a chance that the <code>Student</code> we are casting <em>isn&rsquo;t</em> an undergraduate, i.e.:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>UndergraduateStudent u = (UndergraduateStudent)sam;</span></span></code></pre></div><p>If we tried to cast <code>sam</code> into a graduate student:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>GraduateStudent g = (GraduateStudent)sam;</span></span></code></pre></div><p>The program would throw an <code>InvalidCastException</code> when run.</p>
<h2 id="casting-and-interfaces">Casting and Interfaces</h2>
<p>Casting interacts similarly with interfaces.  A class can be implicitly cast to an interface it implements:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>IJumpable roo = <span style="color:#66d9ef">new</span> Kangaroo();</span></span></code></pre></div><p>But must be <em>explicitly</em> cast to convert it back into the class that implemented it:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>Kangaroo k = (Kangaroo)roo;</span></span></code></pre></div><p>And if that cast is illegal, we&rsquo;ll throw an <code>InvalidCastException</code>:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>Car c = (Car)roo;</span></span></code></pre></div><h2 id="the-as-operator">The <code>as</code> Operator</h2>
<p>When we are casting reference and nullable types, we have an additional casting option - the <code>as</code> casting operator.</p>
<p>The <code>as</code> operator performs the cast, or evaluates to <code>null</code> if the cast fails (instead of throwing an <code>InvalidCastException</code>), i.e.:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>UndergraduateStudent u = sam <span style="color:#66d9ef">as</span> UndergraduateStudent; <span style="color:#75715e">// evaluates to an UndergraduateStudent </span>
</span></span><span style="display:flex;"><span>GraduateStudent g = sam <span style="color:#66d9ef">as</span> GraduateStudent; <span style="color:#75715e">// evaluates to null</span>
</span></span><span style="display:flex;"><span>Kangaroo k = roo <span style="color:#66d9ef">as</span> Kangaroo; <span style="color:#75715e">// evaluates to a Kangaroo </span>
</span></span><span style="display:flex;"><span>Car c = roo <span style="color:#66d9ef">as</span> Kangaroo; <span style="color:#75715e">// evaluates to null</span></span></span></code></pre></div><h2 id="the-is-operator">The <code>is</code> Operator</h2>
<p>Rather than performing a cast and catching the exception (or performing a null check when using the <code>as</code> operator), it is often useful to know if a cast is possible.  This can be checked for with the <code>is</code> operator.  It evaluates to a boolean, <code>true</code> if the cast is possible, <code>false</code> if not:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>sam <span style="color:#66d9ef">is</span> UndergraduateStudent; <span style="color:#75715e">// evaluates to true</span>
</span></span><span style="display:flex;"><span>sam <span style="color:#66d9ef">is</span> GraduateStudent; <span style="color:#75715e">// evaluates to false</span>
</span></span><span style="display:flex;"><span>roo <span style="color:#66d9ef">is</span> Kangaroo; <span style="color:#75715e">// evaluates to true</span>
</span></span><span style="display:flex;"><span>roo <span style="color:#66d9ef">is</span> Car; <span style="color:#75715e">// evaluates to false</span></span></span></code></pre></div>
  
  
<div class="box notices cstyle warning">
  <div class="box-label"><i class="fa-fw fas fa-exclamation-triangle"></i> Warning</div>
  <div class="box-content">

<p>The <code>is</code> operator does not work with user-defined casting operators, i.e. when used with the Rectangle/Square cast we defined above:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>Square s = <span style="color:#66d9ef">new</span> Square(<span style="color:#ae81ff">10</span>);
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">bool</span> test = s <span style="color:#66d9ef">is</span> Rectangle;</span></span></code></pre></div><p>The value of <code>test</code> will be <code>false</code>, even though we have a user-defined implicit cast that works.</p>
</div>
</div>
<p>The <code>is</code> operator is commonly used to determine if a cast will succeed before performing it, i.e.:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">if</span>(sam <span style="color:#66d9ef">is</span> UndergraduateStudent) 
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    Undergraduate samAsUGrad = sam <span style="color:#66d9ef">as</span> UndergraduateStudent;
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// TODO: Do something undergraduat-ey with samAsUGrad</span>
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>This pattern was so commonly employed, it led to the addition of the <a href="https://docs.microsoft.com/en-us/dotnet/csharp/pattern-matching#the-is-type-pattern-expression" target="_blank">is type pattern matching expression</a>
 in C# version 7.0:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">if</span>(sam <span style="color:#66d9ef">is</span> UndergraduateStudent samAsUGrad) 
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// TODO: Do something undergraduate-y with samAsUGrad</span>
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>If the cast is possible, it is performed and the result assigned to the provided variable name (in this case, <code>samAsUGrad</code>).  This is another example of <a href="https://en.wikipedia.org/wiki/Syntactic_sugar" target="_blank">syntactic sugar</a>
.</p>

            <footer class="footline">

            </footer>
          </article>

    
    
          <article class="default">
            <header class="headline">
            </header>
<h1 id="message-dispatching">Message Dispatching</h1>

<p>The term <em>dispatch</em> refers to how a language decides which polymorphic operation (a method or function) a message should trigger.</p>
<p>Consider polymorphic functions in C# (aka <em>Method Overloading</em>, where multiple methods use the same name but have different parameters) like this one for calculating the rounded sum of an array of numbers:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">int</span> RoundedSum(<span style="color:#66d9ef">int</span>[] a) {
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">int</span> sum = <span style="color:#ae81ff">0</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">foreach</span>(<span style="color:#66d9ef">int</span> i <span style="color:#66d9ef">in</span> a) {
</span></span><span style="display:flex;"><span>    sum += i;
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">return</span> sum;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">int</span> RoundedSum(<span style="color:#66d9ef">float</span>[] a) {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">double</span> sum = <span style="color:#ae81ff">0</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">foreach</span>(<span style="color:#66d9ef">int</span> i <span style="color:#66d9ef">in</span> a) {
</span></span><span style="display:flex;"><span>        sum += i;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> (<span style="color:#66d9ef">int</span>)Math.Round(sum);
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>How does the interpreter know which version to invoke at runtime?  It should not be a surprise that it is determined by the arguments - if an integer array is passed, the first is invoked, if a float array is passed, the second.</p>
<h2 id="object-oriented-polymorphism">Object-Oriented Polymorphism</h2>
<p>However, inheritance can cause some challenges in selecting the appropriate polymorphic form.  Consider the following fruit implementations that feature a <strong>Blend()</strong> method:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// A base class representing fruit</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Fruit</span>
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// Blends the fruit</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;returns&gt;The result of blending&lt;/returns&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">string</span> Blend() {
</span></span><span style="display:flex;"><span>      <span style="color:#66d9ef">return</span> <span style="color:#e6db74">&#34;A pulpy mess, I guess&#34;</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// A class representing a banana</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Banana</span> : Fruit
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// Blends the banana</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;returns&gt;The result of blending the banana&lt;/returns&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">string</span> Blend()
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#e6db74">&#34;yellow mush&#34;</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// A class representing a Strawberry</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Strawberry</span> : Fruit
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// Blends the strawberry</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;returns&gt;The result of blending a strawberry&lt;/returns&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">string</span> Blend()
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#e6db74">&#34;Gooey Red Sweetness&#34;</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>Let&rsquo;s add fruit instances to a list, and invoke their <code>Blend()</code> methods:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>List&lt;Fruit&gt; toBlend = List&lt;Fruit&gt;();
</span></span><span style="display:flex;"><span>toBlend.Add(<span style="color:#66d9ef">new</span> Banana());
</span></span><span style="display:flex;"><span>toBlend.Add(<span style="color:#66d9ef">new</span> Strawberry());
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">foreach</span>(Fruit item <span style="color:#66d9ef">in</span> toBlend) {
</span></span><span style="display:flex;"><span>  Console.WriteLine(item.Blend());
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>You might expect this code to produce the lines:</p>
<div class="wrap-code highlight"><pre tabindex="0"><code>yellow mush
Gooey Red Sweetness</code></pre></div><p>As these are the return values for the <code>Blend()</code> methods for the <code>Banana</code> and <code>Strawberry</code> classes, respectively.  However, we will get:</p>
<div class="wrap-code highlight"><pre tabindex="0"><code>A pulpy mess, I guess?
A pulpy mess, I guess?</code></pre></div><p>Which is the return values for the <code>Fruit</code> base class <code>Blend()</code> implementation.  The line <code>forEach(Fruit item in toBlend)</code> explicitly tells the interpreter to treat the <code>item</code> as a <code>Fruit</code> instance, so of the two available methods (the base or super class implementation), the <code>Fruit</code> base class one is selected.</p>
<p>C# 4.0 introduced a new keyword, <a href="https://docs.microsoft.com/en-us/dotnet/csharp/programming-guide/types/using-type-dynamic" target="_blank">dynamic</a>
 to allow variables like <code>item</code> to be dynamically typed at runtime.  Hence, changing the loop to this:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>forEach(<span style="color:#66d9ef">dynamic</span> item <span style="color:#66d9ef">in</span> toBlend) {
</span></span><span style="display:flex;"><span>  Console.WriteLine(item.Blend());
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>Will give us the first set of results we discussed.</p>
<h2 id="method-overriding">Method Overriding</h2>
<p>Of course, part of the issue in the above example is that we actually have <em>two</em> implementations for <code>Blend()</code> available to each fruit.  If we wanted all bananas to use the <code>Banana</code> class&rsquo;s <code>Blend()</code> method, even when the banana was being treated as a <code>Fruit</code>, we need to <em>override</em> the base method instead of creating a new one that hides it (in fact, in Visual Studio we should get a warning that our new method hides the base implementation, and be prompted to add the <code>new</code> keyword if that was our intent).</p>
<p>To override a base class method, we first must mark it as <code>abstract</code> or <code>virtual</code>.  The first keyword, <code>abstract</code>, indicates that the method <em>does not have an implementation</em> (a body).  The second, <code>virtual</code>, indicates that the base class <em>does</em> provide an implementation.  We should use <code>abstract</code> when each derived class will define its own implementation, and <code>virtual</code> when some derived classes will want to use a common base implementation.  Then, we must mark the method in the derived class with the <code>override</code> key word.</p>
<p>Considering our <code>Fruit</code> class, since we&rsquo;re providing a unique implementation of <code>Blend()</code> in each derived class, the <code>abstract</code> keyword is more appropriate:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// A base class representing fruit</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">abstract</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Fruit</span> : IBlendable
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// Blends the fruit</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;returns&gt;The result of blending&lt;/returns&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">abstract</span> <span style="color:#66d9ef">string</span> Blend();
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>As you can see above, the <code>Blend()</code> method does not have a body, only the method signature.</p>
<p>Also, note that if we use an abstract method in a class, the class itself must <em>also</em> be declared abstract.  The reason should be clear - an abstract method cannot be called, so we should not create an object that only has the abstract method.  The virtual keyword can be used in both abstract and regular classes.</p>
<p>Now we can override the <code>Blend()</code> method in Banana class:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// A class representing a banana</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Banana</span> : Fruit
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// Blends the banana</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;returns&gt;The result of blending the banana&lt;/returns&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">override</span> <span style="color:#66d9ef">string</span> Blend()
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#e6db74">&#34;yellow mush&#34;</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>Now, even if we go back to our non-dynamic loop that treats our fruit as <code>Fruit</code> instances, we&rsquo;ll get the result of the <code>Banana</code> class&rsquo;s <code>Blend()</code> method.</p>
<p>We can override any method marked <code>abstract</code>, <code>virtual</code>, or <code>override</code> (this last will only occur in a derived class whose base class is also derived, as it is overriding an already-overridden method).</p>
<h2 id="sealed-methods">Sealed Methods</h2>
<p>We can also apply the <code>sealed</code> keyword to overridden methods, which prevents them from being overridden further.  Let&rsquo;s apply this to the Strawberry class:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// A class representing a Strawberry</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Strawberry</span> : Fruit
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// Blends the strawberry</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;returns&gt;The result of blending a strawberry&lt;/returns&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">sealed</span> <span style="color:#66d9ef">override</span> <span style="color:#66d9ef">string</span> Blend()
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#e6db74">&#34;Gooey Red Sweetness&#34;</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>Now, any class inheriting from Strawberry will not be allowed to override the Blend() method.</p>

            <footer class="footline">

            </footer>
          </article>

    
    
          <article class="default">
            <header class="headline">
            </header>
<h1 id="c-collections">C# Collections</h1>

<p>Collections in C# are a great example of polymorphism in action.  Many collections utilize https://ksu-cs-textbooks.github.io/cis400/1-object-orientation/06-advanced-csharp/05-generics/ to allow the collection to hold an arbitrary type.  For example, the <code>List&lt;T&gt;</code> can be used to hold strings, integers, or even specific objects:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>List&lt;<span style="color:#66d9ef">string</span>&gt; strings = <span style="color:#66d9ef">new</span> List&lt;<span style="color:#66d9ef">string</span>&gt;();
</span></span><span style="display:flex;"><span>List&lt;<span style="color:#66d9ef">int</span>&gt; ints = <span style="color:#66d9ef">new</span> List&lt;<span style="color:#66d9ef">int</span>&gt;();
</span></span><span style="display:flex;"><span>List&lt;Person&gt; persons = <span style="color:#66d9ef">new</span> List&lt;Person&gt;();</span></span></code></pre></div><p>We can also use an interface as the type, as we did with the <code>IJumpable</code> interface as we discussed in the https://ksu-cs-textbooks.github.io/cis400/1-object-orientation/06-advanced-csharp/05-generics/, i.e.:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>List&lt;IJumpable&gt; jumpables = <span style="color:#66d9ef">new</span> List&lt;IJumpable&gt;();
</span></span><span style="display:flex;"><span>jumpables.Add(<span style="color:#66d9ef">new</span> Kangaroo());
</span></span><span style="display:flex;"><span>jumpables.Add(<span style="color:#66d9ef">new</span> Car());
</span></span><span style="display:flex;"><span>jumpables.Add(<span style="color:#66d9ef">new</span> Kangaroo());</span></span></code></pre></div><h2 id="collection-interfaces">Collection Interfaces</h2>
<p>The C# language and system libraries also define a number of interfaces that apply to custom collections. Implementing these interfaces allows different kinds of data structures to be utilized in a standardized way.</p>
<h3 id="the-ienumerablelttgt-interface">The IEnumerable&lt;T&gt; Interface</h3>
<p>The first of these is the <code>IEnumerable&lt;T&gt;</code> interface, which requires the collection to implement one method:</p>
<ul>
<li><code>public IEnumerator&lt;T&gt; GetEnumerator()</code></li>
</ul>
<p>Implementing this interface allows the collection to be used in a <code>foreach</code> loop.</p>
<h3 id="the-icollectionlttgt-interface">The ICollection&lt;T&gt; Interface</h3>
<p>C# Collections also typically implement the <code>ICollection&lt;T&gt;</code> interface, which <em>extends</em> the <code>IEnumerable&lt;T&gt;</code> interface and adds additional methods:</p>
<ul>
<li><code>public void Add&lt;T&gt;(T item)</code> adds <code>item</code> to the collection</li>
<li><code>public void Clear()</code> empties the collection</li>
<li><code>public bool Contains(T item)</code> returns <code>true</code> if <code>item</code> is in the collection, <code>false</code> if not.</li>
<li><code>public void CopyTo(T[] array, int arrayIndex)</code> copies the collection contents into <code>array</code>, starting at <code>arrayIndex</code>.</li>
<li><code>public bool Remove(T item)</code> removes <code>item</code> from the collection, returning <code>true</code> if item was removed, <code>false</code> otherwise</li>
</ul>
<p>Additionally, the collection must implement the following properties:</p>
<ul>
<li><code>int Count</code> the number of items in the collection</li>
<li><code>bool IsReadOnly</code> the collection is read-only (can&rsquo;t be added to or removed from)</li>
</ul>
<h3 id="the-ilistlttgt-interface">The IList&lt;T&gt; Interface</h3>
<p>Finally, collections that have an implied order and are intended to be accessed by a specific index should probably implement the <code>IList&lt;T&gt;</code> interface, which extends <code>ICollection&lt;T&gt;</code> and <code>IEnumerable&lt;T&gt;</code>. This interface adds these additional methods:</p>
<ul>
<li><code>public int IndexOf(T item)</code> returns the index of <code>item</code> in the list, or -1 if not found</li>
<li><code>public void Insert(int index, T item)</code> Inserts <code>item</code> into the list at position <code>index</code></li>
<li><code>public void RemoveAt(int index)</code> Removes the item from the list at position <code>index</code></li>
</ul>
<p>The interface also adds the property:</p>
<ul>
<li><code>Item[int index]</code> which gets or sets the item at <code>index</code>.</li>
</ul>
<h2 id="collection-implementation-strategies">Collection Implementation Strategies</h2>
<p>When writing a C# collection, there are three general strategies you can follow to ensure you implement the corresponding interfaces:</p>
<ol>
<li>Write the entire class by scratch</li>
<li>Implement the interface methods as a <em>pass-through</em> to a system library collection</li>
<li>Inherit from a system library collection</li>
</ol>
<p>Writing collections from scratch was the strategy you utilized in CIS 300 - Data Structures and Algorithms.  While this strategy gives you the most control, it is also the most time-consuming.</p>
<p>The pass-through strategy involves creating a system library collection, such as a <code>List&lt;T&gt;</code>, as a private field in your collection class.  Then, when you implement the necessary interface methods, you simply <em>pass through</em> the call to the private collection. I.e.:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">PassThroughList</span>&lt;T&gt; : IList&lt;T&gt;
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">private</span> List&lt;T&gt; _list = <span style="color:#66d9ef">new</span> List&lt;T&gt;;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">public</span> IEnumerator&lt;T&gt; GetEnumerator() 
</span></span><span style="display:flex;"><span>  {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> _list.GetEnumerator();
</span></span><span style="display:flex;"><span>  } 
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">// TODO: Implement remaining methods and properties...</span>
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>Using this approach, you can add whatever additional logic your collection needs into your pass-through methods without needing to re-implement the basic collection functionality.</p>
<p>Using inheritance gives your derived class all of the methods of the base class, so if you extend a class that already implements the collection interfaces, you&rsquo;ve already got all the methods!</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">InheritedList</span>&lt;T&gt; : List&lt;T&gt;
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">// All IList&lt;T&gt;, ICollection&lt;T&gt;, and IEnumerable&lt;T&gt; methods </span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">// from List&lt;T&gt; are already defined on InheritedList&lt;T&gt;</span>
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>However, most system collection class methods are not declared as <code>virtual</code>, so you cannot override them to add custom functionality.</p>

            <footer class="footline">

            </footer>
          </article>

    
    
          <article class="default">
            <header class="headline">
            </header>
<h1 id="summary">Summary</h1>

<p>In this chapter, we explored the concept of types and discussed how variables are specific types that can be explicitly or implicitly declared.  We saw how in a statically-typed language (like C#), variables are not allowed to change types (though they can do so in a dynamically-typed language).  We also discussed how casting can convert a value stored in a variable into a different type.  Implicit casts can happen automatically, but explicit casts must be indicated by the programmer using a cast operator, as the cast could result in loss of precision or the throwing of an exception.</p>
<p>We explored how class declarations and interface declarations create new types.  We saw how polymorphic mechanisms like interface implementation and inheritance allow object to be treated as (and cast to) different types.  We also introduced the <code>as</code> and <code>is</code> casting operators, which can be used to cast or test the ability to cast, respectively.  We saw that if the <code>as</code> cast operator fails, it evaluates to null instead of throwing an exception.  We also saw the <code>is</code> type pattern expression, which simplifies a casting test and casting operation into a single expression.</p>
<p>Finally, we looked at how C# collections leverage the use of interfaces, inheritance, and generic types to quickly and easily make custom collection objects that interact with the C# language in well-defined ways.</p>
<p>Finally, we explored how messages are dispatched when polymorphism is involved. We saw that the method invoked depends on what Type we are currently treating the object as.  We saw how the C# modifiers <code>protected</code>, <code>abstract</code>, <code>virtual</code>, <code>override</code>, and <code>sealed</code> interacted with this message dispatch processes.  We also saw how the <code>dynamic</code> type could delay determining an object&rsquo;s type until runtime.</p>

            <footer class="footline">

            </footer>
          </article>

          </section>
    
    
          <article class="chapter">
            <header class="headline">
            </header>


<div class="article-subheading">Chapter 3</div>
<h1 id="documentation">Documentation</h1>

<p>Coding for Humans</p>

            <footer class="footline">

            </footer>
          </article>

          <section>
            <h1 class="a11y-only">Subsections of Documentation</h1>
    
    
          <article class="default">
            <header class="headline">
            </header>
<h1 id="introduction">Introduction</h1>

<p>As part of the strategy for tackling the challenges of the software crisis, good programming practice came to include <em>writing clear documentation</em> to support both the end-users who will utilize your programs, as well as other programmers (and yourself) in understanding what that code is doing so that it is easy to maintain and improve.</p>
<h2 id="key-terms">Key Terms</h2>
<p>Some key terms to learn in this chapter are:</p>
<ul>
<li>User documentation</li>
<li>Developer documentation</li>
<li>Markdown</li>
<li>XML</li>
<li>Autodoc tools</li>
<li>Intellisense</li>
</ul>
<h2 id="key-skills">Key Skills</h2>
<p>The key skill to learn in this chapter is how to use C# XML code comments to document the C# code you write.</p>

            <footer class="footline">

            </footer>
          </article>

    
    
          <article class="default">
            <header class="headline">
            </header>
<h1 id="documentation">Documentation</h1>

<p>Documentation refers to the written materials that accompany program code.  Documentation plays multiple, and often critical roles.  Broadly speaking, we split documentation into two categories based on the intended audience:</p>
<ul>
<li><em>User Documentation</em> is meant for the end-users of the software</li>
<li><em>Developer Documentation</em> is meant for the developers of the software</li>
</ul>
<p>As you might expect, the goals for these two styles of documentation are very different.  User documentation instructs the user on how to use the software.  Developer documentation helps orient the developer so that they can effectively create, maintain, and expand the software.</p>
<p>Historically, documentation was printed separately from the software.  This was largely due to the limited memory available on most systems.  For example, the EPIC software we discussed had two publications associated with it: a <a href="http://agrilife.org/epicapex/files/2015/10/EPIC.0810-User-Manual-Sept-15.pdf" target="_blank">User Manual</a>
, which explains how to use it, and <a href="http://agrilife.org/epicapex/files/2015/05/EpicModelDocumentation.pdf" target="_blank">Model Documentation</a>
 which presents the mathematic models that programmers adapted to create the software. There are a few very obvious downsides to printed manuals: they take substantial resources to produce and update, and they are easily misplaced.</p>
<h2 id="user-documentation">User Documentation</h2>
<p>As memory became more accessible, it became commonplace to provide digital documentation to the users.  For example, with Unix (and Linux) systems, it became commonplace to distribute <em>digital</em> documentation alongside the software it documented.  This documentation came to be known as <a href="https://en.wikipedia.org/wiki/Man_page" target="_blank">man pages</a>
 based on the <code>man</code> command (short for manual) that would open the documentation for reading.  For example, to learn more about the linux search tool <code>grep</code>, you would type the command:</p>
<div class="wrap-code highlight"><pre tabindex="0"><code>$ man grep </code></pre></div><p>Which would open the documentation distributed with the <code>grep</code> tool.  Man pages are written in a specific format; you can read more about it <a href="https://liw.fi/manpages/" target="_blank">here</a>
.</p>
<p>While a staple of the Unix/Linux filesystem, there was no equivalent to man pages in the DOS ecosystem (the foundations of Windows) until Powershell was introduced, which has the <code>Get-Help</code> tool.  You can read more about it <a href="https://docs.microsoft.com/en-us/powershell/scripting/learn/ps101/02-help-system?view=powershell-7" target="_blank">here</a>
.</p>
<p>However, once software began to be written with graphical user interfaces (GUIs), it became commonplace to incorporate the user documentation directly into the GUI, usually under a &ldquo;Help&rdquo; menu.  This served a similar purpose to man pages of ensuring user documentation was always available with the software.  Of course, one of the core goals of software design is to make the software so intuitive that users don&rsquo;t need to reference the documentation. It is equally clear that developers often fall short of that mark, as there is a thriving market for books to teach certain software.</p>
<p>
<a href="#image-c1fec1872059eb842471d323ee7c77bb" class="lightbox-link">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/2.2.1.png" alt="Example Software Books" style="height: auto; width: auto;" loading="lazy">
</a>
<a href="javascript:history.back();" class="lightbox" id="image-c1fec1872059eb842471d323ee7c77bb">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/2.2.1.png" alt="Example Software Books" class="lightbox-image" loading="lazy">
</a></p>
<p>Not to mention the thousands of YouTube channels devoted to teaching specific programs!</p>
<h2 id="developer-documentation">Developer Documentation</h2>
<p>Developer documentation underwent a similar transformation. Early developer documentation was often printed and placed in a three-ring binder, as Neal Stephenson describes in his novel <em>Snow Crash</em>: <sup id="fnref:1"><a href="#fn:1" class="footnote-ref" role="doc-noteref">1</a></sup></p>
<blockquote>
Fisheye has taken what appears to be an instruction manual from the heavy black suitcase. It is a miniature three-ring binder with pages of laser-printed text. The binder is just a cheap unmarked one bought from a stationery store. In these respects, it is perfectly familiar to Him: it bears the earmarks of a high-tech product that is still under development. All technical devices require documentation of a sort, but this stuff can only be written by the techies who are doing the actual product development, and they absolutely hate it, always put the dox question off to the very last minute. Then they type up some material on a word processor, run it off on the laser printer, send the departmental secretary out for a cheap binder, and that's that.
</blockquote>
<p>Shortly after the time this novel was written, the internet became available to the general public, and the tools it spawned would change how software was documented forever.  Increasingly, web-based tools are used to create and distribute developer documentation.  Wikis, bug trackers, and autodocumentation tools quickly replaced the use of lengthy, and infrequently updated word processor files.</p>
<div class="footnotes" role="doc-endnotes">
<hr>
<ol>
<li id="fn:1">
<p>Neal Stephenson, &ldquo;Snow Crash.&rdquo; Bantam Books, 1992.&#160;<a href="#fnref:1" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
</ol>
</div>

            <footer class="footline">

            </footer>
          </article>

    
    
          <article class="default">
            <header class="headline">
            </header>
<h1 id="documentation-formats">Documentation Formats</h1>

<p>Developer documentation often faces a challenge not present in other kinds of documents - the need to be able to display snippets of code.  Ideally, we want code to be formatted in a way that preserves indentation.  We also don&rsquo;t want code snippets to be subject to spelling- and grammar-checks, especially auto-correct versions of these algorithms, as they will alter the snippets.  Ideally, we might also apply syntax highlighting to these snippets. Accordingly, a number of textual formats have been developed to support writing text with embedded program code, and these are regularly used to present developer documentation.  Let&rsquo;s take a look at several of the most common.</p>
<h2 id="html">HTML</h2>
<p>Since its inception, HTML has been uniquely suited for developer documentation.  It requires nothing more than a browser to view - a tool that nearly every computer is equipped with (in fact, most have two or three installed).  And the <code>&lt;code&gt;</code> element provides a way of styling code snippets to appear differently from the embedded text, and <code>&lt;pre&gt;</code> can be used to preserve the snippet&rsquo;s formatting.  Thus:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>&lt;<span style="color:#f92672">p</span>&gt;This algorithm reverses the contents of the array, &lt;<span style="color:#f92672">code</span>&gt;nums&lt;/<span style="color:#f92672">code</span>&gt;&lt;/<span style="color:#f92672">p</span>&gt;
</span></span><span style="display:flex;"><span>&lt;<span style="color:#f92672">pre</span>&gt;
</span></span><span style="display:flex;"><span>&lt;<span style="color:#f92672">code</span>&gt;
</span></span><span style="display:flex;"><span>for(int i = 0; i &lt; <span style="color:#f92672">nums.Length</span><span style="color:#960050;background-color:#1e0010">/</span><span style="color:#a6e22e">2</span><span style="color:#960050;background-color:#1e0010">;</span> <span style="color:#a6e22e">i</span><span style="color:#960050;background-color:#1e0010">++)</span> <span style="color:#960050;background-color:#1e0010">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">int</span> <span style="color:#a6e22e">tmp </span><span style="color:#f92672">=</span> <span style="color:#e6db74">nums[i];</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">nums</span><span style="color:#960050;background-color:#1e0010">[</span><span style="color:#a6e22e">i</span><span style="color:#960050;background-color:#1e0010">]</span> <span style="color:#960050;background-color:#1e0010">=</span> <span style="color:#a6e22e">nums</span><span style="color:#960050;background-color:#1e0010">[</span><span style="color:#a6e22e">nums</span><span style="color:#960050;background-color:#1e0010">.</span><span style="color:#a6e22e">Length</span> <span style="color:#a6e22e">-</span> <span style="color:#a6e22e">1</span> <span style="color:#a6e22e">-</span> <span style="color:#a6e22e">i</span><span style="color:#960050;background-color:#1e0010">];</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">nums</span><span style="color:#960050;background-color:#1e0010">[</span><span style="color:#a6e22e">nums</span><span style="color:#960050;background-color:#1e0010">.</span><span style="color:#a6e22e">Length</span> <span style="color:#a6e22e">-</span> <span style="color:#a6e22e">1</span> <span style="color:#a6e22e">-</span> <span style="color:#a6e22e">i</span><span style="color:#960050;background-color:#1e0010">]</span> <span style="color:#960050;background-color:#1e0010">=</span> <span style="color:#a6e22e">tmp</span><span style="color:#960050;background-color:#1e0010">;</span>
</span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">}</span>
</span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">&lt;/</span><span style="color:#a6e22e">code</span>&gt;
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#f92672">pre</span>&gt;</span></span></code></pre></div><p>Will render in a browser as:</p>
<div style="border: 1px solid gray; padding: 1rem">
<p>This algorithm reverses the contents of the array, <code>nums</code></p>
<pre>
<code>
for(int i = 0; i < nums.Length/2; i++) {
    int tmp = nums[i];
    nums[i] = nums[nums.Length - 1 - i];
    nums[nums.Length - 1 - i] = tmp;
}
</code>
</pre>
</div>
<p>JavaScript and CSS libraries like <a href="https://highlightjs.org/" target="_blank">highlight.js</a>
, <a href="https://prismjs.com/" target="_blank">prism</a>
, and others can provide syntax highlighting functionality without much extra work.</p>
<p>Of course, one of the strongest benefits of HTML is the ability to create <em>hyperlinks</em> between pages.  This can be invaluable in documenting software, where the documentation about a particular method could include links to documentation about the classes being supplied as parameters, or being returned from the method.  This allows developers to quickly navigate and find the information they need as they work with your code.</p>
<h2 id="markdown">Markdown</h2>
<p>However, there is a significant amount of <a href="https://en.wikipedia.org/wiki/Boilerplate_code" target="_blank">boilerplate</a>
 involved in writing a webpage (i.e. each page needs a minimum of elements not specific to the documentation to set up the structure of the page).  The extensive use of HTML elements also makes it more time-consuming to write and harder for people to read in its raw form. <a href="https://www.markdownguide.org/" target="_blank">Markdown</a>
 is a markup language developed to counter these issues.  Markdown is written as plain text, with a few special formatting annotations, which indicate how it should be transformed to HTML.  Some of the most common annotations are:</p>
<ul>
<li>Starting a line with hash (<code>#</code>) indicates it should be a <code>&lt;h1&gt;</code> element, two hashes (<code>##</code>) indicates a <code>&lt;h2&gt;</code>, and so on&hellip;</li>
<li>Wrapping a statement with underscores (<code>_</code>) or asterisks (<code>*</code>) indicates it should be wrapped in a <code>&lt;i&gt;</code> element</li>
<li>Wrapping a statement with double underscores (<code>__</code>) or double asterisks (<code>**</code>) indicates it should be wrapped in a <code>&lt;b&gt;</code> element</li>
<li>Links can be written as <code>[link text](url)</code>, which is transformed to <code>&lt;a href=&quot;url&quot;&gt;link text&lt;/a&gt;</code></li>
<li>Images can be written as <code>![alt text](url)</code>, which is transformed to <code>&lt;img alt=&quot;alt text&quot; src=&quot;url&quot;/&gt;</code></li>
</ul>
<p>Code snippets are indicated with backtick marks (<code>`</code>).  Inline code is written surrounded with single backtick marks, i.e. <code>`int a = 1`</code> and in the generated HTML is wrapped in a <code>&lt;code&gt;</code> element.  Code blocks are wrapped in <em>triple</em> backtick marks, and in the generated HTML are enclosed in both <code>&lt;pre&gt;</code> and <code>&lt;code&gt;</code> elements.  Thus, to generate the above HTML example, we would use:</p>
<pre><code class="language-md" data-lang="md">
This algorithm reverses the contents of the array, `nums`
```
for(int i = 0; i < nums.Count/2; i++) {
    int tmp = nums[i];
    nums[i] = nums[nums.Count - 1 - i];
    nums[nums.Count - 1 - i] = tmp;
}
```
</code></pre>
<p>Most markdown compilers also support specifying the language (for language-specific syntax highlighting) by following the first three backticks with the language name, i.e.:</p>
<pre><code class="langauge-md" data-lang="md">
```csharp
List<int> = new List<int>;
```
</code></pre>
<p>Nearly every programming language features at least one open-source library for converting Markdown to HTML.  Microsoft even includes a C# one in the <a href="https://docs.microsoft.com/en-us/windows/communitytoolkit/parsers/markdownparser" target="_blank">Windows Community Toolkit</a>
.  In addition to being faster to write than HTML, and avoiding the necessity to write boilerplate code, Markdown offers some security benefits.  Because it generates only a limited set of HTML elements, which specifically excludes some most commonly employed in web-based exploits (like using <code>&lt;script&gt;</code> elements for script injection attacks), it is often safer to allow users to contribute markdown-based content than HTML-based content. <strong>Note: this protection is dependent on the settings provided to your HTML generator - most markdown converters can be configured to allow or escape HTML elements in the markdown text</strong></p>
<p>In fact, this book was written using Markdown, and then converted to HTML using the <a href="https://gohugo.io/" target="_blank">Hugo framework</a>
, a static website generator built using the <a href="https://golang.org/" target="_blank">Go programming language</a>
.</p>
<p>Additionally, chat servers like RocketChat and Discord support using markdown in posts!</p>
<p>GitHub even incorporates a markdown compiler into its repository displays.  If your file ends in a <code>.md</code> extension, GitHub will evaluate it as Markdown and display it as HTML when you navigate your repo.  If your repository contains a README.md file at the top level of your project, it will also be displayed as the front page of your repository. GitHub uses an expanded list of annotations known as <a href="https://github.github.com/gfm/" target="_blank">GitHub-flavored markdown</a>
 that adds support for tables, task item lists, strikethroughs, and others.</p>

  
  
<div class="box notices cstyle info">
  <div class="box-label"><i class="fa-fw fas fa-info-circle"></i> Info</div>
  <div class="box-content">

<p>It is best practice to include a README.md file at the top level of a project.  This document provides an overview of the project, as well as helpful instructions on how it is to be used and where to go for more information.  For open-source projects, you should also include a LICENSE file that contains the terms of the license the software is released under.</p>
</div>
</div>
<h2 id="xml">XML</h2>
<p>Extensible Markup Language (XML) is a close relative of HTML - they share the same ancestor, Standard Generalized Markup Language (SGML).  It allows developers to develop their own custom markup languages based on the XML approach, i.e. the use of elements expressed via tags and attributes.  XML-based languages are usually used as a data serialization format.  For example, this snippet represents a serialized fictional student:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#f92672">&lt;student&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;firstName&gt;</span>Willie<span style="color:#f92672">&lt;/firstName&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;lastName&gt;</span>Wildcat<span style="color:#f92672">&lt;/lastName&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;wid&gt;</span>8888888<span style="color:#f92672">&lt;/wid&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;degreeProgram&gt;</span>BCS<span style="color:#f92672">&lt;/degreeProgram&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;/student&gt;</span></span></span></code></pre></div><p>While XML is most known for representing data, it is one of Microsoft&rsquo;s go-to tools.  For example, they have used it as the basis of Extensible Application Markup Language (XAML), which is used in Windows Presentation Foundation as well as cross-platform Xamrin development.  So it shouldn&rsquo;t be a surprise that Microsoft also adopted it for their autodocumentation code commenting strategy.  We&rsquo;ll take a look at this next.</p>

            <footer class="footline">

            </footer>
          </article>

    
    
          <article class="default">
            <header class="headline">
            </header>
<h1 id="autodocs">Autodocs</h1>

<p>One of the biggest innovations in documenting software was the development of autodocumentation tools. These were programs that would read source code files, and combine information parsed from the code itself and information contained in code comments to generate documentation in an easy-to-distribute form (often HTML).  One of the earliest examples of this approach came from the programming language Java, whose <a href="https://docs.oracle.com/javase/7/docs/api/" target="_blank">API specification</a>
 was generated from the language source files using <a href="https://en.wikipedia.org/wiki/Javadoc" target="_blank">JavaDoc</a>
.</p>
<p>This approach meant that the language of the documentation was embedded <em>within the source code itself</em>, making it far easier to update the documentation as the source code was refactored.  Then, every time a release of the software was built (in this case, the Java language), the documentation could be regenerated from the updated comments and source code.  This made it far more likely developer documentation would be kept up-to-date.</p>
<p>Microsoft adopted a similar strategy for the .NET languages, known as XML comments.  This approach was based on embedding XML tags into comments above classes, methods, fields, properties, structs, enums, and other code objects.  These comments are set off with a triple forward slash (<code>///</code>) to indicate the intent of being used for autodoc generation.  Comments using double slashes (<code>//</code>) and slash-asterisk notation (<code>/* */</code>) are ignored in this autodoc scheme.</p>
<p>For example, to document an Enum, we would write:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// An enumeration of fruits used in pies </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">enum</span> Fruit {
</span></span><span style="display:flex;"><span>    Cherry,
</span></span><span style="display:flex;"><span>    Apple,
</span></span><span style="display:flex;"><span>    Blueberry,
</span></span><span style="display:flex;"><span>    Peach
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>At a bare minimum, comments should include a <code>&lt;summary&gt;</code> element containing a description of the code structure being described.</p>
<p>Let&rsquo;s turn our attention to documenting a class:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Vector2</span> {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">float</span> X {<span style="color:#66d9ef">get</span>; <span style="color:#66d9ef">set</span>;}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">float</span> Y {<span style="color:#66d9ef">get</span>; <span style="color:#66d9ef">set</span>;}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> Vector2(<span style="color:#66d9ef">float</span> x, <span style="color:#66d9ef">float</span> y) {
</span></span><span style="display:flex;"><span>        X = x;
</span></span><span style="display:flex;"><span>        Y = y;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> Scale(<span style="color:#66d9ef">float</span> scalar) {
</span></span><span style="display:flex;"><span>        X *= scalar;
</span></span><span style="display:flex;"><span>        Y *= scalar;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">float</span> DotProduct(Vector2 other) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">this</span>.X * other.X + <span style="color:#66d9ef">this</span>.Y * other.Y;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">float</span> Normalize() {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">float</span> magnitude = Math.Sqrt(Math.Pow(<span style="color:#66d9ef">this</span>.X, <span style="color:#ae81ff">2</span>), Math.Pow(<span style="color:#66d9ef">this</span>.Y, <span style="color:#ae81ff">2</span>));
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span>(magnitude == <span style="color:#ae81ff">0</span>) <span style="color:#66d9ef">throw</span> <span style="color:#66d9ef">new</span> DivideByZeroException();
</span></span><span style="display:flex;"><span>        X /= magnitude;
</span></span><span style="display:flex;"><span>        Y /= magnitude;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>We would want to add a <code>&lt;summary&gt;</code> element just above the class declaration, i.e.:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// A class representing a two-element vector composed of floats </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;/summary&gt;</span></span></span></code></pre></div><p>Properties should be described using the <code>&lt;summary&gt;</code> element, i.e.:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// The x component of the vector </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;/summary&gt;</span></span></span></code></pre></div><p>And methods should use <code>&lt;summary&gt;</code>, plus <code>&lt;param&gt;</code> elements to describe parameters.  It has an attribute of <code>name</code> that should be set to match the parameter it describes:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// Constructs a new two-element vector </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;param name=&#34;x&#34;&gt;The X component of the new vector&lt;/param&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;param name=&#34;y&#34;&gt;The Y component of the new vector&lt;/param&gt;</span></span></span></code></pre></div><p>The <code>&lt;paramref&gt;</code> can be used to reference a parameter in the <code>&lt;summary&gt;</code>:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// Scales the Vector2 by the provided &lt;paramref name=&#34;scalar&#34;/&gt; </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;param name=&#34;scalar&#34;&gt;The value to scale the vector by&lt;/param&gt;</span></span></span></code></pre></div><p>If a method returns a value, this should be indicated with the <code>&lt;returns&gt;</code> element:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// Computes the dot product of this and an &lt;paramref name=&#34;other&#34;&gt; vector</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;param name=&#34;other&#34;&gt;The vector to compute a dot product with&lt;/param&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;returns&gt;The dot product&lt;/returns&gt;</span></span></span></code></pre></div><p>And, if a method might throw an exception, this should be also indicated with the <code>&lt;exception&gt;</code> element, which uses the <code>cref</code> attribute to indicate the specific exception:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// Normalizes the vector</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;remarks&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// This changes the length of the vector to one unit.  The direction remains unchanged </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;/remarks&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;exception cref=&#34;System.DivideByZeroException&#34;&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// Thrown when the length of the vector is 0.</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;/exception&gt;</span></span></span></code></pre></div><p>Note too, the use of the <code>&lt;remarks&gt;</code> element in the above example to add supplemental information.  The <code>&lt;example&gt;</code> element can also be used to provide examples of using the class, method, or other code construct.  There are more elements available, like <code>&lt;see&gt;</code> and <code>&lt;seealso&gt;</code> that generate links to other documentation, <code>&lt;para&gt;</code>, and <code>&lt;list&gt;</code> which are used to format text, and so on.</p>
<p>Of especial interest are the <code>&lt;code&gt;</code> and <code>&lt;c&gt;</code> elements, which format code blocks and inline code, respectively.</p>
<p>See <a href="https://docs.microsoft.com/en-us/dotnet/csharp/codedoc" target="_blank">the official documentation</a>
 for a complete list and discussion.</p>
<p>Thus, our completely documented class would be:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// A class representing a two-element vector composed of floats </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Vector2</span> {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// The x component of the vector </span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">float</span> X {<span style="color:#66d9ef">get</span>; <span style="color:#66d9ef">set</span>;}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// The y component of the vector </span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">float</span> Y {<span style="color:#66d9ef">get</span>; <span style="color:#66d9ef">set</span>;}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// Constructs a new two-element vector </span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;param name=&#34;x&#34;&gt;The X component of the new vector&lt;/param&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;param name=&#34;y&#34;&gt;The Y component of the new vector&lt;/param&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> Vector2(<span style="color:#66d9ef">float</span> x, <span style="color:#66d9ef">float</span> y) {
</span></span><span style="display:flex;"><span>        X = x;
</span></span><span style="display:flex;"><span>        Y = y;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// Scales the Vector2 by the provided &lt;paramref name=&#34;scalar&#34;/&gt; </span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;param name=&#34;scalar&#34;&gt;The value to scale the vector by&lt;/param&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> Scale(<span style="color:#66d9ef">float</span> scalar) {
</span></span><span style="display:flex;"><span>        X *= scalar;
</span></span><span style="display:flex;"><span>        Y *= scalar;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// Computes the dot product of this and an &lt;paramref name=&#34;other&#34;&gt; vector</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;param name=&#34;other&#34;&gt;The vector to compute a dot product with&lt;/param&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;returns&gt;The dot product&lt;/returns&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">float</span> DotProduct(Vector2 other) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">this</span>.X * other.X + <span style="color:#66d9ef">this</span>.Y * other.Y;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// Normalizes the vector</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;remarks&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// This changes the length of the vector to one unit.  The direction remains unchanged </span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;/remarks&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;exception cref=&#34;System.DivideByZeroException&#34;&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// Thrown when the length of the vector is 0.</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;/exception&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">float</span> Normalize() {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">float</span> magnitude = Math.Sqrt(Math.Pow(<span style="color:#66d9ef">this</span>.X, <span style="color:#ae81ff">2</span>), Math.Pow(<span style="color:#66d9ef">this</span>.Y, <span style="color:#ae81ff">2</span>));
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span>(magnitude == <span style="color:#ae81ff">0</span>) <span style="color:#66d9ef">throw</span> <span style="color:#66d9ef">new</span> DivideByZeroException();
</span></span><span style="display:flex;"><span>        X /= magnitude;
</span></span><span style="display:flex;"><span>        Y /= magnitude;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>With the exception of the <code>&lt;remarks&gt;</code>, the XML documentation elements used in the above code should be considered the <em>minimum</em> for best practices.  That is, every <code>Class</code>, <code>Struct</code>, and <code>Enum</code> should have a <code>&lt;summary&gt;</code>. Every property should have a <code>&lt;summary&gt;</code>. And every method should have a <code>&lt;summary&gt;</code>, a <code>&lt;param&gt;</code> for every parameter, a <code>&lt;returns&gt;</code> if it returns a value (this can be omitted for <code>void</code>) and an <code>&lt;exception&gt;</code> for every exception it might throw.</p>
<p>There are multiple autodoc programs that generate documentation from XML comments embedded in C# code, including open-source <a href="https://github.com/EWSoftware/SHFB" target="_blank">Sandcastle Help File Builder</a>
 and the simple <a href="https://github.com/jagregory/docu" target="_blank">Docu</a>
, as well as multiple commercial products.</p>
<p>However, the perhaps more important consumer of XML comments is <em>Visual Studio</em>, which uses these comments to power its Intellisense features, displaying text from the comments as tooltips as you edit code.  This intellisense data is automatically built into DLLs built from Visual Studio, making it available in projects that utilize compiled DLLs as well.</p>

            <footer class="footline">

            </footer>
          </article>

    
    
          <article class="default">
            <header class="headline">
            </header>
<h1 id="summary">Summary</h1>

<p>In this chapter, we examined the need for software documentation aimed at both end-users and developers (<em>user documentation</em> and <em>developer documentation</em> respectively). We also examined some formats this documentation can be presented in: HTML, Markdown, and XML.  We also discussed <em>autodocumentation</em> tools, which generate developer documentation from specially-formatted comments in our code files.</p>
<p>We examined the C# approach to autodocumentation, using Microsoft&rsquo;s XML code comments formatting strategy.  We explored how this data is used by Visual Studio to power its Intellisense features, and provide useful information to programmers as they work with constructs like classes, properties, and methods. For this reason, as well as the ability to produce HTML-based documentation using an autodocumentation tool, it is best practice to use XML code comments in all your C# programs.</p>

            <footer class="footline">

            </footer>
          </article>

          </section>
    
    
          <article class="chapter">
            <header class="headline">
            </header>


<div class="article-subheading">Chapter 4</div>
<h1 id="testing">Testing</h1>

<p>Is it Working Yet?</p>

            <footer class="footline">

            </footer>
          </article>

          <section>
            <h1 class="a11y-only">Subsections of Testing</h1>
    
    
          <article class="default">
            <header class="headline">
            </header>
<h1 id="introduction">Introduction</h1>

<p>A critical part of the software development process is <em>ensuring the software works!</em>  We mentioned earlier that it is possible to logically prove that software works by constructing a state transition table for the program, but once a program reaches a certain size this strategy becomes less feasible.  Similarly, it is possible to model a program mathematically and construct a theorem that <em>proves</em> it will perform as intended.  But in practice, most software is validated through some form of <em>testing</em>.  This chapter will discuss the process of testing object-oriented systems.</p>
<h2 id="key-terms">Key Terms</h2>
<p>Some key terms to learn in this chapter are:</p>
<ul>
<li>Informal Testing</li>
<li>Formal Testing</li>
<li>Test Plan</li>
<li>Test Framework</li>
<li>Automated Testing</li>
<li>Assertions</li>
<li>Unit tests</li>
<li>Testing Code Coverage</li>
<li>Regression Testing</li>
</ul>
<h2 id="key-skills">Key Skills</h2>
<p>The key skill to learn in this chapter is how to write C# unit test code using <a href="https://xunit.net/" target="_blank">xUnit</a>
 and the Visual Studio <a href="https://docs.microsoft.com/en-us/visualstudio/test/run-unit-tests-with-test-explorer?view=vs-2019" target="_blank">Test Explorer</a>
.</p>

            <footer class="footline">

            </footer>
          </article>

    
    
          <article class="default">
            <header class="headline">
            </header>
<h1 id="manual-testing">Manual Testing</h1>

<p>As you&rsquo;ve developed programs, you&rsquo;ve probably run them, supplied input, and observed if what happened was what you wanted. This process is known as <em>informal testing</em>.  It&rsquo;s informal, because you don&rsquo;t have a set procedure you follow, i.e. what specific inputs to use, and what results to expect.  <em>Formal testing</em> adds that structure.  In a formal test, you would have a written procedure to follow, which specifies <em>exactly</em> what inputs to supply, and what results should be expected.  This written procedure is known as a <em>test plan</em>.</p>
<p>Historically, the test plan was often developed at the same time as the design for the software (but before the actual programming).  The programmers would then build the software to match the design, and the completed software and the test plan would be passed onto a testing team that would follow the step-by-step testing procedures laid out in the testing plan.  When a test failed, they would make a detailed record of the failure, and the software would be sent back to the programmers to fix.</p>
<p>This model of software development has often been referred to as the &lsquo;waterfall model&rsquo; as each task depends on the one before it:</p>
<p>
<a href="#image-9a6c5b68aa8dcbbfa1ec3c6b3efa48c2" class="lightbox-link">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/1.4.2.1.png" alt="The Waterfall Model of Software Development" style="height: auto; width: auto;" loading="lazy">
</a>
<a href="javascript:history.back();" class="lightbox" id="image-9a6c5b68aa8dcbbfa1ec3c6b3efa48c2">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/1.4.2.1.png" alt="The Waterfall Model of Software Development" class="lightbox-image" loading="lazy">
</a></p>
<p>Unfortunately, as this model is often implemented, the programmers responsible for writing the software are reassigned to other projects as the software moves into the testing phase.  Rather than employ valuable programmers as testers, most companies will hire less expensive workers to carry out the testing.  So either a skeleton crew of programmers is left to fix any errors that are found during the tests, or these are passed back to programmers already deeply involved in a new project.</p>
<p>The costs involved in fixing software errors also grow larger the longer the error exists in the software. The table below comes from a NASA report of software error costs throughout the project life cycle: <sup id="fnref:1"><a href="#fn:1" class="footnote-ref" role="doc-noteref">1</a></sup></p>
<p>
<a href="#image-ad35f5fc0e56ce57e8ca2b6c2773a064" class="lightbox-link">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/1.4.2.2.png" alt="Comparison of System Cost Factors Excluding Operations" style="height: auto; width: auto;" loading="lazy">
</a>
<a href="javascript:history.back();" class="lightbox" id="image-ad35f5fc0e56ce57e8ca2b6c2773a064">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/1.4.2.2.png" alt="Comparison of System Cost Factors Excluding Operations" class="lightbox-image" loading="lazy">
</a></p>
<p>It is clear from the graph and the paper that the cost to fix a software error grows exponentially if the fix is delayed.  You probably have instances in your own experience that also speak to this - have you ever had a bug in a program you didn&rsquo;t realize was there until your project was nearly complete?  How hard was it to fix, compared to an error you found and fixed right away?</p>
<p>It was realizations like these, along with growing computing power that led to the development of <em>automated testing</em>, which we&rsquo;ll discuss next.</p>
<div class="footnotes" role="doc-endnotes">
<hr>
<ol>
<li id="fn:1">
<p>Jonette M. Stecklein, Jim Dabney, Brandon Dick, Bill Haskins, Randy Lovell, and Gregory Maroney. <a href="https://ntrs.nasa.gov/citations/20100036670" target="_blank">&ldquo;Error Cost Escalation Through the Project Life Cycle&rdquo;</a>
, NASA, June 19, 2014.&#160;<a href="#fnref:1" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
</ol>
</div>

            <footer class="footline">

            </footer>
          </article>

    
    
          <article class="default">
            <header class="headline">
            </header>
<h1 id="automated-testing">Automated Testing</h1>

<p>Automated testing is the practice of using a program to test another program.  Much as a compiler is a program that translates a program from a higher-order language into a lower-level form, a test program executes a test plan against the program being tested.  And much like you must supply the program to be compiled, for automated testing you must supply the tests that need to be executed. In many ways the process of writing automated tests is like writing a manual test plan - you are writing instructions of what to try, and what the results should be.  The difference is with a manual test plan, you are writing these instructions for a human.  With an automated test plan, you are writing them for a program.</p>
<p>Automated tests are typically categorized as <em>unit</em>, <em>integration</em>, and <em>system</em> tests:</p>
<ul>
<li><strong>Unit tests</strong> focus on a single unit of code, and test it in isolation from other parts of the code.  In object-oriented programs where code is grouped into objects, these are the units that are tested.  Thus, for each class you would have a corresponding file of unit tests.</li>
<li><strong>Integration</strong> tests focus on the interaction of units working together, and with infrastructure external to the program (i.e. databases, other programs, etc).</li>
<li><strong>System</strong> tests look at the entire program&rsquo;s behavior.</li>
</ul>
<p>The complexity of writing tests scales with each of these categories.  Emphasis is usually put on writing unit tests, especially as the classes they test are written.  By testing these classes early, errors can be located and fixed quickly.</p>

            <footer class="footline">

            </footer>
          </article>

    
    
          <article class="default">
            <header class="headline">
            </header>
<h1 id="writing-tests">Writing Tests</h1>

<p>Writing tests is in many ways just as challenging and creative an endeavor as writing programs.  Tests usually consist of invoking some portion of program code, and then using <em>assertions</em> to determine that the actual results match the expected results.  The result of these assertions are typically reported on a per-test basis, which makes it easy to see where your program is not behaving as expected.</p>
<p>Consider a class that is a software control system for a kitchen stove.  It might have properties for four burners, which correspond to what heat output they are currently set to.  Let&rsquo;s assume this is as an integer between 0 (off) and 5 (high).  When we first construct this class, we&rsquo;d probably expect them all to be off!  A test to verify that expectation would be:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">StoveTests</span> {
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">
</span></span></span><span style="display:flex;"><span><span style="color:#a6e22e">    [Fact]</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> BurnersShouldBeOffAtInitialization() {
</span></span><span style="display:flex;"><span>        Stove stove = <span style="color:#66d9ef">new</span> Stove();
</span></span><span style="display:flex;"><span>        Assert.Equal(<span style="color:#ae81ff">0</span>, stove.BurnerOne);
</span></span><span style="display:flex;"><span>        Assert.Equal(<span style="color:#ae81ff">0</span>, stove.BurnerTwo);
</span></span><span style="display:flex;"><span>        Assert.Equal(<span style="color:#ae81ff">0</span>, stove.BurnerThree);
</span></span><span style="display:flex;"><span>        Assert.Equal(<span style="color:#ae81ff">0</span>, stove.BurnerFour);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>Here we&rsquo;ve written the test using the C# <a href="https://xunit.net/" target="_blank">xUnit</a>
 test framework, which is being adopted by Microsoft as their preferred framework, replacing the <a href="https://nunit.org/" target="_blank">nUnit</a>
 test framework (there are many other C# test frameworks, but these two are the most used).</p>
<p>Notice that the test is simply a method, defined in a class.  This is very common for test frameworks, which tend to be written using the same programming language the programs they test are written in (which makes it easier for one programmer to write both the code unit and the code to test it).  Above the class appears an <a href="https://docs.microsoft.com/en-us/dotnet/csharp/programming-guide/concepts/attributes/" target="_blank">attribute</a>
 - <code>[Fact]</code>.  Attributes are a way of supplying metadata within C# code.  This metadata can be used by the compiler and other programs to determine how it works with your code.  In this case, it indicates to the xUnit test runner that this method is a test.</p>
<p>Inside the method, we create an instance of stove, and then use the <code>Assert.Equal&lt;T&gt;(T expected, T actual)</code> method to determine that the actual and expected values match.  If they do, the assertion is marked as passing, and the test runner will display this pass.  If it fails, the test runner will report the failure, along with details to help find and fix the problem (what value was expected, what it actually was, and which test contained the assertion).</p>
<p>The xUnit framework provides for two kinds of tests, <em>Facts</em>, which are written as functions that have no parameters, and <em>Theories</em>, which do have parameters.  The values for these parameters are supplied with another attribute, typically <code>[InlineData]</code>.  For example, we might test that when we set a burner to a setting within the valid 0-5 range, it is set to that value:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#a6e22e">[Theory]</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">[InlineData(0)]</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">[InlineData(1)]</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">[InlineData(2)]</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">[InlineData(3)]</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">[InlineData(4)]</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">[InlineData(5)]</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> ShouldBeAbleToSetBurnerOneToValidRange(<span style="color:#66d9ef">int</span> setting) {
</span></span><span style="display:flex;"><span>    Stove stove = <span style="color:#66d9ef">new</span> Stove();
</span></span><span style="display:flex;"><span>    stove.BurnerOne = setting;
</span></span><span style="display:flex;"><span>    Assert.Equal(setting, stove.BurnerOne);
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>The values in the parentheses of the <code>InlineData</code> are the values supplied to the parameter list of the theory method.  Thus, this test is actually <em>six</em> tests; each test makes sure that one of the settings is working.  We could have done all six as separate assignments and assertions within a single fact, but using a theory means that if only one of these settings doesn&rsquo;t work, we will see that one test fail while the others pass.  This level of specificity can be very helpful in finding errors.</p>
<p>So far our tests cover the expected behavior of our stove.  But where tests really prove their worth is with the <em>edge cases</em> - those things we as programmers don&rsquo;t anticipate.  For example, what happens if we try setting our range to a setting above 5?  Should it simply clamp at 5?  Should it not change from its current setting?  Or should it shut itself off entirely because its user is clearly a pyromaniac bent on burning down their house? If the specification for our program doesn&rsquo;t say, it is up to us to decide.  Let&rsquo;s say we expect it to be clamped at 5:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#a6e22e">[Theory]</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">[InlineData(6)]</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">[InlineData(18)]</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">[InlineData(1000000)]</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> BurnerOneShouldNotExceedASettingOfFive(<span style="color:#66d9ef">int</span> setting) {
</span></span><span style="display:flex;"><span>    Stove stove = <span style="color:#66d9ef">new</span> Stove();
</span></span><span style="display:flex;"><span>    stove.BurnerOne = setting;
</span></span><span style="display:flex;"><span>    Assert.Equal(<span style="color:#ae81ff">5</span>, stove.BurnerOne);
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>Note that we don&rsquo;t need to exhaustively test all numbers above 5 - it is sufficient to provide a representative sample, ideally the first value past 5 (6), and a few others.  Also, now that we have defined our expected behavior, we should make sure the documentation of our BurnerOne property matches it:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// The setting of burner one </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;value&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// An integer between 0 (off) and 5 (high)</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;/value&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;remarks&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// If a value higher than 5 is attempted, the burner will be set to 5</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;/remarks&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">int</span> BurnerOne {<span style="color:#66d9ef">get</span>; <span style="color:#66d9ef">set</span>;}</span></span></code></pre></div><p>This way, other programmers (and ourselves, if we visit this code years later) will know what the expected behavior is.  We&rsquo;d also want to test the other edge cases: i.e. when the burner is set to a negative number.</p>

  
  
<div class="box notices cstyle warning">
  <div class="box-label"><i class="fa-fw fas fa-exclamation-triangle"></i> Warning</div>
  <div class="box-content">

<p>Recognizing and testing for edge cases is a critical aspect of test writing. But it is also a difficult skill to develop, as we have a tendency to focus on expected values and expected use-cases for our software. But most serious errors occur when values outside these expectations are introduced.  Also, remember special values, like <code>double.PositiveInfinity</code>, <code>double.NegativeInfinity</code>, and <code>double.NaN</code>.</p>
</div>
</div>

            <footer class="footline">

            </footer>
          </article>

    
    
          <article class="default">
            <header class="headline">
            </header>
<h1 id="xunit-assertions">xUnit Assertions</h1>

<p>Like most testing frameworks, the xUnit framework provides a host of specialized assertions.</p>
<h2 id="boolean-assertions">Boolean Assertions</h2>
<p>For example, xUnit provides two boolean assertions:</p>
<ul>
<li><code>Assert.True(bool actual)</code>, asserts that the value supplied to the <code>actual</code> parameter is <code>true</code>.</li>
<li><code>Assert.False(bool actual)</code>, asserts that the value supplied to the <code>actual</code> parameter is <code>false</code>.</li>
</ul>
<p>While it may be tempting to use <code>Assert.True()</code> for all tests, i.e. <code>Assert.True(stove.BurnerOne == 0)</code>, it is better practice to use the specialized assertion that best matches the situation, in this case <code>Assert.Equal&lt;T&gt;(T expected, T actual)</code> as a failing test will supply more details.</p>
<h2 id="equality-assertions">Equality Assertions</h2>
<p>The <code>Assert.Equal&lt;T&gt;(T expected, T actual)</code> is the workhorse of the assertion library. Notice it is a template method, so it can be used with any type that is comparable (which is pretty much everything possible in C#).  It also has an override, <code>Assert.Equal&lt;T&gt;(T expected, T actual, int precision)</code> which allows you to specify the precision for floating-point numbers.  Remember that floating point error can cause two calculated values to be slightly different than one another; specifying a precision allows you to say just how close the expected an actual value needs to be to be considered &rsquo;equal&rsquo; for the purposes of the test.</p>
<p>Like most assertions, it is paired with an opposite, <code>Assert.NotEqual&lt;T&gt;(T expected, T actual)</code>, which also has an override for supplying precision.</p>
<h2 id="numeric-assertions">Numeric Assertions</h2>
<p>With numeric values, it can be handy to determine if the value falls within a range:</p>
<ul>
<li><code>Assert.InRange&lt;T&gt;(T actual, T low, T high)</code> asserts <code>actual</code> falls between <code>low</code> and <code>high</code> (inclusive), and</li>
<li><code>Assert.NotInRange&lt;T&gt;(T actual, T low, T high)</code> asserts <code>actual</code> does not fall between <code>low</code> and <code>high</code> (inclusive)</li>
</ul>
<h2 id="reference-assertions">Reference Assertions</h2>
<p>There are special assertions to deal with null references:</p>
<ul>
<li><code>Assert.Null(object object)</code> asserts the supplied <code>object</code> is null, and</li>
<li><code>Assert.NotNull(object object)</code> asserts the supplied <code>object</code> is <em>not</em> null</li>
</ul>
<p>In addition, two objects may be considered equal, but may or may not the same object (i.e. not referencing the same memory).  This can be asserted with:</p>
<ul>
<li><code>Assert.Same(object expected, object actual)</code> asserts the <code>expected</code> and <code>actual</code> object references are to the same object, while</li>
<li><code>Assert.NotSame(object expected, object actual)</code> asserts the <code>expected</code> and <code>actual</code> object references are <em>not</em> the same object</li>
</ul>
<h2 id="type-assertions">Type Assertions</h2>
<p>At times, you may want to assure it is possible to cast an object to a specific type.  This can be done with:</p>
<ul>
<li><code>Assert.IsAssignableFrom&lt;T&gt;(object obj)</code>
Where <code>T</code> is the type to cast into.</li>
</ul>
<p>At other times, you may want to assert that the object is <em>exactly</em> the type you expect (.e. <code>T</code> is not an interface or base class of <code>obj</code>).  That can be done with:</p>
<ul>
<li><code>Assert.IsType&lt;T&gt;(object obj)</code></li>
</ul>
<h2 id="collection-assertions">Collection Assertions</h2>
<p>There are a host of assertions for working with collections:</p>
<ul>
<li><code>Assert.Empty(IEnumerable collection)</code> asserts that the collection is empty, while</li>
<li><code>Assert.NotEmpty(IEnumerable collection)</code> asserts that it is <em>not</em> empty</li>
<li><code>Assert.Contains&lt;T&gt;(T expected, IEnumerable&lt;T&gt; collection)</code> asserts that the <code>expected</code> item is found in the <code>collection</code>, while</li>
<li><code>Assert.DoesNotContain&lt;T&gt;(T expected, IEnumerable&lt;T&gt; collection)</code> asserts the <code>expected</code> item is <em>not</em> found in the <code>collection</code></li>
</ul>
<p>In addition to the simple equality check form of <code>Assert.Contains&lt;T&gt;()</code> and <code>Assert.DoesNotContain&lt;T&gt;()</code>, there is a version that takes a filter expression (an expression that evaluates to <code>true</code> or <code>false</code> indicating that an item was found) written as a lambda expression.  For example, to determine if a list of <code>Fruit</code> contains an <code>Orange</code> we could use:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>List&lt;Fruit&gt; fruits = <span style="color:#66d9ef">new</span> List&lt;Fruit&gt;() {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">new</span> Orange(),
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">new</span> Apple(),
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">new</span> Grape(),
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">new</span> Banana() {Overripe = <span style="color:#66d9ef">true</span>}
</span></span><span style="display:flex;"><span>};
</span></span><span style="display:flex;"><span>Assert.Contains(fruits, item =&gt; item <span style="color:#66d9ef">is</span> Orange);</span></span></code></pre></div><p>The expression <code>item is Orange</code> is run on each item in <code>fruits</code> until it evaluates to <code>true</code> or we run out of fruit to check. We can also supply curly braces with a return statement if we need to perform more complex logic:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>Assert.Contains(fruits, item =&gt; {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span>(item <span style="color:#66d9ef">is</span> Banana banana) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span>(banana.Overripe) <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">true</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">false</span>;
</span></span><span style="display:flex;"><span>});</span></span></code></pre></div><p>Here we only return <code>true</code> for overripe bananas.  Using <code>Assert.Contains()</code> with a filter expression can be useful for checking that expected items are in a collection.  To check that the collection also does not contain unexpected items, we can test the length of the collection against the expected number of values, i.e.:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>Assert.True(fruits.Count == <span style="color:#ae81ff">4</span>, <span style="color:#e6db74">$&#34;Expected 4 items but found {fruits.Count}&#34;</span>);</span></span></code></pre></div><p>Here we use the <code>Assert.True()</code> overload that allows a custom message when the test fails.</p>
<p>Finally, <code>Assert.Collection&lt;T&gt;(IEnumerable&lt;T&gt; collection, Action&lt;T&gt;[] inspectors)</code> can apply specific inspectors against each item in a collection.  Using the same fruits list as above:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>Assert.Collection(fruits, 
</span></span><span style="display:flex;"><span>    item =&gt; Assert.IsType&lt;Orange&gt;(item),
</span></span><span style="display:flex;"><span>    item =&gt; Assert.IsType&lt;Apple&gt;(item),
</span></span><span style="display:flex;"><span>    item =&gt; Assert.IsType&lt;Grape&gt;(item),
</span></span><span style="display:flex;"><span>    item =&gt; {
</span></span><span style="display:flex;"><span>        Assert.IsType&lt;Banana&gt;(item);
</span></span><span style="display:flex;"><span>        Assert.True(((Banana)item).Overripe);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>);</span></span></code></pre></div><p>Here we use an <a href="https://docs.microsoft.com/en-us/dotnet/api/system.action-1?view=netcore-3.1" target="_blank">Action<T> delegate</a>
 to map each item in the collection to an assertion.  These actions are written using [lambda expressions], which are conceptually <em>functions</em>.</p>
<p>The number of actions should correspond to the expected size of the collection, and the items supplied to the actions <em>must be in the same order as they appear in the collection</em>.  Thus, the <code>Assert.Collection()</code> is a good choice when the collection is expected to always be in the same order, while the <code>Assert.Contains()</code> approach allows for variation in the ordering.</p>
<h2 id="exception-assertions">Exception Assertions</h2>
<p>Error assertions <em>also</em> use <a href="https://docs.microsoft.com/en-us/dotnet/api/system.action-1?view=netcore-3.1" target="_blank">Action<T> delegate</a>
, in this case to execute code that is expected to throw an exception, i.e. we could test for <code>System.DivideByZeroException</code> with:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#a6e22e">[Fact]</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> DivisionByZeroShouldThrowException() {
</span></span><span style="display:flex;"><span>    Assert.Throws(System.DivideByZeroException, () =&gt; {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">var</span> tmp = <span style="color:#ae81ff">10.0</span>/<span style="color:#ae81ff">0.0</span>;
</span></span><span style="display:flex;"><span>    });
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>Note how we place the code that is expected to throw the exception <em>inside</em> the body of the Action?  This allows the assertion to wrap it in a <code>try/catch</code> internally.  The exception-related assertions are:</p>
<ul>
<li><code>Assert.Throws(System.Exception expectedException, Action testCode)</code> asserts the supplied <code>expectedException</code> is thrown when <code>testCode</code> is executed</li>
<li><code>Assert.Throws&lt;T&gt;(Action testCode) where T : System.Exception</code> the templated version of the above</li>
<li><code>Assert.ThrowsAny&lt;T&gt;(Action testCode) where T: System.Exception</code> asserts that <em>any</em> exception will be thrown by the <code>testCode</code> when executed</li>
</ul>
<p>There are also similar assertions for exceptions being thrown in <em>asynchronous</em> code. These operate nearly identically, except instead of supplying an Action, we supply a <a href="https://docs.microsoft.com/en-us/dotnet/api/system.threading.tasks.task?view=netcore-3.1" target="_blank">Task</a>
:</p>
<ul>
<li><code>Assert.ThrowsAsync&lt;T&gt;(Task testCode) where T : System.Exception</code> asserts the supplied exception type <code>T</code> is thrown when <code>testCode</code> is executed</li>
<li><code>Assert.ThrowsAnyAsync&lt;T&gt;(Task testCode) where T: System.Exception</code> is the asynchronous version of the previous assertion, asserts the supplied exception type <code>T</code> will be thrown some point after <code>testCode</code> is executed.</li>
</ul>
<h2 id="events-assertions">Events Assertions</h2>
<p>Asserting that events will be thrown also involves <a href="https://docs.microsoft.com/en-us/dotnet/api/system.action-1?view=netcore-3.1" target="_blank">Action<T> delegate</a>
, and is a bit more involved as it requires <em>three</em>.  The first delegate is for attaching the assertion-supplied event handler to the listener, the second for detaching it, and the third is for triggering the event with the actual code involved.</p>
<p>For example, assume we have a class, <code>Emailer</code>, with a method <code>SendEmail(string address, string body)</code> that should have an event handler <code>EmailSent</code> whose event args are <code>EmailSentEventArgs</code>.  We could test that this class was actually raising this event with:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#a6e22e">[Fact]</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> EmailerShouldRaiseEmailSentWhenSendingEmails()
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">string</span> address = <span style="color:#e6db74">&#34;test@test.com&#34;</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">string</span> body = <span style="color:#e6db74">&#34;this is a test&#34;</span>;
</span></span><span style="display:flex;"><span>    Emailer emailer = <span style="color:#66d9ef">new</span> Emailer();
</span></span><span style="display:flex;"><span>    Assert.Raises&lt;EmailSentEventArgs&gt;(
</span></span><span style="display:flex;"><span>        listener =&gt; emailer += listener, <span style="color:#75715e">// This action attaches the listener</span>
</span></span><span style="display:flex;"><span>        listener =&gt; emailer -= listener, <span style="color:#75715e">// This action detaches the listener </span>
</span></span><span style="display:flex;"><span>        () =&gt; {
</span></span><span style="display:flex;"><span>            emailer.SendEmail(address, body);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    )
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>The various event assertions are:</p>
<ul>
<li><code>Assert.Raises&lt;T&gt;(Action attach, Action detach, Action testCode)</code></li>
<li><code>Assert.RaisesAny&lt;T&gt;(Action attach, Action detach, Action testCode)</code></li>
</ul>
<p>There are also similar assertions for events being raised by <em>asynchronous</em> code.  These operate nearly identically, except instead of supplying an Action, we supply a <a href="https://docs.microsoft.com/en-us/dotnet/api/system.threading.tasks.task?view=netcore-3.1" target="_blank">Task</a>
:</p>
<ul>
<li><code>Assert.RaisesAsync&lt;T&gt;(Action attach, Action detach, Task testCode)</code></li>
<li><code>Assert.RaisesAnyAsync&lt;T&gt;(Action attach, Action detach, Task testCode)</code></li>
</ul>
<p>For examples of these assertions, see <a href="https://ksu-cs-textbooks.github.io/cis400/2-desktop-development/03-events/10-testing-generic-events/">section 2.3.10</a>
</p>

  
  
<div class="box notices cstyle info">
  <div class="box-label"><i class="fa-fw fas fa-info-circle"></i> Info</div>
  <div class="box-content">

<p>XUnit does not directly support old-style events - those with a named event handler like <code>CollectionChangedEventHandler</code>, only those that use the templated form: <code>EventHandler&lt;CustomEventArgs&gt;</code> (with the exception of the <code>PropertyChanged</code> event, discussed below).  For strategies to handle the older-style events, see <a href="https://ksu-cs-textbooks.github.io/cis400/2-desktop-development/03-events/11-testing-custom-events/" target="_blank">section 2.3.11</a>
</p>
</div>
</div>
<h2 id="property-change-assertions">Property Change Assertions</h2>
<p>Because C# has deeply integrated the idea of &lsquo;Property Change&rsquo; notifications as part of its GUI frameworks (which we&rsquo;ll cover in a later chapter), it makes sense to have a special assertion to deal with this notification.  Hence, the <code>Assert.PropertyChanged(INotifyPropertyChanged @object, string propertyName, Action testCode)</code>.  Using it is simple - supply the object that implements the <code>INotifyPropertyChanged</code> interface as the first argument, the name of the property that will be changing as the second, and the Action delegate that will trigger the change as the third.</p>
<p>For example, if we had a <code>Profile</code> object with a <code>StatusMessage</code> property that we knew should trigger a notification when it changes, we could write our test as:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#a6e22e">[Fact]</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> ProfileShouldNotifyOfStatusMessageChanges() {
</span></span><span style="display:flex;"><span>    Profile testProfile = <span style="color:#66d9ef">new</span> Profile();
</span></span><span style="display:flex;"><span>    Assert.PropertyChanged(testProfile, <span style="color:#e6db74">&#34;StatusMessage&#34;</span>, () =&gt; testProfile.StatusMessage = <span style="color:#e6db74">&#34;Hard at work&#34;</span>);
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>There is also a similar assertion for testing if a property is changed in <em>asynchronous</em> code. This operates nearly identically, except instead of supplying an Action, we supply a <a href="https://docs.microsoft.com/en-us/dotnet/api/system.threading.tasks.task?view=netcore-3.1" target="_blank">Task</a>
:</p>
<ul>
<li><code>Assert.PropertyChangedAsync(INotifyPropertyChanged @object, string propertyName, Task testCode)</code></li>
</ul>

            <footer class="footline">

            </footer>
          </article>

    
    
          <article class="default">
            <header class="headline">
            </header>
<h1 id="mock-objects">Mock Objects</h1>

<p>One of the most important ideas behind unit testing is the idea that you are testing an object <em>in isolation</em> from other objects (This is in direct contrast to <em>integration testing</em>, where you are interested in how objects are working together).</p>
<p>But how do we test a class that has a strong dependency on another class? Let&rsquo;s consider the case of an Automated Teller Machine (ATM). If we designed its control system using an object-oriented language, one natural architecture would be to have classes representing the cash dispenser, card reader, keyboard, display, and user&rsquo;s bank accounts. Then we might coordinate each of these into a central object, representing the entire ATM.</p>
<p>Unit testing most of these classes would be straightforward, but how do we unit test the ATM class?  It would have dependencies on each of the other classes.  If we used normal instances of those, we&rsquo;d have no idea if the test was failing due to the ATM class or its dependency. This is where <em>mock objects</em> come into play.</p>
<p>We start by replacing each of the dependencies with an interface using the same method signatures, and we pass the dependencies through the ATM constructor.  We make sure our existing classes implement the interface, and pass them into the ATM when we create it.  Thus, this step doesn&rsquo;t change much about how our program operates - we&rsquo;re still using the same classes to do the same things.</p>
<p>But in our unit tests for the <code>ATM</code> class, we can create new classes that implement the interfaces and pass them into the ATM instance we are testing.  These are our <em>mock</em> classes, because they &ldquo;fill in&rdquo; for the real classes.  Typically, a mock class is much simpler than a real class, and exposes information we might need in our test.  For example, our Display class might include a <code>DisplayText</code> method, so have it implement an <code>IDisplay</code> interface that listed <code>DisplayText</code>. Then our <code>MockDisplay</code> class might look like:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">internal</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">MockDisplay</span> :IDisplay
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">string</span> LastTextDisplayed {<span style="color:#66d9ef">get</span>; <span style="color:#66d9ef">set</span>;}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> DisplayText(<span style="color:#66d9ef">string</span> text) 
</span></span><span style="display:flex;"><span>  {
</span></span><span style="display:flex;"><span>    LastTextDisplayed = text;
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>Note that our mock class implements the required method, <code>DisplayText</code>, but in a very different way than a real display would - it just holds onto the string and makes it accessible with a public property. That way, we could check its value in a test:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#a6e22e">[fact]</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> ShouldDisplayGreetingOnStartup()
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  MockDisplay md = <span style="color:#66d9ef">new</span> MockDisplay();
</span></span><span style="display:flex;"><span>  MockKeyboard mk = <span style="color:#66d9ef">new</span> MockKeyboard();
</span></span><span style="display:flex;"><span>  MockCardReader mcr= <span style="color:#66d9ef">new</span> MockCardReader();
</span></span><span style="display:flex;"><span>  MockCashDispenser mcd = <span style="color:#66d9ef">new</span> MockCashDispenser();
</span></span><span style="display:flex;"><span>  Atm atm = <span style="color:#66d9ef">new</span> Atm(md, mk, mcr, mcd);
</span></span><span style="display:flex;"><span>  Assert.Equal(<span style="color:#e6db74">&#34;Hello ATM!&#34;</span>, md.LastTextDisplayed);
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>Given our knowledge of C#, the only way <code>md.LastTextDisplayed</code> would be the string specified was if the <code>ATM</code> class asked it to display the message when it was constructed. Thus, we know it will do the same with the real <code>DisplayScreen</code> class.  And if we have also thoroughly unit tested the <code>DisplayScreen</code> class, then we have a strong basis for believing our system is built correctly.</p>
<p>This approach also allows us to test things that would normally be very difficult to - for example, we can write a method to have a <code>MockCardReader</code> trigger a <code>CardInserted</code> event:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">internal</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">MockCardReader</span> : ICardReader 
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">event</span> EventHandler&lt;CardInsertedEventArgs&gt; CardInserted;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> TriggerCardInserted()
</span></span><span style="display:flex;"><span>  {
</span></span><span style="display:flex;"><span>    CardInserted.Invoke(<span style="color:#66d9ef">this</span>, <span style="color:#66d9ef">new</span> CardInsertedEventArgs());
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>Which allows us to check that the ATM prompts a user for a PIN once a card is inserted:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#a6e22e">[Fact]</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> ShouldPromptForPinOnCardInsert()
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  MockDisplay md = <span style="color:#66d9ef">new</span> MockDisplay();
</span></span><span style="display:flex;"><span>  MockKeyboard mk = <span style="color:#66d9ef">new</span> MockKeyboard();
</span></span><span style="display:flex;"><span>  MockCardReader mcr= <span style="color:#66d9ef">new</span> MockCardReader();
</span></span><span style="display:flex;"><span>  MockCashDispenser mcd = <span style="color:#66d9ef">new</span> MockCashDispenser();
</span></span><span style="display:flex;"><span>  Atm atm = <span style="color:#66d9ef">new</span> Atm(md, mk, mcr, mcd);
</span></span><span style="display:flex;"><span>  mcr.TriggerCardInserted();
</span></span><span style="display:flex;"><span>  Assert.Equal(<span style="color:#e6db74">&#34;Please enter your PIN:&#34;</span>, md.LastTextDisplayed);
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>Using mock objects like this can greatly simplify the test-writing process, and improve the quality and robustness of your unit tests.</p>

            <footer class="footline">

            </footer>
          </article>

    
    
          <article class="default">
            <header class="headline">
            </header>
<h1 id="running-tests">Running Tests</h1>

<p>Tests are usually run with a <em>test runner</em>, a program that will execute the test code against the code to be tested.  The exact mechanism involved depends on the testing framework.</p>
<p>The xUnit framework is offered as a set of Nuget packages:</p>
<ul>
<li>The <code>xunit</code> package contains the library code defining the <code>Assertion</code> class as well as the <code>[Fact]</code> and <code>[Test]</code> attributes.</li>
<li>The <code>xunit.runner.visualstudio</code> package contains the actual test runner</li>
</ul>
<p>As with other aspects of the .NET framework, the tools can be used at either the command line, or though Visual Studio integrations.  The <a href="https://xunit.net/docs/getting-started/netcore/cmdline" target="_blank">xunit documentation</a>
 describes the command line approach thoroughly, so we won&rsquo;t belabor it here.  But be aware, if you want to do development in a Linux or Unix environment, you <em>must</em> use the command line, as there is no version of Visual Studio available for those platforms (there is however, a version available for the Mac OS).</p>
<p>When building tests with Visual Studio, you will typically begin by adding an xUnit Test Project to your existing solution.  Using the wizard will automatically incorporate the necessary Nuget packages into the project.  However, you will need to add the project to be tested to the Dependencies list of the test project to give it access to the assembly to be tested.  You do this by right-clicking the &lsquo;Dependencies&rsquo; entry under the Test Project in Visual Studio, choosing &ldquo;Add Project Reference&rdquo;, and in the dialog that pops up, checking the checkbox next to the name of the project you are testing:</p>
<p>
<a href="#image-862d898e1ebe5d168afaf12528f03907" class="lightbox-link">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/1.4.6.1.gif" alt="Adding the project reference" style="height: auto; width: auto;" loading="lazy">
</a>
<a href="javascript:history.back();" class="lightbox" id="image-862d898e1ebe5d168afaf12528f03907">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/1.4.6.1.gif" alt="Adding the project reference" class="lightbox-image" loading="lazy">
</a></p>
<p>To explore and run your tests, you can open the <a href="https://docs.microsoft.com/en-us/visualstudio/test/run-unit-tests-with-test-explorer?view=vs-2019" target="_blank">Test Explorer</a>
 from the &ldquo;Test&rdquo; menu.  If no tests appear, you may need to build the test project. This can be done by right-clicking the test project in the Solution Explorer and selecting &ldquo;Build&rdquo;, or by clicking the &ldquo;Run All&rdquo; button in the Test Explorer.  The &ldquo;Run All&rdquo; button will run every test in the suite.  Alternatively, you can run individual tests by clicking on them, and clicking the &ldquo;Run&rdquo; button.</p>
<p>
<a href="#image-3011bfaecdf9e7b7f9bdf76973f85f46" class="lightbox-link">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/1.4.6.2.png" alt="Run and Run All buttons" style="height: auto; width: auto;" loading="lazy">
</a>
<a href="javascript:history.back();" class="lightbox" id="image-3011bfaecdf9e7b7f9bdf76973f85f46">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/1.4.6.2.png" alt="Run and Run All buttons" class="lightbox-image" loading="lazy">
</a></p>
<p>As tests complete, the will report their status - pass or fail - indicated by a green checkmark or red x next to the test name, as well as the time it took to run the test.  There will also be a summary available with details about any failures that can be accessed by clicking the test name.</p>
<p>
<a href="#image-caa5dcd36df58c98f31fea500538c897" class="lightbox-link">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/1.4.6.3.png" alt="Test Detail Summary" style="height: auto; width: auto;" loading="lazy">
</a>
<a href="javascript:history.back();" class="lightbox" id="image-caa5dcd36df58c98f31fea500538c897">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/1.4.6.3.png" alt="Test Detail Summary" class="lightbox-image" loading="lazy">
</a></p>
<p>Occasionally, your tests may not seem to finish, but get stuck running. If this happens, check the output panel, switching it from &ldquo;build&rdquo; to &ldquo;tests&rdquo;.  Most likely your test process crashed because of an error in your test code, and the output reporting that error will be reported there.</p>
<p>
<a href="#image-c01bb96cf9aae373464b4243102316ae" class="lightbox-link">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/1.4.6.4.png" alt="Test Output in the Output Panel" style="height: auto; width: auto;" loading="lazy">
</a>
<a href="javascript:history.back();" class="lightbox" id="image-c01bb96cf9aae373464b4243102316ae">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/1.4.6.4.png" alt="Test Output in the Output Panel" class="lightbox-image" loading="lazy">
</a></p>
<p>It is a good idea to run tests you&rsquo;ve written previously as you add to or refactor your code.  This practice is known as <em>regression testing</em>, and can help you identify errors your changes introduce that break what had previously been working code.  This is also one of the strongest arguments for writing test code rather than performing ad-hoc testing; automated tests are easy to repeat.</p>

            <footer class="footline">

            </footer>
          </article>

    
    
          <article class="default">
            <header class="headline">
            </header>
<h1 id="summary">Summary</h1>

<p>In this chapter we learned about testing, both manually using test plans and automatically using a testing framework. We saw how the cost of fixing errors rises exponentially with how long they go undiscovered. We discussed how writing automated tests during the programming phase can help uncover these errors earlier, and how regression testing can help us find new errors introduced while adding to our programs.</p>
<p>We learned how to use xUnit and Visual Studio&rsquo;s Test Explorer to write and run tests on .NET programs.  We explored a good chunk of xUnit&rsquo;s assertion library.  We saw how to get Visual Studio to analyze our tests for code coverage, discussed this metric&rsquo;s value to evaluate our tests.  We also explored mutation testing, and saw how it can help improve our tests.</p>
<p>As you move forward as a software developer, you&rsquo;ll want to incorporate testing into your code-writing efforts.</p>

            <footer class="footline">

            </footer>
          </article>

    
    
          <article class="default">
            <header class="headline">
            </header>
<h1 id="test-code-coverage">Test Code Coverage</h1>

<p>The term <em>test code coverage</em> refers to how much of your program&rsquo;s code is executed as your tests run. It is a useful metric for evaluating the <em>depth</em> of your test, if not necessarily the quality.  Basically, if your code is not executed in the test framework, it is not tested in any way. If it is executed, then at least <em>some</em> tests are looking at it.  So aiming for a high code coverage is a good starting point for writing tests.</p>
<p>Much like Visual Studio provides a Test Explorer for running tests, it provides support for analyzing test coverage.  We can access this from the &ldquo;Test&rdquo; menu, where we select the &ldquo;Analyze Code Coverage for All Tests&rdquo;.</p>
<p>
<a href="#image-fe1f8720f05713cd2f18c084b510396f" class="lightbox-link">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/1.4.7.1.png" alt="Code coverage command in the Test Menu" style="height: auto; width: auto;" loading="lazy">
</a>
<a href="javascript:history.back();" class="lightbox" id="image-fe1f8720f05713cd2f18c084b510396f">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/1.4.7.1.png" alt="Code coverage command in the Test Menu" class="lightbox-image" loading="lazy">
</a></p>
<p>This will build and run all our tests, and as they run it will collect data about how many blocks of code are or are not executed.  The results appear in the Code Coverage Results panel:</p>
<p>
<a href="#image-b7d98ceeb91d3abee7a14b380962dd58" class="lightbox-link">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/1.4.7.2.png" alt="Code Coverage results panel" style="height: auto; width: auto;" loading="lazy">
</a>
<a href="javascript:history.back();" class="lightbox" id="image-b7d98ceeb91d3abee7a14b380962dd58">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/1.4.7.2.png" alt="Code Coverage results panel" class="lightbox-image" loading="lazy">
</a></p>
<p>Be aware that there will always be some blocks that are not picked up in this analysis, so it is typical to shoot for a high percentage.</p>
<p>While test code coverage is a good starting point for evaluating your tests, it is simply a measure of quantity, not quality. It is easily possible for you to have all of your code covered by tests, but still miss errors.  You need to carefully consider the edge cases - those unexpected and unanticipated ways your code might end up being used.</p>

            <footer class="footline">

            </footer>
          </article>

    
    
          <article class="default">
            <header class="headline">
            </header>
<h1 id="mutation-testing">Mutation Testing</h1>

<p>At this point you may be asking how to determine if your tests are good.  Mutation testing is one way of evaluating the quality of your tests.  Effectively, mutation testing is a strategy that <em>mutates</em> your program, and then runs your tests.  If the test fails against the mutated code, this suggests your test is good.</p>
<p>As a simplistic example, take this extremely simple class:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> Doll
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">string</span> Name {<span style="color:#66d9ef">get</span>;} = <span style="color:#e6db74">&#34;Molly&#34;</span>;
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>A mutation might change it to:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> Doll
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">string</span> Name {<span style="color:#66d9ef">get</span>;} = <span style="color:#e6db74">&#34;Mollycoddle&#34;</span>;
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>We would expect that the test <code>TheDollsNameIsAlwaysMolly</code> would fail due to this mutation.  If it doesn&rsquo;t, we probably need to revisit our test.  Here is an example of a test that would both normally pass, and pass with this mutation.  See if you can spot the problem:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#a6e22e">[Fact]</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> TheDollsNameIsAlwaysMolly()
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  Doll doll = <span style="color:#66d9ef">new</span> Doll();
</span></span><span style="display:flex;"><span>  Assert.Contains(doll.Name, <span style="color:#e6db74">&#34;Molly&#34;</span>);
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>Mutation testing is done by a special testing tool that uses reflection to understand and alter the classes being tested in your unit tests.  In C#, we use <a href="https://stryker-mutator.io/docs/stryker-net/introduction/" target="_blank">Stryker.NET</a>
.</p>
<p>As with code coverage, mutation testing can&rsquo;t provide all the answers.  But it does help ensure that our programs and the tests we write of them are more robust.</p>

            <footer class="footline">

            </footer>
          </article>

          </section>
    
    
          <article class="chapter">
            <header class="headline">
            </header>


<div class="article-subheading">Chapter 5</div>
<h1 id="uml">UML</h1>

<p>The Standard Model of Object-Orientation</p>

            <footer class="footline">

            </footer>
          </article>

          <section>
            <h1 class="a11y-only">Subsections of UML</h1>
    
    
          <article class="default">
            <header class="headline">
            </header>
<h1 id="introduction">Introduction</h1>

<p>As software systems became more complex, it became harder to talk and reason about them.  Unified Modeling Language (UML) attempted to correct for this by providing a <em>visual, diagrammatic</em> approach to communicate the structure and function of a program.  If a picture is worth a thousand words, a UML diagram might be worth a thousand lines of code&hellip;</p>
<h2 id="key-terms">Key Terms</h2>
<p>Some key terms to learn in this chapter are:</p>
<ul>
<li>Unified Modeling Language</li>
<li>Class Diagrams</li>
<li>Typed Elements</li>
<li>Constraints</li>
<li>Stereotypes</li>
<li>Attributes</li>
<li>Operations</li>
<li>Association</li>
<li>Generalization</li>
<li>Realization</li>
<li>Composition</li>
<li>Aggregation</li>
</ul>
<h2 id="key-skills">Key Skills</h2>
<p>The key skill to learn in this chapter is how to draw UML class diagrams.</p>

            <footer class="footline">

            </footer>
          </article>

    
    
          <article class="default">
            <header class="headline">
            </header>
<h1 id="uml">UML</h1>

<p><a href="https://www.uml.org/" target="_blank">Unified Modeling Language (UML)</a>
 was introduced to create a standardized way of visualizing a software system design.  It was developed by Grady Booch, Ivar Jacobson, and James Rumbah at Rational Software in the mid-nineties.  It was adopted as a standard by the Object Management Group in 1997, and also by the International Organization for Standardization (ISO) as an approved ISO standard in 2005.</p>
<p>The UML standard actually provides many different kinds of diagrams for describing a software system - both structure and behavior:</p>
<ul>
<li><strong>Class Diagram</strong> A class diagram visualizes the structure of the classes in the software, and the relationships between these classes.</li>
<li><strong>Component Diagram</strong> A component diagram visualizes how the software system is broken into <em>components</em>, and how communication between those components is achieved.</li>
<li><strong>Activity Diagram</strong> An activity diagram represents workflows in a step-by-step process for actions.  It is used to model data flow in a software system.</li>
<li><strong>Use-Case Diagram</strong> A use-case diagram identifies the kinds of users a software system will have, and how they work with the software.</li>
<li><strong>Sequence Diagram</strong> A sequence diagram shows object interactions arranged in chronological sequences.</li>
<li><strong>Communication Diagram</strong> A communication diagram models the interactions between objects in terms of sequences of messages.</li>
</ul>
<p>The <a href="https://www.omg.org/spec/UML/2.5.1/PDF" target="_blank">full UML specification</a>
 is <em>754 pages long</em>, so there is a <em>lot</em> of information packed into it.  For the purposes of this class, we&rsquo;re focusing on a single kind of diagram - the <em>class diagram</em>.</p>

            <footer class="footline">

            </footer>
          </article>

    
    
          <article class="default">
            <header class="headline">
            </header>
<h1 id="boxes">Boxes</h1>

<p>UML class diagrams are largely composed of <em>boxes</em> - basically a rectangular border containing text. UML class diagrams use boxes to represent units of code - i.e. classes, structs, and enumerations.  These boxes are broken into compartments.  For example, an <code>Enum</code> is broken into two compartments:</p>
<p>
<a href="#image-a53bee037872e4dc9817998d8f31be7c" class="lightbox-link">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/5.3.1.png" alt="A UML Enum representation" style="height: auto; width: auto;" loading="lazy">
</a>
<a href="javascript:history.back();" class="lightbox" id="image-a53bee037872e4dc9817998d8f31be7c">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/5.3.1.png" alt="A UML Enum representation" class="lightbox-image" loading="lazy">
</a></p>
<h3 id="stereotypes">Stereotypes</h3>
<p>UML is intended to be language-agnostic.  But we often find ourselves in situations where we want to convey language-specific ideas, and the UML specification leaves room for this with  <em>stereotypes</em>. Stereotypes consist of text enclosed in double less than and greater than symbols.  In the example above, we indicate the box represents an enumeration with the 
<span class="math align-center">$ \texttt{&lt&ltenum&gt;&gt;}$</span> stereotype.</p>

            <footer class="footline">

            </footer>
          </article>

    
    
          <article class="default">
            <header class="headline">
            </header>
<h1 id="typed-elements">Typed Elements</h1>

<p>A second basic building block for UML diagrams is a <em>typed element</em>.  Typed elements (as you might expect from the name) have a <em>type</em>.  Fields and parameters are typed elements, as are method parameters and return values.</p>
<p>The pattern for defining a typed element is:</p>

<span class="math align-center">$$
\texttt{[visibility] element : type [constraint]} 
$$</span><p>The optional 
<span class="math align-center">$\texttt{[visibility]}$</span> indicates the visibility of the element, the 
<span class="math align-center">$\texttt{element}$</span> is the name of the typed element, and the 
<span class="math align-center">$\texttt{type}$</span> is its type, and the 
<span class="math align-center">$\texttt{[constraint]}$</span> is an optional constraint.</p>
<h3 id="visibility">Visibility</h3>
<p>In UML <em>visibility</em> (what we would call access level in C#) is indicated with symbols, i.e.:</p>
<ul>
<li>
<span class="math align-center">$\texttt{+}$</span> indicates <code>public</code></li>
<li>
<span class="math align-center">$\texttt{-}$</span> indicates <code>private</code></li>
<li>
<span class="math align-center">$\texttt{#}$</span> indicates <code>protected</code></li>
</ul>
<p>I.e. the field:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">protected</span> <span style="color:#66d9ef">int</span> Size;</span></span></code></pre></div><p>Would be expressed:</p>

<span class="math align-center">$$
\texttt{# Size : int}
$$</span><h3 id="constraints">Constraints</h3>
<p>A typed element can include a <em>constraint</em> indicating some restriction for the element.  The constraints are contained in a pair of curly braces after the typed element, and follow the pattern:</p>

<span class="math align-center">$$
\texttt{ {element: boolean expression} }
$$</span><p>For example:</p>

<span class="math align-center">$$
\texttt{- age: int {age: >= 0}}
$$</span><p>Indicates the private variable <code>age</code> must be greater than or equal to 0.</p>

            <footer class="footline">

            </footer>
          </article>

    
    
          <article class="default">
            <header class="headline">
            </header>
<h1 id="classes">Classes</h1>

<p>In a UML class diagram, individual classes are represented with a box divided into three compartments, each of which is for displaying specific information:</p>
<p>
<a href="#image-e52f2f8c324ed8f176ee3b39bc078672" class="lightbox-link">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/5.5.1.png" alt="Class Diagram example" style="height: auto; width: auto;" loading="lazy">
</a>
<a href="javascript:history.back();" class="lightbox" id="image-e52f2f8c324ed8f176ee3b39bc078672">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/5.5.1.png" alt="Class Diagram example" class="lightbox-image" loading="lazy">
</a></p>
<p>The first compartment identifies the class - it contains the name of the class. The second compartment holds the <em>attributes</em> of the class (in C#, these are the <em>fields</em> and <em>properties</em>).  And the third compartment holds the <em>operations</em> of the class (in C#, these are the <em>methods</em>).</p>
<p>In the diagram above, we can see the <code>Fruit</code> class modeled on the right side.</p>
<h3 id="attributes">Attributes</h3>
<p>The <em>attributes</em> in UML represent the <em>state</em> of an object.  For C#, this would correspond to the <em>fields</em> and <em>properties</em> of the class.</p>
<p>We indicate fields with a typed element, i.e. in the example above, the <code>blended</code> field is represented with:</p>

<span class="math align-center">$$
\texttt{-blended:bool}
$$ </span><p>Indicating it should be declared <code>private</code> with the type <code>bool</code>.</p>
<p>For properties, we add a stereotype containing either <code>get</code>, <code>set</code>, or both.  I.e. if we were to expose the private field bool with a public accessor, we would add a line to our class diagram with:</p>

<span class="math align-center">$$
\texttt{+Blended:bool&lt;&lt;get,set&gt;&gt;}
$$</span>
  
  
<div class="box notices cstyle info">
  <div class="box-label"><i class="fa-fw fas fa-info-circle"></i> Info</div>
  <div class="box-content">

<p>In C#, properties are technically methods.  But we use the same syntax to utilize them as we do fields, and they serve the same role - to expose aspects of the class state. So for the purposes of this class we&rsquo;ll classify them as attributes.</p>
</div>
</div>
<h3 id="operators">Operators</h3>
<p>The <em>operators</em> in UML represent the <em>behavior</em> of the object, i.e. the <em>methods</em> we can invoke upon it.  These are declared using the pattern:</p>

<span class="math align-center">$$ 
\texttt{visibility name([parameter list])[:return type]}
$$</span><p>The 
<span class="math align-center">$\texttt{[visibility]}$</span> uses the same symbols as typed elements, with the same correspondences. The 
<span class="math align-center">$\texttt{name}$ </span> is the name of the method, and the 
<span class="math align-center">$\texttt{[parameter list]}$</span> is a comma-separated list of typed elements, corresponding to the parameters.  The 
<span class="math align-center">$\texttt{[:return type]}$</span> indicates the return type for the method (it can be omitted for void).</p>
<p>Thus, in the example above, the protected method <code>Blend</code> has no parameters and returns a string.  Similarly, the method:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">int</span> Add(<span style="color:#66d9ef">int</span> a, <span style="color:#66d9ef">int</span> b)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> a + b;
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>Would be expressed:</p>

<span class="math align-center">$$
\texttt{+Add(a:int, b:int):int}
$$</span><h2 id="static-and-abstract">Static and Abstract</h2>
<p>In UML, we indicate a class is static by <em>underlining</em> its name in the first compartment of the class diagram.  We can similarly indicate static operators and methods is static by underlining the entire line referring to them.</p>
<p>To indicate a class is abstract, we <em>italicize</em> its name.  Abstract methods are also indicated by italicizing the entire line referring to them.</p>

            <footer class="footline">

            </footer>
          </article>

    
    
          <article class="default">
            <header class="headline">
            </header>
<h1 id="associations">Associations</h1>

<p>Class diagrams also express the associations <em>between</em> classes by drawing lines between the boxes representing them.</p>
<p>
<a href="#image-70c053350cd281672157353591a741d1" class="lightbox-link">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/5.6.1.png" alt="UML Association" style="height: auto; width: auto;" loading="lazy">
</a>
<a href="javascript:history.back();" class="lightbox" id="image-70c053350cd281672157353591a741d1">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/5.6.1.png" alt="UML Association" class="lightbox-image" loading="lazy">
</a></p>
<p>There are two basic types of associations we model with UML: <strong>has-a</strong> and <strong>is-a</strong> associations.  We break these into two further categories, based on the strength of the association, which is either <strong>strong</strong> or <strong>weak</strong>.  These associations are:</p>
<table>
  <tr>
    <th>Association Name</th>
    <th>Association Type</th>
  </tr>
  <tr>
    <td>Realization</td>
    <td>weak is-a</td>
  </tr>
  <tr>
    <td>Generalization</td>
    <td>strong is-a</td>
  </tr>
  <tr>
    <td>Aggregation</td>
    <td>weak has-a</td>
  </tr>
  <tr>
    <td>Composition</td>
    <td>strong has-a</td>
  </tr>
</table>
<h2 id="is-a-associations">Is-A Associations</h2>
<p>Is-a associations indicate a relationship where one class <strong>is a</strong> instance of another class.  Thus, these associations represent <em>polymorphism</em>, where a class can be treated as another class, i.e. it has both its own, and the associated classes&rsquo; <em>types</em>.</p>
<h3 id="realization-weak-is-a">Realization (Weak is-a)</h3>
<p>Realization refers to making an interface &ldquo;real&rdquo; by implementing the methods it defines.  For C#, this corresponds to a class that is implementing an <code>Interface</code>. We call this a <strong>is-a</strong> relationship, because the class is treated as being the type of the <code>Interface</code>.  It is also a <strong>weak</strong> relationship as the same interface can be implemented by otherwise unrelated classes.  In UML, realization is indicated by a dashed arrow in the direction of implementation:</p>
<p>
<a href="#image-6f156a790e006c306b26226c7ee240b2" class="lightbox-link">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/5.6.2.png" alt="Realization in UML" style="height: auto; width: auto;" loading="lazy">
</a>
<a href="javascript:history.back();" class="lightbox" id="image-6f156a790e006c306b26226c7ee240b2">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/5.6.2.png" alt="Realization in UML" class="lightbox-image" loading="lazy">
</a></p>
<h3 id="generalization">Generalization</h3>
<p>Generalization refers to extracting the shared parts from different classes to make a <em>general</em> base class of what they have in common.  For C# this corresponds to <em>inheritance</em>.  We call this a <strong>strong is-a</strong> relationship, because the class has all the same state and behavior as the base class.  In UML, generalization is indicated by a solid arrow in the direction of inheritance:</p>
<p>
<a href="#image-a45e8b0f727a7ad4627a6db02e2e4d84" class="lightbox-link">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/5.6.3.png" alt="Generalization in UML" style="height: auto; width: auto;" loading="lazy">
</a>
<a href="javascript:history.back();" class="lightbox" id="image-a45e8b0f727a7ad4627a6db02e2e4d84">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/5.6.3.png" alt="Generalization in UML" class="lightbox-image" loading="lazy">
</a></p>
<p>Also notice that we show that <code>Fruit</code> and its <code>Blend()</code> method are abstract by italicizing them.</p>
<h2 id="has-a-associations">Has-A Associations</h2>
<p>Has-a associations indicates that a class holds one or more references to instances of another class.   In C#, this corresponds to having a variable or collection with the type of the associated class. This is true for both kinds of has-a associations.  The difference between the two is how strong the association is.</p>
<h3 id="aggregation">Aggregation</h3>
<p>Aggregation refers to collecting references to other classes.   As the aggregating class has references to the other classes, we call this a <strong>has-a</strong> relationship.  It is considered <strong>weak</strong> because the aggregated classes are only collected by the aggregating class, and can exist on their own.  It is indicated in UML by a solid line from the aggregating class to the one it aggregates, with an open diamond &ldquo;fletching&rdquo; on the opposite site of the arrow (the arrowhead is optional).</p>
<p>
<a href="#image-84a8147154c52ecc6377f9475ffb0198" class="lightbox-link">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/5.6.4.png" alt="Aggregation in UML" style="height: auto; width: auto;" loading="lazy">
</a>
<a href="javascript:history.back();" class="lightbox" id="image-84a8147154c52ecc6377f9475ffb0198">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/5.6.4.png" alt="Aggregation in UML" class="lightbox-image" loading="lazy">
</a></p>
<h3 id="composition">Composition</h3>
<p>Composition refers to assembling a class from other classes, &ldquo;composing&rdquo; it.  As the composed class has references to the other classes, we call this a <strong>has-a</strong> relationship.  However, the composing class typically <em>creates</em> the instances of the classes composing it, and they are likewise destroyed when the composing class is destroyed.  For this reason, we call it a <strong>strong</strong> relationship.  It is indicated in UML by a solid line from the composing class to those it is composed of, with a solid diamond &ldquo;fletching&rdquo; on the opposite side of the arrow (the arrowhead is optional).</p>
<p>
<a href="#image-c96e8814d5f65733e1112a90f33d6fce" class="lightbox-link">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/5.6.5.png" alt="Composition in UML" style="height: auto; width: auto;" loading="lazy">
</a>
<a href="javascript:history.back();" class="lightbox" id="image-c96e8814d5f65733e1112a90f33d6fce">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/5.6.5.png" alt="Composition in UML" class="lightbox-image" loading="lazy">
</a></p>

  
  
<div class="box notices cstyle info">
  <div class="box-label"><i class="fa-fw fas fa-info-circle"></i> Info</div>
  <div class="box-content">

<p>Aggregation and composition are commonly confused, especially given they both are defined by holding a variable or collection of another class type.  An analogy I like to use to help students reason about the difference is this:</p>
<p>Aggregation is like a shopping cart.  When you go shopping, you place groceries into the shopping cart, and it holds them as you push it around the store.  Thus, a <code>ShoppingCart</code> class might have a <code>List&lt;Grocery&gt;</code> named <code>Contents</code>, and you would add the items to it.  When you reach the checkout, you would then take the items back out.  The individual <code>Grocery</code> objects existed <em>before</em> they were aggregated by the <code>ShoppingCart</code>, and also <em>after</em> they were removed from it.</p>
<p>In contrast, Composition is like an organism.  Say we create a class representing a <code>Dog</code>.  It might be composed of classes like <code>Tongue</code>, <code>Ear</code>, <code>Leg</code>, and <code>Tail</code>.  We would probably construct these in the <code>Dog</code> class&rsquo;s constructor, and when we dispose of the <code>Dog</code> object, we wouldn&rsquo;t expect these component classes to stick around.</p>
</div>
</div>
<h2 id="multiplicity">Multiplicity</h2>
<p>With aggregation and composition, we may also place numbers on either end of the association, indicating the number of objects involved.  We call these numbers the <em>multiplicity</em> of the association.</p>
<p>
<a href="#image-190f299d835b09c6b977b4b106c627d3" class="lightbox-link">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/5.6.5.png" alt="Composition in UML" style="height: auto; width: auto;" loading="lazy">
</a>
<a href="javascript:history.back();" class="lightbox" id="image-190f299d835b09c6b977b4b106c627d3">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/5.6.5.png" alt="Composition in UML" class="lightbox-image" loading="lazy">
</a></p>
<p>For example, the <code>Frog</code> class in the composition example has two instances of front and rear legs, so we indicate that each <code>Frog</code> instance (by a <code>1</code> on the Frog side of the association) has exactly two (by the <code>2</code> on the leg side of the association) legs.  The tongue has a <code>1</code> to <code>1</code> multiplicity as each frog has one tongue.</p>
<p>
<a href="#image-6b95d26fcb0a8930376a25fc99f0a388" class="lightbox-link">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/5.6.4.png" alt="Aggregation in UML" style="height: auto; width: auto;" loading="lazy">
</a>
<a href="javascript:history.back();" class="lightbox" id="image-6b95d26fcb0a8930376a25fc99f0a388">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/5.6.4.png" alt="Aggregation in UML" class="lightbox-image" loading="lazy">
</a></p>
<p>Multiplicities can also be represented as a range (indicated by the start and end of the range separated by <code>..</code>).  We see this in the <code>ShoppingCart</code> example above, where the count of <code>GroceryItems</code> in the cart ranges from 0 to infinity (infinity is indicated by an asterisk <code>*</code>).</p>
<p>Generalization and realization are always one-to-one multiplicities, so multiplicities are typically omitted for these associations.</p>

            <footer class="footline">

            </footer>
          </article>

    
    
          <article class="default">
            <header class="headline">
            </header>
<h1 id="visio">Visio</h1>

<p>One of the many tools we can use to create UML diagrams is Microsoft Visio.  For Kansas State University Computer Science students, this can be downloaded through your <a href="https://support.cs.ksu.edu/CISDocs/wiki/FAQ#MSDNAA" target="_blank">Azure Student Portal</a>
.</p>
<p>Visio is a vector graphics editor for creating flowcharts and diagrams.  it comes preloaded with a UML class diagram template, which can be selected when creating a new file:</p>
<p>
<a href="#image-81eb25cdc4d4c05c6b2ac2252b02265a" class="lightbox-link">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/5.7.1.png" alt="UML Class Diagram Template" style="height: auto; width: auto;" loading="lazy">
</a>
<a href="javascript:history.back();" class="lightbox" id="image-81eb25cdc4d4c05c6b2ac2252b02265a">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/5.7.1.png" alt="UML Class Diagram Template" class="lightbox-image" loading="lazy">
</a></p>
<p>Class diagrams are built by dragging shapes from the shape toolbox onto the drawing surface.  Notice that the shapes include classes, interfaces, enumerations, and all the associations we have discussed. Once in the drawing surface, these can be resized and edited.</p>
<p>
<a href="#image-68d1e55e104001740f9c2e802c641018" class="lightbox-link">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/5.7.2.gif" alt="Dragging Shapes" style="height: auto; width: auto;" loading="lazy">
</a>
<a href="javascript:history.back();" class="lightbox" id="image-68d1e55e104001740f9c2e802c641018">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/5.7.2.gif" alt="Dragging Shapes" class="lightbox-image" loading="lazy">
</a></p>
<p>Right-clicking on an association will open a context menu, allowing you to turn on multiplicities.  These can be edited by double-clicking on them.  Unneeded multiplicities can be deleted.</p>
<p>
<a href="#image-fb3996e034f427fb3b61a5dd29b3a90d" class="lightbox-link">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/5.7.3.gif" alt="Setting Multiplicities" style="height: auto; width: auto;" loading="lazy">
</a>
<a href="javascript:history.back();" class="lightbox" id="image-fb3996e034f427fb3b61a5dd29b3a90d">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/5.7.3.gif" alt="Setting Multiplicities" class="lightbox-image" loading="lazy">
</a></p>
<p>To export a Visio project in PDF or other form, choose the &ldquo;Export&rdquo; option from the file menu.</p>

            <footer class="footline">

            </footer>
          </article>

    
    
          <article class="default">
            <header class="headline">
            </header>
<h1 id="summary">Summary</h1>

<p>In this section, we learned about UML class diagrams, a language-agnostic approach to visualizing the structure of an object-oriented software system.  We saw how individual classes are represented by boxes divided into three compartments; the first for the identity of the class, the second for its attributes, and the third for its operators. We learned that italics are used to indicate abstract classes and operators, and underlining static classes, attributes, and operators.</p>
<p>We also saw how associations between classes can be represented by arrows with specific characteristics, and examined four of these in detail: aggregation, composition, generalization, and realization.  We also learned how multiplicities can show the number of instances involved in these associations.</p>
<p>Finally, we saw how C# classes, interfaces, and enumerations are modeled using UML.  We saw how the stereotype can be used to indicate language-specific features like C# properties.  We also looked at creating UML Class diagrams using Microsoft Visio.</p>

            <footer class="footline">

            </footer>
          </article>

          </section>
    
    
          <article class="chapter">
            <header class="headline">
            </header>


<div class="article-subheading">Chapter 6</div>
<h1 id="advanced-c">Advanced C#</h1>

<p>For a Sharper Language</p>

            <footer class="footline">

            </footer>
          </article>

          <section>
            <h1 class="a11y-only">Subsections of Advanced C#</h1>
    
    
          <article class="default">
            <header class="headline">
            </header>
<h1 id="introduction">Introduction</h1>

<p>Throughout the earlier chapters, we&rsquo;ve focused on the theoretical aspects of Object-Orientation, and discussed how those are embodied in the C# language.  Before we close this section though, it would be a good idea to recognize that C# is not <em>just</em> an object-oriented language, but actually draws upon many ideas and syntax approaches that are not very object-oriented at all!</p>
<p>In this chapter, we&rsquo;ll examine many aspects of C# that fall outside of the object-oriented mold. Understanding how and why these constructs have entered C# will help make you a better .NET programmer, and hopefully alleviate any confusion you might have.</p>
<h2 id="key-terms">Key Terms</h2>
<p>Some key terms to learn in this chapter are:</p>
<ul>
<li>Production Languages</li>
<li>The <code>static</code> keyword</li>
<li>Generics</li>
<li>Nullables</li>
<li>Anonymous Types</li>
<li>Lambda Syntax</li>
<li>Pattern Matching</li>
</ul>

            <footer class="footline">

            </footer>
          </article>

    
    
          <article class="default">
            <header class="headline">
            </header>
<h1 id="production-languages">Production Languages</h1>

<p>It is important to understand that C# is a <em>production</em> language - i.e. one intended to be used to create real-world software.  To support this goal, the developers of the C# language have made many efforts to make C# code easier to write, read, and reason about.  Each new version of C# has added additional syntax and features to make the language more powerful and easier to use.  In some cases, these are entirely new things the language couldn&rsquo;t do previously, and in others they are <em>syntactic sugar</em> - a kind of abbreviation of an existing syntax.  Consider the following <code>if</code> statement:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">if</span>(someTestFlag) 
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    DoThing();
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">else</span> 
</span></span><span style="display:flex;"><span>{ 
</span></span><span style="display:flex;"><span>    DoOtherThing();
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>As the branches only execute a single expression each, this can be abbreviated as:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">if</span>(someTestFlag) DoThing();
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">else</span> DoOtherThing();</span></span></code></pre></div><p>Similarly, Visual Studio has evolved side-by-side with the language.  For example, you have probably come to like <em>Intellisense</em> - Visual Studio&rsquo;s ability to offer descriptions of classes and methods as you type them, as well as <em>code completion</em>, where it offers to complete the statement you have been typing with a likely target.  As we mentioned in our section on learning programming, these powerful features can be great for a professional, but can interfere with a novice programmer&rsquo;s learning.</p>
<p>Let&rsquo;s take a look at some of the features of C# that we haven&rsquo;t examined in detail yet.</p>

            <footer class="footline">

            </footer>
          </article>

    
    
          <article class="default">
            <header class="headline">
            </header>
<h1 id="the-static-keyword">The static Keyword</h1>

<p>To start, let&rsquo;s revisit one more keyword that causes a lot of confusion for new programmers, <code>static</code>.  We mentioned it briefly when talking about encapsulation and modules, and said we could mimic a module in C# with a static class.  We offered this example:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// A library of vector math functions</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">VectorMath</span>
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// Computes the dot product of two vectors </span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">double</span> DotProduct(Vector3 a, Vector3 b) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> a.x * b.x + a.y * b.y + a.z * b.z;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// Computes the magnitude of a vector</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">double</span> Magnitude(Vector3 a) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> Math.Sqrt(Math.Pow(a.x, <span style="color:#ae81ff">2</span>) + Math.Pow(a.y, <span style="color:#ae81ff">2</span>) + Math.Pow(a.z, <span style="color:#ae81ff">2</span>));
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>You&rsquo;ve probably worked with the C# <code>Math</code> class before, which is declared the same way - as a static class containing static methods.  For example, to compute 8 cubed, you might have used:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>Math.Pow(<span style="color:#ae81ff">8</span>, <span style="color:#ae81ff">3</span>);</span></span></code></pre></div><p>Notice how we didn&rsquo;t construct an object from the <code>Math</code> class?  In C# we <em>cannot construct static classes</em> - they simply exist as a container for static fields and methods.  If you&rsquo;re thinking that doesn&rsquo;t sound very object-oriented, you&rsquo;re absolutely right.  The <code>static</code> keyword allows for some very non-object-oriented behavior more in line with imperative languages like C.  Bringing the idea of <code>static</code> classes into C# let programmers with an imperative background use similar techniques to what they were used to, which is why <code>static</code> classes have been a part of C# from the beginning.</p>
<h3 id="static-methods-in-regular-classes">Static Methods in Regular Classes</h3>
<p>You can also create <code>static</code> methods within a non-static class.  For example, we could refactor our <code>Vector3</code> class to add a static <code>DotProduct()</code> within it:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">struct</span> <span style="color:#a6e22e">Vector3</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">double</span> X {<span style="color:#66d9ef">get</span>; <span style="color:#66d9ef">set</span>;}
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">double</span> Y {<span style="color:#66d9ef">get</span>; <span style="color:#66d9ef">set</span>;}
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">double</span> Z {<span style="color:#66d9ef">get</span>; <span style="color:#66d9ef">set</span>;}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt; </span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// Creates a new Vector3 object</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> Vector3(<span style="color:#66d9ef">double</span> x, <span style="color:#66d9ef">double</span> y, <span style="color:#66d9ef">double</span> z) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">this</span>.X = x;
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">this</span>.Y = y;
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">this</span>.Z = z;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// Computes the dot product of this vector and another one </span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;param name=&#34;other&#34;&gt;The other vector&lt;/param&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">double</span> DotProduct(Vector3 other) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">this</span>.X * other.X + <span style="color:#66d9ef">this</span>.Y * other.Y + <span style="color:#66d9ef">this</span>.Z * other.Z;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// Computes the dot product of two vectors </span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;param name=&#34;a&#34;&gt;The first vector&lt;param&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;param name=&#34;b&#34;&gt;The second vector&lt;/param&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> DotProduct(Vector3 a, Vector3 b)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> a.DotProduct(b);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>This method would be invoked like any other <code>static</code> method, i.e.:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>Vector3 a = <span style="color:#66d9ef">new</span> Vector3(<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">3</span>,<span style="color:#ae81ff">4</span>);
</span></span><span style="display:flex;"><span>Vector3 b = <span style="color:#66d9ef">new</span> Vector3(<span style="color:#ae81ff">4</span>,<span style="color:#ae81ff">3</span>,<span style="color:#ae81ff">1</span>);
</span></span><span style="display:flex;"><span>Vector3.DotProduct(a, b);</span></span></code></pre></div><p>You can see we&rsquo;re doing the same thing as the instance method <code>DotProduct(Vector3 other)</code>, but in a library-like way.</p>
<h3 id="static-fields-within-regular-classes">Static Fields Within Regular Classes</h3>
<p>We can also declare fields as <code>static</code>, which has a meaning slightly different than static methods.  Specifically, the field is <em>shared</em> amongst all instances of the class.  Consider the following class:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Tribble</span>
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">int</span> count = <span style="color:#ae81ff">1</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> Tribble() 
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        count *= <span style="color:#ae81ff">2</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">int</span> TotalTribbles
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">get</span> 
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">return</span> count;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>If we create a single Tribble, and then ask how many total Tribbles there are:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">var</span> t = <span style="color:#66d9ef">new</span> Tribble();
</span></span><span style="display:flex;"><span>t.TotalTribbles; <span style="color:#75715e">// expect this to be 2</span></span></span></code></pre></div><p>We would expect the value to be 2, as <code>count</code> was initialized to <code>1</code> and then multiplied by <code>2</code> in the Tribble constructor.  But if we construct <em>two</em> Tribbles:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">var</span> t = <span style="color:#66d9ef">new</span> Tribble();
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">var</span> u = <span style="color:#66d9ef">new</span> Tribble();
</span></span><span style="display:flex;"><span>t.TotalTribbles; <span style="color:#75715e">// will be 4</span>
</span></span><span style="display:flex;"><span>u.TotalTribbles; <span style="color:#75715e">// will be 4</span></span></span></code></pre></div><p>This is because <em>all instances of Tribble share the <code>count</code> field</em>.  So it is initialized to <code>1</code>, multiplied by <code>2</code> when tribble <code>a</code> was constructed, and multiplied by <code>2</code> again when tribble <code>b</code> was constructed.  Hence $1 * 2 * 2 = 4$.  Every additional Tribble we construct will double the total population (which is the trouble with Tribbles).</p>
<h2 id="why-call-this-static">Why Call This Static?</h2>
<p>Which brings us to a point of confusion for most students, <em>why call this static</em>?  After all, doesn&rsquo;t the word <em>static</em> indicate <em>unchanging</em>?</p>
<p>The answer lies in how memory is allocated in a program.  Sometimes we know in advance how much memory we need to hold a variable, i.e. a <code>double</code> in C# requires 64 bits of memory.  We call these types <em>value types</em> in C#, as the value is stored directly in memory where our variable is allocated.  Other types, i.e. a <code>List&lt;T&gt;</code>, we may not know exactly how much memory will be required.  We call these <em>reference</em> types.  Instead of the variable holding a binary value, it holds a binary <em>address</em> to <em>another</em> location in memory where the list data is stored (hence, it is a <em>reference</em>).</p>
<p>When your program runs, it gets assigned a big chunk of memory from the operating system.  Your program is loaded into the first part of this memory, and the remaining memory is used to hold variable values as the program runs.  If you imagine that memory as a long shelf, we put the program instructions and any literal values to the far left of this shelf.  Then, as the program runs and we need to create space for variables, we either put them on the left side or right side of the remaining shelf space.  Value types, which we know will only exist for the duration of their scope (i.e. the method they are defined in) go to the left, and once we&rsquo;ve ended that scope we remove them.  Similarly, the references we create (holding the address of memory of reference types) go on the left.  The <em>data</em> of the reference types however, go on the right, because we don&rsquo;t know when we&rsquo;ll be done with them.</p>
<p>We call the kind of memory allocation that happens on the left <em>static</em>, as we know it should exist as long as the variable is in scope.  Hence, the <code>static</code> keyword.  In lower-level languages like C, we have to manually allocate space for our reference types (hence, not static).  C# is a <em>memory managed</em> language in that we don&rsquo;t need to manually allocate and deallocate space for reference types, but we <em>do</em> allocate space every time we use the <code>new</code> keyword, and the garbage collector frees any space it decides we&rsquo;re done with (because we no longer have references pointing at it).  So pointers <em>do</em> exist in C#, they are just &ldquo;under the hood&rdquo;.</p>
<p>By the way, the left side of the shelf we call the <strong>Stack</strong>, and the right the <strong>Heap</strong>.  This is the source of the name for a <strong>Stack Overflow Exception</strong> - it means your program used up all the available space in the <strong>Stack</strong>, but still needs more.  This is why it typically happens with infinite loops or recursion - they keep allocating variables on the stack until they run out of space.</p>
<p>Memory allocation and pointers is covered in detail in  <strong>CIS 308 - C Language Lab</strong>, and you&rsquo;ll learn more about how programs run and the heap and stack in <strong>CIS 450 - Computer Architecture and Operations</strong>.</p>

            <footer class="footline">

            </footer>
          </article>

    
    
          <article class="default">
            <header class="headline">
            </header>
<h1 id="operator-overloading">Operator Overloading</h1>

<p>C# allows you to override most of the language&rsquo;s operators to provide class-specific functionality.  The user-defined casts <a href="https://ksu-cs-textbooks.github.io/cis400/1-object-orientation/02-polymorphism/05-casting/">we discussed earlier</a>
 are one example of this.</p>
<p>Perhaps the most obvious of these are the arithmetic operators, i.e. <code>+</code>, <code>-</code>, <code>\</code>, <code>*</code>.  Consider our <code>Vector3</code> class we defined earlier.  If we wanted to overload the <code>+</code> operator to allow for vector addition, we could add it to the class definition:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// A class representing a 3-element vector</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Vector3</span> 
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt;The x-coordinate&lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">double</span> X { <span style="color:#66d9ef">get</span>; <span style="color:#66d9ef">set</span>;}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt;The y-coordinate&lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">double</span> Y { <span style="color:#66d9ef">get</span>; <span style="color:#66d9ef">set</span>;}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt;The z-coordinate&lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">double</span> Z { <span style="color:#66d9ef">get</span>; <span style="color:#66d9ef">set</span>;}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// Constructs a new vector</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> Vector3(<span style="color:#66d9ef">double</span> x, <span style="color:#66d9ef">double</span> y, <span style="color:#66d9ef">double</span> z)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        X = x;
</span></span><span style="display:flex;"><span>        Y = y;
</span></span><span style="display:flex;"><span>        Z = z;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// Adds two vectors using vector addition</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> Vector3 <span style="color:#66d9ef">operator</span> +(Vector3 v1, Vector3 v2)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">new</span> Vector3(v1.X + v2.X, v1.Y + v2.Y, v1.Z + v2.Z);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>Note that we have to make the method <code>static</code>, and include the <code>operator</code> keyword, along with the symbol of the operation.  This vector addition we are performing here is also a <em>binary</em> operation (meaning it takes two parameters).  We can also define <em>unary</em> operations, like negation:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#75715e">/// Negates a vector</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> Vector3 <span style="color:#66d9ef">operator</span> -(Vector3 v)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">new</span> Vector3(-v.X, -v.Y, -v.Z);
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>The full list of <a href="https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/operators/operator-overloading#overloadable-operators" target="_blank">overloadable operators is found in the C# documentation</a>
</p>

            <footer class="footline">

            </footer>
          </article>

    
    
          <article class="default">
            <header class="headline">
            </header>
<h1 id="generics">Generics</h1>

<p>Generics expand the type system of C# by allowing classes and structs to be defined with a generic type parameter, which will be instantiated when it is used in code.  This avoids the necessity of writing similar specialized classes that each work with a different data type.  You&rsquo;ve used examples of this extensively in your <em>CIS 300 - Data Structures</em> course.</p>
<p>For example, the generic <code>List&lt;T&gt;</code> can be used to create a list of any type.  If we want a list of integers, we declare it using <code>List&lt;int&gt;</code>, and if we want a list of booleans we declare it using <code>List&lt;bool&gt;</code>.  Both use the same generic list class.</p>
<p>You can declare your own generics as well.  Say you need a binary tree, but want to be able to support different types.  We can declare a generic <code>BinaryTreeNode&lt;T&gt;</code> class:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// A class representing a node in a binary tree </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;typeparam name=&#34;T&#34;&gt;The type to hold in the tree&lt;/typeparam&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">BinaryTreeNode</span>&lt;T&gt; 
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt; </span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// The value held in this node of the tree </span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> T Value { <span style="color:#66d9ef">get</span>; <span style="color:#66d9ef">set</span>; }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt; </span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// The left branch of this node</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> BinaryTreeNode&lt;T&gt; Left { <span style="color:#66d9ef">get</span>; <span style="color:#66d9ef">set</span>; }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt; </span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// The right branch of this node</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> BinaryTreeNode&lt;T&gt; Right { <span style="color:#66d9ef">get</span>; <span style="color:#66d9ef">set</span>; }
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>Note the use of <code>&lt;typeparam&gt;</code> in the XML comments.  You should always document your generic type parameters when using them.</p>

            <footer class="footline">

            </footer>
          </article>

    
    
          <article class="default">
            <header class="headline">
            </header>
<h1 id="nullables">Nullables</h1>

<p>Returning to the distinction between value and reference types, a <em>value</em> type stores its value directly in the variable, while a <em>reference</em> type stores an address to another location in memory that has been allocated to hold the value.  This is why reference types can be <code>null</code> - this indicates they aren&rsquo;t pointing at anything.  In contrast, value types cannot be null - they <em>always</em> contain a value.  However, there are times it would be convenient to have a value type be allowed to be null.</p>
<p>For these circumstances, we can use the <a href="https://docs.microsoft.com/en-us/dotnet/api/system.nullable-1" target="_blank">Nullable<T></a>
 generic type, which allows the variable to represent the same values as before, <em>plus</em> <code>null</code>.  It does this by wrapping the value in a simple structure that stores the value in its <code>Value</code> property, and also has a boolean property for <code>HasValue</code>.  More importantly, it supports explicit casting into the template type, so we can still use it in expressions, i.e.:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>Nullable&lt;<span style="color:#66d9ef">int</span>&gt; a = <span style="color:#ae81ff">5</span>;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">int</span> b = <span style="color:#ae81ff">6</span>;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">int</span> c = (<span style="color:#66d9ef">int</span>)a + b;
</span></span><span style="display:flex;"><span><span style="color:#75715e">// This evaluates to 11.</span></span></span></code></pre></div><p>However, if the value is <code>null</code>, we&rsquo;ll get an <code>InvalidOperationException</code> with the message <em>&ldquo;Nullable object must have a value&rdquo;</em>.</p>
<p>There is also syntactic sugar for declaring nullable types.  We can follow the type with a question mark (<code>?</code>), i.e.:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">int?</span> a = <span style="color:#ae81ff">5</span>;</span></span></code></pre></div><p>Which works the same as <code>Nullable&lt;int&gt; a = 5;</code>, but is less typing.</p>

            <footer class="footline">

            </footer>
          </article>

    
    
          <article class="default">
            <header class="headline">
            </header>
<h1 id="anonymous-types">Anonymous Types</h1>

<p>Another new addition to C# is <a href="https://docs.microsoft.com/en-us/dotnet/csharp/programming-guide/classes-and-structs/anonymous-types" target="_blank">anonymous types</a>
.  These are read-only objects whose type is created by the compiler rather than being defined in code.  They are created using syntax very similar to object initializer syntax.</p>
<p>For example, the line:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">var</span> name = <span style="color:#66d9ef">new</span> { First=<span style="color:#e6db74">&#34;Jack&#34;</span>, Last=<span style="color:#e6db74">&#34;Sprat&#34;</span> };</span></span></code></pre></div><p>Creates an anonymous object with properties <code>First</code> and <code>Last</code> and assigns it to the variable name.  Note we have to use <code>var</code>, because the object does not have a defined type.  Anonymous types are primarily used with LINQ, which we&rsquo;ll cover in the future.</p>

            <footer class="footline">

            </footer>
          </article>

    
    
          <article class="default">
            <header class="headline">
            </header>
<h1 id="lambda-syntax">Lambda Syntax</h1>

<p>The next topic we&rsquo;ll cover is <em>lambda syntax</em>.  You may remember from CIS 115 the <em>Turing Machine</em>, which was Alan Turing&rsquo;s theoretical computer he used to prove a lot of theoretical computer science ideas.  Another mathematician of the day, Alan Church, created his own equivalent of the Turing machine expressed as a formal logic system, <a href="https://en.wikipedia.org/wiki/Lambda_calculus" target="_blank">Lambda calculus</a>
.  Broadly speaking, the two approaches do the same thing, but are expressed very differently - the Turing machine is an (imaginary) hardware-based system, while Lambda Calculus is a formal symbolic system grounded in mathematical logic.  Computer scientists develop familiarity with both conceptions, and some of the most important work in our field is the result of putting them together.</p>
<p>But they do represent two different perspectives, which influenced different programming language paradigms.  The Turing machine you worked with in CIS 115 is very similar to assembly language, and the imperative programming paradigm draws strongly upon this approach.  In contrast, the logical and functional programming paradigms were more influenced by Lambda calculus.  This difference in perspective also appears in how functions are commonly written in these different paradigms.  An imperative language tends to define functions something like:</p>
<div class="wrap-code highlight"><pre tabindex="0"><code>Add(param1, param2)
{
    return param1 + param2;
}</code></pre></div><p>While a functional language might express the same idea as:</p>
<div class="wrap-code highlight"><pre tabindex="0"><code>(param1, param2) =&gt; param1 + param2</code></pre></div><p>This &ldquo;arrow&rdquo; or &ldquo;lambda&rdquo; syntax has since been adopted as an alternative way of writing functions in many modern languages, including C#.  In C#, it is primarily used as syntactic sugar, to replace what would otherwise be a lot of typing to express a simple idea.</p>
<p>Consider the case where we want to search a <code>List&lt;string&gt; AnimalList</code> for a string containing the substring <code>&quot;kitten&quot;</code>.  The <code>List.Find()</code> takes a predicate - a static method that can be invoked to find an item in the list.  We have to define a static method, i.e.:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">private</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">bool</span> FindKittenSubstring(<span style="color:#66d9ef">string</span> fullString)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> fullString.Contains(<span style="color:#e6db74">&#34;kitten&#34;</span>);
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>From this method, we create a predicate:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>Predicate&lt;<span style="color:#66d9ef">string</span>&gt; findKittenPredicate = FindKittenSubstring;</span></span></code></pre></div><p>Then we can pass that predicate into our <code>Find</code>:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">bool</span> containsKitten = AnimalList.Find(findKittenPredicate);</span></span></code></pre></div><p>This is quite a lot of work to express a simple idea.  C# introduced lambda syntax as a way to streamline it.  The same operation using lambda syntax is:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">bool</span> containsKitten = AnimalList.Find((fullString) =&gt; fullString.Contains(<span style="color:#e6db74">&#34;kitten&#34;</span>));</span></span></code></pre></div><p>Much cleaner to write.  The C# compiler is converting this lambda expression into a predicate as it compiles, but we no longer have to write it!  You&rsquo;ll see this syntax in your xUnit tests as well as when we cover LINQ.  It has also been adapted to simplify writing getters and setters.  Consider this case:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Person</span> 
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">string</span> LastName { <span style="color:#66d9ef">get</span>; <span style="color:#66d9ef">set</span>; }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">string</span> FirstName { <span style="color:#66d9ef">get</span>; <span style="color:#66d9ef">set</span>; }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">string</span> FullName 
</span></span><span style="display:flex;"><span>    { 
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">get</span> 
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">return</span> FirstName + <span style="color:#e6db74">&#34; &#34;</span> + LastName;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>We could instead express this as:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Person</span> 
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">string</span> LastName { <span style="color:#66d9ef">get</span>; <span style="color:#66d9ef">set</span>; }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">string</span> FirstName { <span style="color:#66d9ef">get</span>; <span style="color:#66d9ef">set</span>; }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">string</span> FullName =&gt; FirstName + <span style="color:#e6db74">&#34; &#34;</span> + LastName;
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>In fact, all methods that return the result of a single expression can be written this way:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">VectorMath</span>
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">double</span> Add(Vector a, Vector b) =&gt; <span style="color:#66d9ef">new</span> Vector(a.X + b.X, a.Y + b.Y, a.Z + b.Z);
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div>
            <footer class="footline">

            </footer>
          </article>

    
    
          <article class="default">
            <header class="headline">
            </header>
<h1 id="pattern-matching">Pattern Matching</h1>

<p>Pattern matching is another idea common to functional languages that has gradually crept into C#.  Pattern matching refers to extracting information from structured data by matching the shape of that data.</p>
<p>We&rsquo;ve already seen the pattern-matching is operator <a href="https://ksu-cs-textbooks.github.io/cis400/1-object-orientation/02-polymorphism/05-casting/">in our discussion of casting</a>
.  This allows us to extract the <em>cast</em> version of a variable and assign it to a new one:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">if</span>(oldVariable <span style="color:#66d9ef">is</span> SpecificType newVariable)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// within this block newVariable is (SpecificType)oldVariable</span>
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>The <code>switch</code> statement is also an example of pattern matching.  The traditional version only matched constant values, i.e.:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">switch</span>(choice)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">case</span> <span style="color:#e6db74">&#34;1&#34;</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Do something</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">break</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">case</span> <span style="color:#e6db74">&#34;2&#34;</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Do something else</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">break</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">case</span> <span style="color:#e6db74">&#34;3&#34;</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Do a third thing</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">break</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">default</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Do a default action</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">break</span>;
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>However, in C# version 7.0, this has been expanded to also match patterns.  For example, given a <code>Square</code>, <code>Circle</code>, and <code>Rectangle</code>  class that all extend a <code>Shape</code> class, we can write a method to find the area using a switch:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">double</span> ComputeCircumference(Shape shape)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">switch</span>(shape)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">case</span> Square s:
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">4</span> * s.Side;
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">case</span> Circle c:
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">return</span> c.Radius * <span style="color:#ae81ff">2</span> * Math.PI;
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">case</span> Rectangle r:
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">2</span> * r.Length + <span style="color:#ae81ff">2</span> * r.Height;
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">default</span>:
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">throw</span> <span style="color:#66d9ef">new</span> ArgumentException(
</span></span><span style="display:flex;"><span>                message: <span style="color:#e6db74">&#34;shape is not a recognized shape&#34;</span>,
</span></span><span style="display:flex;"><span>                paramName: nameof(shape)
</span></span><span style="display:flex;"><span>            );
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>Note that here we match the type of the <code>shape</code> <em>and</em> cast it to that type making it available in the provided variable, i.e. <code>case Square s:</code> matches if <code>shape</code> can be cast to a <code>Square</code>, and <code>s</code> is the result of that cast operation.</p>
<p>This is further expanded upon with the use of <code>when</code> clauses, i.e. we could add a special case for a circle or square with a circumference of 0:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">double</span> ComputeCircumference(Shape shape)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">switch</span>(shape)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">case</span> Square s when s.Side == <span style="color:#ae81ff">0</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">case</span> Circle c when c.Radius == <span style="color:#ae81ff">0</span>:
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">0</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">case</span> Square s:
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">4</span> * s.Side;
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">case</span> Circle c:
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">return</span> c.Radius * <span style="color:#ae81ff">2</span> * Math.PI;
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">case</span> Rectangle r:
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">2</span> * r.Length + <span style="color:#ae81ff">2</span> * r.Height;
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">default</span>:
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">throw</span> <span style="color:#66d9ef">new</span> ArgumentException(
</span></span><span style="display:flex;"><span>                message: <span style="color:#e6db74">&#34;shape is not a recognized shape&#34;</span>,
</span></span><span style="display:flex;"><span>                paramName: nameof(shape)
</span></span><span style="display:flex;"><span>            );
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>The <code>when</code> applies conditions to the match that only allow a match when the corresponding condition is true.</p>

  
  
<div class="box notices cstyle info">
  <div class="box-label"><i class="fa-fw fas fa-info-circle"></i> Info</div>
  <div class="box-content">

<p>C# 8.0, which is currently in preview, has <a href="https://docs.microsoft.com/en-us/archive/msdn-magazine/2019/may/csharp-8-0-pattern-matching-in-csharp-8-0" target="_blank">expanded greatly upon pattern matching</a>
, adding exciting new features, such as the switch expression, tuples, and deconstruction operator.</p>
</div>
</div>

            <footer class="footline">

            </footer>
          </article>

    
    
          <article class="default">
            <header class="headline">
            </header>
<h1 id="summary">Summary</h1>

<p>In this chapter we looked at some of the features of C# that aren&rsquo;t directly related to object-orientation, including many drawn from imperative or functional paradigms.  Some have been with the language since the beginning, such as the <code>static</code> keyword, while others have recently been added, like pattern matching.</p>
<p>Each addition has greatly expanded the power and usability of C# - consider generics, whose introduction brought entirely new (and much more performant) library collections like <code>List&lt;T&gt;</code>, <code>Dictionary&lt;T&gt;</code>, and <code>HashSet&lt;T&gt;</code>.  Others have lead to simpler and cleaner code, like the use of Lambda expressions.  Perhaps most important is the realization that programming languages often continue to evolve beyond their original conceptions.</p>

            <footer class="footline">

            </footer>
          </article>

          </section>
          </section>
    
    
          <article class="chapter">
            <header class="headline">
            </header>


<div class="article-subheading">Chapter II</div>
<h1 id="desktop-development">Desktop Development</h1>

<p>Objects Go to Work</p>

            <footer class="footline">

            </footer>
          </article>

          <section>
            <h1 class="a11y-only">Subsections of Desktop Development</h1>
    
    
          <article class="chapter">
            <header class="headline">
            </header>


<div class="article-subheading">Chapter 1</div>
<h1 id="windows-presentation-foundation">Windows Presentation Foundation</h1>

<p>Some clever statement&hellip;</p>

            <footer class="footline">

            </footer>
          </article>

          <section>
            <h1 class="a11y-only">Subsections of Windows Presentation Foundation</h1>
    
    
          <article class="default">
            <header class="headline">
            </header>
<h1 id="introduction">Introduction</h1>

<p>Windows Presentation Foundation (WPF) is a open-source system for rendering Windows application user interfaces.  It was released as part of the .NET framework in 2006.  In many ways, it is intended to be a successor to Windows Forms. This chapter will examine the basics of working with WPF in detail.</p>
<h2 id="key-terms">Key Terms</h2>
<p>Some key terms to learn in this chapter are:</p>
<ul>
<li>Graphical User Interface (GUI)</li>
<li>Windows Presentation Foundation (WPF)</li>
<li>Extensible Application Markup Language (XAML)</li>
<li>Codebehind</li>
<li>Layouts</li>
<li>Controls</li>
<li>Component-Based Design</li>
<li>Composition</li>
</ul>
<h2 id="key-skills">Key Skills</h2>
<p>The key skill to learn in this chapter is how to use C# and XAML to develop WPF user interfaces that adapt to device screen dimensions.</p>

            <footer class="footline">

            </footer>
          </article>

    
    
          <article class="default">
            <header class="headline">
            </header>
<h1 id="wpf-features">WPF Features</h1>

<p>Windows Presentation Foundation is a library and toolkit for creating Graphical User Interfaces - a user interface that is presented as a combination of interactive graphical and text elements commonly including buttons, menus, and various flavors of editors and inputs.  GUIs represent a major step forward in usability from earlier programs that were interacted with by typing commands into a text-based terminal (the EPIC software we looked at in the beginning of this textbook is an example of this earlier form of user interface).</p>
<p>You might be wondering why Microsoft introduced WPF when it already had support for creating GUIs in its earlier Windows Forms product.  In part, this decision was driven by the evolution of computing technology.</p>
<h3 id="screen-resolution-and-aspect-ratio">Screen Resolution and Aspect Ratio</h3>
<p>No doubt you are used to having a wide variety of screen resolutions available across a plethora of devices.  But this was not always the case.  Computer monitors once came in very specific, standardized resolutions, and only gradually were these replaced by newer, higher-resolution monitors.  The table below summarizes this time, indicating the approximate period each resolution dominated the market.</p>
<table>
  <tr>
    <th>Standard</th>
    <th>Size</th>
    <th>Peak Years</th>
  </tr>
  <tr>
    <td>VGA</td>
    <td>640x480</td>
    <td>1987-1990</td>
  </tr>
  <tr>
    <td>SVGA</td>
    <td>800x600</td>
    <td>1990-2003</td>
  </tr>
  <tr>
    <td>XGA</td>
    <td>1024x768</td>
    <td>2007-2015</td>
  </tr>
</table>
<p>Windows Forms was introduced in the early 2000&rsquo;s, at a time where the most popular screen resolution in the United States was transitioning from SVGA to XGA, and screen resolutions (especially for business computers running Windows) had remained remarkably consistent for long periods.  Moreover, these resolutions were all using the 4:3 aspect ratio (the ratio of width to height of the screen).  Hence, the developers of Windows forms did not consider the need to support vastly different screen resolutions and aspect ratios.  Contrast that with trends since that time:</p>
<p>
<a href="#image-0c4fdee9d0c03896218a4d82d6c0cc9f" class="lightbox-link">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/2.1.2.1.png" alt="Screen Resolutions in US from 2009-2020" style="height: auto; width: auto;" loading="lazy">
</a>
<a href="javascript:history.back();" class="lightbox" id="image-0c4fdee9d0c03896218a4d82d6c0cc9f">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/2.1.2.1.png" alt="Screen Resolutions in US from 2009-2020" class="lightbox-image" loading="lazy">
</a></p>
<p>There is no longer a clearly dominating resolution, nor even an aspect ratio! Thus, it has become increasingly important for Windows applications to adapt to different screen resolutions.  Windows Forms does not do this easily - each element in a Windows Forms application has a statically defined width and height, as well as its position in the window.  Altering these values in response to different screen resolution requires significant calculations to resize and reposition the elements, and the code to perform these calculations must be written by the programmer.</p>
<p>In contrast, WPF adopts a multi-pass layout mechanism similar to that of a web browser, where it calculates the necessary space for each element within the GUI, then adapts the layout based on the actual space.  With careful design, the need for writing code to position and size elements is eliminated, and the resulting GUIs adapt well to the wide range of available screen sizes.</p>
<h3 id="direct3d-and-hardware-graphics-acceleration">Direct3D and Hardware Graphics Acceleration</h3>
<p>Another major technology shift was the widespread adoption of hardware-accelerated 3D graphics.  In the 1990&rsquo;s this technology was limited to computers built specifically for playing video games, 3D modeling, video composition, or other graphics-intensive tasks.  But by 2006, this hardware had become so widely accepted that with Windows Vista, Microsoft redesigned the Windows kernel to leverage this technology to take on the task of rendering windows applications.</p>
<p>WPF leveraged this decision and offloads much of the rendering work to the graphics hardware.  This meant that WPF controls could be vector-based, instead of the raster-based approach adopted by Windows Forms.  Vector-based rendering means the image to be drawn on-screen is created from instructions as needed, rather than copied from a bitmap.  This allows controls to look as sharp when scaled to different screen resolutions or enhanced by software intended to support low-vision users.  Raster graphics scaled the same way will look pixelated and jagged.</p>
<p>Leveraging the power of hardware accelerated graphics also allowed for the use of more powerful animations and transitions, as well as freeing up the CPU for other tasks.  It also simplifies the use of 3D graphics in windows applications.  WPF also leveraged this power to provide a rich storyboarding and animation system as well as inbuilt support for multimedia. In contrast, Windows Forms applications are completely rendered using the CPU and offer only limited support for animations and multimedia resources.</p>
<h3 id="customizable-styling-and-template-system">Customizable Styling and Template System</h3>
<p>One additional shift is that Windows forms leverage controls built around graphical representations provided directly by the hosting Windows operating system.  This helped keep windows applications looking and feeling like the operating system they were deployed on, but limits the customizability of the controls.  A commonly attempted feature - placing an image on a button - becomes an onerous task within Windows Forms.  Attempting to customize controls often required the programmer to take over the rendering work entirely, providing the commands to render the raw shapes of the control directly onto the control&rsquo;s canvas.  Unsurprisingly, an entire secondary market for pre-developed custom controls emerged to help counter this issue.</p>
<p>In contrast, WPF separated control rendering from windows subsystems, and implemented a declarative style of defining user interfaces using Extensible Application Markup Language (XAML).  This provides the programmer complete control over how controls are rendered, and multiple mechanisms of increasing complexity to accomplish this.  Style properties can be set on individual controls, or bundled into &ldquo;stylesheets&rdquo; and applied en-masse.  Further, each control&rsquo;s default style is determined by a template that can be replaced with a custom implementation, completely altering the appearance of a control.</p>
<p>This is just the tip of the iceberg - WPF also features a new and robust approach to data binding that will be subject of its own chapter, and allows for UI to be completely separated from logic, allowing for more thorough unit testing of application code.</p>

            <footer class="footline">

            </footer>
          </article>

    
    
          <article class="default">
            <header class="headline">
            </header>
<h1 id="xaml">XAML</h1>

<p>Windows Presentation Foundation builds upon Extensible Application Markup Language (XAML), an extension of the XML language we&rsquo;ve discussed previously.  Just like XML, it consists of elements defined by opening and closing tags.</p>
<p>For example, a button is represented by:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#f92672">&lt;Button&gt;&lt;/Button&gt;</span></span></span></code></pre></div><p>Which, because it has no children, could also be expressed with a self-closing tag:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#f92672">&lt;Button/&gt;</span></span></span></code></pre></div><p>In addition, elements can have <em>attributes</em>, i.e we could add a height, width, and content to our button:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#f92672">&lt;Button</span> <span style="color:#a6e22e">Height=</span><span style="color:#e6db74">&#34;30&#34;</span> <span style="color:#a6e22e">Width=</span><span style="color:#e6db74">&#34;120&#34;</span> <span style="color:#a6e22e">Content=</span><span style="color:#e6db74">&#34;Click Me!&#34;</span><span style="color:#f92672">/&gt;</span></span></span></code></pre></div><p>XAML also offers an <em>expanded</em> property syntax that is an alternative to attributes.  For example, we could re-write the above button as:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#f92672">&lt;Button&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&lt;Button.Height&gt;</span>30<span style="color:#f92672">&lt;/Button.Height&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&lt;Button.Width&gt;</span>120<span style="color:#f92672">&lt;/Button.Width&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&lt;Button.Content&gt;</span>Click Me!<span style="color:#f92672">&lt;/Button.Content&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;/Button&gt;</span></span></span></code></pre></div><p>Note how we repeat the tag name (<code>Button</code>) and append the attribute name (<code>Height</code>, <code>Width</code>, and <code>Content</code> to it with a period between the two).  This differentiates the expanded property from nested elements, i.e. in this XAML code:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#f92672">&lt;Grid&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&lt;Grid.ColumnDefinitions&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;ColumnDefinition</span> <span style="color:#a6e22e">Width=</span><span style="color:#e6db74">&#34;200&#34;</span><span style="color:#f92672">/&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;ColumnDefinition</span> <span style="color:#a6e22e">Width=</span><span style="color:#e6db74">&#34;200&#34;</span><span style="color:#f92672">/&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;ColumnDefinition</span> <span style="color:#a6e22e">Width=</span><span style="color:#e6db74">&#34;200&#34;</span><span style="color:#f92672">/&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&lt;/Grid.ColumnDefinitions&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&lt;Grid.RowDefinitions&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;RowDefinition/&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;RowDefinition/&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&lt;/Grid.RowDefinitions&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&lt;Button</span> <span style="color:#a6e22e">Height=</span><span style="color:#e6db74">&#34;30&#34;</span> <span style="color:#a6e22e">Width=</span><span style="color:#e6db74">&#34;120&#34;</span> <span style="color:#a6e22e">Content=</span><span style="color:#e6db74">&#34;Click Me!&#34;</span><span style="color:#f92672">/&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;/Grid&gt;</span></span></span></code></pre></div><p><code>&lt;Grid.ColumnDefinitions&gt;</code> and <code>&lt;Grid.RowDefinitions&gt;</code> are attributes of the <code>&lt;Grid&gt;</code>, while <code> &lt;Button Height=&quot;30&quot; Width=&quot;120&quot; Content=&quot;Click Me!&quot;/&gt;</code> is a child element of the <code>&lt;Grid&gt;</code> element.</p>
<p>Because XAML is an extension of XML, we can add comments the same way, by enclosing the comment within a <code>&lt;!--</code> and <code>--&gt;</code>:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#75715e">&lt;!-- I am a comment --&gt;</span></span></span></code></pre></div><h2 id="xaml-defines-objects">XAML Defines Objects</h2>
<p>What makes XAML different from vanilla XML is that <em>it defines objects</em>.  The XAML used for Windows Presentation Foundation is drawn from the <a href="http://schemas.microsoft.com/winfx/2006/xaml/presentation" target="_blank">http://schemas.microsoft.com/winfx/2006/xaml/presentation</a>
 namespace.  This namespace defines exactly what elements exist in this flavor of XAML, and they correspond to specific classes defined in the WPF namespaces.</p>
<p>For example, the <code>&lt;Button&gt;</code> class corresponds to the WPF <a href="https://docs.microsoft.com/en-us/dotnet/api/system.windows.controls.button?view=netcore-3.1" target="_blank">Button</a>
 class. This class has a <code>Content</code> property which defines the text or other content displayed on the button.  Additionally, it has a <code>Width</code> and <code>Height</code> property.  Thus the XAML:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#f92672">&lt;Button</span> <span style="color:#a6e22e">Height=</span><span style="color:#e6db74">&#34;30&#34;</span> <span style="color:#a6e22e">Width=</span><span style="color:#e6db74">&#34;120&#34;</span> <span style="color:#a6e22e">Content=</span><span style="color:#e6db74">&#34;Click Me!&#34;</span><span style="color:#f92672">/&gt;</span></span></span></code></pre></div><p>Effectively says <em>construct an instance of the <code>Button</code> class with its <code>Height</code> property set to 30, its <code>Width</code> property set to 120, and its <code>Content</code> property set to the string <code>&quot;Click Me!&quot;</code></em>.  Were we to write the corresponding C# code, it would look like:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C#" data-lang="C#"><span style="display:flex;"><span><span style="color:#66d9ef">var</span> button = <span style="color:#66d9ef">new</span> Button();
</span></span><span style="display:flex;"><span>button.Height = <span style="color:#ae81ff">30</span>;
</span></span><span style="display:flex;"><span>button.Width = <span style="color:#ae81ff">120</span>;
</span></span><span style="display:flex;"><span>button.Content = <span style="color:#e6db74">&#34;Click Me!&#34;</span>;</span></span></code></pre></div><p>This is why XAML stands for Extensible <em>Application</em> Markup Language - it&rsquo;s effectively another way of writing programs! You can find the documentation for all the controls declared in the xaml/presentation namespace on <a href="https://docs.microsoft.com/en-us/dotnet/api/system.windows.controls?view=netcore-3.1" target="_blank">docs.microsoft.com</a>
.</p>
<h2 id="xaml-and-partial-classes">XAML and Partial Classes</h2>
<p>In addition to being used to define objects, XAML can also be used to define part of a class.  Consider this <code>MainWindow</code> XAML code, which is generated by the Visual Studio WPF Project Template:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#f92672">&lt;Window</span> <span style="color:#a6e22e">x:Class=</span><span style="color:#e6db74">&#34;WpfApp1.MainWindow&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">xmlns=</span><span style="color:#e6db74">&#34;http://schemas.microsoft.com/winfx/2006/xaml/presentation&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">xmlns:x=</span><span style="color:#e6db74">&#34;http://schemas.microsoft.com/winfx/2006/xaml&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">xmlns:d=</span><span style="color:#e6db74">&#34;http://schemas.microsoft.com/expression/blend/2008&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">xmlns:mc=</span><span style="color:#e6db74">&#34;http://schemas.openxmlformats.org/markup-compatibility/2006&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">xmlns:local=</span><span style="color:#e6db74">&#34;clr-namespace:WpfApp1&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">mc:Ignorable=</span><span style="color:#e6db74">&#34;d&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">Title=</span><span style="color:#e6db74">&#34;MainWindow&#34;</span> <span style="color:#a6e22e">Height=</span><span style="color:#e6db74">&#34;450&#34;</span> <span style="color:#a6e22e">Width=</span><span style="color:#e6db74">&#34;800&#34;</span><span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;Grid&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;/Grid&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;/Window&gt;</span></span></span></code></pre></div><p>And its corresponding C# file:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C#" data-lang="C#"><span style="display:flex;"><span><span style="color:#66d9ef">namespace</span> WpfApp1
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// Interaction logic for MainWindow.xaml</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">partial</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">MainWindow</span> : Window
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">public</span> MainWindow()
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            InitializeComponent();
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>Notice the use of the <code>partial</code> modifier in the C# code?  This indicates that the <code>MainWindow</code> class is only <em>partially</em> defined in this file (<em>MainWindow.xaml.cs</em>) - the rest of the definition exists in another file.  That&rsquo;s the previously referenced XAML file (<em>MainWindow.xaml</em>).  Notice in the XAML that the <code>&lt;Window&gt;</code> element has the attribute <code>x:Class=&quot;WpfApp1.MainWindow&quot;</code>?  That indicates that it defines part of the class <code>MainWindow</code> defined in the <code>WpfApp1</code> namespace - it&rsquo;s the other part of our file!</p>
<p>When we compile this project, the XAML is actually transformed into a temporary C# file as part of the build process, and that C# file is joined with the other C# file.  This temporary file defines the <code>InitializeComponent()</code> method, which would look something like this:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C#" data-lang="C#"><span style="display:flex;"><span><span style="color:#66d9ef">void</span> InitializeComponent() 
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">this</span>.Title = <span style="color:#e6db74">&#34;MainWindow&#34;</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">this</span>.Height = <span style="color:#e6db74">&#34;450&#34;</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">this</span>.Width = <span style="color:#e6db74">&#34;800&#34;</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">var</span> grid = <span style="color:#66d9ef">new</span> Grid();
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">this</span>.Content = grid();
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>Notice how it sets the properties corresponding to the attributes defined on the <code>&lt;MainWindow&gt;</code> element?  Further, it assigns the child of that element (a <code>&lt;Grid&gt;</code> element) as the <code>Content</code> property of the <code>Window</code>.  Nested XAML elements are typically assigned to either <code>Content</code> or <code>Children</code> properties, depending on if the element in question is a container element or not (container elements can have multiple children, all other elements are limited to a single child).</p>
<p>Any structure defined in our XAML is set up during this <code>InitializeComponent()</code> call.  This means you should <strong>never remove the <code>InitializeComponent();</code> invocation</strong> from a WPF class, or your XAML-defined content will not be added.  Similarly, you should not manipulate that structure until the <code>InitializeComponent();</code> method has been invoked, or the structure will not exist!</p>
<p>This strategy of splitting GUI code into two files is known in Microsoft parlance as <em>codebehind</em>, and it allows the GUI&rsquo;s visual aspect to be created independently of the code that provides its logic.  This approach has been a staple of both Windows Forms and Windows Presentation Foundation.  This separation also allows for graphic designers to create the GUI look-and-feel without ever needing to write a line of code.  There is a companion application to Visual Studio called <a href="https://en.wikipedia.org/wiki/Microsoft_Blend" target="_blank">Blend</a>
 that can be used to write the XAML files for a project without needing the full weight and useability of Visual Studio.</p>

  
  
<div class="box notices cstyle tip">
  <div class="box-label"><i class="fa-fw fas fa-lightbulb"></i> Tip</div>
  <div class="box-content">

<p>Occasionally, Visual Studio will encounter a problem while building the temporary file from the XAML definition, and the resulting temporary file may become corrupted.  When this happens, your changes to the XAML are no longer incorporated into the program when you compile, because the process can&rsquo;t overwrite the corrupted temporary file.  Instead, the corrupted temporary file is used - resulting in weird and unexpected behavior.  If this happens to you, just run the <strong>&ldquo;Build &gt; Clean&rdquo;</strong> menu option on the project to delete all the temporary files.</p>
</div>
</div>

  
  
<div class="box notices cstyle info">
  <div class="box-label"><i class="fa-fw fas fa-info-circle"></i> Info</div>
  <div class="box-content">

<p>Partial classes weren&rsquo;t a WPF-specific innovation - Windows Forms used them first.  In Windows Forms, when you create a form, Visual Studio actually creates <em>two</em> C# files.  One of these is the one intended for you to edit, and the other is used by the drag-and-drop editor, which fills it with auto-generated C# code.  If you ever make the mistake of editing <em>this</em> file, it will cause all kinds of problems for the drag-and-drop editor (and you)!  In contrast, the drag-and-drop editor for WPF actually modifies the same XAML file you do - allowing you to use the editor, manually edit the XAML, or any combination of the two.</p>
</div>
</div>

            <footer class="footline">

            </footer>
          </article>

    
    
          <article class="default">
            <header class="headline">
            </header>
<h1 id="layouts">Layouts</h1>

<p>Windows Presentation Foundation provides a number of container elements that fulfill the specialized purpose of <em>layouts</em>.  Unlike most WPF controls, they can have multiple children, which they organize on-screen.  And unlike Windows Forms, these layouts adjust to the available space.</p>
<p>Let&rsquo;s examine each of five layouts in turn:</p>
<h2 id="the-grid">The Grid</h2>
<p>The default layout is the <a href="https://docs.microsoft.com/en-us/dotnet/api/system.windows.controls.grid?view=netcore-3.1" target="_blank">Grid</a>
, which lays out its children elements in a grid pattern. A <code>&lt;Grid&gt;</code> is composed of columns and rows, the number and characteristics of which are defined by the grid&rsquo;s <code>ColumnDefinitions</code> and <code>RowDefinitions</code> properties.  These consist of a collection of <code>ColumnDefinition</code> and <code>&lt;RowDefinition/&gt;</code> elements.  Each <code>&lt;ColumnDefinition/&gt;</code> is typically given a <code>Width</code> property value, while each <code>&lt;RowDefinition/&gt;</code> is given a <code>Height</code> property value.</p>
<p>Thus, you might expect the code:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#f92672">&lt;Grid&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&lt;Grid.ColumnDefinitions&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;ColumnDefinition</span> <span style="color:#a6e22e">Width=</span><span style="color:#e6db74">&#34;200&#34;</span><span style="color:#f92672">/&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;ColumnDefinition</span> <span style="color:#a6e22e">Width=</span><span style="color:#e6db74">&#34;200&#34;</span><span style="color:#f92672">/&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;ColumnDefinition</span> <span style="color:#a6e22e">Width=</span><span style="color:#e6db74">&#34;200&#34;</span><span style="color:#f92672">/&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&lt;/Grid.ColumnDefinitions&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&lt;Grid.RowDefinitions&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;RowDefinition</span> <span style="color:#a6e22e">Height=</span><span style="color:#e6db74">&#34;100&#34;</span><span style="color:#f92672">/&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;RowDefinition</span> <span style="color:#a6e22e">Height=</span><span style="color:#e6db74">&#34;100&#34;</span><span style="color:#f92672">/&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&lt;/Grid.RowDefinitions&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&lt;Button</span> <span style="color:#a6e22e">Height=</span><span style="color:#e6db74">&#34;30&#34;</span> <span style="color:#a6e22e">Width=</span><span style="color:#e6db74">&#34;120&#34;</span> <span style="color:#a6e22e">Content=</span><span style="color:#e6db74">&#34;Click Me!&#34;</span><span style="color:#f92672">/&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;/Grid&gt;</span></span></span></code></pre></div><p>Creates a grid with three columns, each 200 logical units wide, and two rows, each 100 logical units high. However, it will <em>actually</em> create a grid like this:</p>
<p>
<a href="#image-adea6fdfdd24ba0edf051bc4a55fb319" class="lightbox-link">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/2.1.4.1.png" alt="The resulting Grid" style="height: auto; width: auto;" loading="lazy">
</a>
<a href="javascript:history.back();" class="lightbox" id="image-adea6fdfdd24ba0edf051bc4a55fb319">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/2.1.4.1.png" alt="The resulting Grid" class="lightbox-image" loading="lazy">
</a></p>
<p>Remember, all WPF containers will fill the available space - so the grid stretches the last column and row to fill the remaining space.  Also, any element declared as a child of the grid (in this case, our button), will be placed in the first grid cell - [0,0] (counted from the top-left corner).</p>
<p>When declaring measurements in WPF, integer values correspond to logical units, which are 1/96th of an inch.  We can also use relative values, by following a measurement with a <code>*</code>.  This indicates the ratio of remaining space a column or row should take up after the elements with an exact size are positioned. I.e. a column with a width of <code>2*</code> will be twice as wide as one with a width of <code>1*</code>.</p>
<p>Thus, to create a 3x3 grid centered in the available space to represent a game of Tic-Tac-Toe we might use:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#f92672">&lt;Grid&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;Grid.ColumnDefinitions&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;ColumnDefinition</span> <span style="color:#a6e22e">Width=</span><span style="color:#e6db74">&#34;1*&#34;</span><span style="color:#f92672">/&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;ColumnDefinition</span> <span style="color:#a6e22e">Width=</span><span style="color:#e6db74">&#34;100&#34;</span><span style="color:#f92672">/&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;ColumnDefinition</span> <span style="color:#a6e22e">Width=</span><span style="color:#e6db74">&#34;100&#34;</span><span style="color:#f92672">/&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;ColumnDefinition</span> <span style="color:#a6e22e">Width=</span><span style="color:#e6db74">&#34;100&#34;</span><span style="color:#f92672">/&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;ColumnDefinition</span> <span style="color:#a6e22e">Width=</span><span style="color:#e6db74">&#34;1*&#34;</span><span style="color:#f92672">/&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;/Grid.ColumnDefinitions&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;Grid.RowDefinitions&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;RowDefinition</span> <span style="color:#a6e22e">Height=</span><span style="color:#e6db74">&#34;1*&#34;</span><span style="color:#f92672">/&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;RowDefinition</span> <span style="color:#a6e22e">Height=</span><span style="color:#e6db74">&#34;100&#34;</span><span style="color:#f92672">/&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;RowDefinition</span> <span style="color:#a6e22e">Height=</span><span style="color:#e6db74">&#34;100&#34;</span><span style="color:#f92672">/&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;RowDefinition</span> <span style="color:#a6e22e">Height=</span><span style="color:#e6db74">&#34;100&#34;</span><span style="color:#f92672">/&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;RowDefinition</span> <span style="color:#a6e22e">Height=</span><span style="color:#e6db74">&#34;1*&#34;</span><span style="color:#f92672">/&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;/Grid.RowDefinitions&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;TextBlock</span> <span style="color:#a6e22e">Grid.Column=</span><span style="color:#e6db74">&#34;1&#34;</span> <span style="color:#a6e22e">Grid.Row=</span><span style="color:#e6db74">&#34;1&#34;</span> <span style="color:#a6e22e">FontSize=</span><span style="color:#e6db74">&#34;100&#34;</span> <span style="color:#a6e22e">VerticalAlignment=</span><span style="color:#e6db74">&#34;Center&#34;</span> <span style="color:#a6e22e">HorizontalAlignment=</span><span style="color:#e6db74">&#34;Center&#34;</span><span style="color:#f92672">&gt;</span>X<span style="color:#f92672">&lt;/TextBlock&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;TextBlock</span> <span style="color:#a6e22e">Grid.Column=</span><span style="color:#e6db74">&#34;1&#34;</span> <span style="color:#a6e22e">Grid.Row=</span><span style="color:#e6db74">&#34;2&#34;</span> <span style="color:#a6e22e">FontSize=</span><span style="color:#e6db74">&#34;100&#34;</span> <span style="color:#a6e22e">VerticalAlignment=</span><span style="color:#e6db74">&#34;Center&#34;</span> <span style="color:#a6e22e">HorizontalAlignment=</span><span style="color:#e6db74">&#34;Center&#34;</span><span style="color:#f92672">&gt;</span>O<span style="color:#f92672">&lt;/TextBlock&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;TextBlock</span> <span style="color:#a6e22e">Grid.Column=</span><span style="color:#e6db74">&#34;2&#34;</span> <span style="color:#a6e22e">Grid.Row=</span><span style="color:#e6db74">&#34;1&#34;</span> <span style="color:#a6e22e">FontSize=</span><span style="color:#e6db74">&#34;100&#34;</span> <span style="color:#a6e22e">VerticalAlignment=</span><span style="color:#e6db74">&#34;Center&#34;</span> <span style="color:#a6e22e">HorizontalAlignment=</span><span style="color:#e6db74">&#34;Center&#34;</span><span style="color:#f92672">&gt;</span>X<span style="color:#f92672">&lt;/TextBlock&gt;</span>        
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;/Grid&gt;</span></span></span></code></pre></div><p>Which would create:</p>
<p>
<a href="#image-9f9e28e7d33815aa3e854bc8ac922a74" class="lightbox-link">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/2.1.4.2.png" alt="The resulting Tic-Tac-Toe grid" style="height: auto; width: auto;" loading="lazy">
</a>
<a href="javascript:history.back();" class="lightbox" id="image-9f9e28e7d33815aa3e854bc8ac922a74">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/2.1.4.2.png" alt="The resulting Tic-Tac-Toe grid" class="lightbox-image" loading="lazy">
</a></p>
<p>Note too that we use the properties <code>Grid.Column</code> and <code>Grid.Row</code> in the <code>&lt;TextBlock&gt;</code> elements to assign them to cells in the grid.  The row and column indices start at 0 in the upper-left corner of the grid, and increase to the right and down.</p>
<h2 id="the-stackpanel">The StackPanel</h2>
<p>The <a href="https://docs.microsoft.com/en-us/dotnet/api/system.windows.controls.stackpanel?view=netcore-3.1" target="_blank">StackPanel</a>
 arranges content into a single row or column (defaults to vertical).  For example, this XAML:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#f92672">&lt;StackPanel&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;Button&gt;</span>Banana<span style="color:#f92672">&lt;/Button&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;Button&gt;</span>Orange<span style="color:#f92672">&lt;/Button&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;Button&gt;</span>Mango<span style="color:#f92672">&lt;/Button&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;Button&gt;</span>Strawberry<span style="color:#f92672">&lt;/Button&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;Button&gt;</span>Blackberry<span style="color:#f92672">&lt;/Button&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;Button&gt;</span>Peach<span style="color:#f92672">&lt;/Button&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;Button&gt;</span>Watermelon<span style="color:#f92672">&lt;/Button&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;/StackPanel&gt;</span></span></span></code></pre></div><p>Creates this layout:</p>
<p>
<a href="#image-2ac1fa4c69279b1eb30efaaa7a304189" class="lightbox-link">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/2.1.4.3.png" alt="The StackPanel Example" style="height: auto; width: auto;" loading="lazy">
</a>
<a href="javascript:history.back();" class="lightbox" id="image-2ac1fa4c69279b1eb30efaaa7a304189">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/2.1.4.3.png" alt="The StackPanel Example" class="lightbox-image" loading="lazy">
</a></p>
<p>The StackPanel can be set to a horizontal orientation by setting its <code>Orientation</code> property to <code>Horizontal</code>:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#f92672">&lt;StackPanel</span> <span style="color:#a6e22e">Orientation=</span><span style="color:#e6db74">&#34;Horizontal&#34;</span><span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;Button&gt;</span>Banana<span style="color:#f92672">&lt;/Button&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;Button&gt;</span>Orange<span style="color:#f92672">&lt;/Button&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;Button&gt;</span>Mango<span style="color:#f92672">&lt;/Button&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;Button&gt;</span>Strawberry<span style="color:#f92672">&lt;/Button&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;Button&gt;</span>Blackberry<span style="color:#f92672">&lt;/Button&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;Button&gt;</span>Peach<span style="color:#f92672">&lt;/Button&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;Button&gt;</span>Watermelon<span style="color:#f92672">&lt;/Button&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;/StackPanel&gt;</span></span></span></code></pre></div><h2 id="the-wrappanel">The WrapPanel</h2>
<p>The <a href="https://docs.microsoft.com/en-us/dotnet/api/system.windows.controls.wrappanel?view=netcore-3.1" target="_blank">WrapPanel</a>
 layout is like the <code>&lt;StackPanel&gt;</code>, with the additional caveat that if there is not enough space for its contents, it will wrap to an additional line. For example, this XAML code:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#f92672">&lt;WrapPanel&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;Button&gt;</span>Banana<span style="color:#f92672">&lt;/Button&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;Button&gt;</span>Orange<span style="color:#f92672">&lt;/Button&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;Button&gt;</span>Mango<span style="color:#f92672">&lt;/Button&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;Button&gt;</span>Strawberry<span style="color:#f92672">&lt;/Button&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;Button&gt;</span>Blackberry<span style="color:#f92672">&lt;/Button&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;Button&gt;</span>Peach<span style="color:#f92672">&lt;/Button&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;Button&gt;</span>Watermelon<span style="color:#f92672">&lt;/Button&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;/WrapPanel&gt;</span></span></span></code></pre></div><p>Produces this layout when there is ample room:</p>
<p>
<a href="#image-a940ca9e25b21a1950b928ff13cf71b9" class="lightbox-link">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/2.1.4.4.png" alt="The WrapPanel Example" style="height: auto; width: auto;" loading="lazy">
</a>
<a href="javascript:history.back();" class="lightbox" id="image-a940ca9e25b21a1950b928ff13cf71b9">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/2.1.4.4.png" alt="The WrapPanel Example" class="lightbox-image" loading="lazy">
</a></p>
<p>And this one when things get tighter:</p>
<p>
<a href="#image-eb2a96a036da3256fa083903e59c77fd" class="lightbox-link">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/2.1.4.5.png" alt="The Squeezed WrapPanel Example" style="height: auto; width: auto;" loading="lazy">
</a>
<a href="javascript:history.back();" class="lightbox" id="image-eb2a96a036da3256fa083903e59c77fd">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/2.1.4.5.png" alt="The Squeezed WrapPanel Example" class="lightbox-image" loading="lazy">
</a></p>
<h2 id="the-dockpanel">The DockPanel</h2>
<p>The <a href="https://docs.microsoft.com/en-us/dotnet/api/system.windows.controls.dockpanel?view=netcore-3.1" target="_blank">DockPanel</a>
 layout should be familiar to you - it&rsquo;s what Visual Studio uses.  Its content items can be &lsquo;docked&rsquo; to one of the sides, as defined by the <code>Dock</code> enum: <code>Bottom</code>, <code>Top</code>, <code>Left</code>, or <code>Right</code> by setting the <code>DockPanel.Dock</code> property on that item. The last item specified will also fill the central space.  If more than one child is specified for a particular side, it will be stacked with that side.</p>
<p>Thus, this XAML:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#f92672">&lt;DockPanel&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;Button</span> <span style="color:#a6e22e">DockPanel.Dock=</span><span style="color:#e6db74">&#34;Top&#34;</span><span style="color:#f92672">&gt;</span>Top<span style="color:#f92672">&lt;/Button&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;Button</span> <span style="color:#a6e22e">DockPanel.Dock=</span><span style="color:#e6db74">&#34;Left&#34;</span><span style="color:#f92672">&gt;</span>Left<span style="color:#f92672">&lt;/Button&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;Button</span> <span style="color:#a6e22e">DockPanel.Dock=</span><span style="color:#e6db74">&#34;Right&#34;</span><span style="color:#f92672">&gt;</span>Right<span style="color:#f92672">&lt;/Button&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;Button</span> <span style="color:#a6e22e">DockPanel.Dock=</span><span style="color:#e6db74">&#34;Bottom&#34;</span><span style="color:#f92672">&gt;</span>Bottom<span style="color:#f92672">&lt;/Button&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;Button&gt;</span>Center<span style="color:#f92672">&lt;/Button&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;/DockPanel&gt;</span></span></span></code></pre></div><p>Generates this layout:</p>
<p>
<a href="#image-c95ac5ae8467bdb149e92fc6576ddd8c" class="lightbox-link">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/2.1.4.6.png" alt="The DockPanel Example" style="height: auto; width: auto;" loading="lazy">
</a>
<a href="javascript:history.back();" class="lightbox" id="image-c95ac5ae8467bdb149e92fc6576ddd8c">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/2.1.4.6.png" alt="The DockPanel Example" class="lightbox-image" loading="lazy">
</a></p>
<h2 id="the-canvas">The Canvas</h2>
<p>Finally, the <a href="https://docs.microsoft.com/en-us/dotnet/api/system.windows.controls.canvas?view=netcore-3.1" target="_blank">Canvas</a>
 lays its content out strictly by their position within the <code>&lt;Canvas&gt;</code>, much like Windows Forms. This approach provides precise placement and size control, at the expense of the ability to automatically adjust to other screen resolutions.  For example, the code:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#f92672">&lt;Canvas&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;Button</span> <span style="color:#a6e22e">Canvas.Top=</span><span style="color:#e6db74">&#34;40&#34;</span> <span style="color:#a6e22e">Canvas.Right=</span><span style="color:#e6db74">&#34;40&#34;</span><span style="color:#f92672">&gt;</span>Do Something<span style="color:#f92672">&lt;/Button&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;TextBlock</span> <span style="color:#a6e22e">Canvas.Left=</span><span style="color:#e6db74">&#34;200&#34;</span> <span style="color:#a6e22e">Canvas.Bottom=</span><span style="color:#e6db74">&#34;80&#34;</span><span style="color:#f92672">&gt;</span>Other thing<span style="color:#f92672">&lt;/TextBlock&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;Canvas</span> <span style="color:#a6e22e">Canvas.Top=</span><span style="color:#e6db74">&#34;30&#34;</span> <span style="color:#a6e22e">Canvas.Left=</span><span style="color:#e6db74">&#34;300&#34;</span> <span style="color:#a6e22e">Width=</span><span style="color:#e6db74">&#34;300&#34;</span> <span style="color:#a6e22e">Height=</span><span style="color:#e6db74">&#34;300&#34;</span> <span style="color:#a6e22e">Background=</span><span style="color:#e6db74">&#34;SaddleBrown&#34;</span><span style="color:#f92672">/&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;/Canvas&gt;</span></span></span></code></pre></div><p>Creates this layout:</p>
<p>
<a href="#image-79f980c75b9bc40530848c88d3329927" class="lightbox-link">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/2.1.4.7.png" alt="The Canvas Example" style="height: auto; width: auto;" loading="lazy">
</a>
<a href="javascript:history.back();" class="lightbox" id="image-79f980c75b9bc40530848c88d3329927">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/2.1.4.7.png" alt="The Canvas Example" class="lightbox-image" loading="lazy">
</a></p>
<p>If there is a chance the <code>&lt;Canvas&gt;</code> might be resized, it is a good idea to anchor all elements in the canvas relative to the same corner (i.e. top right) so that they all are moved the same amount.</p>

            <footer class="footline">

            </footer>
          </article>

    
    
          <article class="default">
            <header class="headline">
            </header>
<h1 id="controls">Controls</h1>

<p>In addition to the layout controls, WPF provides a number of useful (and often familiar) controls that we can use to compose our applications.  Let&rsquo;s take a look at some of the most commonly used.</p>
<h3 id="border">Border</h3>
<p>A <a href="https://docs.microsoft.com/en-us/dotnet/api/system.windows.controls.border?view=netcore-3.1" target="_blank">Border</a>
 is a control that draws a border around its contents.  The properties specific to a border include <code>BorderBrush</code> (which sets the color of the border, see the discussion of brushes on the next page), <code>BorderThickness</code> the number of units thick the border should be drawn, <code>CornerRadius</code>, which adds rounded corners, and <code>Padding</code> which adds space between the border and its contents.</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#f92672">&lt;Border</span> <span style="color:#a6e22e">BorderBrush=</span><span style="color:#e6db74">&#34;Green&#34;</span> <span style="color:#a6e22e">BorderThickness=</span><span style="color:#e6db74">&#34;5&#34;</span> <span style="color:#a6e22e">CornerRadius=</span><span style="color:#e6db74">&#34;5&#34;</span> <span style="color:#a6e22e">Padding=</span><span style="color:#e6db74">&#34;10&#34;</span><span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;Button&gt;</span>Do Something<span style="color:#f92672">&lt;/Button&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;/Border&gt;</span></span></span></code></pre></div><p>
<a href="#image-1435da7aa65080106de6b007f799d85e" class="lightbox-link">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/2.1.5.1.png" alt="A Border Example" style="height: auto; width: auto;" loading="lazy">
</a>
<a href="javascript:history.back();" class="lightbox" id="image-1435da7aa65080106de6b007f799d85e">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/2.1.5.1.png" alt="A Border Example" class="lightbox-image" loading="lazy">
</a></p>
<h3 id="button">Button</h3>
<p>A <a href="https://docs.microsoft.com/en-us/dotnet/api/system.windows.controls.button?view=netcore-3.1" target="_blank">Button</a>
 is a control that draws a button. This button can be interacted with by the mouse, and clicking on it triggers any <code>Click</code> event handlers that have been attached to it.  Unlike Windows Forms buttons, it can contain any other WPF control, including images and layouts.  Thus, a button featuring an image might be created with:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#f92672">&lt;Button</span> <span style="color:#a6e22e">Click=</span><span style="color:#e6db74">&#34;TriggerBroadcast&#34;</span><span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;StackPanel</span> <span style="color:#a6e22e">Orientation=</span><span style="color:#e6db74">&#34;Horizontal&#34;</span><span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;Image</span> <span style="color:#a6e22e">Source=</span><span style="color:#e6db74">&#34;dish.jpg&#34;</span> <span style="color:#a6e22e">Width=</span><span style="color:#e6db74">&#34;100&#34;</span><span style="color:#f92672">/&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;TextBlock</span> <span style="color:#a6e22e">FontSize=</span><span style="color:#e6db74">&#34;25&#34;</span> <span style="color:#a6e22e">VerticalAlignment=</span><span style="color:#e6db74">&#34;Center&#34;</span><span style="color:#f92672">&gt;</span>Broadcast<span style="color:#f92672">&lt;/TextBlock&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;/StackPanel&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;/Button&gt;</span></span></span></code></pre></div><p>
<a href="#image-7e810d41e380b2a2bb8d54f841fab811" class="lightbox-link">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/2.1.5.2.png" alt="A Button Example" style="height: auto; width: auto;" loading="lazy">
</a>
<a href="javascript:history.back();" class="lightbox" id="image-7e810d41e380b2a2bb8d54f841fab811">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/2.1.5.2.png" alt="A Button Example" class="lightbox-image" loading="lazy">
</a></p>
<p>The event handler for the button needs to be declared in the corresponding <em>.xaml.cs</em> file, and will take two parameters, an <code>object</code> and <code>RoutedEventArgs</code>:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// An event handler that triggers a broadcast</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;param name=&#34;sender&#34;&gt;The object sending this message&lt;/param&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;param name=&#34;args&#34;&gt;The event data&lt;/param&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">void</span> TriggerBroadcast(<span style="color:#66d9ef">object</span> sender, RoutedEventArgs args) {
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// TODO: Send Broadcast</span>
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>We&rsquo;ll be discussing events in more detail soon.</p>
<h3 id="checkbox">CheckBox</h3>
<p>A <a href="https://docs.microsoft.com/en-us/dotnet/api/system.windows.controls.checkbox?view=netcore-3.1" target="_blank">CheckBox</a>
 provides a checkable box corresponding to a boolean value.  The <code>IsChecked</code> property reflects the checked or unchecked state of the checkbox.  A checkbox also exposes <code>Checked</code> and <code>Unchecked</code> event handlers.</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#f92672">&lt;CheckBox</span> <span style="color:#a6e22e">IsChecked=</span><span style="color:#e6db74">&#34;True&#34;</span><span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>    The sky is blue
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;/CheckBox&gt;</span>  </span></span></code></pre></div><p>
<a href="#image-b32fbc1a062794925fc31745331069b7" class="lightbox-link">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/2.1.5.3.png" alt="A CheckBox Example" style="height: auto; width: auto;" loading="lazy">
</a>
<a href="javascript:history.back();" class="lightbox" id="image-b32fbc1a062794925fc31745331069b7">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/2.1.5.3.png" alt="A CheckBox Example" class="lightbox-image" loading="lazy">
</a></p>
<h3 id="combobox">ComboBox</h3>
<p>A <a href="https://docs.microsoft.com/en-us/dotnet/api/system.windows.controls.combobox?view=netcore-3.1" target="_blank">ComboBox</a>
 provides a drop-down selection list.  The selected value can be accessed through the <code>SelectedItem</code> property, and the <code>IsEditable</code> boolean property determines if the combo box can be typed into, or simply selected from.  It exposes a <code>SelectionChanged</code> event.  The items in the <code>ComboBox</code> can be set declaratively:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#f92672">&lt;ComboBox&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;ComboBoxItem&gt;</span>Apple<span style="color:#f92672">&lt;/ComboBoxItem&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;ComboBoxItem&gt;</span>Orange<span style="color:#f92672">&lt;/ComboBoxItem&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;ComboBoxItem&gt;</span>Peach<span style="color:#f92672">&lt;/ComboBoxItem&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;ComboBoxItem&gt;</span>Pear<span style="color:#f92672">&lt;/ComboBoxItem&gt;</span> 
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;/ComboBox&gt;</span></span></span></code></pre></div><p>
<a href="#image-a0dc3bdb14cd5f301e51a99a2851b973" class="lightbox-link">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/2.1.5.6.png" alt="A ComboBox Example" style="height: auto; width: auto;" loading="lazy">
</a>
<a href="javascript:history.back();" class="lightbox" id="image-a0dc3bdb14cd5f301e51a99a2851b973">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/2.1.5.6.png" alt="A ComboBox Example" class="lightbox-image" loading="lazy">
</a></p>
<p>Note that the ComboBox dropdown doesn&rsquo;t work in the editor - it only operates while the application is running.</p>
<p>Alternatively, you can expose the <code>ComboBox</code> in the codebehind <code>.xaml.cs</code> file by giving it a <code>Name</code> property.</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#f92672">&lt;ComboBox</span> <span style="color:#a6e22e">Name=</span><span style="color:#e6db74">&#34;FruitSelection&#34;</span> <span style="color:#a6e22e">Text=</span><span style="color:#e6db74">&#34;Fruits&#34;</span> <span style="color:#a6e22e">SelectedValue=</span><span style="color:#e6db74">&#34;Apple&#34;</span><span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;/ComboBox&gt;</span></span></span></code></pre></div><p>Then, after the combo box has been initialized, use the <code>ItemsSource</code> to specify a collection declared in the corresponding <code>.xaml.cs</code> file.</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// Interaction logic for UserControl1.xaml</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">partial</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">UserControl1</span> : UserControl
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> UserControl1()
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        InitializeComponent();
</span></span><span style="display:flex;"><span>        FruitSelection.ItemsSource = <span style="color:#66d9ef">new</span> List&lt;<span style="color:#66d9ef">string</span>&gt;
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            <span style="color:#e6db74">&#34;Apple&#34;</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#e6db74">&#34;Orange&#34;</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#e6db74">&#34;Peach&#34;</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#e6db74">&#34;Pear&#34;</span>
</span></span><span style="display:flex;"><span>        };
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>We could also leverage <em>data binding</em> to bind the item collection dynamically.  We&rsquo;ll discuss this approach later.</p>
<h3 id="image">Image</h3>
<p>The <a href="https://docs.microsoft.com/en-us/dotnet/api/system.windows.controls.image?view=netcore-3.1" target="_blank">Image</a>
 control displays an image.  The image to display is determined by the <code>Source</code> property. If the image is not exactly the same size as the <code>&lt;Image&gt;</code> control, the <code>Stretch</code> property determines how to handle this case.  Its possible values are:</p>
<ul>
<li><code>&quot;None&quot;</code> (the default) - the image is displayed at its original size</li>
<li><code>&quot;Fill&quot;</code> - the image is resized to the element&rsquo;s size.  This will result in stretching if the aspect ratios are not the same</li>
<li><code>&quot;Uniform&quot;</code> - the image is resized to fit into the element.  If the aspect ratios are different, there will be blank areas in the element (letterboxing)</li>
<li><code>&quot;UniformToFill&quot;</code> - the image is resized to fill the element.  If the aspect ratios are different, part of the image will be cropped out</li>
</ul>
<p>The stretch values effects are captured by this graphic:</p>
<p>
<a href="#image-0cf38e07a2d5087ecac8884a10195490" class="lightbox-link">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/2.1.6.17.png" alt="The applied Stretch property" style="height: auto; width: auto;" loading="lazy">
</a>
<a href="javascript:history.back();" class="lightbox" id="image-0cf38e07a2d5087ecac8884a10195490">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/2.1.6.17.png" alt="The applied Stretch property" class="lightbox-image" loading="lazy">
</a></p>
<p>The stretching behavior can be further customized by the <a href="https://docs.microsoft.com/en-us/dotnet/api/system.windows.controls.stretchdirection?view=netcore-3.1" target="_blank">StretchDirection</a>
 property.</p>
<p>Images can also be used for <code>Background</code> or <code>Foreground</code> properties, as discussed on the next page.</p>
<h3 id="label">Label</h3>
<p>A <a href="https://docs.microsoft.com/en-us/dotnet/api/system.windows.controls.label?view=netcore-3.1" target="_blank">Label</a>
 displays text on a form, and can be as simple as:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#f92672">&lt;Label&gt;</span>First Name:<span style="color:#f92672">&lt;/Label&gt;</span></span></span></code></pre></div><p>
<a href="#image-0dba931c68adec3125f1da8fba30adca" class="lightbox-link">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/2.1.5.4.png" alt="A Label Example" style="height: auto; width: auto;" loading="lazy">
</a>
<a href="javascript:history.back();" class="lightbox" id="image-0dba931c68adec3125f1da8fba30adca">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/2.1.5.4.png" alt="A Label Example" class="lightbox-image" loading="lazy">
</a></p>
<p>What distinguishes it from other text controls is that it can also be associated with a specific control specified by the <code>Target</code> parameter, whose value should be bound to the name of the control.  It can then provide an access key (aka a mnemonic) that will transfer focus to that control when a the corresponding key is pressed.  The access key is indicated by proceeding the corresponding character in the text with an underscore:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#f92672">&lt;StackPanel&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;Label</span> <span style="color:#a6e22e">Target=</span><span style="color:#e6db74">&#34;{Binding ElementName=firstNameTextBox}&#34;</span><span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;AccessText&gt;</span>_First Name:<span style="color:#f92672">&lt;/AccessText&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;/Label&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;TextBox</span> <span style="color:#a6e22e">Name=</span><span style="color:#e6db74">&#34;firstNameTextBox&#34;</span><span style="color:#f92672">/&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;/StackPanel&gt;</span></span></span></code></pre></div><p>
<a href="#image-a1f183e701c5cf72f329388dd049b61c" class="lightbox-link">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/2.1.5.5.png" alt="A Label with Access Key Example" style="height: auto; width: auto;" loading="lazy">
</a>
<a href="javascript:history.back();" class="lightbox" id="image-a1f183e701c5cf72f329388dd049b61c">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/2.1.5.5.png" alt="A Label with Access Key Example" class="lightbox-image" loading="lazy">
</a></p>
<p>Now when the program is running, the user can press <code>ALT + F</code> to shift focus to the textbox, so they can begin typing (Note the character &ldquo;F&rdquo; is underlined in the GUI).  Good use of access keys means users can navigate forms completely with the keyboard.</p>
<h3 id="listbox">ListBox</h3>
<p>A <a href="https://docs.microsoft.com/en-us/dotnet/api/system.windows.controls.listbox?view=netcore-3.1" target="_blank">ListBox</a>
 displays a list of items that can be selected.  The <code>SelectionMode</code> property can be set to either <code>&quot;Single&quot;</code> or <code>&quot;Multiple&quot;</code>, and the <code>&quot;SelectedItems&quot;</code> read-only property provides those selected items. The <code>ItemsSource</code> property can be set declaratively using <code>&lt;ListBoxItem&gt;</code> contents.  It also exposes a <code>SelectionChanged</code> event handler:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#f92672">&lt;ListBox&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;ListBoxItem&gt;</span>Apple<span style="color:#f92672">&lt;/ListBoxItem&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;ListBoxItem&gt;</span>Orange<span style="color:#f92672">&lt;/ListBoxItem&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;ListBoxItem&gt;</span>Peach<span style="color:#f92672">&lt;/ListBoxItem&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;ListBoxItem&gt;</span>Pear<span style="color:#f92672">&lt;/ListBoxItem&gt;</span> 
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;/ListBox&gt;</span></span></span></code></pre></div><p>
<a href="#image-132a3464a35135489624514cfe941451" class="lightbox-link">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/2.1.5.7.png" alt="A Label with Access Key Example" style="height: auto; width: auto;" loading="lazy">
</a>
<a href="javascript:history.back();" class="lightbox" id="image-132a3464a35135489624514cfe941451">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/2.1.5.7.png" alt="A Label with Access Key Example" class="lightbox-image" loading="lazy">
</a></p>
<h3 id="radiobutton">RadioButton</h3>
<p>A group of <a href="https://docs.microsoft.com/en-us/dotnet/api/system.windows.controls.radiobutton?view=netcore-3.1" target="_blank">RadioButton</a>
 elements is used to present multiple options where only one can be selected.  To group radio buttons, specify a shared <code>GroupName</code> property.  Like other buttons, radio buttons have a <code>Click</code> event handler, and also a <code>Checked</code> and <code>Unchecked</code> event handler:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#f92672">&lt;StackPanel&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;RadioButton</span> <span style="color:#a6e22e">GroupName=</span><span style="color:#e6db74">&#34;Fruit&#34;</span><span style="color:#f92672">&gt;</span>Apple<span style="color:#f92672">&lt;/RadioButton&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;RadioButton</span> <span style="color:#a6e22e">GroupName=</span><span style="color:#e6db74">&#34;Fruit&#34;</span><span style="color:#f92672">&gt;</span>Orange<span style="color:#f92672">&lt;/RadioButton&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;RadioButton</span> <span style="color:#a6e22e">GroupName=</span><span style="color:#e6db74">&#34;Fruit&#34;</span><span style="color:#f92672">&gt;</span>Peach<span style="color:#f92672">&lt;/RadioButton&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;RadioButton</span> <span style="color:#a6e22e">GroupName=</span><span style="color:#e6db74">&#34;Fruit&#34;</span><span style="color:#f92672">&gt;</span>Pear<span style="color:#f92672">&lt;/RadioButton&gt;</span> 
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;/StackPanel&gt;</span></span></span></code></pre></div><p>
<a href="#image-6f0f7d6e953d6e11bf00780fd6c4eea3" class="lightbox-link">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/2.1.5.8.png" alt="A Radio Button Example" style="height: auto; width: auto;" loading="lazy">
</a>
<a href="javascript:history.back();" class="lightbox" id="image-6f0f7d6e953d6e11bf00780fd6c4eea3">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/2.1.5.8.png" alt="A Radio Button Example" class="lightbox-image" loading="lazy">
</a></p>
<h3 id="textblock">TextBlock</h3>
<p>A <a href="https://docs.microsoft.com/en-us/dotnet/api/system.windows.controls.textblock?view=netcore-3.1" target="_blank">TextBlock</a>
 can be used to display arbitrary text.  It also makes available a <code>TextChanged</code> event that is triggered when its text changes.</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#f92672">&lt;TextBlock&gt;</span>Hi, I have something important to say.  I&#39;m a text block.<span style="color:#f92672">&lt;/TextBlock&gt;</span></span></span></code></pre></div><p>
<a href="#image-80ace4433443eff93603051137be48ee" class="lightbox-link">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/2.1.5.9.png" alt="A TextBlock Example" style="height: auto; width: auto;" loading="lazy">
</a>
<a href="javascript:history.back();" class="lightbox" id="image-80ace4433443eff93603051137be48ee">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/2.1.5.9.png" alt="A TextBlock Example" class="lightbox-image" loading="lazy">
</a></p>
<h3 id="textbox">TextBox</h3>
<p>And a <a href="https://docs.microsoft.com/en-us/dotnet/api/system.windows.controls.textbox?view=netcore-3.1" target="_blank">TextBox</a>
 is an editable text box.  It&rsquo;s text can be accessed through the <code>Text</code> property:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#f92672">&lt;TextBox</span> <span style="color:#a6e22e">Text=</span><span style="color:#e6db74">&#34;And I&#39;m a textbox!&#34;</span><span style="color:#f92672">/&gt;</span></span></span></code></pre></div><p>
<a href="#image-0d89e26772675eac6aa5637f5f99cc7e" class="lightbox-link">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/2.1.5.10.png" alt="A TextBlock Example" style="height: auto; width: auto;" loading="lazy">
</a>
<a href="javascript:history.back();" class="lightbox" id="image-0d89e26772675eac6aa5637f5f99cc7e">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/2.1.5.10.png" alt="A TextBlock Example" class="lightbox-image" loading="lazy">
</a></p>
<h3 id="togglebutton">ToggleButton</h3>
<p>Finally, a <a href="">ToggleButton</a>
 is a button that is either turned on or off.  This can be determined from its <code>IsChecked</code> property.  It also has event handlers for <code>Checked</code> and <code>Unchecked</code> events:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#f92672">&lt;ToggleButton&gt;</span>On or Off<span style="color:#f92672">&lt;/ToggleButton&gt;</span></span></span></code></pre></div><p>Off looks like:</p>
<p>
<a href="#image-eaee094cc35faa45d002e331e9244655" class="lightbox-link">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/2.1.5.11.png" alt="A ToggleButton Example" style="height: auto; width: auto;" loading="lazy">
</a>
<a href="javascript:history.back();" class="lightbox" id="image-eaee094cc35faa45d002e331e9244655">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/2.1.5.11.png" alt="A ToggleButton Example" class="lightbox-image" loading="lazy">
</a></p>
<p>And on looks like:</p>
<p>
<a href="#image-de52d8c49574632431eca2d0e78cc7c0" class="lightbox-link">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/2.1.5.12.png" alt="A ToggleButton Example" style="height: auto; width: auto;" loading="lazy">
</a>
<a href="javascript:history.back();" class="lightbox" id="image-de52d8c49574632431eca2d0e78cc7c0">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/2.1.5.12.png" alt="A ToggleButton Example" class="lightbox-image" loading="lazy">
</a></p>
<h3 id="other-controls">Other Controls</h3>
<p>This is just a sampling of some of the most used controls.  You can also reference the <a href="https://docs.microsoft.com/en-us/dotnet/api/system.windows.controls?view=netcore-3.1" target="_blank">System.Windows.Controls</a>
 namespace documentation, or the <a href="https://www.tutorialspoint.com/wpf/wpf_controls.htm" target="_blank">TutorialsPoint WPF Controls</a>
 reference.</p>

            <footer class="footline">

            </footer>
          </article>

    
    
          <article class="default">
            <header class="headline">
            </header>
<h1 id="control-properties">Control Properties</h1>

<p>All WPF controls (including the layout controls we&rsquo;ve already seen) derive from common base classes, i.e. <a href="https://docs.microsoft.com/en-us/dotnet/api/system.windows.uielement?view=windowsdesktop-6.0" target="_blank">UIElement</a>
 and <a href="https://docs.microsoft.com/en-us/dotnet/api/system.windows.frameworkelement?view=windowsdesktop-6.0" target="_blank">FrameworkElement</a>
, which means they all inherit common properties.  Some of the most commonly used are described here.</p>
<h3 id="size--placement-modifying-properties">Size &amp; Placement Modifying Properties</h3>
<p>Perhaps the most important of the control properties are those that control sizing and placement.  Let&rsquo;s take a look at the most important of these.</p>
<h4 id="size">Size</h4>
<p>WPF controls use three properties to determine the height of the element.  These are <code>MinHeight</code>, <code>Height</code>, and <code>MaxHeight</code>.  They are doubles expressed in device-independent units (measuring 1/96 of an inch).  The rendering algorithm treats <code>Height</code> as a suggestion, but limits the calculated height to fall in the range between <code>MinHeight</code> and <code>MaxHeight</code>. The height determined by the algorithm can be accessed from the <code>ActualHeight</code> read-only property. Similar values exist for width: <code>MinWidth</code>, <code>Width</code>, <code>MaxWidth</code>, and <code>ActualWidth</code>.</p>
<table>
  <tr>
    <th>Property</th>
    <th>Default Value</th>
    <th>Description</th>
  </tr>
  <tr>
    <td>MinHeight</td>
    <td>0.0</td>
    <td>The minimum element height</td>
  </tr>
  <tr>
    <td>Height</td>
    <td><code>NaN</code></td>
    <td>The suggested element height</th>
  </tr>
  <tr>
    <td>MaxHeight</td>
    <td><code>PositiveInfinity<code></td>
    <td>The maximum element height</td>
  </tr>
  <tr>
    <td>MinWidth</td>
    <td>0.0</td>
    <td>The minimum element width</td>
  </tr>
  <tr>
    <td>Width</td>
    <td><code>NaN</code></td>
    <td>The suggested element width</td>
  </tr>
  <tr>
    <td>MaxWidth</td>
    <td><code>PositiveInfinity</code></td>
    <td>The maximum element width</td>
  </tr>
</table>
<h4 id="margins">Margins</h4>
<p>In addition to the size of the element, we can set margins around the element, adding empty space between this and other elements.  The <code>Margin</code> property is actually of type <code>Thickness</code>, a structure with four properties: <em>left, top, right,</em> and <em>bottom</em>.  We can set the <code>Margin</code> property in several ways using XAML.</p>
<p>To set all margins to be the same size, we just supply a single value:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#f92672">&lt;Button</span> <span style="color:#a6e22e">Margin=</span><span style="color:#e6db74">&#34;3&#34;</span><span style="color:#f92672">&gt;</span>Do something<span style="color:#f92672">&lt;/Button&gt;</span></span></span></code></pre></div><p>To set different values for the horizontal and vertical margins, use two comma-separated values (horizontal comes first):</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#f92672">&lt;Button</span> <span style="color:#a6e22e">Margin=</span><span style="color:#e6db74">&#34;10, 20&#34;</span><span style="color:#f92672">&gt;</span>Do Something<span style="color:#f92672">&lt;/Button&gt;</span> </span></span></code></pre></div><p>And finally, they can <em>all</em> be set separately as a comma-separated list (the order is <em>left, top, right,</em> and then <em>bottom</em>).</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#f92672">&lt;Button</span> <span style="color:#a6e22e">Margin=</span><span style="color:#e6db74">&#34;10, 20, 30, 50&#34;</span><span style="color:#f92672">&gt;</span>Do Something<span style="color:#f92672">&lt;/Button&gt;</span></span></span></code></pre></div><h4 id="alignment">Alignment</h4>
<p>You can also align the elements within the space allocated for them using the <code>VerticalAlignment</code> and <code>HorizontalAlignment</code> properties.  Similarly, you can align the <em>contents</em> of an element with the <code>VerticalContentAlignment</code> and <code>HorizontalContentAlignment</code> properties.</p>
<p>For most controls, these are <code>&quot;Stretch&quot;</code> by default, which means the control or its contents will expand to fill the available space.  Additional values include <code>&quot;Bottom&quot;</code>, <code>&quot;Center&quot;</code>, and <code>&quot;Top&quot;</code> for vertical, and <code>&quot;Left&quot;</code>, <code>&quot;Center&quot;</code>, and <code>&quot;Right&quot;</code> for horizontal.  These options do <em>not</em> fill the available space - the control is sized in that dimension based on its suggested size.</p>
<table>
  <tr>
    <th colspan="2">HorizontalAlignment</th>
  </tr>
  <tr>
    <th>Option</th>
    <th>Description</th>
  </tr>
  <tr>
    <td>Stretch</td>
    <td>Control fills the available horizontal space</td>
  </tr>
  <tr>
    <td>Left</td>
    <td>Control is aligned along the left of the available space</td>
  </tr>
  <tr>
    <td>Center</td>
    <td>Control is centered in the available horizontal space</td>
  </tr>
  <tr>
    <td>Right</td>
    <td>Control is aligned along the right of the available space</td>
  </tr>
  <tr>
    <th colspan="2">VerticalAlignment</th>
  </tr>
  <tr>
    <th>Option</th>
    <th>Description</th>
  </tr>
  <tr>
    <td>Stretch</td>
    <td>Control fills the available vertical space</td>
  </tr>
  <tr>
    <td>Top</td>
    <td>Control is aligned along the top side of the available space</td>
  </tr>
  <tr>
    <td>Center</td>
    <td>Control is centered in the available vertical space</td>
  </tr>
  <tr>
    <td>Bottom</td>
    <td>Control is aligned along the bottom side of the available space</td>
  </tr>
</table>
<h3 id="text-and-font-properties">Text and Font Properties</h3>
<p>As most controls prominently feature text, it is important to discuss the properties that effect how this text is presented.</p>
<h4 id="font-family">Font Family</h4>
<p>The <a href="https://docs.microsoft.com/en-us/dotnet/api/system.windows.controls.textblock.fontfamily?view=windowsdesktop-6.0" target="_blank">FontFamily</a>
 property sets the font used by the control.  This font needs to be installed on the machine.  You can supply a single font, i.e.:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#f92672">&lt;TextBlock</span> <span style="color:#a6e22e">FontFamily=</span><span style="color:#e6db74">&#34;Arial&#34;</span><span style="color:#f92672">&gt;</span></span></span></code></pre></div><p>Or a list of font families to supply fallback options if the requested font is not available:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#f92672">&lt;TextBlock</span> <span style="color:#a6e22e">FontFamily=</span><span style="color:#e6db74">&#34;Arial, Century Gothic&#34;</span><span style="color:#f92672">&gt;</span></span></span></code></pre></div><h4 id="font-size">Font Size</h4>
<p>The <a href="https://docs.microsoft.com/en-us/dotnet/api/system.windows.controls.textblock.fontsize?view=windowsdesktop-6.0" target="_blank">FontSize</a>
 property determines the size of the font used in the control.</p>
<h4 id="font-style">Font Style</h4>
<p>The <a href="https://docs.microsoft.com/en-us/dotnet/api/system.windows.controls.textblock.fontstyle?view=windowsdesktop-6.0" target="_blank">FontStyle</a>
 property sets the style of the font used. This can include <code>&quot;Normal&quot;</code>, <code>&quot;Italic&quot;</code>, or <code>&quot;Oblique&quot;</code>.  Italic is typically defined in the font itself (and created by the font creator), while Oblique is created from the normal font by applying a mathematical rendering transformation, and can be used for fonts that do not have a defined italic style.</p>
<p>
<a href="#image-f15e0c532c5d79308fa9687fcd0cbcf3" class="lightbox-link">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/2.1.6.16.png" alt="Font Styles" style="height: auto; width: auto;" loading="lazy">
</a>
<a href="javascript:history.back();" class="lightbox" id="image-f15e0c532c5d79308fa9687fcd0cbcf3">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/2.1.6.16.png" alt="Font Styles" class="lightbox-image" loading="lazy">
</a></p>
<h4 id="font-weight">Font Weight</h4>
<p>The <code>FontWeight</code> refers to how thick a stroke is used to draw the font.  It can be set to values like <code>&quot;Light&quot;</code>, <code>&quot;Normal&quot;</code>, <code>&quot;Bold&quot;</code>, or <code>&quot;Ultra Bold&quot;</code>.  A list of all available options can be found <a href="https://docs.microsoft.com/en-us/dotnet/api/system.windows.fontweights?view=windowsdesktop-6.0#remarks" target="_blank">here</a>
.</p>
<h4 id="text-alignment">Text Alignment</h4>
<p>The <code>TextAlignment</code> property defines how the text is aligned within its element.  Possible values are <code>&quot;Left&quot;</code> (the default), <code>&quot;Center&quot;</code>, <code>&quot;Justify&quot;</code>, and <code>&quot;Right&quot;</code>, and behave just like these options in your favorite text editor.</p>
<p>There is no corresponding vertical alignment option - instead use <code>VerticalContentAlignment</code> discussed above.</p>
<h3 id="appearance--interactability-modifying-properties">Appearance &amp; Interactability Modifying Properties</h3>
<p>There are often times in working with a GUI where you might want to disable or even hide a control.  WPF controls provide several properties that affect the rendering and interaction of controls.</p>
<h4 id="isenabled">IsEnabled</h4>
<p>The <code>IsEnabled</code> property is a boolean that indicates if this control is currently enabled. It defaults to <code>true</code>.  Exactly what &rsquo;enabled&rsquo; means for a control is specific to that kind of control, but usually means the control cannot be interacted with.  For example, a button with <code>IsEnabled=false</code> cannot be clicked on, and will be rendered grayed out, i.e.:</p>
<p>
<a href="#image-9819a320e88c3261cb97543420e62fcd" class="lightbox-link">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/2.1.6.1.png" alt="Enabled vs. Disabled Buttons" style="height: auto; width: auto;" loading="lazy">
</a>
<a href="javascript:history.back();" class="lightbox" id="image-9819a320e88c3261cb97543420e62fcd">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/2.1.6.1.png" alt="Enabled vs. Disabled Buttons" class="lightbox-image" loading="lazy">
</a></p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#f92672">&lt;Grid&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;Grid.ColumnDefinitions&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;ColumnDefinition/&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;ColumnDefinition/&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;/Grid.ColumnDefinitions&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;Button</span> <span style="color:#a6e22e">IsEnabled=</span><span style="color:#e6db74">&#34;False&#34;</span> <span style="color:#a6e22e">Margin=</span><span style="color:#e6db74">&#34;10&#34;</span><span style="color:#f92672">&gt;</span>I&#39;m Disabled<span style="color:#f92672">&lt;/Button&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;Button</span> <span style="color:#a6e22e">Grid.Column=</span><span style="color:#e6db74">&#34;1&#34;</span> <span style="color:#a6e22e">Margin=</span><span style="color:#e6db74">&#34;10&#34;</span><span style="color:#f92672">&gt;</span>I&#39;m Enabled<span style="color:#f92672">&lt;/Button&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;/Grid&gt;</span></span></span></code></pre></div><h4 id="opacity">Opacity</h4>
<p>A similar effect can be obtained by changing an element&rsquo;s <code>Opacity</code> property, a double that ranges from 0.0 (completely transparent) to 1.0 (completely solid).  Below you can see two <code>&lt;TextBlock&gt;</code> elements, with the one on the left set to an opacity of 0.40:</p>
<p>
<a href="#image-18877420d8da35c7a58427af1139a3a4" class="lightbox-link">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/2.1.6.2.png" alt="Opacity Example" style="height: auto; width: auto;" loading="lazy">
</a>
<a href="javascript:history.back();" class="lightbox" id="image-18877420d8da35c7a58427af1139a3a4">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/2.1.6.2.png" alt="Opacity Example" class="lightbox-image" loading="lazy">
</a></p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#f92672">&lt;Grid&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;Grid.ColumnDefinitions&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;ColumnDefinition/&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;ColumnDefinition/&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;/Grid.ColumnDefinitions&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;TextBlock</span> <span style="color:#a6e22e">Opacity=</span><span style="color:#e6db74">&#34;0.4&#34;</span> <span style="color:#a6e22e">Foreground=</span><span style="color:#e6db74">&#34;Purple&#34;</span> <span style="color:#a6e22e">VerticalAlignment=</span><span style="color:#e6db74">&#34;Center&#34;</span> <span style="color:#a6e22e">HorizontalAlignment=</span><span style="color:#e6db74">&#34;Center&#34;</span><span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>      I&#39;m semi-translucent!
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;/TextBlock&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;TextBlock</span> <span style="color:#a6e22e">Grid.Column=</span><span style="color:#e6db74">&#34;1&#34;</span> <span style="color:#a6e22e">Foreground=</span><span style="color:#e6db74">&#34;Purple&#34;</span> <span style="color:#a6e22e">VerticalAlignment=</span><span style="color:#e6db74">&#34;Center&#34;</span> <span style="color:#a6e22e">HorizontalAlignment=</span><span style="color:#e6db74">&#34;Center&#34;</span><span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>      I&#39;m solid!
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;/TextBlock&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;/Grid&gt;</span></span></span></code></pre></div><p>Alerting an elements&rsquo; opacity does not have any effect on its functionality, i.e. a completely transparent button can still be clicked.</p>
<h4 id="visibility">Visibility</h4>
<p>Finally, the Visible property alters how the element is considered in the WPF rendering algorithm.  It has three possible values: <code>&quot;Visible&quot;</code>, <code>&quot;Hidden&quot;</code>, and <code>&quot;Collapsed&quot;</code>. The default value is <code>&quot;Visible&quot;</code>, and the element renders normally, as &ldquo;Button One&rdquo; does in the example below:</p>
<p>
<a href="#image-9dab3a50ba1e8836d574fc226a20d810" class="lightbox-link">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/2.1.6.3.png" alt="Visible Visibility Example" style="height: auto; width: auto;" loading="lazy">
</a>
<a href="javascript:history.back();" class="lightbox" id="image-9dab3a50ba1e8836d574fc226a20d810">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/2.1.6.3.png" alt="Visible Visibility Example" class="lightbox-image" loading="lazy">
</a></p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#f92672">&lt;StackPanel&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&lt;Button</span> <span style="color:#a6e22e">Visibility=</span><span style="color:#e6db74">&#34;Visible&#34;</span> <span style="color:#a6e22e">Margin=</span><span style="color:#e6db74">&#34;10&#34;</span><span style="color:#f92672">&gt;</span>Button One<span style="color:#f92672">&lt;/Button&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&lt;Button</span> <span style="color:#a6e22e">Margin=</span><span style="color:#e6db74">&#34;10&#34;</span><span style="color:#f92672">&gt;</span>Button Two<span style="color:#f92672">&lt;/Button&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;/StackPanel&gt;</span></span></span></code></pre></div><p>The <code>&quot;Hidden&quot;</code> value will hide the element, but preserve its place in the layout.  A hidden element cannot be interacted with, so this is similar to setting the <code>Opacity</code> to 0 and <code>IsEnabled</code> to false:</p>
<p>
<a href="#image-7581a4fd123c73061d50873b1323b3ae" class="lightbox-link">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/2.1.6.4.png" alt="Hidden Visibility Example" style="height: auto; width: auto;" loading="lazy">
</a>
<a href="javascript:history.back();" class="lightbox" id="image-7581a4fd123c73061d50873b1323b3ae">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/2.1.6.4.png" alt="Hidden Visibility Example" class="lightbox-image" loading="lazy">
</a></p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#f92672">&lt;StackPanel&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&lt;Button</span> <span style="color:#a6e22e">Visibility=</span><span style="color:#e6db74">&#34;Hidden&#34;</span> <span style="color:#a6e22e">Margin=</span><span style="color:#e6db74">&#34;10&#34;</span><span style="color:#f92672">&gt;</span>Button One<span style="color:#f92672">&lt;/Button&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&lt;Button</span> <span style="color:#a6e22e">Margin=</span><span style="color:#e6db74">&#34;10&#34;</span><span style="color:#f92672">&gt;</span>Button Two<span style="color:#f92672">&lt;/Button&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;/StackPanel&gt;</span></span></span></code></pre></div><p>Finally, the <code>&quot;Collapsed&quot;</code> value will leave the element out of the layout calculations, as though it were not a part of the control at all.  A hidden element cannot be interacted with. Note that in the example below, &ldquo;Button Two&rdquo; has been rendered in the space previously occupied by &ldquo;Button One&rdquo;:</p>
<p>
<a href="#image-08e292b2490a0e2f2ceac2fc5ed3345e" class="lightbox-link">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/2.1.6.5.png" alt="Collapsed Visibility Example" style="height: auto; width: auto;" loading="lazy">
</a>
<a href="javascript:history.back();" class="lightbox" id="image-08e292b2490a0e2f2ceac2fc5ed3345e">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/2.1.6.5.png" alt="Collapsed Visibility Example" class="lightbox-image" loading="lazy">
</a></p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#f92672">&lt;StackPanel&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&lt;Button</span> <span style="color:#a6e22e">Visibility=</span><span style="color:#e6db74">&#34;Collapsed&#34;</span> <span style="color:#a6e22e">Margin=</span><span style="color:#e6db74">&#34;10&#34;</span><span style="color:#f92672">&gt;</span>Button One<span style="color:#f92672">&lt;/Button&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&lt;Button</span> <span style="color:#a6e22e">Margin=</span><span style="color:#e6db74">&#34;10&#34;</span><span style="color:#f92672">&gt;</span>Button Two<span style="color:#f92672">&lt;/Button&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;/StackPanel&gt;</span></span></span></code></pre></div><h3 id="backgrounds-and-foregrounds">Backgrounds and Foregrounds</h3>
<p>You may have noticed the previous examples that colors can be accomplished through the <code>Background</code> and <code>Foreground</code> properties - where the <code>Background</code> determines the color of the element, and <code>Foreground</code> determines the color of text and other foreground elements.  While this is true, it is also just the beginning of what is possible.  Both of these properties have the type <code>Brush</code>, which deserves a deeper look.</p>
<p>Simply put, a brush determines how to paint graphical objects.  This can be as simple as painting a solid color, or as complex as panting an image.  The effect used is determined by the type of brush - the <code>Brush</code> class itself serving as a base class for several specific types brush.</p>
<h4 id="solid-color-brushes">Solid Color Brushes</h4>
<p>What we&rsquo;ve been using up to this point have been <a href="https://docs.microsoft.com/en-us/dotnet/api/system.windows.media.solidcolorbrush?view=windowsdesktop-6.0" target="_blank">SolidColorBrush</a>
 objects.  This is the simplest of the brush classes, and simply paints with a solid color, i.e.:</p>
<p>
<a href="#image-b0a984eeef82623b551f22760da7dc00" class="lightbox-link">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/2.1.6.6.png" alt="Solid Color Brush Example" style="height: auto; width: auto;" loading="lazy">
</a>
<a href="javascript:history.back();" class="lightbox" id="image-b0a984eeef82623b551f22760da7dc00">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/2.1.6.6.png" alt="Solid Color Brush Example" class="lightbox-image" loading="lazy">
</a></p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#f92672">&lt;TextBlock</span> <span style="color:#a6e22e">Foreground=</span><span style="color:#e6db74">&#34;BlueViolet&#34;</span> <span style="color:#a6e22e">Background=</span><span style="color:#e6db74">&#34;DarkSeaGreen&#34;</span> <span style="color:#a6e22e">FontSize=</span><span style="color:#e6db74">&#34;25&#34;</span><span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>  Look, Ma!  I&#39;m in color!
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;/TextBlock&gt;</span></span></span></code></pre></div><p>The simplest way to set the color in XAML is to use a value from the predefined <a href="https://docs.microsoft.com/en-us/dotnet/api/system.windows.media.brushes?view=windowsdesktop-6.0#remarks" target="_blank">brush name list</a>
, like the <code>&quot;BlueViolet&quot;</code> and <code>&quot;DarkSeaGreen&quot;</code> in the example.</p>
<p>Alternatively, you can use a hexadecimal number defining the red, green, and blue channels in that order, i.e. to use K-State purple and white (as defined in the <a href="https://www.k-state.edu/vpcm/branding/KansasStateUniversity-BrandGuide.pdf" target="_blank">K-State Brand Guide</a>
) we&rsquo;d use:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#f92672">&lt;TextBlock</span> <span style="color:#a6e22e">Foreground=</span><span style="color:#e6db74">&#34;#FFFFFF&#34;</span> <span style="color:#a6e22e">Background=</span><span style="color:#e6db74">&#34;#512888&#34;</span> <span style="color:#a6e22e">FontSize=</span><span style="color:#e6db74">&#34;25&#34;</span><span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>  Look, Ma!  I&#39;m in color!
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;/TextBlock&gt;</span></span></span></code></pre></div><p>The various formats the hex values can be given are detailed <a href="https://docs.microsoft.com/en-us/dotnet/api/system.windows.media.solidcolorbrush?view=windowsdesktop-6.0#xaml-attribute-usage" target="_blank">here</a>
</p>
<h4 id="gradient-brushes">Gradient Brushes</h4>
<p>Gradient brushes gradually transition between colors.  There are two kinds of gradient brushes in WPF: with a <a href="https://docs.microsoft.com/en-us/dotnet/api/system.windows.media.lineargradientbrush?view=windowsdesktop-6.0" target="_blank">LinearGradientBrush</a>
 the brush gradually changes along a line.  With a <a href="https://docs.microsoft.com/en-us/dotnet/api/system.windows.media.radialgradientbrush?view=windowsdesktop-6.0" target="_blank">RadialGradientBrush</a>
, the color changes radially from a center point.</p>
<p>In both cases, the gradient is defined in terms of <code>&lt;GradientStops&gt;</code> - a distance along the line (or from the center) where the expected color value is defined.  In the spaces between gradient stops, the color value is interpolated between the two stops on either side of the point.  The gradient stop needs both an <code>Offset</code> value (a double indicating the percentage of how far along the line or from the center this stop falls, between 0.0 and 1.0) and a <code>Color</code> value (which can be defined as with solid color brushes).</p>
<p>For example, the XAML:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#f92672">&lt;TextBlock</span> <span style="color:#a6e22e">Foreground=</span><span style="color:#e6db74">&#34;#FFFFFF&#34;</span> <span style="color:#a6e22e">FontSize=</span><span style="color:#e6db74">&#34;25&#34;</span><span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&lt;TextBlock.Background&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&lt;LinearGradientBrush&gt;</span>
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">&lt;LinearGradientBrush.GradientStops&gt;</span>
</span></span><span style="display:flex;"><span>              <span style="color:#f92672">&lt;GradientStop</span> <span style="color:#a6e22e">Color=</span><span style="color:#e6db74">&#34;Red&#34;</span> <span style="color:#a6e22e">Offset=</span><span style="color:#e6db74">&#34;0.0&#34;</span><span style="color:#f92672">/&gt;</span>
</span></span><span style="display:flex;"><span>              <span style="color:#f92672">&lt;GradientStop</span> <span style="color:#a6e22e">Color=</span><span style="color:#e6db74">&#34;Yellow&#34;</span> <span style="color:#a6e22e">Offset=</span><span style="color:#e6db74">&#34;0.25&#34;</span><span style="color:#f92672">/&gt;</span>
</span></span><span style="display:flex;"><span>              <span style="color:#f92672">&lt;GradientStop</span> <span style="color:#a6e22e">Color=</span><span style="color:#e6db74">&#34;Green&#34;</span> <span style="color:#a6e22e">Offset=</span><span style="color:#e6db74">&#34;0.50&#34;</span><span style="color:#f92672">/&gt;</span>
</span></span><span style="display:flex;"><span>              <span style="color:#f92672">&lt;GradientStop</span> <span style="color:#a6e22e">Color=</span><span style="color:#e6db74">&#34;Blue&#34;</span> <span style="color:#a6e22e">Offset=</span><span style="color:#e6db74">&#34;0.75&#34;</span><span style="color:#f92672">/&gt;</span>
</span></span><span style="display:flex;"><span>              <span style="color:#f92672">&lt;GradientStop</span> <span style="color:#a6e22e">Color=</span><span style="color:#e6db74">&#34;Violet&#34;</span> <span style="color:#a6e22e">Offset=</span><span style="color:#e6db74">&#34;1.0&#34;</span><span style="color:#f92672">/&gt;</span>
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">&lt;/LinearGradientBrush.GradientStops&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&lt;/LinearGradientBrush&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&lt;/TextBlock.Background&gt;</span>
</span></span><span style="display:flex;"><span>  Look, Ma!  I&#39;m in color!
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;/TextBlock&gt;</span></span></span></code></pre></div><p>Produces this rainbow gradient:</p>
<p>
<a href="#image-3cf19a5658c3a76b89b10ed914b1d00a" class="lightbox-link">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/2.1.6.8.png" alt="Rainbow Linear Gradient Example" style="height: auto; width: auto;" loading="lazy">
</a>
<a href="javascript:history.back();" class="lightbox" id="image-3cf19a5658c3a76b89b10ed914b1d00a">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/2.1.6.8.png" alt="Rainbow Linear Gradient Example" class="lightbox-image" loading="lazy">
</a></p>
<p>Further, the line along which the linear gradient is created is defined by the <code>StartPoint</code> and <code>EndPoint</code> properties of the <code>&lt;LinearGradientBrush&gt;</code>.  These points are relative to the area the brush is covering (i.e. the space occupied by the element), and fall in the range of [0.0 .. 1.0].  The default (as seen above) is a diagonal line from the upper left corner (0,0) to the lower right corner (1.0, 1.0).</p>
<p>To make the above gradient fall in the center half of the element, and be horizontal, we could tweak the gradient definition:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#f92672">&lt;TextBlock</span> <span style="color:#a6e22e">Foreground=</span><span style="color:#e6db74">&#34;#FFFFFF&#34;</span> <span style="color:#a6e22e">FontSize=</span><span style="color:#e6db74">&#34;25&#34;</span><span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;TextBlock.Background&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;LinearGradientBrush</span> <span style="color:#a6e22e">StartPoint=</span><span style="color:#e6db74">&#34;0.25, 0.5&#34;</span> <span style="color:#a6e22e">EndPoint=</span><span style="color:#e6db74">&#34;0.75, 0.5&#34;</span><span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&lt;LinearGradientBrush.GradientStops&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="color:#f92672">&lt;GradientStop</span> <span style="color:#a6e22e">Color=</span><span style="color:#e6db74">&#34;Red&#34;</span> <span style="color:#a6e22e">Offset=</span><span style="color:#e6db74">&#34;0.0&#34;</span><span style="color:#f92672">/&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="color:#f92672">&lt;GradientStop</span> <span style="color:#a6e22e">Color=</span><span style="color:#e6db74">&#34;Yellow&#34;</span> <span style="color:#a6e22e">Offset=</span><span style="color:#e6db74">&#34;0.25&#34;</span><span style="color:#f92672">/&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="color:#f92672">&lt;GradientStop</span> <span style="color:#a6e22e">Color=</span><span style="color:#e6db74">&#34;Green&#34;</span> <span style="color:#a6e22e">Offset=</span><span style="color:#e6db74">&#34;0.50&#34;</span><span style="color:#f92672">/&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="color:#f92672">&lt;GradientStop</span> <span style="color:#a6e22e">Color=</span><span style="color:#e6db74">&#34;Blue&#34;</span> <span style="color:#a6e22e">Offset=</span><span style="color:#e6db74">&#34;0.75&#34;</span><span style="color:#f92672">/&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="color:#f92672">&lt;GradientStop</span> <span style="color:#a6e22e">Color=</span><span style="color:#e6db74">&#34;Violet&#34;</span> <span style="color:#a6e22e">Offset=</span><span style="color:#e6db74">&#34;1.0&#34;</span><span style="color:#f92672">/&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&lt;/LinearGradientBrush.GradientStops&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;/LinearGradientBrush&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;/TextBlock.Background&gt;</span>
</span></span><span style="display:flex;"><span>    Look, Ma!  I&#39;m in color!
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;/TextBlock&gt;</span></span></span></code></pre></div><p>
<a href="#image-e3bfe7ebae8bcf966a66f57f0a579382" class="lightbox-link">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/2.1.6.9.png" alt="Rainbow Linear Gradient with Start and End Points Example" style="height: auto; width: auto;" loading="lazy">
</a>
<a href="javascript:history.back();" class="lightbox" id="image-e3bfe7ebae8bcf966a66f57f0a579382">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/2.1.6.9.png" alt="Rainbow Linear Gradient with Start and End Points Example" class="lightbox-image" loading="lazy">
</a></p>
<p>A <code>&lt;RadialGradientBrush&gt;</code> is defined similarly through the use of <code>GradientStops</code>, only this time they are in relation to the center around which the gradient radiates:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#f92672">&lt;TextBlock</span> <span style="color:#a6e22e">Foreground=</span><span style="color:#e6db74">&#34;#FFFFFF&#34;</span> <span style="color:#a6e22e">FontSize=</span><span style="color:#e6db74">&#34;25&#34;</span><span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;TextBlock.Background&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;RadialGradientBrush&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&lt;RadialGradientBrush.GradientStops&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="color:#f92672">&lt;GradientStop</span> <span style="color:#a6e22e">Color=</span><span style="color:#e6db74">&#34;Red&#34;</span> <span style="color:#a6e22e">Offset=</span><span style="color:#e6db74">&#34;0.0&#34;</span><span style="color:#f92672">/&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="color:#f92672">&lt;GradientStop</span> <span style="color:#a6e22e">Color=</span><span style="color:#e6db74">&#34;Yellow&#34;</span> <span style="color:#a6e22e">Offset=</span><span style="color:#e6db74">&#34;0.25&#34;</span><span style="color:#f92672">/&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="color:#f92672">&lt;GradientStop</span> <span style="color:#a6e22e">Color=</span><span style="color:#e6db74">&#34;Green&#34;</span> <span style="color:#a6e22e">Offset=</span><span style="color:#e6db74">&#34;0.50&#34;</span><span style="color:#f92672">/&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="color:#f92672">&lt;GradientStop</span> <span style="color:#a6e22e">Color=</span><span style="color:#e6db74">&#34;Blue&#34;</span> <span style="color:#a6e22e">Offset=</span><span style="color:#e6db74">&#34;0.75&#34;</span><span style="color:#f92672">/&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="color:#f92672">&lt;GradientStop</span> <span style="color:#a6e22e">Color=</span><span style="color:#e6db74">&#34;Violet&#34;</span> <span style="color:#a6e22e">Offset=</span><span style="color:#e6db74">&#34;1.0&#34;</span><span style="color:#f92672">/&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&lt;/RadialGradientBrush.GradientStops&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;/RadialGradientBrush&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;/TextBlock.Background&gt;</span>
</span></span><span style="display:flex;"><span>    Look, Ma!  I&#39;m in color!
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;/TextBlock&gt;</span></span></span></code></pre></div><p>
<a href="#image-f42a2b3a462f192ba6aee2a1659ff3f1" class="lightbox-link">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/2.1.6.10.png" alt="Rainbow Radial Gradient Example" style="height: auto; width: auto;" loading="lazy">
</a>
<a href="javascript:history.back();" class="lightbox" id="image-f42a2b3a462f192ba6aee2a1659ff3f1">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/2.1.6.10.png" alt="Rainbow Radial Gradient Example" class="lightbox-image" loading="lazy">
</a></p>
<p>The gradient fills an ellipse defined by the <code>Center</code> property and the <code>RadiusX</code> and <code>RadiusY</code> properties.  By default these values are (0.5. 0.5), 0.5, and 0.5 respectively.  Like other gradient properties, they are doubles between 0.0 and 1.0.  Finally, the gradient emanates from the <code>GradientOrigin</code>, also a point with values defined by this coordinate system.</p>
<p>To center the above gradient in the left half of the block, we would therefore use:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#f92672">&lt;TextBlock.Background&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;RadialGradientBrush</span> <span style="color:#a6e22e">Center=</span><span style="color:#e6db74">&#34;0.25, 0.5&#34;</span> <span style="color:#a6e22e">RadiusX=</span><span style="color:#e6db74">&#34;0.25&#34;</span> <span style="color:#a6e22e">RadiusY=</span><span style="color:#e6db74">&#34;0.5&#34;</span> <span style="color:#a6e22e">GradientOrigin=</span><span style="color:#e6db74">&#34;0.25, 0.5&#34;</span><span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;RadialGradientBrush.GradientStops&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&lt;GradientStop</span> <span style="color:#a6e22e">Color=</span><span style="color:#e6db74">&#34;Red&#34;</span> <span style="color:#a6e22e">Offset=</span><span style="color:#e6db74">&#34;0.0&#34;</span><span style="color:#f92672">/&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&lt;GradientStop</span> <span style="color:#a6e22e">Color=</span><span style="color:#e6db74">&#34;Yellow&#34;</span> <span style="color:#a6e22e">Offset=</span><span style="color:#e6db74">&#34;0.25&#34;</span><span style="color:#f92672">/&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&lt;GradientStop</span> <span style="color:#a6e22e">Color=</span><span style="color:#e6db74">&#34;Green&#34;</span> <span style="color:#a6e22e">Offset=</span><span style="color:#e6db74">&#34;0.50&#34;</span><span style="color:#f92672">/&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&lt;GradientStop</span> <span style="color:#a6e22e">Color=</span><span style="color:#e6db74">&#34;Blue&#34;</span> <span style="color:#a6e22e">Offset=</span><span style="color:#e6db74">&#34;0.75&#34;</span><span style="color:#f92672">/&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&lt;GradientStop</span> <span style="color:#a6e22e">Color=</span><span style="color:#e6db74">&#34;Violet&#34;</span> <span style="color:#a6e22e">Offset=</span><span style="color:#e6db74">&#34;1.0&#34;</span><span style="color:#f92672">/&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;/RadialGradientBrush.GradientStops&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;/RadialGradientBrush&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;/TextBlock.Background&gt;</span></span></span></code></pre></div><p>
<a href="#image-c8428fb50f42cc12292e549a70470151" class="lightbox-link">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/2.1.6.11.png" alt="Rainbow Positioned Radial Gradient Example" style="height: auto; width: auto;" loading="lazy">
</a>
<a href="javascript:history.back();" class="lightbox" id="image-c8428fb50f42cc12292e549a70470151">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/2.1.6.11.png" alt="Rainbow Positioned Radial Gradient Example" class="lightbox-image" loading="lazy">
</a></p>
<p>And of course, we can use a gradient for a <code>Foreground</code> property as well:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#f92672">&lt;TextBlock</span> <span style="color:#a6e22e">Background=</span><span style="color:#e6db74">&#34;White&#34;</span> <span style="color:#a6e22e">FontSize=</span><span style="color:#e6db74">&#34;40&#34;</span><span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;TextBlock.Foreground&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;LinearGradientBrush&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&lt;LinearGradientBrush.GradientStops&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="color:#f92672">&lt;GradientStop</span> <span style="color:#a6e22e">Color=</span><span style="color:#e6db74">&#34;Red&#34;</span> <span style="color:#a6e22e">Offset=</span><span style="color:#e6db74">&#34;0.0&#34;</span><span style="color:#f92672">/&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="color:#f92672">&lt;GradientStop</span> <span style="color:#a6e22e">Color=</span><span style="color:#e6db74">&#34;Yellow&#34;</span> <span style="color:#a6e22e">Offset=</span><span style="color:#e6db74">&#34;0.25&#34;</span><span style="color:#f92672">/&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="color:#f92672">&lt;GradientStop</span> <span style="color:#a6e22e">Color=</span><span style="color:#e6db74">&#34;Green&#34;</span> <span style="color:#a6e22e">Offset=</span><span style="color:#e6db74">&#34;0.50&#34;</span><span style="color:#f92672">/&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="color:#f92672">&lt;GradientStop</span> <span style="color:#a6e22e">Color=</span><span style="color:#e6db74">&#34;Blue&#34;</span> <span style="color:#a6e22e">Offset=</span><span style="color:#e6db74">&#34;0.75&#34;</span><span style="color:#f92672">/&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="color:#f92672">&lt;GradientStop</span> <span style="color:#a6e22e">Color=</span><span style="color:#e6db74">&#34;Violet&#34;</span> <span style="color:#a6e22e">Offset=</span><span style="color:#e6db74">&#34;1.0&#34;</span><span style="color:#f92672">/&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&lt;/LinearGradientBrush.GradientStops&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;/LinearGradientBrush&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;/TextBlock.Foreground&gt;</span>
</span></span><span style="display:flex;"><span>    Look, Ma!  I&#39;m in color!
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;/TextBlock&gt;</span></span></span></code></pre></div><p>
<a href="#image-d174217b17b9318de562335c14bb02d4" class="lightbox-link">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/2.1.6.12.png" alt="Gradient Foreground Example" style="height: auto; width: auto;" loading="lazy">
</a>
<a href="javascript:history.back();" class="lightbox" id="image-d174217b17b9318de562335c14bb02d4">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/2.1.6.12.png" alt="Gradient Foreground Example" class="lightbox-image" loading="lazy">
</a></p>
<h4 id="image-brushes">Image Brushes</h4>
<p>To draw a saved image, we use an <a href="https://docs.microsoft.com/en-us/dotnet/api/system.windows.media.imagebrush?view=windowsdesktop-6.0" target="_blank">ImageBrush</a>
, setting its <code>ImageSource</code> property to the image we want to use.  In XAML, that can be as simple as:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#f92672">&lt;Button</span> <span style="color:#a6e22e">Margin=</span><span style="color:#e6db74">&#34;40&#34;</span> <span style="color:#a6e22e">Foreground=</span><span style="color:#e6db74">&#34;White&#34;</span> <span style="color:#a6e22e">FontSize=</span><span style="color:#e6db74">&#34;30&#34;</span><span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;Button.Background&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;ImageBrush</span> <span style="color:#a6e22e">ImageSource=</span><span style="color:#e6db74">&#34;Dish.jpg&#34;</span><span style="color:#f92672">/&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;/Button.Background&gt;</span>
</span></span><span style="display:flex;"><span>    Broadcast
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;/Button&gt;</span></span></span></code></pre></div><p>
<a href="#image-0bc45da3a978c9b064a585346e5a2442" class="lightbox-link">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/2.1.6.13.png" alt="Image Brush Example" style="height: auto; width: auto;" loading="lazy">
</a>
<a href="javascript:history.back();" class="lightbox" id="image-0bc45da3a978c9b064a585346e5a2442">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/2.1.6.13.png" alt="Image Brush Example" class="lightbox-image" loading="lazy">
</a></p>
<p>We can apply image brushes to any WPF control, allowing for some interesting layering effects, i.e.:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#f92672">&lt;Grid&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;Grid.Background&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;ImageBrush</span> <span style="color:#a6e22e">ImageSource=</span><span style="color:#e6db74">&#34;watering-can.jpg&#34;</span><span style="color:#f92672">/&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;/Grid.Background&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;Grid.ColumnDefinitions&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;ColumnDefinition/&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;ColumnDefinition/&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;ColumnDefinition/&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;/Grid.ColumnDefinitions&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;Grid.RowDefinitions&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;RowDefinition/&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;RowDefinition/&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;RowDefinition/&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;/Grid.RowDefinitions&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;Button</span> <span style="color:#a6e22e">Margin=</span><span style="color:#e6db74">&#34;40&#34;</span> <span style="color:#a6e22e">Foreground=</span><span style="color:#e6db74">&#34;White&#34;</span> <span style="color:#a6e22e">FontSize=</span><span style="color:#e6db74">&#34;30&#34;</span><span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;Button.Background&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&lt;ImageBrush</span> <span style="color:#a6e22e">ImageSource=</span><span style="color:#e6db74">&#34;Dish.jpg&#34;</span><span style="color:#f92672">/&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;/Button.Background&gt;</span>
</span></span><span style="display:flex;"><span>        Broadcast
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;/Button&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;/Grid&gt;</span></span></span></code></pre></div><p>
<a href="#image-f00bf1be2098254b2a05b2f6f65daece" class="lightbox-link">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/2.1.6.14.png" alt="Image Brush Layering Example" style="height: auto; width: auto;" loading="lazy">
</a>
<a href="javascript:history.back();" class="lightbox" id="image-f00bf1be2098254b2a05b2f6f65daece">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/2.1.6.14.png" alt="Image Brush Layering Example" class="lightbox-image" loading="lazy">
</a></p>
<p>You probably notice that the dish image on the button is distorted.  We can correct this by changing the <a href="https://docs.microsoft.com/en-us/dotnet/desktop/wpf/graphics-multimedia/tilebrush-overview?view=netframeworkdesktop-4.8#the-base-tile" target="_blank">Stretch</a>
 property.  The possible values are: <code>&quot;None&quot;</code>, <code>&quot;Fill&quot;</code>, <code>&quot;Uniform&quot;</code>, and <code>&quot;UniformToFill&quot;</code>.  This graphic from the documentation visual shows these properties:</p>
<p>
<a href="#image-1fba6ccb195c6caf95449fe123a6adbc" class="lightbox-link">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/2.1.6.17.png" alt="The applied Stretch property" style="height: auto; width: auto;" loading="lazy">
</a>
<a href="javascript:history.back();" class="lightbox" id="image-1fba6ccb195c6caf95449fe123a6adbc">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/2.1.6.17.png" alt="The applied Stretch property" class="lightbox-image" loading="lazy">
</a></p>
<p>The <code>ImageBrush</code> extends the <code>TileBrush</code>, so the image can actually be <em>tiled</em> if the tile size is set to be smaller than the element that it is painting. The <a href="https://docs.microsoft.com/en-us/dotnet/desktop/wpf/graphics-multimedia/tilebrush-overview" target="_blank">TileBrush Overview</a>
 provides a detailed breakdown of applying tiling.</p>

  
  
<div class="box notices cstyle warning">
  <div class="box-label"><i class="fa-fw fas fa-exclamation-triangle"></i> Warning</div>
  <div class="box-content">

<p>When using images with Visual Studio, it is important to understand how those are used and distributed.  You should make sure the images are physically located within the project folder (so that they are included in your source control).  Additionally, you want to mark the property &ldquo;Copy to Output Directory&rdquo; to either &ldquo;Copy Always&rdquo; or &ldquo;Copy if Newer.&rdquo;  When distributing your project, these files will also need to be distributed, or the image will be unavailable to your executable.

<a href="#image-e2843970520fe1b9dd158534b717986f" class="lightbox-link">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/2.1.6.15.png" alt="Copy to Output Directory" style="height: auto; width: auto;" loading="lazy">
</a>
<a href="javascript:history.back();" class="lightbox" id="image-e2843970520fe1b9dd158534b717986f">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/2.1.6.15.png" alt="Copy to Output Directory" class="lightbox-image" loading="lazy">
</a></p>
</div>
</div>

            <footer class="footline">

            </footer>
          </article>

    
    
          <article class="default">
            <header class="headline">
            </header>
<h1 id="editing-wpf-controls">Editing WPF Controls</h1>

<p>To create a new WPF control from within Visual Studio, we usually choose <strong>&ldquo;Add &gt; User Control (WPF&hellip;)&rdquo;</strong> from the solution context menu.</p>
<p>
<a href="#image-ca529a3c1664ad7711b6586e1311adc5" class="lightbox-link">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/2.1.7.1.png" alt="Adding a UserControl in Visual Studio" style="height: auto; width: auto;" loading="lazy">
</a>
<a href="javascript:history.back();" class="lightbox" id="image-ca529a3c1664ad7711b6586e1311adc5">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/2.1.7.1.png" alt="Adding a UserControl in Visual Studio" class="lightbox-image" loading="lazy">
</a></p>
<p>This creates two files, the <em>[filename].xaml</em>:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#f92672">&lt;UserControl</span> <span style="color:#a6e22e">x:Class=</span><span style="color:#e6db74">&#34;WpfApp1.UserControl1&#34;</span>
</span></span><span style="display:flex;"><span>             <span style="color:#a6e22e">xmlns=</span><span style="color:#e6db74">&#34;http://schemas.microsoft.com/winfx/2006/xaml/presentation&#34;</span>
</span></span><span style="display:flex;"><span>             <span style="color:#a6e22e">xmlns:x=</span><span style="color:#e6db74">&#34;http://schemas.microsoft.com/winfx/2006/xaml&#34;</span>
</span></span><span style="display:flex;"><span>             <span style="color:#a6e22e">xmlns:mc=</span><span style="color:#e6db74">&#34;http://schemas.openxmlformats.org/markup-compatibility/2006&#34;</span> 
</span></span><span style="display:flex;"><span>             <span style="color:#a6e22e">xmlns:d=</span><span style="color:#e6db74">&#34;http://schemas.microsoft.com/expression/blend/2008&#34;</span> 
</span></span><span style="display:flex;"><span>             <span style="color:#a6e22e">xmlns:local=</span><span style="color:#e6db74">&#34;clr-namespace:WpfApp1&#34;</span>
</span></span><span style="display:flex;"><span>             <span style="color:#a6e22e">mc:Ignorable=</span><span style="color:#e6db74">&#34;d&#34;</span> 
</span></span><span style="display:flex;"><span>             <span style="color:#a6e22e">d:DesignHeight=</span><span style="color:#e6db74">&#34;100&#34;</span> <span style="color:#a6e22e">d:DesignWidth=</span><span style="color:#e6db74">&#34;400&#34;</span><span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;Grid&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;/Grid&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;/UserControl&gt;</span></span></span></code></pre></div><p>and the codebehind for that XAML file, <em>[filename].xaml.cs</em> (where [filename] is the name you supplied):</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">using</span> System;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">using</span> System.Collections.Generic;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">using</span> System.Collections.ObjectModel;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">using</span> System.Text;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">using</span> System.Windows;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">using</span> System.Windows.Controls;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">using</span> System.Windows.Data;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">using</span> System.Windows.Documents;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">using</span> System.Windows.Input;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">using</span> System.Windows.Media;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">using</span> System.Windows.Media.Imaging;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">using</span> System.Windows.Navigation;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">using</span> System.Windows.Shapes;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">namespace</span> WpfApp1
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// Interaction logic for UserControl1.xaml</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">partial</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">UserControl1</span> : UserControl
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">public</span> UserControl1()
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            InitializeComponent();
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>As was mentioned previously, the <code>InitializeComponent()</code> call in the constructor is what builds the structure specified in the XAML file to the object, so it should not be removed, nor should any manipulation of that structure be done before this method invocation.</p>

  
  
<div class="box notices cstyle tip">
  <div class="box-label"><i class="fa-fw fas fa-lightbulb"></i> Tip</div>
  <div class="box-content">

<p>Most custom controls are subclasses of the <code>UserControl</code> class, and choosing this option has Visual Studio create the boilerplate for us.  However, if you need to extend a <em>specific</em> control, i.e. a <code>ListView</code>, it is often easiest to start with a <code>UserControl</code> made this way, and then change the base class to <code>ListView</code> in the <em>[filename].xaml.cs</em> file, as well as changing the <code>&lt;UserControl&gt;</code> element to a <code>&lt;ListView&gt;</code> element in the <em>[filename].xaml</em>.</p>
</div>
</div>
<h3 id="namespaces-and-assemblies">Namespaces and Assemblies</h3>
<p>Also, notice how the attributes of the control in the XAML file contain a <em>local</em> namespace:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span> xmlns:local=&#34;clr-namespace:WpfApp1&#34;</span></span></code></pre></div><p>This is the equivalent of a <code>using</code> statement for XAML; it creates the <code>local</code> namespace and ties it to the project&rsquo;s primary namespace. We can then create an element corresponding to any class in that namespace.  Let&rsquo;s say we have another custom control, <code>ThingAMaJig</code> that we want to utilize in this control.  We can use the element notation to add it to our grid:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span>    <span style="color:#f92672">&lt;Grid&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&lt;local:ThingAMaJig&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;/Grid&gt;</span></span></span></code></pre></div><p>Note that we must preface the class name in the element with the <code>local</code> namespace, with a colon (<code>:</code>) separating the two.</p>
<p>We can also add additional namespace statements.  For example:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span>xmlns:system=&#34;clr-namespace:System;assembly=mscorlib&#34;</span></span></code></pre></div><p>This brings in the <code>System</code> namespace, so now we can use the classes and types defined there, i.e <code>String</code>:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#f92672">&lt;system:String&gt;</span>Hello World!<span style="color:#f92672">&lt;/system:String&gt;</span></span></span></code></pre></div><p>Note that for the namespace attribute, we also included the assembly information.  This is necessary for any assemblies that are not defined by this project (i.e. exist in their own DLL files).</p>
<h3 id="the-wpf-editor">The WPF Editor</h3>
<p>In Visual Studio, opening a WPF XAML file will open a special editor that provides a side-by-side visual and XAML code editors for the control:</p>
<p>
<a href="#image-6db784f9cc06f1a20ae0725595a45892" class="lightbox-link">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/2.1.7.2.png" alt="The Visual Studio WPF XAML Editor" style="height: auto; width: auto;" loading="lazy">
</a>
<a href="javascript:history.back();" class="lightbox" id="image-6db784f9cc06f1a20ae0725595a45892">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/2.1.7.2.png" alt="The Visual Studio WPF XAML Editor" class="lightbox-image" loading="lazy">
</a></p>
<p>As you edit the XAML, it also updates the visualization in the visual editor.  Also, many element properties can be edited from the visual editor or the properties pane - and these changes are automatically applied to the XAML. And, just like with Windows Forms, you can drag controls from the toolbox into the visualization to add them to the layout.</p>
<p>However, you will likely find yourselves often directly editing the XAML. This is often the fastest and most foolproof way of editing WPF controls.  Remember that in WPF controls resize to fit the available space, and are not positioned by coordinates.  For this reason, the visual editor will actually apply <em>margins</em> instead of positioning elements, which can cause unexpected results if your application is viewed at a different resolution (including some controls being inaccessible as they are covered by other controls).</p>
<p>A couple of buttons in the editor deserve some closer attention:</p>
<p>
<a href="#image-d2e3cb256c72c45ed056d0d0f2624652" class="lightbox-link">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/2.1.7.3.png" alt="Visual Studio WPF XAML Editor Button Detail 1" style="height: auto; width: auto;" loading="lazy">
</a>
<a href="javascript:history.back();" class="lightbox" id="image-d2e3cb256c72c45ed056d0d0f2624652">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/2.1.7.3.png" alt="Visual Studio WPF XAML Editor Button Detail 1" class="lightbox-image" loading="lazy">
</a></p>
<ol>
<li>The zoom factor in the design editor</li>
<li>Refreshes the design editor - sometimes it hangs on re-rendering, and you need to click this.</li>
<li>Toggles rendering effects (These use the graphics hardware, and can be computationally involved. Turning them off can improve performance on weaker machines)</li>
<li>Toggles the snap grid (provides grid lines for easier layout)</li>
<li>Toggles snap-to-grid</li>
<li>Toggles the artboard background (which provides a checkered background to make it easier to judge what is transparent)</li>
<li>Toggles snapping to snap lines (those lines that appear between controls to help you align them)</li>
<li>Toggles showing platform-only vs. all controls (for when targeting multiple platforms)</li>
</ol>
<p>
<a href="#image-df039d9d827568106b7790d9f236b0e7" class="lightbox-link">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/2.1.7.4.png" alt="Visual Studio WPF XAML Editor Button Detail 2" style="height: auto; width: auto;" loading="lazy">
</a>
<a href="javascript:history.back();" class="lightbox" id="image-df039d9d827568106b7790d9f236b0e7">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/2.1.7.4.png" alt="Visual Studio WPF XAML Editor Button Detail 2" class="lightbox-image" loading="lazy">
</a></p>
<ol start="9">
<li>Switches to a vertical split between the design editor and XAML editor</li>
<li>Switches to a horizontal split between the design editor and XAML editor</li>
<li>Switches to showing only the design editor or XAML editor</li>
</ol>

            <footer class="footline">

            </footer>
          </article>

    
    
          <article class="default">
            <header class="headline">
            </header>
<h1 id="component-based-design">Component-Based Design</h1>

<p>WPF and XAML lend themselves to a design approach known as Component-Based Design or Component-Based Development, which rather than focusing on developing the entire GUI in one go, focuses on decomposing user experiences (UX) into individual, focused, and potentially reusable components.  These can, in turn, be used to build larger components, and eventually, the entire GUI[^Jayati2019].</p>
<p>Let&rsquo;s dig deeper by focusing on a specific example.  Let&rsquo;s say we want to build an application for keeping track of multiple shopping lists.  So our core component is a displayed list, plus a mechanism for adding to it. Let&rsquo;s create a <code>UserComponent</code> to represent this.</p>
<p>For laying out the component, let&rsquo;s say at the very top, we place the text &ldquo;Shopping List For&rdquo;, and directly below that we have an editable text box where the user can enter a store name.  On the bottom, we&rsquo;ll have a text box to enter a new item, and a button to add that item to the list.  And in the space between, we&rsquo;ll show the list in its current form.  This sounds like an ideal fit for the <code>DockPanel</code>:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#f92672">&lt;UserControl</span> <span style="color:#a6e22e">x:Class=</span><span style="color:#e6db74">&#34;ShopEasy.ShoppingList&#34;</span>
</span></span><span style="display:flex;"><span>             <span style="color:#a6e22e">xmlns=</span><span style="color:#e6db74">&#34;http://schemas.microsoft.com/winfx/2006/xaml/presentation&#34;</span>
</span></span><span style="display:flex;"><span>             <span style="color:#a6e22e">xmlns:x=</span><span style="color:#e6db74">&#34;http://schemas.microsoft.com/winfx/2006/xaml&#34;</span>
</span></span><span style="display:flex;"><span>             <span style="color:#a6e22e">xmlns:mc=</span><span style="color:#e6db74">&#34;http://schemas.openxmlformats.org/markup-compatibility/2006&#34;</span> 
</span></span><span style="display:flex;"><span>             <span style="color:#a6e22e">xmlns:d=</span><span style="color:#e6db74">&#34;http://schemas.microsoft.com/expression/blend/2008&#34;</span> 
</span></span><span style="display:flex;"><span>             <span style="color:#a6e22e">xmlns:local=</span><span style="color:#e6db74">&#34;clr-namespace:ShopEasy&#34;</span>
</span></span><span style="display:flex;"><span>             <span style="color:#a6e22e">mc:Ignorable=</span><span style="color:#e6db74">&#34;d&#34;</span> 
</span></span><span style="display:flex;"><span>             <span style="color:#a6e22e">d:DesignHeight=</span><span style="color:#e6db74">&#34;450&#34;</span> <span style="color:#a6e22e">d:DesignWidth=</span><span style="color:#e6db74">&#34;200&#34;</span><span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;DockPanel&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;TextBlock</span> <span style="color:#a6e22e">DockPanel.Dock=</span><span style="color:#e6db74">&#34;Top&#34;</span> <span style="color:#a6e22e">FontWeight=</span><span style="color:#e6db74">&#34;Bold&#34;</span> <span style="color:#a6e22e">TextAlignment=</span><span style="color:#e6db74">&#34;Center&#34;</span><span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>            Shopping List For:
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;/TextBlock&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;TextBox</span> <span style="color:#a6e22e">DockPanel.Dock=</span><span style="color:#e6db74">&#34;Top&#34;</span> <span style="color:#a6e22e">FontWeight=</span><span style="color:#e6db74">&#34;Bold&#34;</span> <span style="color:#a6e22e">TextAlignment=</span><span style="color:#e6db74">&#34;Center&#34;</span> <span style="color:#f92672">/&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;Button</span> <span style="color:#a6e22e">DockPanel.Dock=</span><span style="color:#e6db74">&#34;Bottom&#34;</span> <span style="color:#a6e22e">Click=</span><span style="color:#e6db74">&#34;AddItemToList&#34;</span><span style="color:#f92672">&gt;</span>Add Item To List<span style="color:#f92672">&lt;/Button&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;TextBox</span> <span style="color:#a6e22e">Name=</span><span style="color:#e6db74">&#34;itemTextBox&#34;</span> <span style="color:#a6e22e">DockPanel.Dock=</span><span style="color:#e6db74">&#34;Bottom&#34;</span><span style="color:#f92672">/&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;ListView</span> <span style="color:#a6e22e">Name=</span><span style="color:#e6db74">&#34;itemsListView&#34;</span> <span style="color:#f92672">/&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;/DockPanel&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;/UserControl&gt;</span></span></span></code></pre></div><p>Now in our codebehind, we&rsquo;ll need to define the <code>AddItemToList</code> event handler:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">using</span> System.Windows;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">using</span> System.Windows.Controls;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">namespace</span> ShopEasy
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// Interaction logic for ShoppingList.xaml</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">partial</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">ShoppingList</span> : UserControl
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">/// Constructs a new ShoppingList</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">public</span> ShoppingList()
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            InitializeComponent();
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">/// Adds the item in the itemTextBox to the itemsListView</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">/// &lt;param name=&#34;sender&#34;&gt;The object sending the event&lt;/param&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">/// &lt;param name=&#34;e&#34;&gt;The events describing the event&lt;/param&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">void</span> AddItemToList(<span style="color:#66d9ef">object</span> sender, RoutedEventArgs e)
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">// Make sure there&#39;s an item to add</span>
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">if</span> (itemTextBox.Text.Length == <span style="color:#ae81ff">0</span>) <span style="color:#66d9ef">return</span>;
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">// Add the item to the list</span>
</span></span><span style="display:flex;"><span>            itemsListView.Items.Add(itemTextBox.Text);
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">// Clear the text box</span>
</span></span><span style="display:flex;"><span>            itemTextBox.Clear();
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>This particular component is pretty much self-contained.  We can use it in other components that need a shopping list.  In our case, we&rsquo;ll add it to a collection of shopping lists we can flip through with a couple of buttons, as well as create new lists in.  Let&rsquo;s call this control <code>ListSwitcher</code>.</p>
<p>This time, let&rsquo;s use a <code>Grid</code> layout and divide the available space into three columns and two rows.  The columns we&rsquo;ll leave with the default width (<code>&quot;1*&quot;</code>), but the bottom row we&rsquo;ll set as 100 units high, leaving the top row to expand to fill the remaining space.  Along the bottom we&rsquo;ll create three buttons to navigate between shopping lists.  On the top, we&rsquo;ll use the <code>Grid.ColumnSpan</code> property on a <code>Border</code> to span the three columns, creating a container where we&rsquo;ll display the current <code>ShoppingList</code>:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#f92672">&lt;UserControl</span> <span style="color:#a6e22e">x:Class=</span><span style="color:#e6db74">&#34;ShopEasy.ListSwitcher&#34;</span>
</span></span><span style="display:flex;"><span>             <span style="color:#a6e22e">xmlns=</span><span style="color:#e6db74">&#34;http://schemas.microsoft.com/winfx/2006/xaml/presentation&#34;</span>
</span></span><span style="display:flex;"><span>             <span style="color:#a6e22e">xmlns:x=</span><span style="color:#e6db74">&#34;http://schemas.microsoft.com/winfx/2006/xaml&#34;</span>
</span></span><span style="display:flex;"><span>             <span style="color:#a6e22e">xmlns:mc=</span><span style="color:#e6db74">&#34;http://schemas.openxmlformats.org/markup-compatibility/2006&#34;</span> 
</span></span><span style="display:flex;"><span>             <span style="color:#a6e22e">xmlns:d=</span><span style="color:#e6db74">&#34;http://schemas.microsoft.com/expression/blend/2008&#34;</span> 
</span></span><span style="display:flex;"><span>             <span style="color:#a6e22e">xmlns:local=</span><span style="color:#e6db74">&#34;clr-namespace:ShopEasy&#34;</span>
</span></span><span style="display:flex;"><span>             <span style="color:#a6e22e">mc:Ignorable=</span><span style="color:#e6db74">&#34;d&#34;</span> 
</span></span><span style="display:flex;"><span>             <span style="color:#a6e22e">d:DesignHeight=</span><span style="color:#e6db74">&#34;450&#34;</span> <span style="color:#a6e22e">d:DesignWidth=</span><span style="color:#e6db74">&#34;200&#34;</span><span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;Grid&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;Grid.ColumnDefinitions&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&lt;ColumnDefinition/&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&lt;ColumnDefinition/&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&lt;ColumnDefinition/&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;/Grid.ColumnDefinitions&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;Grid.RowDefinitions&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&lt;RowDefinition/&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&lt;RowDefinition</span> <span style="color:#a6e22e">Height=</span><span style="color:#e6db74">&#34;50&#34;</span><span style="color:#f92672">/&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;/Grid.RowDefinitions&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;Border</span> <span style="color:#a6e22e">Name=</span><span style="color:#e6db74">&#34;listContainer&#34;</span> <span style="color:#a6e22e">Grid.ColumnSpan=</span><span style="color:#e6db74">&#34;3&#34;</span><span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;/Border&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;Button</span> <span style="color:#a6e22e">Grid.Row=</span><span style="color:#e6db74">&#34;1&#34;</span> <span style="color:#a6e22e">Click=</span><span style="color:#e6db74">&#34;OnPriorList&#34;</span><span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>            &amp;lt; Prior List
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;/Button&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;Button</span> <span style="color:#a6e22e">Grid.Row=</span><span style="color:#e6db74">&#34;1&#34;</span> <span style="color:#a6e22e">Grid.Column=</span><span style="color:#e6db74">&#34;1&#34;</span> <span style="color:#a6e22e">Click=</span><span style="color:#e6db74">&#34;OnNewList&#34;</span><span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>            New List
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;/Button&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;Button</span> <span style="color:#a6e22e">Grid.Row=</span><span style="color:#e6db74">&#34;1&#34;</span> <span style="color:#a6e22e">Grid.Column=</span><span style="color:#e6db74">&#34;2&#34;</span> <span style="color:#a6e22e">Click=</span><span style="color:#e6db74">&#34;OnNextList&#34;</span><span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>            Next List &amp;gt;
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;/Button&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;/Grid&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;/UserControl&gt;</span></span></span></code></pre></div><p>Now we&rsquo;ll implement the three button <code>Click</code> event handlers in the codebehind, as well as creating a <code>List&lt;ShoppingList&gt;</code> to store all of our lists:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">using</span> System.Collections.Generic;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">using</span> System.Windows;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">using</span> System.Windows.Controls;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">namespace</span> ShopEasy
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// Interaction logic for ListSwitcher.xaml</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">partial</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">ListSwitcher</span> : UserControl
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">/// The list of shopping lists managed by this control</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>        List&lt;ShoppingList&gt; lists = <span style="color:#66d9ef">new</span> List&lt;ShoppingList&gt;();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">/// The index of the currently displayed shopping list</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">int</span> currentListIndex = <span style="color:#ae81ff">0</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">/// Constructs a new ListSwitcher</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">public</span> ListSwitcher()
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            InitializeComponent();
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">/// Creates a new ShoppingList and displays it</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">/// &lt;param name=&#34;sender&#34;&gt;What triggered this event&lt;/param&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">/// &lt;param name=&#34;e&#34;&gt;The parameters of this event&lt;/param&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">void</span> OnNewList(<span style="color:#66d9ef">object</span> sender, RoutedEventArgs e)
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">// Create a new shopping list</span>
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">var</span> list = <span style="color:#66d9ef">new</span> ShoppingList();
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">// The current count of lists will be the index of the next list added</span>
</span></span><span style="display:flex;"><span>            currentListIndex = lists.Count;
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">// Add the list to the list of shopping lists</span>
</span></span><span style="display:flex;"><span>            lists.Add(list);
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">// Display the list on the control</span>
</span></span><span style="display:flex;"><span>            listContainer.Child = list;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">/// Displays the prior shopping list</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">/// &lt;param name=&#34;sender&#34;&gt;What triggered this event&lt;/param&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">/// &lt;param name=&#34;e&#34;&gt;The parameters of this event&lt;/param&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">void</span> OnPriorList(<span style="color:#66d9ef">object</span> sender, RoutedEventArgs e)
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">// don&#39;t try to access an empty list </span>
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">if</span> (lists.Count == <span style="color:#ae81ff">0</span>) <span style="color:#66d9ef">return</span>;
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">// decrement the currentListIndex</span>
</span></span><span style="display:flex;"><span>            currentListIndex--;
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">// make sure we don&#39;t go below the first index in the list (0)</span>
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">if</span> (currentListIndex &lt; <span style="color:#ae81ff">0</span>) currentListIndex = <span style="color:#ae81ff">0</span>;
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">// display the indexed list </span>
</span></span><span style="display:flex;"><span>            listContainer.Child = lists[currentListIndex];
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">/// Displays the next shopping list</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">/// &lt;param name=&#34;sender&#34;&gt;What triggered this event&lt;/param&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">/// &lt;param name=&#34;e&#34;&gt;The parameters of this event&lt;/param&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">void</span> OnNextList(<span style="color:#66d9ef">object</span> sender, RoutedEventArgs e)
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">// don&#39;t try to access an empty list </span>
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">if</span> (lists.Count == <span style="color:#ae81ff">0</span>) <span style="color:#66d9ef">return</span>;
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">// increment the currentListIndex</span>
</span></span><span style="display:flex;"><span>            currentListIndex++;
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">// make sure we don&#39;t go above the last index in the list (Count - 1)</span>
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">if</span> (currentListIndex &gt; lists.Count - <span style="color:#ae81ff">1</span>) currentListIndex = lists.Count - <span style="color:#ae81ff">1</span>;
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">// display the indexed list </span>
</span></span><span style="display:flex;"><span>            listContainer.Child = lists[currentListIndex];
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>And finally, we&rsquo;ll modify our <code>MainWindow</code> XAML to display a <code>ListSwitcher</code>:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#f92672">&lt;Window</span> <span style="color:#a6e22e">x:Class=</span><span style="color:#e6db74">&#34;ShopEasy.MainWindow&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">xmlns=</span><span style="color:#e6db74">&#34;http://schemas.microsoft.com/winfx/2006/xaml/presentation&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">xmlns:x=</span><span style="color:#e6db74">&#34;http://schemas.microsoft.com/winfx/2006/xaml&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">xmlns:d=</span><span style="color:#e6db74">&#34;http://schemas.microsoft.com/expression/blend/2008&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">xmlns:mc=</span><span style="color:#e6db74">&#34;http://schemas.openxmlformats.org/markup-compatibility/2006&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">xmlns:local=</span><span style="color:#e6db74">&#34;clr-namespace:ShopEasy&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">mc:Ignorable=</span><span style="color:#e6db74">&#34;d&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">Title=</span><span style="color:#e6db74">&#34;MainWindow&#34;</span> <span style="color:#a6e22e">Height=</span><span style="color:#e6db74">&#34;450&#34;</span> <span style="color:#a6e22e">Width=</span><span style="color:#e6db74">&#34;200&#34;</span><span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;Grid&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;local:ListSwitcher/&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;/Grid&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;/Window&gt;</span></span></span></code></pre></div><p>The resulting app allows us to create multiple shopping lists, and swap between them using the buttons:</p>
<p>
<a href="#image-a5866a066fb0d33cfee3cc0a784eaba3" class="lightbox-link">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/2.1.8.1.png" alt="ShopEasy App" style="height: auto; width: auto;" loading="lazy">
</a>
<a href="javascript:history.back();" class="lightbox" id="image-a5866a066fb0d33cfee3cc0a784eaba3">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/2.1.8.1.png" alt="ShopEasy App" class="lightbox-image" loading="lazy">
</a></p>
<p>Much like we can use objects to break program functionality into smaller, more focused units, we can use component-based design to break GUIs into smaller, more focused units.  Both reflect one of the principles of good programming practice - the Single Responsibility Principle.  This principle suggests each unit of code should focus on a single responsibility, and more complex behaviors be achieved by using multiple units together.  As we see here, this principle extends across multiple programming paradigms.</p>

            <footer class="footline">

            </footer>
          </article>

    
    
          <article class="default">
            <header class="headline">
            </header>
<h1 id="summary">Summary</h1>

<p>In this chapter, we introduced a new desktop application programming framework - Windows Presentation Foundation (WPF).  We explored how WPF uses XAML to define partial classes, allowing for a graphical design editor with regular C# codebehind.  We explored XAML syntax and many of the controls found in WPF.  We also compared WPF with Windows Forms, which you have previously explored in prior classes.  Finally, we discussed an approach to developing GUIs, <em>Component-Based Design</em>, which applies the Single Responsibility Principle to controls, and builds more complex controls through <em>composition</em> of these simpler controls.</p>

            <footer class="footline">

            </footer>
          </article>

          </section>
    
    
          <article class="chapter">
            <header class="headline">
            </header>


<div class="article-subheading">Chapter 2</div>
<h1 id="exploring-elements">Exploring Elements</h1>

<p>Our application is a tree?</p>

            <footer class="footline">

            </footer>
          </article>

          <section>
            <h1 class="a11y-only">Subsections of Exploring Elements</h1>
    
    
          <article class="default">
            <header class="headline">
            </header>
<h1 id="introduction">Introduction</h1>

<p>In the previous chapter, we introduced Windows Presentation Foundation and XAML, and discussed common layouts and controls, as well as some of the most common features of each of them.  We also saw the concept of component-based design and explored its use.  In this chapter, we&rsquo;ll take a deeper dive into how WPF and XAML structure GUIs into an <em>elements tree</em>, and some different ways we can leverage these features for greater control and customization in our programs.</p>
<h2 id="key-terms">Key Terms</h2>
<ul>
<li>The Elements Tree</li>
<li>Styles</li>
<li>Resources</li>
</ul>
<h2 id="c-keywords-and-elements">C# Keywords and Elements</h2>
<ul>
<li><code>&lt;Style&gt;</code></li>
<li><code>&lt;Setter&gt;</code></li>
<li><code>StaticResource</code></li>
</ul>
<h2 id="key-skills">Key Skills</h2>
<p>In this chapter, you should learn how to navigate the elements tree, declare styles to simplify styling your applications, and declare resources that can be bound to properties of controls.</p>

            <footer class="footline">

            </footer>
          </article>

    
    
          <article class="default">
            <header class="headline">
            </header>
<h1 id="the-elements-tree">The Elements Tree</h1>

<p>Consider the <code>ShoppingList</code> class we developed in the last chapter:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#f92672">&lt;UserControl</span> <span style="color:#a6e22e">x:Class=</span><span style="color:#e6db74">&#34;ShopEasy.ShoppingList&#34;</span>
</span></span><span style="display:flex;"><span>             <span style="color:#a6e22e">xmlns=</span><span style="color:#e6db74">&#34;http://schemas.microsoft.com/winfx/2006/xaml/presentation&#34;</span>
</span></span><span style="display:flex;"><span>             <span style="color:#a6e22e">xmlns:x=</span><span style="color:#e6db74">&#34;http://schemas.microsoft.com/winfx/2006/xaml&#34;</span>
</span></span><span style="display:flex;"><span>             <span style="color:#a6e22e">xmlns:mc=</span><span style="color:#e6db74">&#34;http://schemas.openxmlformats.org/markup-compatibility/2006&#34;</span> 
</span></span><span style="display:flex;"><span>             <span style="color:#a6e22e">xmlns:d=</span><span style="color:#e6db74">&#34;http://schemas.microsoft.com/expression/blend/2008&#34;</span> 
</span></span><span style="display:flex;"><span>             <span style="color:#a6e22e">xmlns:local=</span><span style="color:#e6db74">&#34;clr-namespace:ShopEasy&#34;</span>
</span></span><span style="display:flex;"><span>             <span style="color:#a6e22e">mc:Ignorable=</span><span style="color:#e6db74">&#34;d&#34;</span> 
</span></span><span style="display:flex;"><span>             <span style="color:#a6e22e">d:DesignHeight=</span><span style="color:#e6db74">&#34;450&#34;</span> <span style="color:#a6e22e">d:DesignWidth=</span><span style="color:#e6db74">&#34;200&#34;</span><span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;DockPanel&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;TextBlock</span> <span style="color:#a6e22e">DockPanel.Dock=</span><span style="color:#e6db74">&#34;Top&#34;</span> <span style="color:#a6e22e">FontWeight=</span><span style="color:#e6db74">&#34;Bold&#34;</span> <span style="color:#a6e22e">TextAlignment=</span><span style="color:#e6db74">&#34;Center&#34;</span><span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>            Shopping List For:
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;/TextBlock&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;TextBox</span> <span style="color:#a6e22e">DockPanel.Dock=</span><span style="color:#e6db74">&#34;Top&#34;</span> <span style="color:#a6e22e">FontWeight=</span><span style="color:#e6db74">&#34;Bold&#34;</span> <span style="color:#a6e22e">TextAlignment=</span><span style="color:#e6db74">&#34;Center&#34;</span> <span style="color:#f92672">/&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;Button</span> <span style="color:#a6e22e">DockPanel.Dock=</span><span style="color:#e6db74">&#34;Bottom&#34;</span> <span style="color:#a6e22e">Click=</span><span style="color:#e6db74">&#34;AddItemToList&#34;</span><span style="color:#f92672">&gt;</span>Add Item To List<span style="color:#f92672">&lt;/Button&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;TextBox</span> <span style="color:#a6e22e">Name=</span><span style="color:#e6db74">&#34;itemTextBox&#34;</span> <span style="color:#a6e22e">DockPanel.Dock=</span><span style="color:#e6db74">&#34;Bottom&#34;</span><span style="color:#f92672">/&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;ListView</span> <span style="color:#a6e22e">Name=</span><span style="color:#e6db74">&#34;itemsListView&#34;</span> <span style="color:#f92672">/&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;/DockPanel&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;/UserControl&gt;</span></span></span></code></pre></div><p>Each element in this XAML corresponds to an object of a specific Type, and the nesting of the elements implies a tree-like structure we call the <a href="https://docs.microsoft.com/en-us/dotnet/desktop/wpf/advanced/trees-in-wpf?view=netframeworkdesktop-4.8" target="_blank"><em>element tree</em></a>
.  We can draw this out as an actual tree:</p>
<p>
<a href="#image-81a2a70fd1f9c5fc765bd8602c314302" class="lightbox-link">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/2.2.2.1.png" alt="The elements tree for the ShoppingList component" style="height: auto; width: auto;" loading="lazy">
</a>
<a href="javascript:history.back();" class="lightbox" id="image-81a2a70fd1f9c5fc765bd8602c314302">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/2.2.2.1.png" alt="The elements tree for the ShoppingList component" class="lightbox-image" loading="lazy">
</a></p>
<p>The relationships in the tree are also embodied in the code.  Each element has either a <code>Child</code> or <code>Children</code> property depending on if it can have just one or multiple children, and these are populated by the elements defined in the XAML.  Thus, because the <code>&lt;DockPanel&gt;</code> has nested within it, a <code>&lt;TextBlock&gt;</code>, <code>&lt;TextBox&gt;</code>, <code>&lt;Button&gt;</code>, <code>&lt;TextBox&gt;</code>, and <code>&lt;ListView&gt;</code>, these are all contained in its <code>Children</code> Property.  In turn, the <code>&lt;Button&gt;</code> element has text as a child, which is implemented as another <code>&lt;TextBlock&gt;</code>.  Also, each component has a <code>Parent</code> property, which references the control that is its immediate parent.</p>
<p>In other words, all the WPF controls are effectively <em>nodes</em> in a <em>tree data structure</em>.  We can modify this data structure by adding or removing nodes.  This is exactly what happens in the <code>ListSwitcher</code> control - when you click the &ldquo;New List&rdquo; button, or the &ldquo;Prior&rdquo; or &ldquo;Next&rdquo; button, you are swapping the subtree that is the child of its <code>&lt;Border&gt;</code> element:</p>
<p>
<a href="#image-1b7d1f09a50e45b3aa52f90925a409b2" class="lightbox-link">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/2.2.2.2.png" alt="The elements tree for the ListSwitcher component" style="height: auto; width: auto;" loading="lazy">
</a>
<a href="javascript:history.back();" class="lightbox" id="image-1b7d1f09a50e45b3aa52f90925a409b2">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/2.2.2.2.png" alt="The elements tree for the ListSwitcher component" class="lightbox-image" loading="lazy">
</a></p>
<p>In fact, the entire application is one large tree of elements, with the <code>&lt;Application&gt;</code> as its root:</p>
<p>
<a href="#image-889ba7aecadcf8472d0c1ac5392f9121" class="lightbox-link">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/2.2.2.3.png" alt="ShopEasy App element tree" style="height: auto; width: auto;" loading="lazy">
</a>
<a href="javascript:history.back();" class="lightbox" id="image-889ba7aecadcf8472d0c1ac5392f9121">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/2.2.2.3.png" alt="ShopEasy App element tree" class="lightbox-image" loading="lazy">
</a></p>

            <footer class="footline">

            </footer>
          </article>

    
    
          <article class="default">
            <header class="headline">
            </header>
<h1 id="navigating-the-tree">Navigating the Tree</h1>

<p>When you first learned about trees, you also learned about tree traversal algorithms.  This is one reason that WPF is organized into a tree - the rendering process actually uses a tree traversal algorithm to determine how large to make each control!</p>
<p>You can also traverse the tree yourself, by exploring <code>Child</code>, <code>Children</code>, or <code>Parent</code> properties.  For example, if we needed to gain access to the <code>ListSwitcher</code> from the <code>ShoppingList</code> in the previous example, you could reach it by invoking:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>   ListSwitcher switcher = <span style="color:#66d9ef">this</span>.Parent.Parent.Parent <span style="color:#66d9ef">as</span> ListSwitcher;</span></span></code></pre></div><p>In this example, <code>this</code> is our <code>ShoppingList</code>, the first <code>Parent</code> is the <code>Border</code> containing the <code>ShoppingList</code>, the second <code>Parent</code> is the <code>Grid</code> containing that <code>Border</code>, and the third <code>Parent</code> is the actual <code>ListSwitcher</code>.  We have to cast it to be a <code>ListSwitcher</code> because the type of the <code>Parent</code> property is a <code>DependencyObject</code> (a common base class of all controls).</p>
<p>Of course, this is a rather brittle way of finding an ancestor, because if we add any nodes to the element tree (perhaps move the <code>Grid</code> within a <code>DockPanel</code>), we&rsquo;ll need to rewrite it.  It would be better to use a loop to iteratively climb the tree until we find the control we&rsquo;re looking for.  This is greatly aided by the <a href="https://docs.microsoft.com/en-us/dotnet/api/system.windows.logicaltreehelper?view=netcore-3.1" target="_blank"><code>LogicalTreeHelper</code></a>
 library, which provides standardized static methods for accessing parents and children in the elements tree:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#75715e">// Start climbing the tree from this node</span>
</span></span><span style="display:flex;"><span>DependencyObject parent = <span style="color:#66d9ef">this</span>;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">do</span>
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// Get this node&#39;s parent</span>
</span></span><span style="display:flex;"><span>    parent = LogicalTreeHelper.GetParent(parent);
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#75715e">// Invariant: there is a parent element, and it is not a ListSwitcher </span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">while</span>(!(parent <span style="color:#66d9ef">is</span> <span style="color:#66d9ef">null</span> || parent <span style="color:#66d9ef">is</span> ListSwitcher));
</span></span><span style="display:flex;"><span><span style="color:#75715e">// If we get to this point, parent is either null, or the ListSwitcher we&#39;re looking for</span></span></span></code></pre></div><p>Searching the ancestors is a relatively easy task, as each node in the tree has only one parent.  Searching the descendants takes more work, as each node may have many children, with children of their own.</p>
<p>This approach works well for complex applications with complex GUIs, where it is infeasible to keep references around.  However, for our simple application here, it might make more sense to refactor the <code>ShoppingList</code> class to keep track of the <code>ListSwitcher</code> that created it, i.e.:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">using</span> System.Windows;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">using</span> System.Windows.Controls;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">namespace</span> ShopEasy
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// Interaction logic for ShoppingList.xaml</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">partial</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">ShoppingList</span> : UserControl
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">/// The ListSwitcher that created this list</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">private</span> ListSwitcher listSwitcher;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">/// Constructs a new ShoppingList</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">public</span> ShoppingList(ListSwitcher listSwitcher)
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            InitializeComponent();
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">this</span>.listSwitcher = listSwitcher;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">/// Adds the item in the itemTextBox to the itemsListView</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">/// &lt;param name=&#34;sender&#34;&gt;The object sending the event&lt;/param&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">/// &lt;param name=&#34;e&#34;&gt;The events describing the event&lt;/param&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">void</span> AddItemToList(<span style="color:#66d9ef">object</span> sender, RoutedEventArgs e)
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">// Make sure there&#39;s an item to add</span>
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">if</span> (itemTextBox.Text.Length == <span style="color:#ae81ff">0</span>) <span style="color:#66d9ef">return</span>;
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">// Add the item to the list</span>
</span></span><span style="display:flex;"><span>            itemsListView.Items.Add(itemTextBox.Text);
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">// Clear the text box</span>
</span></span><span style="display:flex;"><span>            itemTextBox.Clear();
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>However, this approach now tightly couples the <code>ListSwitcher</code> and <code>ShoppingList</code> - we can no longer use the <code>ShoppingList</code> for other contexts without a <code>ListSwitcher</code>.</p>
<p>If we instead employed the the traversal algorithm detailed above:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">using</span> System.Windows;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">using</span> System.Windows.Controls;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">namespace</span> ShopEasy
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// Interaction logic for ShoppingList.xaml</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">partial</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">ShoppingList</span> : UserControl
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">/// The ListSwitcher that created this list</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">private</span> ListSwitcher listSwitcher { 
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">get</span> {
</span></span><span style="display:flex;"><span>                DependencyObject parent = <span style="color:#66d9ef">this</span>;
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">do</span>
</span></span><span style="display:flex;"><span>                {
</span></span><span style="display:flex;"><span>                    <span style="color:#75715e">// Get this node&#39;s parent</span>
</span></span><span style="display:flex;"><span>                    parent = LogicalTreeHelper.GetParent(parent);
</span></span><span style="display:flex;"><span>                }
</span></span><span style="display:flex;"><span>                <span style="color:#75715e">// Invariant: there is a parent element, and it is not a ListSwitcher </span>
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">while</span>(!(parent <span style="color:#66d9ef">is</span> <span style="color:#66d9ef">null</span> || parent <span style="color:#66d9ef">is</span> ListSwitcher));
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">return</span> parent;
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">/// Constructs a new ShoppingList</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">public</span> ShoppingList()
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            InitializeComponent();
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">/// Adds the item in the itemTextBox to the itemsListView</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">/// &lt;param name=&#34;sender&#34;&gt;The object sending the event&lt;/param&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">/// &lt;param name=&#34;e&#34;&gt;The events describing the event&lt;/param&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">void</span> AddItemToList(<span style="color:#66d9ef">object</span> sender, RoutedEventArgs e)
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">// Make sure there&#39;s an item to add</span>
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">if</span> (itemTextBox.Text.Length == <span style="color:#ae81ff">0</span>) <span style="color:#66d9ef">return</span>;
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">// Add the item to the list</span>
</span></span><span style="display:flex;"><span>            itemsListView.Items.Add(itemTextBox.Text);
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">// Clear the text box</span>
</span></span><span style="display:flex;"><span>            itemTextBox.Clear();
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>We could invoke the <code>listSwitcher</code> property to get the ancestor <code>ListSwitcher</code>.  If this control is being used without one, the value will be <code>Null</code>.</p>

            <footer class="footline">

            </footer>
          </article>

    
    
          <article class="default">
            <header class="headline">
            </header>
<h1 id="styling-the-tree">Styling the Tree</h1>

<p>Windows Presentation Foundation takes advantage of the elements tree in other ways.  One of the big ones is for styling related elements.  Let&rsquo;s say we are creating a calculator GUI:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#f92672">&lt;UserControl</span> <span style="color:#a6e22e">x:Class=</span><span style="color:#e6db74">&#34;Calculator.Calculator&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">xmlns=</span><span style="color:#e6db74">&#34;http://schemas.microsoft.com/winfx/2006/xaml/presentation&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">xmlns:x=</span><span style="color:#e6db74">&#34;http://schemas.microsoft.com/winfx/2006/xaml&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">xmlns:d=</span><span style="color:#e6db74">&#34;http://schemas.microsoft.com/expression/blend/2008&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">xmlns:mc=</span><span style="color:#e6db74">&#34;http://schemas.openxmlformats.org/markup-compatibility/2006&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">xmlns:local=</span><span style="color:#e6db74">&#34;clr-namespace:Calculator&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">mc:Ignorable=</span><span style="color:#e6db74">&#34;d&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">d:DesignWidth=</span><span style="color:#e6db74">&#34;450&#34;</span> <span style="color:#a6e22e">d:DesignHeight=</span><span style="color:#e6db74">&#34;450&#34;</span><span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;Grid&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;Grid.ColumnDefinitions&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&lt;ColumnDefinition/&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&lt;ColumnDefinition/&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&lt;ColumnDefinition/&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&lt;ColumnDefinition/&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;/Grid.ColumnDefinitions&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;Grid.RowDefinitions&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&lt;RowDefinition/&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&lt;RowDefinition/&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&lt;RowDefinition/&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&lt;RowDefinition/&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&lt;RowDefinition/&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;/Grid.RowDefinitions&gt;</span>
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;Button</span> <span style="color:#a6e22e">Grid.Column=</span><span style="color:#e6db74">&#34;0&#34;</span> <span style="color:#a6e22e">Grid.Row=</span><span style="color:#e6db74">&#34;1&#34;</span><span style="color:#f92672">&gt;</span>7<span style="color:#f92672">&lt;/Button&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;Button</span> <span style="color:#a6e22e">Grid.Column=</span><span style="color:#e6db74">&#34;1&#34;</span> <span style="color:#a6e22e">Grid.Row=</span><span style="color:#e6db74">&#34;1&#34;</span><span style="color:#f92672">&gt;</span>8<span style="color:#f92672">&lt;/Button&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;Button</span> <span style="color:#a6e22e">Grid.Column=</span><span style="color:#e6db74">&#34;2&#34;</span> <span style="color:#a6e22e">Grid.Row=</span><span style="color:#e6db74">&#34;1&#34;</span><span style="color:#f92672">&gt;</span>9<span style="color:#f92672">&lt;/Button&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;Button</span> <span style="color:#a6e22e">Grid.Column=</span><span style="color:#e6db74">&#34;0&#34;</span> <span style="color:#a6e22e">Grid.Row=</span><span style="color:#e6db74">&#34;2&#34;</span><span style="color:#f92672">&gt;</span>4<span style="color:#f92672">&lt;/Button&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;Button</span> <span style="color:#a6e22e">Grid.Column=</span><span style="color:#e6db74">&#34;1&#34;</span> <span style="color:#a6e22e">Grid.Row=</span><span style="color:#e6db74">&#34;2&#34;</span><span style="color:#f92672">&gt;</span>5<span style="color:#f92672">&lt;/Button&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;Button</span> <span style="color:#a6e22e">Grid.Column=</span><span style="color:#e6db74">&#34;2&#34;</span> <span style="color:#a6e22e">Grid.Row=</span><span style="color:#e6db74">&#34;2&#34;</span><span style="color:#f92672">&gt;</span>6<span style="color:#f92672">&lt;/Button&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;Button</span> <span style="color:#a6e22e">Grid.Column=</span><span style="color:#e6db74">&#34;0&#34;</span> <span style="color:#a6e22e">Grid.Row=</span><span style="color:#e6db74">&#34;3&#34;</span><span style="color:#f92672">&gt;</span>7<span style="color:#f92672">&lt;/Button&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;Button</span> <span style="color:#a6e22e">Grid.Column=</span><span style="color:#e6db74">&#34;1&#34;</span> <span style="color:#a6e22e">Grid.Row=</span><span style="color:#e6db74">&#34;3&#34;</span><span style="color:#f92672">&gt;</span>8<span style="color:#f92672">&lt;/Button&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;Button</span> <span style="color:#a6e22e">Grid.Column=</span><span style="color:#e6db74">&#34;2&#34;</span> <span style="color:#a6e22e">Grid.Row=</span><span style="color:#e6db74">&#34;3&#34;</span><span style="color:#f92672">&gt;</span>8<span style="color:#f92672">&lt;/Button&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;Button</span> <span style="color:#a6e22e">Grid.Column=</span><span style="color:#e6db74">&#34;0&#34;</span> <span style="color:#a6e22e">Grid.Row=</span><span style="color:#e6db74">&#34;4&#34;</span> <span style="color:#a6e22e">Grid.ColumnSpan=</span><span style="color:#e6db74">&#34;3&#34;</span><span style="color:#f92672">&gt;</span>0<span style="color:#f92672">&lt;/Button&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;Button</span> <span style="color:#a6e22e">Grid.Column=</span><span style="color:#e6db74">&#34;3&#34;</span> <span style="color:#a6e22e">Grid.Row=</span><span style="color:#e6db74">&#34;1&#34;</span><span style="color:#f92672">&gt;</span>-<span style="color:#f92672">&lt;/Button&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;Button</span> <span style="color:#a6e22e">Grid.Column=</span><span style="color:#e6db74">&#34;3&#34;</span> <span style="color:#a6e22e">Grid.Row=</span><span style="color:#e6db74">&#34;2&#34;</span><span style="color:#f92672">&gt;</span>-<span style="color:#f92672">&lt;/Button&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;Button</span> <span style="color:#a6e22e">Grid.Column=</span><span style="color:#e6db74">&#34;3&#34;</span> <span style="color:#a6e22e">Grid.Row=</span><span style="color:#e6db74">&#34;3&#34;</span><span style="color:#f92672">&gt;</span>*<span style="color:#f92672">&lt;/Button&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;Button</span> <span style="color:#a6e22e">Grid.Column=</span><span style="color:#e6db74">&#34;3&#34;</span> <span style="color:#a6e22e">Grid.Row=</span><span style="color:#e6db74">&#34;4&#34;</span><span style="color:#f92672">&gt;</span>/<span style="color:#f92672">&lt;/Button&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;/Grid&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;/Window&gt;</span></span></span></code></pre></div><p>Once we have the elements laid out, we realize the text of the buttons is too small.  Fixing this would mean setting the <code>FontSize</code> property of each <code>&lt;Button&gt;</code>.  That&rsquo;s a lot of repetitive coding.</p>
<p>Thankfully, the XAML developers anticipated this kind of situation, and allow us to attach a <code>&lt;Style&gt;</code> resource to the control. We typically would do this above the controls we want to style - in this case, either on the <code>&lt;Grid&gt;</code> or the <code>&lt;UserControl&gt;</code>.  If we were to attach it to the <code>&lt;Grid&gt;</code>, we&rsquo;d declare a <code>&lt;Grid.Resources&gt;</code> property, and inside it, a <code>&lt;Style&gt;</code>:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#f92672">&lt;Grid.Resources&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;Style&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;/Style&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;/Grid.Resources&gt;</span></span></span></code></pre></div><p>The <code>&lt;Style&gt;</code> element allows us to specify a <code>TargetType</code> property, which is the Type we want the style to apply to - in this case <code>&quot;Button&quot;</code>.  Inside the <code>&lt;Style&gt;</code> element, we declare <code>&lt;Setter&gt;</code> elements, which need <code>Property</code> and <code>Value</code> attribute.  As you might guess from the names, the <code>&lt;Setter&gt;</code> will set the specified property to the specified value on each element of the target type.</p>
<p>Therefore, if we use:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#f92672">&lt;Grid.Resources&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;Style</span> <span style="color:#a6e22e">TargetType=</span><span style="color:#e6db74">&#34;Button&#34;</span><span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;Setter</span> <span style="color:#a6e22e">Property=</span><span style="color:#e6db74">&#34;FontSize&#34;</span> <span style="color:#a6e22e">Value=</span><span style="color:#e6db74">&#34;40&#34;</span><span style="color:#f92672">/&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;/Style&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;/Grid.Resources&gt;</span></span></span></code></pre></div><p>The result will be that all buttons that are children of the <code>&lt;Grid&gt;</code> will have their <code>FontSize</code> set to <code>40</code> device-independent pixels.  We don&rsquo;t need to add a separate <code>FontSize=&quot;40&quot;</code> to each one!  However, if we add <code>FontSize=&quot;50&quot;</code> to a single button, that button alone will have a slightly larger font.</p>
<p>We can declare as many <code>&lt;Setters&gt;</code> as we want in a <code>&lt;Style&gt;</code> element, and as many <code>&lt;Style&gt;</code> elements as we want in a <code>&lt;.Resources&gt;</code> element.  Moreover, styles apply to all children in the elements tree.  Closer setters override those farther up the tree, and setting the property directly on an element always gives the final say.</p>
<p>Thus, we might put application-wide styles directly in our <code>MainWindow</code> using <code>&lt;Window.Resources&gt;</code>, and override those further down the elements tree when we want a different behavior.</p>

  
  
<div class="box notices cstyle info">
  <div class="box-label"><i class="fa-fw fas fa-info-circle"></i> Info</div>
  <div class="box-content">

<p>You may notice some similarities between <code>&lt;Style&gt;</code> elements and the <em>cascading style sheets (css)</em> of web technologies. This is not surprising, as the styling approach used in WPF was inspired by CSS, much as XAML drew inspiration from HTML.  However, the implementation details are necessarily different, as XAML is effectively declaring C# objects.  Hence, the use of &lsquo;setters&rsquo; to set &lsquo;properties&rsquo; to a specific &lsquo;value&rsquo;.</p>
</div>
</div>

            <footer class="footline">

            </footer>
          </article>

    
    
          <article class="default">
            <header class="headline">
            </header>
<h1 id="resources">Resources</h1>

<p>The <code>&lt;Style&gt;</code> element represents just one kind of resource.  We can provide other kinds of resources, like raw data.  Say we want to provide a string to display in our program, but want that string declared somewhere easy to find and change (perhaps our customers change their mind frequently).  We could declare the string in the <code>Application</code> resources:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#f92672">&lt;Application</span> <span style="color:#a6e22e">x:Class=</span><span style="color:#e6db74">&#34;WpfTutorialSamples.App&#34;</span>
</span></span><span style="display:flex;"><span>             <span style="color:#a6e22e">xmlns=</span><span style="color:#e6db74">&#34;http://schemas.microsoft.com/winfx/2006/xaml/presentation&#34;</span>
</span></span><span style="display:flex;"><span>             <span style="color:#a6e22e">xmlns:x=</span><span style="color:#e6db74">&#34;http://schemas.microsoft.com/winfx/2006/xaml&#34;</span>
</span></span><span style="display:flex;"><span>             <span style="color:#a6e22e">xmlns:sys=</span><span style="color:#e6db74">&#34;clr-namespace:System;assembly=mscorlib&#34;</span>
</span></span><span style="display:flex;"><span>             <span style="color:#a6e22e">StartupUri=</span><span style="color:#e6db74">&#34;WPF application/ExtendedResourceSample.xaml&#34;</span><span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;Application.Resources&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;sys:String</span> <span style="color:#a6e22e">x:Key=</span><span style="color:#e6db74">&#34;StringToDisplay&#34;</span><span style="color:#f92672">&gt;</span>Hello World!<span style="color:#f92672">&lt;/sys:String&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;/Application.Resources&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;/Application&gt;</span></span></span></code></pre></div><p>Then, in our actual control we can use that string as a <em>static resource</em>:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#f92672">&lt;TextBlock</span> <span style="color:#a6e22e">Text=</span><span style="color:#e6db74">&#34;{StaticResource StringToDisplay}&#34;</span><span style="color:#f92672">&gt;</span></span></span></code></pre></div><p>As long as that element is a descendant of the element the resource is declared on, it will be used in the property.  In this case, we&rsquo;ll display the string &ldquo;Hello World!&rdquo; in the <code>TextBlock</code>.  Note that we have to use the <code>x:Key</code> property to identify the resource, and repeat the key in the <code>&quot;{StaticResource StringToDisplay}&quot;</code>.  The curly braces and the <code>StaticResource</code> both need to be there (technically, they are setting up a <em>data binding</em>, which we&rsquo;ll talk about in a future chapter).</p>
<p>We can declare any kind of type as a resource and make it available in our XAML this way.</p>
<p>For example, we could create a <code>LinearGradientBrush</code>:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#f92672">&lt;Application</span> <span style="color:#a6e22e">x:Class=</span><span style="color:#e6db74">&#34;WpfTutorialSamples.App&#34;</span>
</span></span><span style="display:flex;"><span>             <span style="color:#a6e22e">xmlns=</span><span style="color:#e6db74">&#34;http://schemas.microsoft.com/winfx/2006/xaml/presentation&#34;</span>
</span></span><span style="display:flex;"><span>             <span style="color:#a6e22e">xmlns:x=</span><span style="color:#e6db74">&#34;http://schemas.microsoft.com/winfx/2006/xaml&#34;</span>
</span></span><span style="display:flex;"><span>             <span style="color:#a6e22e">xmlns:sys=</span><span style="color:#e6db74">&#34;clr-namespace:System;assembly=mscorlib&#34;</span>
</span></span><span style="display:flex;"><span>             <span style="color:#a6e22e">StartupUri=</span><span style="color:#e6db74">&#34;WPF application/ExtendedResourceSample.xaml&#34;</span><span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;Application.Resources&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;LinearGradientBrush</span> <span style="color:#a6e22e">x:Key=</span><span style="color:#e6db74">&#34;Rainbow&#34;</span><span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&lt;LinearGradientBrush.GradientStops&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="color:#f92672">&lt;GradientStop</span> <span style="color:#a6e22e">Color=</span><span style="color:#e6db74">&#34;Red&#34;</span> <span style="color:#a6e22e">Offset=</span><span style="color:#e6db74">&#34;0.0&#34;</span><span style="color:#f92672">/&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="color:#f92672">&lt;GradientStop</span> <span style="color:#a6e22e">Color=</span><span style="color:#e6db74">&#34;Yellow&#34;</span> <span style="color:#a6e22e">Offset=</span><span style="color:#e6db74">&#34;0.25&#34;</span><span style="color:#f92672">/&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="color:#f92672">&lt;GradientStop</span> <span style="color:#a6e22e">Color=</span><span style="color:#e6db74">&#34;Green&#34;</span> <span style="color:#a6e22e">Offset=</span><span style="color:#e6db74">&#34;0.50&#34;</span><span style="color:#f92672">/&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="color:#f92672">&lt;GradientStop</span> <span style="color:#a6e22e">Color=</span><span style="color:#e6db74">&#34;Blue&#34;</span> <span style="color:#a6e22e">Offset=</span><span style="color:#e6db74">&#34;0.75&#34;</span><span style="color:#f92672">/&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="color:#f92672">&lt;GradientStop</span> <span style="color:#a6e22e">Color=</span><span style="color:#e6db74">&#34;Violet&#34;</span> <span style="color:#a6e22e">Offset=</span><span style="color:#e6db74">&#34;1.0&#34;</span><span style="color:#f92672">/&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&lt;/LinearGradientBrush.GradientStops&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;/LinearGradientBrush&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;/Application.Resources&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;/Application&gt;</span></span></span></code></pre></div><p>And then use it as a <code>Background</code> or <code>Foreground</code> property in our controls:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#f92672">&lt;Grid</span> <span style="color:#a6e22e">Background=</span><span style="color:#e6db74">&#34;{StaticResource Rainbow}&#34;</span><span style="color:#f92672">&gt;</span></span></span></code></pre></div><p>Since it is only defined in one place, it is now easier to reuse, and if we ever need to change it, we only need to change it in one location.</p>
<p>Finally, we can create static resources from images and other media.  First, we have to set its build action to &ldquo;Resource&rdquo; in the <strong>&ldquo;Properties&rdquo;</strong> window after adding it to our project:</p>
<p>
<a href="#image-e477a946530bbcac255503190100fd2d" class="lightbox-link">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/2.2.5.1.png" alt="Setting the image properties" style="height: auto; width: auto;" loading="lazy">
</a>
<a href="javascript:history.back();" class="lightbox" id="image-e477a946530bbcac255503190100fd2d">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/2.2.5.1.png" alt="Setting the image properties" class="lightbox-image" loading="lazy">
</a></p>
<p>Then we can declare a <code>&lt;BitmapImage&gt;</code> resource using a <code>UriSource</code> property that matches the path to the image within our project:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#f92672">&lt;Application</span> <span style="color:#a6e22e">x:Class=</span><span style="color:#e6db74">&#34;WpfTutorialSamples.App&#34;</span>
</span></span><span style="display:flex;"><span>             <span style="color:#a6e22e">xmlns=</span><span style="color:#e6db74">&#34;http://schemas.microsoft.com/winfx/2006/xaml/presentation&#34;</span>
</span></span><span style="display:flex;"><span>             <span style="color:#a6e22e">xmlns:x=</span><span style="color:#e6db74">&#34;http://schemas.microsoft.com/winfx/2006/xaml&#34;</span>
</span></span><span style="display:flex;"><span>             <span style="color:#a6e22e">xmlns:sys=</span><span style="color:#e6db74">&#34;clr-namespace:System;assembly=mscorlib&#34;</span>
</span></span><span style="display:flex;"><span>             <span style="color:#a6e22e">StartupUri=</span><span style="color:#e6db74">&#34;WPF application/ExtendedResourceSample.xaml&#34;</span><span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;Application.Resources&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;BitmapImage</span> <span style="color:#a6e22e">x:Key=</span><span style="color:#e6db74">&#34;MountainImage&#34;</span> <span style="color:#a6e22e">UriSource=</span><span style="color:#e6db74">&#34;Images/mountains.jpg&#34;</span><span style="color:#f92672">/&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;/Applicaton.Resources&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;/Application&gt;</span></span></span></code></pre></div><p>And then we can use this as the <code>ImageSource</code> for an <code>ImageBrush</code>:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#f92672">&lt;Grid&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;Grid.Background&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;ImageBrush</span> <span style="color:#a6e22e">ImageSource=</span><span style="color:#e6db74">&#34;{StaticResource MountainImage}&#34;</span><span style="color:#f92672">/&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;/Grid.Background&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;/Grid&gt;</span></span></span></code></pre></div><p>The benefit of using images and other media as resources is that they are <em>compiled into the binary assembly</em> (the <em>.dll</em> or <em>.exe</em> file).  This means they don&rsquo;t need to be copied separately when we distribute our application.</p>

            <footer class="footline">

            </footer>
          </article>

    
    
          <article class="default">
            <header class="headline">
            </header>
<h1 id="templates">Templates</h1>

<p>Most WPF controls are themselves composed of multiple, simpler, controls. For example, a <code>&lt;Button&gt;</code> is composed of a <code>&lt;Border&gt;</code> and whatever content you place inside the button.  A simplified version of this structure appears below (I removed the styling information and the <code>VisualState</code> components responsible for presenting the button differently when it is enabled, disabled, hovered on, or clicked):</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#f92672">&lt;Border</span> <span style="color:#a6e22e">TextBlock.Foreground=</span><span style="color:#e6db74">&#34;{TemplateBinding Foreground}&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">x:Name=</span><span style="color:#e6db74">&#34;Border&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">CornerRadius=</span><span style="color:#e6db74">&#34;2&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">BorderThickness=</span><span style="color:#e6db74">&#34;1&#34;</span><span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&lt;Border.BorderBrush&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;LinearGradientBrush</span> <span style="color:#a6e22e">StartPoint=</span><span style="color:#e6db74">&#34;0,0&#34;</span>
</span></span><span style="display:flex;"><span>                          <span style="color:#a6e22e">EndPoint=</span><span style="color:#e6db74">&#34;0,1&#34;</span><span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&lt;LinearGradientBrush.GradientStops&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;GradientStopCollection&gt;</span>
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">&lt;GradientStop</span> <span style="color:#a6e22e">Color=</span><span style="color:#e6db74">&#34;{DynamicResource BorderLightColor}&#34;</span>
</span></span><span style="display:flex;"><span>                        <span style="color:#a6e22e">Offset=</span><span style="color:#e6db74">&#34;0.0&#34;</span> <span style="color:#f92672">/&gt;</span>
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">&lt;GradientStop</span> <span style="color:#a6e22e">Color=</span><span style="color:#e6db74">&#34;{DynamicResource BorderDarkColor}&#34;</span>
</span></span><span style="display:flex;"><span>                        <span style="color:#a6e22e">Offset=</span><span style="color:#e6db74">&#34;1.0&#34;</span> <span style="color:#f92672">/&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;/GradientStopCollection&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&lt;/LinearGradientBrush.GradientStops&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;/LinearGradientBrush&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&lt;/Border.BorderBrush&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&lt;Border.Background&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;LinearGradientBrush</span> <span style="color:#a6e22e">EndPoint=</span><span style="color:#e6db74">&#34;0.5,1&#34;</span>
</span></span><span style="display:flex;"><span>                          <span style="color:#a6e22e">StartPoint=</span><span style="color:#e6db74">&#34;0.5,0&#34;</span><span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&lt;GradientStop</span> <span style="color:#a6e22e">Color=</span><span style="color:#e6db74">&#34;{DynamicResource ControlLightColor}&#34;</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#a6e22e">Offset=</span><span style="color:#e6db74">&#34;0&#34;</span> <span style="color:#f92672">/&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&lt;GradientStop</span> <span style="color:#a6e22e">Color=</span><span style="color:#e6db74">&#34;{DynamicResource ControlMediumColor}&#34;</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#a6e22e">Offset=</span><span style="color:#e6db74">&#34;1&#34;</span> <span style="color:#f92672">/&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;/LinearGradientBrush&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&lt;/Border.Background&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&lt;ContentPresenter</span> <span style="color:#a6e22e">Margin=</span><span style="color:#e6db74">&#34;2&#34;</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#a6e22e">HorizontalAlignment=</span><span style="color:#e6db74">&#34;Center&#34;</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#a6e22e">VerticalAlignment=</span><span style="color:#e6db74">&#34;Center&#34;</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#a6e22e">RecognizesAccessKey=</span><span style="color:#e6db74">&#34;True&#34;</span> <span style="color:#f92672">/&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;/Border&gt;</span></span></span></code></pre></div><p>This has some implications for working with the control - for example, if you wanted to add rounded corners to the <code>&lt;Button&gt;</code>, they would actually need to be added to the <code>&lt;Border&gt;</code> <em>inside</em> the button.  This can be done by nesting styles, i.e.:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#f92672">&lt;Grid&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;Grid.Resources&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;Style</span> <span style="color:#a6e22e">TargetType=</span><span style="color:#e6db74">&#34;Button&#34;</span><span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&lt;Style.Resources&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="color:#f92672">&lt;Style</span> <span style="color:#a6e22e">TargetType=</span><span style="color:#e6db74">&#34;Border&#34;</span><span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#f92672">&lt;Setter</span> <span style="color:#a6e22e">Property=</span><span style="color:#e6db74">&#34;CornerRadius&#34;</span> <span style="color:#a6e22e">Value=</span><span style="color:#e6db74">&#34;25&#34;</span><span style="color:#f92672">/&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="color:#f92672">&lt;/Style&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&lt;/Style.Resources&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;/Style&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;/Grid.Resources&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;Button&gt;</span>I have rounded corners now!<span style="color:#f92672">&lt;/Button&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;/Grid&gt;</span></span></span></code></pre></div><p>Note how the <code>&lt;Style&gt;</code> targeting the <code>&lt;Border&gt;</code> is <em>nested inside the <code>Resources</code></em> of the <code>&lt;Style&gt;</code> targeting the <code>&lt;Button&gt;</code>?  This means that the style rules for the <code>&lt;Border&gt;</code> will only be applied to <code>&lt;Border&gt;</code> elements that are part of a <code>&lt;Button&gt;</code>.</p>
<h3 id="templates">Templates</h3>
<p>Above I listed a simplified version of the XAML used to create a button.  The full listing can be found <a href="https://docs.microsoft.com/en-us/dotnet/desktop/wpf/controls/button-styles-and-templates?view=netframeworkdesktop-4.8#button-controltemplate-example" target="_blank">in the Microsoft Documentation</a></p>
<p>What&rsquo;s more, you can <em>replace</em> this standard rendering in your controls by replacing the <code>Template</code> property.  For example, we could replace our button with a super-simple rounded <code>&lt;Border&gt;</code> that nested a <code>&lt;TextBlock&gt;</code> that does word-wrapping of the button content:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#f92672">&lt;Button&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;Button.Template&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;ControlTemplate&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&lt;Border</span> <span style="color:#a6e22e">CornerRadius=</span><span style="color:#e6db74">&#34;25&#34;</span><span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="color:#f92672">&lt;TextBlock</span> <span style="color:#a6e22e">TextWrapping=</span><span style="color:#e6db74">&#34;Wrap&#34;</span><span style="color:#f92672">&gt;</span>  
</span></span><span style="display:flex;"><span>                    <span style="color:#f92672">&lt;ContentPresenter</span> <span style="color:#a6e22e">Margin=</span><span style="color:#e6db74">&#34;2&#34;</span>
</span></span><span style="display:flex;"><span>                        <span style="color:#a6e22e">HorizontalAlignment=</span><span style="color:#e6db74">&#34;Center&#34;</span>
</span></span><span style="display:flex;"><span>                        <span style="color:#a6e22e">VerticalAlignment=</span><span style="color:#e6db74">&#34;Center&#34;</span>
</span></span><span style="display:flex;"><span>                        <span style="color:#a6e22e">RecognizesAccessKey=</span><span style="color:#e6db74">&#34;True&#34;</span> <span style="color:#f92672">/&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="color:#f92672">&lt;/TextBlock&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&lt;/Border&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;/ControlTemplate&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;/Button.ControlTemplate&gt;</span>
</span></span><span style="display:flex;"><span>    This is a simple button!
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;/Button&gt;</span></span></span></code></pre></div><p>The <code>&lt;ContentPresenter&gt;</code> is what presents the <em>content</em> nested inside the button - in this case, the text <code>This is a simple button!</code>.  Of course, this super-simple button will not change its appearance when you hover over it or click it, or when it is disabled.  But it helps convey the idea of a <code>&lt;ControlTemplate&gt;</code>.  As with any other property, you can also set the <code>Template</code> property of a control using a <code>&lt;Setter&gt;</code> within a <code>&lt;Style&gt;</code> targeting that element.</p>
<p>If you only need a simple tweak - like applying word-wrapping to the text of a button, it often makes more sense to supply as content a control that will do so, i.e.:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>&lt;Button&gt;
</span></span><span style="display:flex;"><span>    &lt;TextBlock TextWrapping=<span style="color:#e6db74">&#34;Wrap&#34;</span>&gt;
</span></span><span style="display:flex;"><span>        I also wrap text!
</span></span><span style="display:flex;"><span>    &lt;/TextBlock&gt;
</span></span><span style="display:flex;"><span>&lt;/Button&gt;</span></span></code></pre></div><p>This allows the <code>&lt;Button&gt;</code> to continue to use the default <code>ControlTemplate</code> while providing the desired word-wrapping with a minimum of extra code.</p>
<p>A similar idea appears with <code>&lt;DataTemplate&gt;</code>, which allows you to customize how bound data is displayed in a control.  For example, we often want to display the items in a <code>&lt;ListBox&gt;</code> in a different way than the default (a <code>&lt;TextBlock&gt;</code> with minimal styling).  We&rsquo;ll visit this in the upcoming <a href="https://ksu-cs-textbooks.github.io/cis400/2-desktop-development/04-data-binding/04-binding-lists/" target="_blank">binding lists</a>
 section.</p>

            <footer class="footline">

            </footer>
          </article>

    
    
          <article class="default">
            <header class="headline">
            </header>
<h1 id="summary">Summary</h1>

<p>In this chapter, we saw how WPF applications are organized into a tree of controls.  Moreover, we discussed how WPF uses this tree to perform its layout and rendering calculations.  We also saw how we can traverse this tree in our programs to find parent or child elements of a specific type.</p>
<p>In addition, we saw how declaring <em>resources</em> at a specific point in the tree makes them available to all elements descended from that node.  The resources we looked at included <code>&lt;Style&gt;</code> elements, which allow us to declare setters for properties of a specific type of element, to apply consistent styling rules.</p>
<p>We also saw how we could declare resources with a <code>x:Key</code> property, and bind them as static resources to use in our controls - including strings and other common types.  Building on that idea, we saw how we could embed images and other media files as resources.</p>
<p>We also explored how <code>&lt;ControlTemplates&gt;</code> are used to compose complex controls from simpler controls, and make it possible to swap out that implementation for a custom one.  We also briefly discussed when it may make more sense to compose the <em>content</em> of a control differently to get the same effect.</p>
<p>When we explore events and data binding in later chapters, we will see how these concepts <em>also</em> interact with the element tree in novel ways.</p>

            <footer class="footline">

            </footer>
          </article>

          </section>
    
    
          <article class="chapter">
            <header class="headline">
            </header>


<div class="article-subheading">Chapter 3</div>
<h1 id="event-driven-programming">Event-Driven Programming</h1>

<p>I Fight for the Users!</p>

            <footer class="footline">

            </footer>
          </article>

          <section>
            <h1 class="a11y-only">Subsections of Event-Driven Programming</h1>
    
    
          <article class="default">
            <header class="headline">
            </header>
<h1 id="introduction">Introduction</h1>

<p>Event-Driven programming is a programming paradigm where the program primarily responds to events - typically generated by a user, but also potentially from sensors, network connections, or other sources.  We cover it here because event-driven programming is a staple of graphical user interfaces.  These typically display a fairly static screen until the user interacts with the program in some meaningful way - moving or clicking the mouse, hitting a key, or the like.</p>
<p>As you might suspect, event-driven programming is often used alongside other programming paradigms, including structured programming and object-orientation.  We&rsquo;ll be exploring how event-driven programming is implemented in C# in this chapter, especially how it interacts with Windows Presentation Foundation.</p>
<h2 id="key-terms">Key Terms</h2>
<ul>
<li>Event</li>
<li>Message Loop</li>
<li>Message Queue</li>
<li>Event Handler</li>
<li>Event Listener</li>
<li>Event Arguments</li>
</ul>
<h2 id="c-keywords-and-operators">C# Keywords and Operators</h2>
<ul>
<li><code>event</code></li>
<li><code>EventArgs</code></li>
<li><code>+=</code></li>
<li><code>-=</code></li>
<li><code>?.</code></li>
</ul>
<h2 id="key-skills">Key Skills</h2>
<p>The key skills to learn in this chapter are how to write event listeners, attach event listeners to event handlers, and how to define custom event handlers.</p>

            <footer class="footline">

            </footer>
          </article>

    
    
          <article class="default">
            <header class="headline">
            </header>
<h1 id="message-loops">Message Loops</h1>

<p>At the heart of every Windows program (and most operating systems), is an infinitely repeating loop we call the <em>message loop</em> and a data structure we call an <em>message queue</em> (some languages/operating systems use the term <em>event</em> instead of <em>message</em>).  The message queue is managed by the operating system - it adds new events that the GUI needs to know about (i.e. a mouse click that occurred within the GUI) to this queue.  The message loop is often embedded in the main function of the program, and continuously checks for new messages in the queue.  When it finds one, it processes the message.  Once the message is processed, the message loop again checks for a new message.  The basic code for such a loop looks something like this:</p>
<div class="wrap-code highlight"><pre tabindex="0"><code>function main
    initialize()
    while message != quit
        message := get_next_message()
        process_message(message)
    end while
end function</code></pre></div><p>This approach works well for most GUIs as once the program is drawn initially (during the <code>initialize()</code> function), the appearance of the GUI will not change until it responds to some user action.</p>
<p>In a WPF or Windows Forms application, this loop is buried in the <a href="https://docs.microsoft.com/en-us/dotnet/api/system.windows.application?view=netcore-3.1" target="_blank"><code>Application</code></a>
 class that the <code>App</code> inherits from.  Instead of writing the code to process these system messages directly, this class converts these messages into C# <em>events</em>, which are then consumed by the event listeners the programmer provides.  We&rsquo;ll look at these next.</p>

            <footer class="footline">

            </footer>
          </article>

    
    
          <article class="default">
            <header class="headline">
            </header>
<h1 id="event-handlers">Event Handlers</h1>

<p>In C#, we use <em>event handlers</em> (sometimes called <em>event listeners</em> in other languages) to register the behavior we want to happen in response to specific events.  You&rsquo;ve probably already used these, i.e. declaring a handler:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">private</span> <span style="color:#66d9ef">void</span> OnEvent(<span style="color:#66d9ef">object</span> sender, EventArgs e) {
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// TODO: Respond to the event</span>
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>Most event handlers follow the same pattern.  They do not have a return value (their return type is <code>void</code>), and take two parameters.  The first is always an <code>object</code>, and it is the source of the event (hence &ldquo;sender&rdquo;).  The second is an <code>EventArgs</code> object, or a class <em>descended</em> from <code>EventArgs</code>, which provides details about the event.</p>
<p>For example, the various events dealing with mouse input (<code>MouseMove</code>, <code>MouseDown</code>, <code>MouseUp</code>) supply a <a href="https://docs.microsoft.com/en-us/dotnet/api/system.windows.forms.mouseeventargs?view=netcore-3.1" target="_blank"><code>MouseEventArgs</code></a>
 object.  This object includes properties defining the mouse location, number of clicks, mouse wheel rotations, and which button was involved in the event.</p>
<p>You&rsquo;ve probably attached event handlers using the <strong>&ldquo;Properties&rdquo;</strong> panel in Visual Studio, but you can also attach them in code:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>Button button = <span style="color:#66d9ef">new</span> Button();
</span></span><span style="display:flex;"><span>button.Click += OnClick;</span></span></code></pre></div><p>Note you <em>don&rsquo;t include parenthesis</em> after the name of the event handler.  You aren&rsquo;t <em>invoking</em> the event handler, you&rsquo;re <em>attaching</em> it (so it can be invoked in the future when the event happens).  Also, note that we use the <code>+=</code> operator to signify attaching an event handler.</p>
<p>This syntax is a deliberate choice to help reinforce the idea that we can attach <em>multiple</em> event handlers in C#, i.e.:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>Button button = <span style="color:#66d9ef">new</span> Button();
</span></span><span style="display:flex;"><span>button.Click += onClick1;
</span></span><span style="display:flex;"><span>button.Click += onClick2;</span></span></code></pre></div><p>In this case, <em>both</em> <code>onClick1</code> and <code>onClick2</code> will be invoked when the button is clicked.  This is also one reason to attach event handlers programmatically rather than through the <strong>&ldquo;Properties&rdquo;</strong> window (it can only attach one).</p>
<p>We can also <em>remove</em> an event handler if we no longer want it to be invoked when the event happens.  We do this with the <code>-=</code> operator:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>button.Click -= onClick1;</span></span></code></pre></div><p>Again, note we use the handler&rsquo;s name without parenthesis.</p>

            <footer class="footline">

            </footer>
          </article>

    
    
          <article class="default">
            <header class="headline">
            </header>
<h1 id="declaring-events">Declaring Events</h1>

<p>Up to this point, you&rsquo;ve probably only used events that were defined on library objects, like the Button&rsquo;s Click event.  However, you can also declare events in your own classes, and even create new event types.</p>
<p>In order to attach an event handler to an object in C#, we must first declare that that object has the corresponding event.  To do so, we need both a <em>name</em> for the event, and a <em>delegate</em>.</p>
<p>In C# a <a href="https://learn.microsoft.com/en-us/dotnet/csharp/programming-guide/delegates/" target="_blank">Delegate</a>
, a special type that represents a method with a specific method signature and return type. A delegate allows us to associate the delegate any method that matches that signature and return type. For example, the <code>Click</code> event handler we discussed earlier is a delegate which matches a method that takes two arguments: an <code>object</code> and an <code>EventArgs</code>, and returns void.  Any event listener that we write that matches this specification can be attached to the <code>button.Click</code>.  In a way, a <code>Delegate</code> is like an <code>Interface</code>, only for methods instead of objects.</p>
<p>Consider a class representing an egg.  What if we wanted to define an event to represent when it hatched?  We&rsquo;d need a delegate for that event, which can be declared a couple of ways.  The traditional method would be:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">delegate</span> <span style="color:#66d9ef">void</span> HatchHandler(<span style="color:#66d9ef">object</span> sender, EventArgs args);</span></span></code></pre></div><p>And then in our class we&rsquo;d declare the corresponding event. In C#, these are written much like a field, but with the addition of the <code>event</code> keyword:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">event</span> HatchHandler Hatch;</span></span></code></pre></div><p>Like a field declaration, an event declaration can have an access modifier (<code>public</code>, <code>private</code>, or <code>protected</code>), a name (in this case <code>Hatch</code>), and a type (the delegate).  It also gets marked with the <code>event</code> keyword.</p>
<p>When C# introduced generics, it became possible to use a generic delegate as well, <code>EventHandler&lt;T&gt;</code>, where the <code>T</code> is the type for the event arguments.  This simplifies writing an event, because we no longer need to define the delegate ourselves.  So instead of the two lines above, we can just use:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">event</span> EventHandler&lt;EventArgs&gt; Hatch;</span></span></code></pre></div><p>The second form is increasingly preferred, as it makes testing our code much easier (we&rsquo;ll see this soon), and it&rsquo;s less code to write.</p>
<h3 id="custom-eventargs">Custom EventArgs</h3>
<p>We might also want to create our own custom event arguments to accompany the event.  Perhaps we want to provide a reference to an object representing the baby chick that hatched.  To do so we can create a new class that inherits from <code>EventArgs</code>:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// A class representing the hatching of a chick </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">HatchEventArgs</span> : EventArgs 
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// The chick that hatched </span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> Chick Chick { <span style="color:#66d9ef">get</span>; <span style="color:#66d9ef">protected</span> <span style="color:#66d9ef">set</span>; }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// Constructs a new HachEventArgs </span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;param name=&#34;chick&#34;&gt;The chick that hatched&lt;/param&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> HatchEventArgs(Chick chick) 
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">this</span>.Chick = chick;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>And we use this custom event args in our event declaration as the type for the generic <code>EventHandler&lt;T&gt;</code> generic:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">event</span> EventHandler&lt;HatchEvent&gt; Hatch;</span></span></code></pre></div><p>Now let&rsquo;s say we set up our <code>Egg</code> constructor to start a timer to determine when the egg will hatch:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> Egg() 
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// Set a timer to go off in 20 days </span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// (ms = 20 days * 24 hours/day * 60 minutes/hour * 60 seconds/minute * 1000 milliseconds/seconds)</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">var</span> timer = <span style="color:#66d9ef">new</span> System.Timers.Timer(<span style="color:#ae81ff">20</span> * <span style="color:#ae81ff">24</span> * <span style="color:#ae81ff">60</span> * <span style="color:#ae81ff">60</span> * <span style="color:#ae81ff">1000</span>);
</span></span><span style="display:flex;"><span>    timer.Elapsed += StartHatching;
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>In the event handler <code>startHatching</code>, we&rsquo;ll want to create our new baby chick, and then trigger the <code>Hatch</code> event.  To do this, we need to <em>raise</em> the event to pass to any attached handlers with <code>Hatch.Invoke()</code>, passing in both the event arguments and the source of the event (our egg):</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">private</span> <span style="color:#66d9ef">void</span> StartHatching(<span style="color:#66d9ef">object</span> source, ElapsedEventArgs e) 
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">var</span> chick = <span style="color:#66d9ef">new</span> Chick();
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">var</span> args = <span style="color:#66d9ef">new</span> HatchEventArgs(chick);
</span></span><span style="display:flex;"><span>    Hatch.Invoke(<span style="color:#66d9ef">this</span>, args);
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>However we might have the case where there are no registered event handlers, in which case <code>Hatch</code> evaluates to <code>null</code>, and attempting to call <code>Invoke()</code> will cause an error.  We can prevent this by wrapping our <code>Invoke()</code> within a conditional:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">if</span>(Hatch != <span style="color:#66d9ef">null</span>) {
</span></span><span style="display:flex;"><span>    Hatch.Invoke(<span style="color:#66d9ef">this</span>, args);
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>However, there is a handy shorthand form for doing this (more syntactic sugar):</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>Hatch?.Invoke(<span style="color:#66d9ef">this</span>, args);</span></span></code></pre></div><p>Using the question mark (<code>?</code>) before the method invocation is known as the <a href="https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/operators/member-access-operators#null-conditional-operators--and-" target="_blank">Null-condition operator</a>
. We use this to avoid calling the <code>Invoke()</code> method if <code>PropertyChanged</code> is null (which is the case if no event handlers have been assigned to it). It tests the object to see if it is null.  If it is null, the method is not invoked.</p>

  
  
<div class="box notices cstyle info">
  <div class="box-label"><i class="fa-fw fas fa-info-circle"></i> Info</div>
  <div class="box-content">

<p>You might be wondering why an event with no assigned event handlers is <code>Null</code> instead of some form of empty collection. The answer is rooted in efficiency - remember that each object (even empty collection) requires a certain amount of memory to hold its details.  Now think about all the possible events we might want to listen for in a GUI.  The <a href="https://docs.microsoft.com/en-us/dotnet/api/system.windows.controls.control?view=netcore-3.1#events" target="_blank">System.Windows.Controls.Control</a>
 Class (a base class for all WPF controls) defines around 100 events.  Now multiply that by all the controls used in a single GUI, and you&rsquo;ll see that small amount of memory consumption adds up quickly.  By leaving unused events null, C# saves significant memory!</p>
</div>
</div>
<p>Thus, our complete egg class would be:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// A class representing an egg </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Egg</span> 
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// An event triggered when the egg hatches </span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">event</span> EventHandler&lt;HatchEventArgs&gt; Hatch;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// Constructs a new Egg instance </span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> Egg() 
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Set a timer to go off in 20 days </span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// (ms = 20 days * 24 hours/day * 60 minutes/hour * 60 seconds/minute * 1000 milliseconds/seconds)</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">var</span> timer = <span style="color:#66d9ef">new</span> System.Timers.Timer(<span style="color:#ae81ff">20</span> * <span style="color:#ae81ff">24</span> * <span style="color:#ae81ff">60</span> * <span style="color:#ae81ff">60</span> * <span style="color:#ae81ff">1000</span>);
</span></span><span style="display:flex;"><span>        timer.Elapsed += StartHatching;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// Handles the end of the incubation period </span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// by triggering a Hatch event </span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">void</span> StartHatching(<span style="color:#66d9ef">object</span> source, ElapsedEventArgs e) 
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">var</span> chick = <span style="color:#66d9ef">new</span> Chick();
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">var</span> args = <span style="color:#66d9ef">new</span> HatchEventArgs(chick);
</span></span><span style="display:flex;"><span>        Hatch?.Invoke(<span style="color:#66d9ef">this</span>, args);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div>
            <footer class="footline">

            </footer>
          </article>

    
    
          <article class="default">
            <header class="headline">
            </header>
<h1 id="events-as-messages">Events as Messages</h1>

<p>It might be coming clear that in many ways, events are another form of <em>message passing</em>, much like methods are.  In fact, they are processed much the same way: the <code>Invoke()</code> method of the event <em>calls</em> each attached event handler in turn.</p>

  
  
<div class="box notices cstyle tip">
  <div class="box-label"><i class="fa-fw fas fa-lightbulb"></i> Tip</div>
  <div class="box-content">

<p>Regular event invocation in C# is <em>synchronous</em>, just as is method calling - invoking an event passes execution to the event handlers one at a time the same way calling a method hands program execution to the method.  Once they have finished executing, program execution continues back in the code that invoked the event.  Let&rsquo;s see a practical example based on our discussion of the Hatch event.  If we were to give our chick a name:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">private</span> <span style="color:#66d9ef">void</span> StartHatching(<span style="color:#66d9ef">object</span> source, ElapsedEventArgs e) 
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">var</span> chick = <span style="color:#66d9ef">new</span> Chick();
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">var</span> args = <span style="color:#66d9ef">new</span> HatchEventArgs(chick);
</span></span><span style="display:flex;"><span>    Hatch?.Invoke(<span style="color:#66d9ef">this</span>, args);
</span></span><span style="display:flex;"><span>    chick.Name = <span style="color:#e6db74">&#34;Cluckzilla&#34;</span>;
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>And in our event handler, we tried to print that name:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">private</span> <span style="color:#66d9ef">void</span> OnHatch(<span style="color:#66d9ef">object</span> sender, HatchEventArgs e)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    Console.WriteLine(<span style="color:#e6db74">$&#34;Welcome to the world, {e.Chick.Name}!&#34;</span>);
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>The <code>OnHatch</code> event handler would be triggered by the <code>Hatch?.Invoke()</code> line <em>before</em> the name was set, so the <code>Chick.Name</code> property would be null!  We would need to move the name assignment to <em>before</em> the <code>Invoke()</code> call for it to be available in any attached event handlers.</p>
</div>
</div>
<p>The <code>EventArgs</code> define what the message contains, the <code>sender</code> specifies which object is sending the event, and the objects defining the event handlers are the ones receiving it.</p>
<p>That last bit is the biggest difference between using an event to pass a message and using a method to pass the same message.  With a method, we always have one object sending and one object receiving.  In contrast, an event can have <em>no</em> objects receiving, one object receiving, or <em>many</em> objects receiving.</p>
<p>An event is therefore more flexible and open-ended.  We can determine which object(s) should receive the message at any point - even at runtime.  In contrast, with a method we need to know what object we are sending the message to (i.e invoking the method of) as we write the code to do so.</p>
<p>Let&rsquo;s look at a concrete example of where this can come into play.</p>

            <footer class="footline">

            </footer>
          </article>

    
    
          <article class="default">
            <header class="headline">
            </header>
<h1 id="propertychanged">PropertyChanged</h1>

<p>We often have classes which encapsulate data we might need to look at.  For example, we might have a &ldquo;Smart&rdquo; dog dish, which keeps track of the amount of food it contains in ounces.  So it exposes a <code>Weight</code> property.</p>
<p>Now let&rsquo;s assume we have a few possible add-on products that can be combined with that smart bowl.  One is a &ldquo;dinner bell&rdquo;, which makes noises when the bowl is filled (ostensibly to attract the dog, but mostly just to annoy your neighbors).  Another is a wireless device that sends texts to your phone to let you know when the bowl is empty.</p>
<p>How can the software running on these devices determine when the bowl is empty or full?  One possibility would be to check the bowl&rsquo;s weight constantly, or at a set interval.  We call this strategy <em>polling</em>:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// The run button for the Dinner Bell add-on</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> Run()
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">while</span>(bowl.Weight != <span style="color:#ae81ff">0</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Do nothing</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// If we reach here, the bowl is empty!</span>
</span></span><span style="display:flex;"><span>    sendEmptyText();
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>The problem with this approach is that it means our program is running full-bore <em>all the time</em>.  If this is a battery-operated device, those batteries will drain quickly.  It might be better if we let the smart bowl notify the Dinner Bell, but if we did this using methods, the Smart Bowl would need a reference to that dinner bell&hellip; and any other accessories we plug in.</p>
<p>This was a common problem in GUI design - sometimes we need to know when a property changes because we are displaying that property&rsquo;s value in the GUI, possibly in multiple places.  But if that property is <em>not</em> part of a GUI display, we may not care when it changes.</p>
<h3 id="the-inotifypropertychanged-interface">The INotifyPropertyChanged Interface</h3>
<p>The standard answer to this dilemma in .NET is the <code>INotifyPropertyChanged</code> interface - an interface defined in the <code>System.ComponentModel</code> namespace that requires you to implement a single event <code>PropertyChanged</code> on the class that is changing.  You can define this event as:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">event</span> PropertyChangedEventHandler PropertyChanged;</span></span></code></pre></div><p>This sets up the <code>PropertyChanged</code> event handler on your class.  Let&rsquo;s first look at writing event listeners to take advantage of this event.</p>
<h4 id="propertychanged-event-listeners">PropertyChanged Event Listeners</h4>
<p>In our example, we would do this with the smart dog bowl, and add listeners to the dinner bell and empty notification tools.  The <code>PropertyChangedEventArgs</code> includes the name of the property that is changing (<code>PropertyName</code>) - so we can check that 1) the property changing is the weight, and 2) that the weight meets our criteria, i.e.:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// A SmartBowl accessory that sends text notifications when the SmartBowl is empty</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">EmptyTexter</span>
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// Constructs a new EmptyTexter object </span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;param Name=&#34;bowl&#34;&gt;The SmartBowl to listen to&lt;/param&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> EmptyTexter(SmartBowl bowl)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        bowl.PropertyChanged += onBowlPropertyChanged;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// Responds to changes in the Weight property of the bowl</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;param Name=&#34;Sender&#34;&gt;The bowl sending the event&lt;/param&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;param Name=&#34;e&#34;&gt;The event arguments (specifying which property changed)&lt;/param&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">void</span> onBowlPropertyChanged(<span style="color:#66d9ef">object</span> sender, PropertyChangedEventArgs e)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Only move forward if the property changing is the weight</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> (e.PropertyName == <span style="color:#e6db74">&#34;Weight&#34;</span>)
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">if</span> (sender <span style="color:#66d9ef">is</span> SmartBowl)
</span></span><span style="display:flex;"><span>            {
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">var</span> bowl = sender <span style="color:#66d9ef">as</span> SmartBowl;
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">if</span> (bowl.Weight == <span style="color:#ae81ff">0</span>) textBowlIsEmpty();
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// Helper method to notify bowl is empty</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">void</span> textBowlIsEmpty()
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// TODO: Implement texting</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>Note that in our event listener, we need to check the specific property that is changing is the one we care about - the <code>Weight</code>.  We also cast the source of the event back into a <code>SmartBowl</code>, but only after checking the cast is possible.  Alternatively, we could have stored the <code>SmartBowl</code> instance in a class variable rather than casting.</p>
<p>Or, we can use the new <a href="https://docs.microsoft.com/en-us/dotnet/csharp/pattern-matching#the-is-type-pattern-expression" target="_blank">is type pattern expression</a>
:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">if</span>(sender <span style="color:#66d9ef">is</span> SmartBowl bowl) {
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// Inside this body, bowl is the sender cast as a SmartBowl</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// TODO: logic goes here</span>
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>This is syntactic sugar for:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">if</span>(sender <span style="color:#66d9ef">is</span> SmartBowl) {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">var</span> bowl = sender <span style="color:#66d9ef">as</span> SmartBowl;
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// TODO: logic goes here</span>
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>Notice how the is type pattern expression merges the if test and variable assignment?</p>
<p>Also, notice that the only extra information supplied by our <code>PropertyChangedEventArgs</code> is the name of the property - not its prior value, or any other info.  This helps keep the event lightweight, but it does mean if we need to keep track of prior values, we must implement that ourselves, as we do in the <code>DinnerBell</code> implementation:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// A SmartBowl accessory that makes noise when the bowl is filled</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">DinnerBell</span>
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// Caches the previous weight measurement </span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">double</span> lastWeight;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// Constructs a new DinnerBell object </span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;param Name=&#34;bowl&#34;&gt;The SmartBowl to listen to&lt;/param&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> DinnerBell(SmartBowl bowl)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        lastWeight = bowl.Weight;
</span></span><span style="display:flex;"><span>        bowl.PropertyChanged += onBowlPropertyChanged;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// Responds to changes in the Weight property of the bowl</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;param Name=&#34;Sender&#34;&gt;The bowl sending the event&lt;/param&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;param Name=&#34;e&#34;&gt;The event arguments (specifying which property changed)&lt;/param&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">void</span> onBowlPropertyChanged(<span style="color:#66d9ef">object</span> sender, PropertyChangedEventArgs e)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Only move forward if the property changing is the weight</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> (e.PropertyName == <span style="color:#e6db74">&#34;Weight&#34;</span>)
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">// Cast the sender to a smart bowl using the is type expression</span>
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">if</span> (sender <span style="color:#66d9ef">is</span> SmartBowl bowl)
</span></span><span style="display:flex;"><span>            {
</span></span><span style="display:flex;"><span>                <span style="color:#75715e">// Ring the dinner bell if the bowl is now heavier </span>
</span></span><span style="display:flex;"><span>                <span style="color:#75715e">// (i.e. food has been added)</span>
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">if</span> (bowl.Weight &gt; lastWeight) ringTheBell();
</span></span><span style="display:flex;"><span>                <span style="color:#75715e">// Cache the new weight</span>
</span></span><span style="display:flex;"><span>                lastWeight = bowl.Weight;
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// Helper method to make noise </span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">void</span> ringTheBell()
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// TODO: Implement noisemaking</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><h4 id="propertychanged-event-declaration">PropertyChanged Event Declaration</h4>
<p>For the event listeners to work as expected, we need to implement the <code>PropertyChanged</code> event in our <code>SmartBowl</code> class with:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">event</span> PropertyChangedEventHandler PropertyChanged;</span></span></code></pre></div><p>Which makes it available for the event handlers to attach to.  But this is only <em>part</em> of the process, we also need to <em>invoke</em> this event when it happens.  This is done with the <code>Invoke(object sender, EventArgs e)</code> method defined for every event handler. It takes two parameters, an <code>object</code> which is the source of the event, and the <code>EventArgs</code> defining the event.  The specific kind of <code>EventArgs</code> corresponds to the event declaration - in our case, <code>PropertyChangedEventArgs</code>.</p>
<p>Let&rsquo;s start with a straightforward example.  Assume we have a <code>Name</code> property in the <code>SmartBowl</code> that is a customizable string, allowing us to identify the bowl, i.e. &ldquo;Water&rdquo; or &ldquo;Food&rdquo;.  When we change it, we need to invoke the <code>PropertyChanged</code> event, i.e.:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">private</span> <span style="color:#66d9ef">string</span> name = <span style="color:#e6db74">&#34;Bowl&#34;</span>;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">string</span> Name {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">get</span> {<span style="color:#66d9ef">return</span> name;}
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">set</span> 
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        name = <span style="color:#66d9ef">value</span>;
</span></span><span style="display:flex;"><span>        PropertyChanged?.Invoke(<span style="color:#66d9ef">this</span>, <span style="color:#66d9ef">new</span> PropertyChangedEventArgs(<span style="color:#e6db74">&#34;Name&#34;</span>));
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>Notice how we use the setter for <code>Name</code> to invoke the <code>PropertyChanged</code> event handler, <em>after</em> the change to the property has been made.  This invocation needs to be done <em>after</em> the change, or the responding event listener may grab the <em>old</em> value (remember, event listeners are triggered <em>synchronously</em>).</p>
<p>Also note that we use the  null-conditional operator <a href="https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/operators/member-access-operators#null-conditional-operators--and-" target="_blank"><code>?.</code></a>
 to avoid calling the <code>Invoke()</code> method if <code>PropertyChanged</code> is null (which is the case if no event listeners have been assigned).</p>
<p>Now let&rsquo;s tackle a more complex example.  Since our <code>SmartBowl</code> uses a sensor to measure the weight of its contents, we might be able to read the sensor data - probably through a driver or a class representing the sensor. Rather than doing this constantly, let&rsquo;s set a polling interval of 1 minute:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// A class representing a &#34;smart&#34; dog bowl.</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">SmartBowl</span> : INotifyPropertyChanged 
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// Event triggered when a property changes</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">event</span> PropertyChangedEventHandler PropertyChanged;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// The weight sensor installed in the bowl</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>    Sensor sensor;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">string</span> name = <span style="color:#e6db74">&#34;Bowl&#34;</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// The name of this bowl</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">string</span> Name
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">get</span> { <span style="color:#66d9ef">return</span> name; }
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">set</span>
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            name = <span style="color:#66d9ef">value</span>;
</span></span><span style="display:flex;"><span>            PropertyChanged?.Invoke(<span style="color:#66d9ef">this</span>, <span style="color:#66d9ef">new</span> PropertyChangedEventArgs(<span style="color:#e6db74">&#34;Name&#34;</span>));
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">double</span> weight;
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// The weight of the bowl contents, measured in ounces</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">double</span> Weight
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">get</span> { <span style="color:#66d9ef">return</span> weight; }
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">set</span>
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">// We only want to treat the weight as changing </span>
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">// if the change is more than a 16th of an ounce</span>
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">if</span> (Math.Abs(weight - <span style="color:#66d9ef">value</span>) &gt; <span style="color:#ae81ff">1</span> / <span style="color:#ae81ff">16</span>)
</span></span><span style="display:flex;"><span>            {
</span></span><span style="display:flex;"><span>                weight = <span style="color:#66d9ef">value</span>;
</span></span><span style="display:flex;"><span>                <span style="color:#75715e">// Notify of the property changing</span>
</span></span><span style="display:flex;"><span>                PropertyChanged?.Invoke(<span style="color:#66d9ef">this</span>, <span style="color:#66d9ef">new</span> PropertyChangedEventArgs(<span style="color:#e6db74">&#34;Weight&#34;</span>));
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// Constructs a new SmartBowl </span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;param Name=&#34;sensor&#34;&gt;the weight sensor&lt;/param&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> SmartBowl(Sensor sensor)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">this</span>.sensor = sensor;
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Set the initial weight</span>
</span></span><span style="display:flex;"><span>        weight = sensor.Value;
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Set a timer to go off in 1 minute  </span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// (ms = 60 seconds/minute * 1000 milliseconds/seconds)</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">var</span> timer = <span style="color:#66d9ef">new</span> System.Timers.Timer(<span style="color:#ae81ff">60</span> * <span style="color:#ae81ff">1000</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Set the timer to reset when it goes off </span>
</span></span><span style="display:flex;"><span>        timer.AutoReset = <span style="color:#66d9ef">true</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Trigger a sensor read each time the timer elapses</span>
</span></span><span style="display:flex;"><span>        timer.Elapsed += readSensor;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// Handles the elapsing of the polling timer by updating the weight</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">void</span> readSensor(<span style="color:#66d9ef">object</span> Sender, System.Timers.ElapsedEventArgs e)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">this</span>.Weight = sensor.Value;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>Notice in this code, we use the setter of the <code>Weight</code> property to trigger the <code>PropertyChanged</code> event.  Because we&rsquo;re dealing with a real-world sensor that may have slight variations in the readings, we also only treat changes of more than 1/16th of an ounce as significant enough to change the property.</p>

  
  
<div class="box notices cstyle warning">
  <div class="box-label"><i class="fa-fw fas fa-exclamation-triangle"></i> Warning</div>
  <div class="box-content">

<p>With the <code>INotifyPropertyChanged</code> interface, the <em>only</em> aspect Visual Studio checks is that the <code>PropertyChanged</code> event is declared.  There is no built-in check that the programmer is using it as expected.  Therefore it is upon you, the programmer, to ensure that you meet the expectation that comes with implementing this interface: <em>that any public or protected property that changes will invoke the <code>PropertyChanged</code> event</em>.</p>
</div>
</div>
<h4 id="testing-the-propertychanged-event">Testing the PropertyChanged Event</h4>
<p>Finally, we should write unit tests to confirm that our <code>PropertyChanged</code> event works as expected:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">SmartBowlUnitTests</span> {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// A mock sensor that increases its reading by one ounce </span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// every time its Value property is invoked.</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">MockChangingWeightSensor</span> : Sensor
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">double</span> <span style="color:#66d9ef">value</span> = <span style="color:#ae81ff">0.0</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">double</span> Value {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">get</span> {
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">value</span> += <span style="color:#ae81ff">1</span>;
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">value</span>;
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">
</span></span></span><span style="display:flex;"><span><span style="color:#a6e22e">    [Fact]</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> NameChangeShouldTriggerPropertyChanged() 
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">var</span> bowl = <span style="color:#66d9ef">new</span> SmartBowl(<span style="color:#66d9ef">new</span> MockChangingWeightSensor());
</span></span><span style="display:flex;"><span>        Assert.PropertyChanged(bowl, <span style="color:#e6db74">&#34;Name&#34;</span>, () =&gt; {
</span></span><span style="display:flex;"><span>            bowl.Name = <span style="color:#e6db74">&#34;New Name&#34;</span>;
</span></span><span style="display:flex;"><span>        });
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">
</span></span></span><span style="display:flex;"><span><span style="color:#a6e22e">    [Fact]</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> WeightChangeShouldTriggerPropertyChanged()
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">var</span> bowl = <span style="color:#66d9ef">new</span> SmartBowl(<span style="color:#66d9ef">new</span> MockChangingWeightSensor());
</span></span><span style="display:flex;"><span>        Assert.PropertyChangedAsync(bowl, <span style="color:#e6db74">&#34;Weight&#34;</span>, () =&gt; {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">return</span> Task.Delay(<span style="color:#ae81ff">2</span> * <span style="color:#ae81ff">60</span> * <span style="color:#ae81ff">1000</span>);
</span></span><span style="display:flex;"><span>        });
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>The <code>PropertyChanged</code> interface is so common in C# programming that we have <em>two</em> assertions dealing with it.  The first we use to test the <code>Name</code> property:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#a6e22e">[Fact]</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> NameChangeShouldTriggerPropertyChanged() 
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">var</span> bowl = <span style="color:#66d9ef">new</span> SmartBowl(<span style="color:#66d9ef">new</span> MockChangingWeightSensor());
</span></span><span style="display:flex;"><span>    Assert.PropertyChanged(bowl, <span style="color:#e6db74">&#34;Name&#34;</span>, () =&gt; {
</span></span><span style="display:flex;"><span>        bowl.Name = <span style="color:#e6db74">&#34;New Name&#34;</span>;
</span></span><span style="display:flex;"><span>    });
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>Notice that <code>Assert.PropertyChanged(@object ojb, string propertyName, Action action)</code> takes three arguments - first the object with the property that should be changing, second the name of the property we expect to change, and third an action that should trigger the event.  In this case, we change the name property.</p>
<p>The second is a bit more involved, as we have an event that happens based on a timer.  To test it therefore, we have to wait for the timer to have had an opportunity to trigger.  We do this with an asynchronous action, so we use the <code>Assert.PropertyChangedAsync(@object obj, string propertyName, Func&lt;Task&gt; action)</code>.  The first two arguments are the same, but the last one is a <code>Func</code> (a function) that returns an asynchronous <code>Task</code> object.  The simplest one to use here is <code>Task.Delay</code>, which delays for the supplied period of time (in our case, two minutes).  Since our property should change on one-minute intervals, we&rsquo;ll know if there was a problem if it doesn&rsquo;t change after two minutes.</p>

            <footer class="footline">

            </footer>
          </article>

    
    
          <article class="default">
            <header class="headline">
            </header>
<h1 id="inheritance-and-events">Inheritance And Events</h1>

<p>Considering that C# was developed as an object-oriented language from the ground up, you would expect that events would be inheritable just like properties, fields, and methods.  Unfortunately this is not the case.  Remember, the C# language is compiled into intermediate language to run on the .NET Runtime, and this Runtime proceeded C# (it is also used to compile Visual Basic), and the way events are implemented in intermediate language does not lend itself to inheritance patterns.</p>
<p>This has some important implications for writing C# events:</p>
<ul>
<li>You cannot invoke events defined in a base class in a derived class</li>
<li>The <code>virtual</code> and <code>override</code> keywords used with events do not actually create an overridden event - you instead end up with two separate implementations.</li>
</ul>
<p>The standard way programmers have adopted to this issue is to:</p>
<ol>
<li>Define the event normally in the base class</li>
<li>Add a <code>protected</code> helper method to that base class that will invoke the event, taking whatever parameters are needed</li>
<li>Calling that helper method from derived classes.</li>
</ol>
<p>For example, the <code>PropertyChanged</code> event we discussed previously is often invoked from a helper method named <code>OnPropertyChanged()</code> that is defined like this:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">protected</span> <span style="color:#66d9ef">virtual</span> <span style="color:#66d9ef">void</span> OnPropertyChanged(<span style="color:#66d9ef">string</span> propertyName)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">this</span>.PropertyChanged?.Invoke(<span style="color:#66d9ef">this</span>, <span style="color:#66d9ef">new</span> PropertyChangedEventArgs(propertyName));
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>In derived classes, you can indicate a property is changing by calling this event, and passing in the property name, i.e.:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">private</span> <span style="color:#66d9ef">object</span> _tag = <span style="color:#66d9ef">null</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// An object to represent whatever you need </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">object</span> Tag {
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">get</span> =&gt; _obj;
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">set</span> 
</span></span><span style="display:flex;"><span>  {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span>(<span style="color:#66d9ef">value</span> != _obj) 
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>      _obj = <span style="color:#66d9ef">value</span>;
</span></span><span style="display:flex;"><span>      OnPropertyChanged(nameof(<span style="color:#66d9ef">this</span>.Tag));
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>Note the call to <code>OnPropertyChanged()</code> - this will trigger the <code>PropertyChanged</code> event handler on the base class.</p>

  
  
<div class="box notices cstyle tip">
  <div class="box-label"><i class="fa-fw fas fa-lightbulb"></i> Tip</div>
  <div class="box-content">

<p>You might have noticed the use of <code>nameof(this.Tag)</code> in the example code above.  The <a href="https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/operators/nameof" target="_blank">nameof expression</a> returns the <em>name</em> of a property as a string.  This approach is preferred over just writing the string, as it makes it less likely a typo will result in your code not working as expected.</p>
</div>
</div>

            <footer class="footline">

            </footer>
          </article>

    
    
          <article class="default">
            <header class="headline">
            </header>
<h1 id="routed-events">Routed Events</h1>

<p>While events exist in Windows Forms, Windows Presentation Foundation adds a twist with their concept of <em>routed events</em>.  Routed events are similar to regular C# events, but provide additional functionality.  One of the most important of these is the ability of the routed event to &ldquo;bubble&rdquo; up the <a href="https://ksu-cs-textbooks.github.io/cis400/2-desktop-development/02-element-tree/">elements tree</a>
.  Essentially, the event will be passed up each successive WPF element until one chooses to &ldquo;handle&rdquo; it, or the top of the tree is reached (in which case the event is ignored).</p>
<p>Consider a Click event handler for a button.  In Windows Forms, we have to attach our listener <em>directly to the button</em>, i.e:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">namespace</span> WindowsFormsApp1
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">partial</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Form1</span> : Form
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">public</span> Form1()
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            InitializeComponent();
</span></span><span style="display:flex;"><span>            IncrementButton.Click += HandleClick;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">void</span> HandleClick(<span style="color:#66d9ef">object</span> sender, EventArgs e)
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">// TODO: Handle our click</span>
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>With WPF we can also attach an event listener directly to the button, but we can <em>also</em> attach an event listener to an <em>ancestor</em> of the button (a component further up the element tree).  The click event will &ldquo;bubble&rdquo; up the element tree, and each successive parent will have the opportunity to handle it.  I.e. we can define a button in the <code>ChildControl</code>:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#f92672">&lt;UserControl</span> <span style="color:#a6e22e">x:Class=</span><span style="color:#e6db74">&#34;WpfApp1.ChildControl&#34;</span>
</span></span><span style="display:flex;"><span>             <span style="color:#a6e22e">xmlns=</span><span style="color:#e6db74">&#34;http://schemas.microsoft.com/winfx/2006/xaml/presentation&#34;</span>
</span></span><span style="display:flex;"><span>             <span style="color:#a6e22e">xmlns:x=</span><span style="color:#e6db74">&#34;http://schemas.microsoft.com/winfx/2006/xaml&#34;</span>
</span></span><span style="display:flex;"><span>             <span style="color:#a6e22e">xmlns:mc=</span><span style="color:#e6db74">&#34;http://schemas.openxmlformats.org/markup-compatibility/2006&#34;</span> 
</span></span><span style="display:flex;"><span>             <span style="color:#a6e22e">xmlns:d=</span><span style="color:#e6db74">&#34;http://schemas.microsoft.com/expression/blend/2008&#34;</span> 
</span></span><span style="display:flex;"><span>             <span style="color:#a6e22e">xmlns:local=</span><span style="color:#e6db74">&#34;clr-namespace:WpfApp1&#34;</span>
</span></span><span style="display:flex;"><span>             <span style="color:#a6e22e">mc:Ignorable=</span><span style="color:#e6db74">&#34;d&#34;</span> 
</span></span><span style="display:flex;"><span>             <span style="color:#a6e22e">d:DesignHeight=</span><span style="color:#e6db74">&#34;450&#34;</span> <span style="color:#a6e22e">d:DesignWidth=</span><span style="color:#e6db74">&#34;800&#34;</span><span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;Grid&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;Button</span> <span style="color:#a6e22e">Name=</span><span style="color:#e6db74">&#34;IncrementButton&#34;</span><span style="color:#f92672">&gt;</span>Count<span style="color:#f92672">&lt;/Button&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;/Grid&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;/UserControl&gt;</span></span></span></code></pre></div><p>And add an instance of <code>ChildControl</code> to our <code>MainWindow</code>:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>&lt;Window x:Class=<span style="color:#e6db74">&#34;WpfApp1.MainWindow&#34;</span>
</span></span><span style="display:flex;"><span>        xmlns=<span style="color:#e6db74">&#34;http://schemas.microsoft.com/winfx/2006/xaml/presentation&#34;</span>
</span></span><span style="display:flex;"><span>        xmlns:x=<span style="color:#e6db74">&#34;http://schemas.microsoft.com/winfx/2006/xaml&#34;</span>
</span></span><span style="display:flex;"><span>        xmlns:d=<span style="color:#e6db74">&#34;http://schemas.microsoft.com/expression/blend/2008&#34;</span>
</span></span><span style="display:flex;"><span>        xmlns:mc=<span style="color:#e6db74">&#34;http://schemas.openxmlformats.org/markup-compatibility/2006&#34;</span>
</span></span><span style="display:flex;"><span>        xmlns:local=<span style="color:#e6db74">&#34;clr-namespace:WpfApp1&#34;</span>
</span></span><span style="display:flex;"><span>        mc:Ignorable=<span style="color:#e6db74">&#34;d&#34;</span>
</span></span><span style="display:flex;"><span>        Title=<span style="color:#e6db74">&#34;MainWindow&#34;</span> Height=<span style="color:#e6db74">&#34;450&#34;</span> Width=<span style="color:#e6db74">&#34;800&#34;</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;Grid Button.Click=<span style="color:#e6db74">&#34;HandleClick&#34;</span>&gt;
</span></span><span style="display:flex;"><span>        &lt;local:ChildControl/&gt;        
</span></span><span style="display:flex;"><span>    &lt;/Grid&gt;
</span></span><span style="display:flex;"><span>&lt;/Window&gt;</span></span></code></pre></div><p>Note that in our <code>&lt;Grid&gt;</code> we attached a <code>Button.Click</code> handler?  The attached listener, <code>HandleClick</code>, will be invoked for <em>all</em> <code>Click</code> events arising from <code>Buttons</code> that are nested under the <code>&lt;Grid&gt;</code> in the elements tree.  We can then write this event handler in the codebehind of our <code>MainWindow</code>:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">namespace</span> WpfApp1
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// Interaction logic for MainWindow.xaml</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">partial</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">MainWindow</span> : Window
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">public</span> MainWindow()
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            InitializeComponent();
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">void</span> HandleClick(Object sender, RoutedEventArgs e)
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">if</span>(e.OriginalSource <span style="color:#66d9ef">is</span> Button button &amp;&amp; button.Name == <span style="color:#e6db74">&#34;IncrementButton&#34;</span>)
</span></span><span style="display:flex;"><span>            {
</span></span><span style="display:flex;"><span>                <span style="color:#75715e">// TODO: Handle increment;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>                e.Handled = <span style="color:#66d9ef">true</span>;
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>Note that because this event listener will be triggered for <em>all</em> buttons, we need to make sure it&rsquo;s a button we care about - so we cast the <code>OriginalSource</code> of the event to be a button and check its <code>Name</code> property.  We use the <code>RoutedEventArgs.OriginalSource</code> because the <code>sender</code> won&rsquo;t necessarily be the specific control the event originated in - in this case it actually is the <code>Grid</code> containing the button.  Also, note that we mark <code>e.Handled</code> as <code>true</code>.  This tells WPF it can stop &ldquo;bubbling&rdquo; the event, as we have taken care of it.</p>
<p>We&rsquo;ll cover routed events in more detail in the upcoming <a href="https://ksu-cs-textbooks.github.io/cis400/2-desktop-development/05-dependency-objects/">Dependency Objects</a>
 chapter, but for now you need to know that the GUI events you know from Windows Forms (Click, Select, Focus, Blur), are all routed events in WPF, and therefore take a <code>RoutedEventArgs</code> object instead of the event arguments you may be used to.</p>

            <footer class="footline">

            </footer>
          </article>

    
    
          <article class="default">
            <header class="headline">
            </header>
<h1 id="collectionchanged">CollectionChanged</h1>

<p>The <code>PropertyChanged</code> event notifies us when a <em>property</em> of an object changes, which covers most of our GUI notification needs.  However, there are some concepts that aren&rsquo;t covered by it - specifically, when an item is added or removed from a collection.  We use a different event, <code>NotifyCollectionChanged</code> to convey when this occurs.</p>
<h3 id="the-inotifycollectionchanged-interface">The INotifyCollectionChanged Interface</h3>
<p>The <code>INotifyCollectionChanged</code> interface defined in the <code>System.Collections.Specialized</code> namespace indicates the collection implements the <code>NotifyCollectionChangedEventHandler</code>, i.e.:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">event</span> NotifyCollectionChangedEventHandler NotifyCollectionChanged;</span></span></code></pre></div><p>And, as you would expect, this event is triggered any time the collection&rsquo;s contents change, much like the <code>PropertyChanged</code> event we discussed earlier was triggered when a property changed.  However, the <code>NotifyCollectionChangedEventArgs</code> provides a <em>lot</em> more information than we saw with the <code>PropertyChangedEventArgs</code>,as you can see in the UML diagram below:</p>
<p>
<a href="#image-d78e64b6f9095dd2421ef980bd82d767" class="lightbox-link">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/2.3.9.1.png" alt="UML or NotifyCollectionChangedEventArgs and PropertyChangedEventArgs" style="height: auto; width: auto;" loading="lazy">
</a>
<a href="javascript:history.back();" class="lightbox" id="image-d78e64b6f9095dd2421ef980bd82d767">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/2.3.9.1.png" alt="UML or NotifyCollectionChangedEventArgs and PropertyChangedEventArgs" class="lightbox-image" loading="lazy">
</a></p>
<p>With <code>PropertyChangedEventArgs</code> we simply provide the name of the property that is changing.  But with <code>NotifyCollectionChangedEventArgs</code>, we are describing both <em>what</em> the change is (i.e. an Add, Remove, Replace, Move, or Reset), and what item(s) we affected.  So if the action was adding an item, the <code>NotifyCollectionChangedEventArgs</code> will let us know what item was added to the collection, and possibly at what position it was added at.</p>
<p>When implementing the <code>INotifyCollectionChanged</code> interface, you must supply a <a href="https://docs.microsoft.com/en-us/dotnet/api/system.collections.specialized.notifycollectionchangedeventargs?view=net-5.0" target="_blank"><code>NotifyCollectionChangedEventArgs</code> object</a> that describes the change to the collection.  This class has multiple constructors, and you must select the correct one, or your code will cause a runtime error when the event is invoked.</p>

  
  
<div class="box notices cstyle info">
  <div class="box-label"><i class="fa-fw fas fa-info-circle"></i> Info</div>
  <div class="box-content">

<p>You might be wondering why <code>PropertyChangedEventArgs</code> contains so little information compared to <code>NotifyCollectionChangedEventArgs</code>.  Most notably, the <em>old</em> and <em>new</em> values of the property could have been included. I suspect the reason they were not is that there are many times where you don&rsquo;t actually need to know what the property value is - just that it changed, and you can always retrieve that value once you know you need to.</p>
<p>In contrast, there are situations where a GUI displaying a collection may have hundreds of entries. Identifying <em>exactly</em> which ones have changed means that only those entries need to be modified in the GUI.  If we didn&rsquo;t have that information, we&rsquo;d have to retrieve the <em>entire</em> collection and re-render it, which can be a very computationally expensive process.</p>
<p>But ultimately, the two interfaces were developed by different teams at different times, which probably accounts for most of the differences.</p>
</div>
</div>
<h4 id="notifycollectionchangedaction">NotifyCollectionChangedAction</h4>
<p>The only property of the <code>NotifyCollectionChangedArgs</code> that will <em>always</em> be populated is the <code>Action</code> property.  The type of htis property is the <code>NotifyCollectionChangedAction</code> enumeration, and its values (and what they represent) are:</p>
<ul>
<li><code>NotifyCollectionChangedAction.Add</code> - one or more items were added to the collection</li>
<li><code>NotifyCollectionChangedAction.Move</code> - an item was moved in the collection</li>
<li><code>NotifyCollectionChangedAction.Remove</code> - one or more items were removed from the collection</li>
<li><code>NotifyCollectionChangedAction.Replace</code> - an item was replaced in the collection</li>
<li><code>NotifyCollectionChangedAction.Reset</code> - drastic changes were made to the collection</li>
</ul>
<h4 id="notifycollectionchangedeventargs-constructors">NotifyCollectionChangedEventArgs Constructors</h4>
<p>A second feature you probably noticed from the UML is that there are a <em>lot</em> of constructors for the <code>NotifyCollectionChangedEventArgs</code>.  Each represents a different situation, and you must pick the appropriate one.</p>
<p>For example, the <code>NotifyCollectionChangedEventArgs(NotifyCollectionChangedAction)</code> constructor represents a <code>NotifyCollectionChangedAction.Reset</code> change. This indicates the collection&rsquo;s content changed <em>dramatically</em>, and the best recourse for a GUI is to ask for the full collection again and rebuild the display.  You should <em>only</em> use this one-argument constructor for a Reset action.</p>

  
  
<div class="box notices cstyle warning">
  <div class="box-label"><i class="fa-fw fas fa-exclamation-triangle"></i> Warning</div>
  <div class="box-content">

<p>In C#, there is no mechanism for limiting a constructor to specific argument values. So you actually <em>can</em> call the above constructor for a different kind of event, i.e.:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">new</span> NotifyCollectionChangedEventArgs(NotifyCollectionChangedAction.Add);</span></span></code></pre></div><p>However, doing so will throw a <code>InvalidArgumentException</code> when the code is actually executed.</p>
</div>
</div>
<p>In general, if you are adding or removing an <code>object</code>, you need to provide the <code>object</code> to the constructor. If you are adding or removing multiple objects, you will need to provide an <code>IList</code> of the affected objects.  And you may also need to provide the object&rsquo;s index in the collection. You can read more about the available constructors and their uses in the <a href="https://learn.microsoft.com/en-us/dotnet/api/system.collections.specialized.notifycollectionchangedeventargs.-ctor?view=net-6.0#system-collections-specialized-notifycollectionchangedeventargs-ctor%28system-collections-specialized-notifycollectionchangedaction-system-object%29" target="_blank">Microsoft Documentation</a>
.</p>

            <footer class="footline">

            </footer>
          </article>

    
    
          <article class="default">
            <header class="headline">
            </header>
<h1 id="testing-generic-events">Testing Generic Events</h1>

<p>In the testing chapter, we introduced the XUnit assertion for testing events, <code>Assert.Raises&lt;T&gt;</code>.  Let&rsquo;s imagine a doorbell class that raises a <code>Ring</code> event when it is pressed, with information about the door, which can be used to do things like ring a physical bell, or send a text notification:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// A class representing details of a ring event </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">RingEventArgs</span> : EventArgs 
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">string</span> _door;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// The identity of the door for which the doorbell was activated</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">string</span> Door =&gt; _door;
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// Constructs a new RingEventArgs </span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> RingEventArgs(<span style="color:#66d9ef">string</span> door) 
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>      _door = door;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// A class representing a doorbell</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Doorbell</span>
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// An event triggered when the doorbell rings </span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">event</span> EventHandler&lt;RingEventArgs&gt; Ring;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// The name of the door where this doorbell is mounted </span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">string</span> Identifier {<span style="color:#66d9ef">get</span>; <span style="color:#66d9ef">set</span>;}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// Handles the end of the incubation period </span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// by triggering a Hatch event </span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> Push() 
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        Ring?.Invoke(<span style="color:#66d9ef">this</span>, <span style="color:#66d9ef">new</span> RingEventArgs(Identifier));
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>To test this doorbell, we&rsquo;d want to make sure that the <code>Ring</code> event is invoked when the <code>Push()</code> method is called.  The <code>Assert.Raises&lt;T&gt;</code> does exactly this:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#a6e22e">[Fact]</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> PressingDoorbellShouldRaiseRingEvent
</span></span><span style="display:flex;"><span>Doorbell db = <span style="color:#66d9ef">new</span> Doorbell();
</span></span><span style="display:flex;"><span>Assert.Raises&lt;RingEventArgs&gt;(
</span></span><span style="display:flex;"><span>  handler =&gt; db.Ring += handler,
</span></span><span style="display:flex;"><span>  handler =&gt; db.Ring -= handler, 
</span></span><span style="display:flex;"><span>  () =&gt; {
</span></span><span style="display:flex;"><span>    db.Push();
</span></span><span style="display:flex;"><span>  });</span></span></code></pre></div><p>This code may be a bit confusing at first, so let&rsquo;s step through it.  The <code>&lt;T&gt;</code> is the type of event arguments we expect to receive, in this case, <code>RingEventArgs</code>.  The first argument is a lambda expression that attaches an event handler <code>handler</code> (provided by the <code>Assert.Raises</code> method) to our object to test, <code>db</code>.  The second argument is a lambda expression that removes the event handler <code>handler</code>.  The third is an action (also written as a lambda expression) that should trigger the event if the code we are testing is correct.</p>
<p>This approach allows us to test events declared with the generic <code>EventHandler&lt;T&gt;</code>, which is one of the reasons we prefer it.  It will not work with custom event handlers though; for those we&rsquo;ll need a different approach.</p>

            <footer class="footline">

            </footer>
          </article>

    
    
          <article class="default">
            <header class="headline">
            </header>
<h1 id="testing-custom-events">Testing Custom Events</h1>

<p>In the previous section, we discussed using XUnit&rsquo;s <code>Assert.Raises&lt;T&gt;</code> to test generic events (events declared with the <code>EventHandler&lt;T&gt;</code> generic).  However, this approach does not work with non-generic events, like <code>PropertyChanged</code> and <code>CollectionChanged</code>.  That is why XUnit provides an <code>Assert.PropertyChanged()</code> method.  Unfortunately, it does not offer a corresponding test for <code>CollectionChanged</code>.  So to test for this expectation we will need to write our own assertions.</p>
<p>To do that, we need to understand how assertions in the XUnit framework work.  Essentially, they test the truthfulness of what is being asserted (i.e. two values are equal, a collection contains an item, etc.).  If the assertion is not true, then the code raises an exception - specifically, a <code>XunitException</code> or a class derived from it. This class provides a <code>UserMessage</code> (the message you get when the test fails) and a <code>StackTrace</code> (the lines describing where the error was thrown). With this in mind, we can write our own assertion method.  Let&rsquo;s start with a simple example that asserts the value of a string is &ldquo;Hello World&rdquo;:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">MyAssert</span>
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">HelloWorldAssertionException</span>: XunitException 
</span></span><span style="display:flex;"><span>  {
</span></span><span style="display:flex;"><span>      <span style="color:#66d9ef">public</span> HelloWorldAssertionException(<span style="color:#66d9ef">string</span> actual) : <span style="color:#66d9ef">base</span>(<span style="color:#e6db74">$&#34;Expected \&#34;</span>Hello World<span style="color:#960050;background-color:#1e0010">\</span><span style="color:#e6db74">&#34; but instead saw \&#34;{actual}\&#34;&#34;</span>) {}
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> HelloWorld(<span style="color:#66d9ef">string</span> phrase)
</span></span><span style="display:flex;"><span>  {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span>(phrase != <span style="color:#e6db74">&#34;Hello World&#34;</span>) <span style="color:#66d9ef">throw</span> <span style="color:#66d9ef">new</span> HelloWorldException(phrase);
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>Note that we use the <code>base</code> keyword to execute the <code>XunitException</code> constructor as part of the <code>HelloWorldAssertionException</code>, and pass along the <code>string</code> parameter <code>actual</code>.  Then the body of the <code>XunitException</code> constructor does all the work of setting values, so the body of our constructor is empty.</p>
<p>Now we can use this assertion in our own tests:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#a6e22e">[Theory]</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">[InlineData(&#34;Hello World&#34;)]</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">[InlineData(&#34;Hello Bob&#34;)]</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> ShouldBeHelloWorld(<span style="color:#66d9ef">string</span> phrase)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  MyAssert.HelloWorld(phrase);
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>The first <code>InlineData</code> will pass, and the second will fail with the report <code>Expected &quot;Hello World&quot; but instead saw Hello Bob</code>.</p>
<p>This was of course, a silly example, but it shows the basic concepts.  We would probably never use this in our own work, as <code>Assert.Equal()</code> can do the same thing.  Now let&rsquo;s look at a more complex example that we <em>would</em> use.</p>
<h2 id="assertions-for-collectionchanged">Assertions for CollectionChanged</h2>
<p>As we discussed previously, the <code>CollectionChanged</code> event cannot be tested with the Xunit <code>Assert.Throws</code>.  So this is a great candidate for custom assertions.  To be thorough, we should test <em>all</em> the possible actions (and we would do this if expanding the Xunit library).  But for how we plan to use it, we really only need two actions covered - adding and removing items <em>one at a time</em> from the collection.  Let&rsquo;s start with our exception definitions:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">MyAssert</span>
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">NotifyCollectionChangedNotTriggeredException</span>: XunitException 
</span></span><span style="display:flex;"><span>  {
</span></span><span style="display:flex;"><span>      <span style="color:#66d9ef">public</span> NotifyCollectionChangedNotTriggeredException(NotifyCollectionChangedAction expectedAction) : <span style="color:#66d9ef">base</span>(<span style="color:#e6db74">$&#34;Expected a NotifyCollectionChanged event with an action of {expectedAction} to be invoked, but saw none.&#34;</span>) {}
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">NotifyCollectionChangedWrongActionException</span>: XunitException 
</span></span><span style="display:flex;"><span>  {
</span></span><span style="display:flex;"><span>      <span style="color:#66d9ef">public</span> NotifyCollectionChangedWrongActionException(NotifyCollectionChangedAction expectedAction, NotifyCollectionChangedAction actualAction) : <span style="color:#66d9ef">base</span>(<span style="color:#e6db74">$&#34;Expected a NotifyCollectionChanged event with an action of {expectedAction} to be invoked, but saw {actualAction}&#34;</span>) {}
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">NotifyCollectionChangedAddException</span>: XunitException 
</span></span><span style="display:flex;"><span>  {
</span></span><span style="display:flex;"><span>      <span style="color:#66d9ef">public</span> NotifyCollectionChangedAddException(<span style="color:#66d9ef">object</span> expected, <span style="color:#66d9ef">object</span> actual) : <span style="color:#66d9ef">base</span>(<span style="color:#e6db74">$&#34;Expected a NotifyCollectionChanged event with an action of Add and object {expected} but instead saw {actual}&#34;</span>) {}
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">NotifyCollectionChangedRemoveException</span> : XunitException
</span></span><span style="display:flex;"><span>  {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> NotifyCollectionChangedRemoveException(<span style="color:#66d9ef">object</span> expectedItem, <span style="color:#66d9ef">int</span> expectedIndex, <span style="color:#66d9ef">object</span> actualItem, <span style="color:#66d9ef">int</span> actualIndex) : <span style="color:#66d9ef">base</span>(<span style="color:#e6db74">$&#34;Expected a NotifyCollectionChanged event with an action of Remove and object {expectedItem} at index {expectedIndex} but instead saw {actualItem} at index  {actualIndex}&#34;</span>) {}
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>We have four different exceptions, each with a very specific message conveying what the failure was due to - no event being triggered, an event with the wrong action being triggered, or an event with the wrong information being triggered.  We could also handle this with one exception class using multiple constructors (much like the <code>NotifyCollectionChangedEventArgs</code> does).</p>
<p>Then we need to write our assertions, which are more involved than our previous example as 1) the event uses a generic type, so our assertion also must be a generic, and 2) we need to handle an event - so we need to attach an event handler, and trigger code that should make that event occur.  Let&rsquo;s start with defining the signature of the <code>Add</code> method:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">MyAssert</span> {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> NotifyCollectionChangedAdd&lt;T&gt;(INotifyCollectionChanged collection, T item, Action testCode) 
</span></span><span style="display:flex;"><span>  {
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// Assertion tests here.</span>
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>We use the generic type <code>T</code> to allow our assertion to be used with any kind of collection - and the second parameter <code>item</code> is <em>also</em> this type.  That is the object of we are trying to add to the <code>collection</code>.  Finally, the <code>Action</code> is the code the test will execute that would, in theory, add <code>item</code> to <code>collection</code>.  Let&rsquo;s flesh out the method body now:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">MyAssert</span>
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> NotifyCollectionChangedAdd&lt;T&gt;(INotifyCollectionChanged collection, T newItem, Action testCode)
</span></span><span style="display:flex;"><span>  {
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// A flag to indicate if the event triggered successfully</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">bool</span> notifySucceeded = <span style="color:#66d9ef">false</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// An event handler to attach to the INotifyCollectionChanged and be </span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// notified when the Add event occurs.</span>
</span></span><span style="display:flex;"><span>    NotifyCollectionChangedEventHandler handler = (sender, args) =&gt;
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>      <span style="color:#75715e">// Make sure the event is an Add event</span>
</span></span><span style="display:flex;"><span>      <span style="color:#66d9ef">if</span> (args.Action != NotifyCollectionChangedAction.Add)
</span></span><span style="display:flex;"><span>      {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">throw</span> <span style="color:#66d9ef">new</span> NotifyCollectionChangedWrongActionException(NotifyCollectionChangedAction.Add, args.Action);
</span></span><span style="display:flex;"><span>      }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>      <span style="color:#75715e">// Make sure we added just one item</span>
</span></span><span style="display:flex;"><span>      <span style="color:#66d9ef">if</span> (args.NewItems?.Count != <span style="color:#ae81ff">1</span>)
</span></span><span style="display:flex;"><span>      {
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// We&#39;ll use the collection of added items as the second argument</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">throw</span> <span style="color:#66d9ef">new</span> NotifyCollectionChangedAddException(newItem, args.NewItems);
</span></span><span style="display:flex;"><span>      }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>      <span style="color:#75715e">// Make sure the added item is what we expected</span>
</span></span><span style="display:flex;"><span>      <span style="color:#66d9ef">if</span> (!args.NewItems[<span style="color:#ae81ff">0</span>].Equals(newItem))
</span></span><span style="display:flex;"><span>      {
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Here we only have one item in the changed collection, so we&#39;ll report it directly</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">throw</span> <span style="color:#66d9ef">new</span> NotifyCollectionChangedAddException(newItem, args.NewItems[<span style="color:#ae81ff">0</span>]);
</span></span><span style="display:flex;"><span>      } 
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>      <span style="color:#75715e">// If we reach this point, the NotifyCollectionChanged event was triggered successfully</span>
</span></span><span style="display:flex;"><span>      <span style="color:#75715e">// and contains the correct item! We&#39;ll set the flag to true so we know.</span>
</span></span><span style="display:flex;"><span>      notifySucceeded = <span style="color:#66d9ef">true</span>;
</span></span><span style="display:flex;"><span>    };
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// Now we connect the event handler </span>
</span></span><span style="display:flex;"><span>    collection.CollectionChanged += handler;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// And attempt to trigger the event by running the actionCode</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// We place this in a try/catch to be able to utilize the finally </span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// clause, but don&#39;t actually catch any exceptions</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">try</span>
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>      testCode();
</span></span><span style="display:flex;"><span>      <span style="color:#75715e">// After this code has been run, our handler should have </span>
</span></span><span style="display:flex;"><span>      <span style="color:#75715e">// triggered, and if all went well, the notifySucceed is true</span>
</span></span><span style="display:flex;"><span>      <span style="color:#66d9ef">if</span> (!notifySucceeded)
</span></span><span style="display:flex;"><span>      {
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// If notifySucceed is false, the event was not triggered</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// We throw an exception denoting that</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">throw</span> <span style="color:#66d9ef">new</span> NotifyCollectionChangedNotTriggeredException(NotifyCollectionChangedAction.Add);
</span></span><span style="display:flex;"><span>      }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// We don&#39;t actually want to catch an exception - we want it to </span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// bubble up and be reported as a failing test.  So we don&#39;t </span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// have a catch () {} clause to this try/catch.</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">finally</span>
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>      <span style="color:#75715e">// However, we *do* want to remove the event handler. We do </span>
</span></span><span style="display:flex;"><span>      <span style="color:#75715e">// this in a finally block so it will happen even if we do </span>
</span></span><span style="display:flex;"><span>      <span style="color:#75715e">// have an exception occur. </span>
</span></span><span style="display:flex;"><span>      collection.CollectionChanged -= handler;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>Now we can test this in our code.  For example, if we had a collection of <code>ShoppingList</code> objects named <code>shoppingLists</code> that implemented <code>INotifyCollectionChanged</code>, we could test adding a new Shopping list it with:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">var</span> newList = <span style="color:#66d9ef">new</span> ShoppingList();
</span></span><span style="display:flex;"><span>MyAssert.NotifyCollectionChangedAdd(shoppingLists, newList, () =&gt; {
</span></span><span style="display:flex;"><span>  shoppingLists.Add(shoppingList);
</span></span><span style="display:flex;"><span>});</span></span></code></pre></div><p>Note that we didn&rsquo;t need to explicitly state <code>T</code> in this case is <code>ShoppingList</code> - the compiler infers this from the arguments supplied to the method.</p>
<p>Our assertion method handles adding a <em>single</em> item. We can use method <em>overloading</em> providing another method of the same name with different arguments to handle when <em>multiple</em> items are added. For that case, the signature might look like:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> NotifyCollectionChangedAdd&lt;T&gt;(INotifyCollectionChanged collection, ICollection&lt;T&gt; items, Action testCode) 
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">// Assertion tests here.</span>
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>We&rsquo;d also want to write assertion methods for handling removing items, and any other actions we might need to test.  I&rsquo;ll leave these as exercises for the reader.</p>

            <footer class="footline">

            </footer>
          </article>

    
    
          <article class="default">
            <header class="headline">
            </header>
<h1 id="summary">Summary</h1>

<p>In this chapter we discussed the Windows Message Loop and Queue, and how messages provided to this loop are transformed into C# events by the <code>Application</code> class.  We examined C#&rsquo;s approach to events, which is a more flexible form of message passing.  We learned how to write both C# event listeners and handlers, and how to invoke event handlers with <code>Invoke()</code>.  We also learned how to create and trigger our own custom events with custom event arguments.</p>
<p>In addition, we learned about the <code>INotifyPropertyChanged</code> interface, and how it can be used to notify listeners that one of an Object&rsquo;s properties have changed through a <code>NotifyPropertyChanged</code> event handler.  We also saw how to test our implementations of <code>INotifyPropertyChanged</code> using xUnit.  In our next chapter on <a href="https://ksu-cs-textbooks.github.io/cis400/2-desktop-development/04-data-binding/">Data Binding</a>
, we will see how this interface is used by Windows Presentation Foundation to update user interfaces automatically when bound data objects change.</p>
<p>We saw that Windows Presentation Foundation also uses Routed Events, which can bubble up the elements tree and be handled by any ancestor element.  This approach replaces many of the familiar UI events from Windows Forms.  We&rsquo;ll take a deeper look at this approach, including defining our own Routed Events and alternative behaviors like &ldquo;tunnelling&rdquo; down the elements tree in the upcoming <a href="https://ksu-cs-textbooks.github.io/cis400/2-desktop-development/05-dependency-objects/">Dependency Objects</a>
 chapter.</p>
<p>Finally, we discussed testing strategies for testing if our events work as expected.  We revisited the Xunit <code>Assert.Raises&lt;t&gt;()</code> and discussed how it works with generic event handlers.  We also saw how for non-generic event handlers, we may have to author our own assertions, and even created one for the <code>CollectionChanged</code> event.</p>

            <footer class="footline">

            </footer>
          </article>

          </section>
    
    
          <article class="chapter">
            <header class="headline">
            </header>


<div class="article-subheading">Chapter 4</div>
<h1 id="data-binding">Data Binding</h1>

<p>Linking GUIs to Data</p>

            <footer class="footline">

            </footer>
          </article>

          <section>
            <h1 class="a11y-only">Subsections of Data Binding</h1>
    
    
          <article class="default">
            <header class="headline">
            </header>
<h1 id="introduction">Introduction</h1>

<p>The term <em>data binding</em> refers to binding two objects together programmatically so that one has access to the data of the other.  We most commonly see this with user interfaces and data objects - the user interface <em>exposes</em> some of the state of the data object to the user.  As with many programming tasks, there are a number of ways to approach data binding.  The Windows Presentation Foundation in C# has adopted an event and component-based approach that we will explore in this chapter.</p>
<h2 id="key-terms">Key Terms</h2>
<p>Some key terms to learn in this chapter are:</p>
<ul>
<li>Data Binding</li>
<li>One-way data binding</li>
<li>Two-way data binding</li>
<li>Data Context</li>
</ul>
<h2 id="key-skills">Key Skills</h2>
<p>Some key skills you need to develop in this chapter are:</p>
<ul>
<li>Binding data objects to UI Components</li>
<li>Implementing (realizing) the <code>INotifyPropertyChanged</code> interface</li>
<li>Invoking event handlers</li>
<li>Using the <code>DataContext</code> property</li>
<li>Casting objects to a specific Type without triggering errors</li>
</ul>

            <footer class="footline">

            </footer>
          </article>

    
    
          <article class="default">
            <header class="headline">
            </header>
<h1 id="data-binding">Data Binding</h1>

<p>Data binding is a technique for synchronizing data between a provider and consumer, so that any time the data changes, the change is reflected in the bound elements.  This strategy is commonly employed in graphical user interfaces (GUIs) to bind controls to data objects.  Both Windows Forms and Windows Presentation Foundation employ data binding.</p>
<p>In WPF, the data object is essentially a normal C# object, which represents some data we want to display in a control. However, this object must implement the <code>INotifyPropertyChanged</code> interface in order for changes in the data object to be automatically applied to the WPF control it is bound to.  Implementing this interface comes with two requirements.  First, the class will define a <code>PropertyChanged</code> event:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">event</span> PropertyChangedEventHandler PropertyChanged;</span></span></code></pre></div><p>And second, it will invoke that <code>PropertyChanged</code> event handler <em>whenever</em> one of its properties changes:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>PropertyChanged?.Invoke(<span style="color:#66d9ef">this</span>, <span style="color:#66d9ef">new</span> PropertyChangedEventArgs(<span style="color:#e6db74">&#34;ThePropertyName&#34;</span>));</span></span></code></pre></div><p>The string provided to the <code>PropertyChangedEventArgs</code> constructor <em>must</em> match the property name <em>exactly</em>, including capitalization.</p>
<p>For example, this simple person implementation is ready to serve as a data object:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// A class representing a person </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Person</span> : INotifyPropertyChanged
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// An event triggered when a property changes </span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">event</span> PropertyChangedEventHandler PropertyChanged;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">string</span> firstName = <span style="color:#e6db74">&#34;&#34;</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// This person&#39;s first name </span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">string</span> FirstName
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">get</span> { <span style="color:#66d9ef">return</span> firstName; }
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">set</span>
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            firstName = <span style="color:#66d9ef">value</span>;
</span></span><span style="display:flex;"><span>            PropertyChanged?.Invoke(<span style="color:#66d9ef">this</span>, <span style="color:#66d9ef">new</span> PropertyChangedEventArgs(<span style="color:#e6db74">&#34;FirstName&#34;</span>));
</span></span><span style="display:flex;"><span>            PropertyChanged?.Invoke(<span style="color:#66d9ef">this</span>, <span style="color:#66d9ef">new</span> PropertyChangedEventArgs(<span style="color:#e6db74">&#34;FullName&#34;</span>));
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">string</span> lastName = <span style="color:#e6db74">&#34;&#34;</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// This person&#39;s last name </span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">string</span> LastName
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">get</span> { <span style="color:#66d9ef">return</span> lastName; }
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">set</span>
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            lastName = <span style="color:#66d9ef">value</span>;
</span></span><span style="display:flex;"><span>            PropertyChanged?.Invoke(<span style="color:#66d9ef">this</span>, <span style="color:#66d9ef">new</span> PropertyChangedEventArgs(<span style="color:#e6db74">&#34;LastName&#34;</span>));
</span></span><span style="display:flex;"><span>            PropertyChanged?.Invoke(<span style="color:#66d9ef">this</span>, <span style="color:#66d9ef">new</span> PropertyChangedEventArgs(<span style="color:#e6db74">&#34;FullName&#34;</span>));
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// This persons&#39; full name </span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">string</span> FullName
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">get</span> { <span style="color:#66d9ef">return</span> <span style="color:#e6db74">$&#34;{firstName} {lastName}&#34;</span>; }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// Constructs a new person </span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;param Name=&#34;first&#34;&gt;The person&#39;s first name&lt;/param&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;param Name=&#34;last&#34;&gt;The person&#39;s last name&lt;/param&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> Person(<span style="color:#66d9ef">string</span> first, <span style="color:#66d9ef">string</span> last)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">this</span>.firstName = first;
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">this</span>.lastName = last;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>There are several details to note here.  As the <code>FirstName</code> and <code>LastName</code> properties have setters, we must invoke the <code>PropertyChanged</code> event within them.  Because of this extra logic, we can no longer use auto-property syntax.  Similarly, as the value of <code>FullName</code> is derived from these properties, we must <em>also</em> notify that <code>&quot;FullName&quot;</code> changes when one of <code>FirstName</code> or <code>LastName</code> changes.</p>
<p>To accomplish the binding in XAML, we use a syntax similar to that we used for static resources.  For example, to bind a <code>&lt;TextBlock&gt;</code> element to the <code>FullName</code> property, we would use:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#f92672">&lt;TextBlock</span> <span style="color:#a6e22e">Text=</span><span style="color:#e6db74">&#34;{Binding Path=FullName}&#34;</span> <span style="color:#f92672">/&gt;</span></span></span></code></pre></div><p>Just as with our static resource, we wrap the entire value in curly braces (<code>{}</code>), and declare a <code>Binding</code>.  The <code>Path</code> in the binding specifies the <em>property</em> we want to bind to - in this case, <code>FullName</code>.  This is considered a one-way binding, as the <code>TextBlock</code> element only displays text - it is not editable.  The corresponding control for editing a textual property is the <code>&lt;TextBox&gt;</code>.  A two-way binding is declared the same way i.e.:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#f92672">&lt;TextBox</span> <span style="color:#a6e22e">Text=</span><span style="color:#e6db74">&#34;{Binding Path=FirstName}&#34;</span> <span style="color:#f92672">/&gt;</span></span></span></code></pre></div><p>However, we cannot bind a read-only property (one that has no setter) to an editable control - only those with both accessible getters and setters.  The XAML for a complete control for editing a person might look something like:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#f92672">&lt;UserControl</span> <span style="color:#a6e22e">x:Class=</span><span style="color:#e6db74">&#34;DataBindingExample.PersonControl&#34;</span>
</span></span><span style="display:flex;"><span>             <span style="color:#a6e22e">xmlns=</span><span style="color:#e6db74">&#34;http://schemas.microsoft.com/winfx/2006/xaml/presentation&#34;</span>
</span></span><span style="display:flex;"><span>             <span style="color:#a6e22e">xmlns:x=</span><span style="color:#e6db74">&#34;http://schemas.microsoft.com/winfx/2006/xaml&#34;</span>
</span></span><span style="display:flex;"><span>             <span style="color:#a6e22e">xmlns:mc=</span><span style="color:#e6db74">&#34;http://schemas.openxmlformats.org/markup-compatibility/2006&#34;</span> 
</span></span><span style="display:flex;"><span>             <span style="color:#a6e22e">xmlns:d=</span><span style="color:#e6db74">&#34;http://schemas.microsoft.com/expression/blend/2008&#34;</span>     
</span></span><span style="display:flex;"><span>             <span style="color:#a6e22e">xmlns:local=</span><span style="color:#e6db74">&#34;clr-namespace:DataBindingExample&#34;</span>
</span></span><span style="display:flex;"><span>             <span style="color:#a6e22e">xmlns:system=</span><span style="color:#e6db74">&#34;clr-namespace:System;assembly=mscorlib&#34;</span>
</span></span><span style="display:flex;"><span>             <span style="color:#a6e22e">mc:Ignorable=</span><span style="color:#e6db74">&#34;d&#34;</span> 
</span></span><span style="display:flex;"><span>             <span style="color:#a6e22e">d:DesignHeight=</span><span style="color:#e6db74">&#34;450&#34;</span> <span style="color:#a6e22e">d:DesignWidth=</span><span style="color:#e6db74">&#34;400&#34;</span><span style="color:#f92672">&gt;</span>    
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;StackPanel&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;TextBlock</span> <span style="color:#a6e22e">Text=</span><span style="color:#e6db74">&#34;{Binding Path=FullName}&#34;</span><span style="color:#f92672">/&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;Label&gt;</span>First<span style="color:#f92672">&lt;/Label&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;TextBox</span> <span style="color:#a6e22e">Text=</span><span style="color:#e6db74">&#34;{Binding Path=FirstName}&#34;</span><span style="color:#f92672">/&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;Label&gt;</span>Last<span style="color:#f92672">&lt;/Label&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;TextBox</span> <span style="color:#a6e22e">Text=</span><span style="color:#e6db74">&#34;{Binding Path=LastName}&#34;</span><span style="color:#f92672">/&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;/StackPanel&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;/UserControl&gt;</span></span></span></code></pre></div><p>We also need to set the <code>DataContext</code> property of the control.  This property holds the specific data object whose properties are bound in the control.  For example, we could pass a <code>Person</code> object into the <code>PersonControl</code>&rsquo;s constructor and set it as the <code>DataContext</code> in the codebehind:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">namespace</span> DataBindingExample
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// Interaction logic for PersonControl.xaml</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">partial</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">PersonEntry</span> : UserControl
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">/// Constructs a new PersonControl control </span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">/// &lt;param Name=&#34;person&#34;&gt;The person object to data bind&lt;/param&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">public</span> PersonControl(Person person)
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            InitializeComponent();
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">this</span>.DataContext = person;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>However, this approach means we can no longer declare a <code>&lt;PersonControl&gt;</code> in XAML (as objects declared this way must have a parameterless constructor).  An alternative is to bind the <code>DataContext</code> in the codebehind of an ancestor control; for example, a window containing the control:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#f92672">&lt;Window</span> <span style="color:#a6e22e">x:Class=</span><span style="color:#e6db74">&#34;DataContextExample.MainWindow&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">xmlns=</span><span style="color:#e6db74">&#34;http://schemas.microsoft.com/winfx/2006/xaml/presentation&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">xmlns:x=</span><span style="color:#e6db74">&#34;http://schemas.microsoft.com/winfx/2006/xaml&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">xmlns:d=</span><span style="color:#e6db74">&#34;http://schemas.microsoft.com/expression/blend/2008&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">xmlns:mc=</span><span style="color:#e6db74">&#34;http://schemas.openxmlformats.org/markup-compatibility/2006&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">xmlns:local=</span><span style="color:#e6db74">&#34;clr-namespace:DataContextExample&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">mc:Ignorable=</span><span style="color:#e6db74">&#34;d&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">Title=</span><span style="color:#e6db74">&#34;MainWindow&#34;</span> <span style="color:#a6e22e">Height=</span><span style="color:#e6db74">&#34;450&#34;</span> <span style="color:#a6e22e">Width=</span><span style="color:#e6db74">&#34;800&#34;</span><span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;Grid&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;local:PersonEntry</span> <span style="color:#a6e22e">x:Name=</span><span style="color:#e6db74">&#34;personEntry&#34;</span><span style="color:#f92672">/&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;/Grid&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;/Window&gt;</span></span></span></code></pre></div><div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">namespace</span> DataContextExample
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// Interaction logic for MainWindow.xaml</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">partial</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">MainWindow</span> : Window
</span></span><span style="display:flex;"><span>    {        
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">public</span> MainWindow()
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            InitializeComponent();
</span></span><span style="display:flex;"><span>            personControl.DataContext = <span style="color:#66d9ef">new</span> Person(<span style="color:#e6db74">&#34;Bugs&#34;</span>, <span style="color:#e6db74">&#34;Bunny&#34;</span>);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>Finally, the <code>DataContext</code> has a very interesting relationship with the elements tree.  If a control in this tree does not have its own <code>DataContext</code> property directly set, it uses the <code>DataContext</code> of the first ancestor where it <em>has</em> been set. I.e. were we to set the <code>DataContext</code> of the window to a person:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">namespace</span> DataContextExample
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// Interaction logic for MainWindow.xaml</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">partial</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">MainWindow</span> : Window
</span></span><span style="display:flex;"><span>    {        
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">public</span> MainWindow()
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            InitializeComponent();
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">this</span>.DataContext = <span style="color:#66d9ef">new</span> Person(<span style="color:#e6db74">&#34;Elmer&#34;</span>, <span style="color:#e6db74">&#34;Fudd&#34;</span>);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>And have a <code>PersonElement</code> nested somewhere further down the elements tree:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#f92672">&lt;Window</span> <span style="color:#a6e22e">x:Class=</span><span style="color:#e6db74">&#34;DataBindingExample.MainWindow&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">xmlns=</span><span style="color:#e6db74">&#34;http://schemas.microsoft.com/winfx/2006/xaml/presentation&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">xmlns:x=</span><span style="color:#e6db74">&#34;http://schemas.microsoft.com/winfx/2006/xaml&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">xmlns:d=</span><span style="color:#e6db74">&#34;http://schemas.microsoft.com/expression/blend/2008&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">xmlns:mc=</span><span style="color:#e6db74">&#34;http://schemas.openxmlformats.org/markup-compatibility/2006&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">xmlns:local=</span><span style="color:#e6db74">&#34;clr-namespace:DataBindingExample&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">mc:Ignorable=</span><span style="color:#e6db74">&#34;d&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">Title=</span><span style="color:#e6db74">&#34;MainWindow&#34;</span> <span style="color:#a6e22e">Height=</span><span style="color:#e6db74">&#34;450&#34;</span> <span style="color:#a6e22e">Width=</span><span style="color:#e6db74">&#34;800&#34;</span><span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;Grid&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;Border&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&lt;local:PersonEntry/&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;/Border&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;/Grid&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;/Window&gt;</span></span></span></code></pre></div><p>The bound person (Elmer Fudd)&rsquo;s information would be displayed in the <code>&lt;PersonEntry&gt;</code>!</p>

            <footer class="footline">

            </footer>
          </article>

    
    
          <article class="default">
            <header class="headline">
            </header>
<h1 id="the-binding-class">The Binding Class</h1>

<p>In Windows Presentation Foundation, data binding is accomplished by a binding object that sits between the <em>binding target</em> (the control) and the <em>binding source</em> (the data object):</p>
<p>
<a href="#image-d0d604b3b1882d0c878d95ac152433c6" class="lightbox-link">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/2.4.3.1.png" alt="The WPF Data Binding implementation" style="height: auto; width: auto;" loading="lazy">
</a>
<a href="javascript:history.back();" class="lightbox" id="image-d0d604b3b1882d0c878d95ac152433c6">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/2.4.3.1.png" alt="The WPF Data Binding implementation" class="lightbox-image" loading="lazy">
</a></p>
<p>It is this <a href="https://docs.microsoft.com/en-us/dotnet/api/system.windows.data.binding?view=windowsdesktop-6.0" target="_blank">Binding</a>
 object that we are defining the properties of in the XAML attribute with <code>&quot;{Binding}&quot;</code>.  Hence, <code>Path</code> is a property defined on this binding.</p>
<p>As we mentioned before, bindings can be <code>OneWay</code> or <code>TwoWay</code> based on the direction the data flows.  The binding mode is specified by the <code>Binding</code> object&rsquo;s <code>Mode</code> property, which can also be set in XAML. There is actually a two additional options.  The first is a <code>OneWayToSource</code> that is basically a reversed one-way binding (the control updates the data object, but the data object does not update the control)</p>
<p>For example, we actually <em>could</em> use a <code>&lt;TextEditor&gt;</code> with a read-only property, if we changed the binding mode:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#f92672">&lt;TextEditor</span> <span style="color:#a6e22e">Text=</span><span style="color:#e6db74">&#34;{Binding Path=FullName Mode=OneWay}&#34;</span> <span style="color:#f92672">/&gt;</span></span></span></code></pre></div><p>Though this might cause your user confusion because they would <em>seem</em> to be able to change the property, but the change would not actually be applied to the bound object.  However, if you <em>also</em> set the <code>IsEnabled</code> property to false to prevent the user from making changes:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#f92672">&lt;TextEditor</span> <span style="color:#a6e22e">Text=</span><span style="color:#e6db74">&#34;{Binding Path=FullName Mode=OneWay}&#34;</span> <span style="color:#a6e22e">IsEnabled=</span><span style="color:#e6db74">&#34;False&#34;</span> <span style="color:#f92672">/&gt;</span></span></span></code></pre></div><p>The second binding mode is <code>OneTime</code> which initializes the control with the property, but does not apply any subsequent changes.  This is similar to the behavior you will see from a data object that does not implement the <code>INotifyPropertyChanged</code> interface, as the <code>Binding</code> object depends on it to</p>
<p>Generally, you&rsquo;ll want to use a control meant to be used with the mode you intend to employ - editable controls default to <code>TwoWay</code> and display controls to <code>OneWay</code>.</p>
<p>One other property of the <code>Binding</code> class that&rsquo;s good to know is the <code>Source</code> property.  Normally this is determined by the <code>DataContext</code> of the control, but you can override it in the XAML.</p>

            <footer class="footline">

            </footer>
          </article>

    
    
          <article class="default">
            <header class="headline">
            </header>
<h1 id="binding-lists">Binding Lists</h1>

<p>For list controls, i.e. <code>ListView</code> and <code>ListBox</code>, the appropriate binding is a collection implementing <code>IEnumerable</code>, and we bind it to the <code>ItemsSource</code> property.  Let&rsquo;s say we want to create a directory that displays information for a <code>List&lt;Person&gt;</code>.  We might write a custom <code>DirectoryControl</code> like:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#f92672">&lt;UserControl</span> <span style="color:#a6e22e">x:Class=</span><span style="color:#e6db74">&#34;DataBindingExample.DirectoryControl&#34;</span>
</span></span><span style="display:flex;"><span>             <span style="color:#a6e22e">xmlns=</span><span style="color:#e6db74">&#34;http://schemas.microsoft.com/winfx/2006/xaml/presentation&#34;</span>
</span></span><span style="display:flex;"><span>             <span style="color:#a6e22e">xmlns:x=</span><span style="color:#e6db74">&#34;http://schemas.microsoft.com/winfx/2006/xaml&#34;</span>
</span></span><span style="display:flex;"><span>             <span style="color:#a6e22e">xmlns:mc=</span><span style="color:#e6db74">&#34;http://schemas.openxmlformats.org/markup-compatibility/2006&#34;</span> 
</span></span><span style="display:flex;"><span>             <span style="color:#a6e22e">xmlns:d=</span><span style="color:#e6db74">&#34;http://schemas.microsoft.com/expression/blend/2008&#34;</span> 
</span></span><span style="display:flex;"><span>             <span style="color:#a6e22e">xmlns:local=</span><span style="color:#e6db74">&#34;clr-namespace:DataBindingExample&#34;</span>
</span></span><span style="display:flex;"><span>             <span style="color:#a6e22e">mc:Ignorable=</span><span style="color:#e6db74">&#34;d&#34;</span> 
</span></span><span style="display:flex;"><span>             <span style="color:#a6e22e">d:DesignHeight=</span><span style="color:#e6db74">&#34;450&#34;</span> <span style="color:#a6e22e">d:DesignWidth=</span><span style="color:#e6db74">&#34;800&#34;</span><span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;Grid&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;ListBox</span> <span style="color:#a6e22e">ItemsSource=</span><span style="color:#e6db74">&#34;{Binding}&#34;</span><span style="color:#f92672">/&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;/Grid&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;/UserControl&gt;</span></span></span></code></pre></div><p>Notice that we didn&rsquo;t supply a <code>Path</code> with our binding.  In this case, we&rsquo;ll be binding directly to the <code>DataContext</code>, which is a list of <code>People</code> objects drawn from the 1996 classic &ldquo;Space Jam&rdquo;, i.e.:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#f92672">&lt;Window</span> <span style="color:#a6e22e">x:Class=</span><span style="color:#e6db74">&#34;DataBindingExample.MainWindow&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">xmlns=</span><span style="color:#e6db74">&#34;http://schemas.microsoft.com/winfx/2006/xaml/presentation&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">xmlns:x=</span><span style="color:#e6db74">&#34;http://schemas.microsoft.com/winfx/2006/xaml&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">xmlns:d=</span><span style="color:#e6db74">&#34;http://schemas.microsoft.com/expression/blend/2008&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">xmlns:mc=</span><span style="color:#e6db74">&#34;http://schemas.openxmlformats.org/markup-compatibility/2006&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">xmlns:local=</span><span style="color:#e6db74">&#34;clr-namespace:DataBindingExample&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">mc:Ignorable=</span><span style="color:#e6db74">&#34;d&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">Title=</span><span style="color:#e6db74">&#34;MainWindow&#34;</span> <span style="color:#a6e22e">Height=</span><span style="color:#e6db74">&#34;450&#34;</span> <span style="color:#a6e22e">Width=</span><span style="color:#e6db74">&#34;800&#34;</span><span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;Grid&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;local:DirectoryControl</span> <span style="color:#a6e22e">x:Name=</span><span style="color:#e6db74">&#34;directory&#34;</span><span style="color:#f92672">/&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;/Grid&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;/Window&gt;</span></span></span></code></pre></div><div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// Interaction logic for MainWindow.xaml</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">partial</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">MainWindow</span> : Window
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> MainWindow()
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        InitializeComponent();
</span></span><span style="display:flex;"><span>        ObservableCollection&lt;Person&gt; people = <span style="color:#66d9ef">new</span> ObservableCollection&lt;Person&gt;()
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">new</span> Person(<span style="color:#e6db74">&#34;Bugs&#34;</span>, <span style="color:#e6db74">&#34;Bunny&#34;</span>, <span style="color:#66d9ef">true</span>),
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">new</span> Person(<span style="color:#e6db74">&#34;Daffy&#34;</span>, <span style="color:#e6db74">&#34;Duck&#34;</span>, <span style="color:#66d9ef">true</span>),
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">new</span> Person(<span style="color:#e6db74">&#34;Elmer&#34;</span>, <span style="color:#e6db74">&#34;Fudd&#34;</span>, <span style="color:#66d9ef">true</span>),
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">new</span> Person(<span style="color:#e6db74">&#34;Tazmanian&#34;</span>, <span style="color:#e6db74">&#34;Devil&#34;</span>, <span style="color:#66d9ef">true</span>),
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">new</span> Person(<span style="color:#e6db74">&#34;Tweety&#34;</span>, <span style="color:#e6db74">&#34;Bird&#34;</span>, <span style="color:#66d9ef">true</span>),
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">new</span> Person(<span style="color:#e6db74">&#34;Marvin&#34;</span>, <span style="color:#e6db74">&#34;Martian&#34;</span>, <span style="color:#66d9ef">true</span>),
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">new</span> Person(<span style="color:#e6db74">&#34;Michael&#34;</span>, <span style="color:#e6db74">&#34;Jordan&#34;</span>),
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">new</span> Person(<span style="color:#e6db74">&#34;Charles&#34;</span>, <span style="color:#e6db74">&#34;Barkely&#34;</span>),
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">new</span> Person(<span style="color:#e6db74">&#34;Patrick&#34;</span>, <span style="color:#e6db74">&#34;Ewing&#34;</span>),
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">new</span> Person(<span style="color:#e6db74">&#34;Larry&#34;</span>, <span style="color:#e6db74">&#34;Johnson&#34;</span>)
</span></span><span style="display:flex;"><span>        };
</span></span><span style="display:flex;"><span>        DataContext = people;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>Instead of a <code>List&lt;Person&gt;</code>, we&rsquo;ll use an <code>ObservableCollection&lt;Person&gt;</code> which is essentially a list that implements the <code>INotifyPropertyChanged</code> interface.</p>
<p>When we run this code, our results will be:</p>
<p>
<a href="#image-5c4ef36473b4b7c7f3a2c9587100f100" class="lightbox-link">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/2.4.4.1.png" alt="The ListView in the running application" style="height: auto; width: auto;" loading="lazy">
</a>
<a href="javascript:history.back();" class="lightbox" id="image-5c4ef36473b4b7c7f3a2c9587100f100">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/2.4.4.1.png" alt="The ListView in the running application" class="lightbox-image" loading="lazy">
</a></p>
<p>This is because the <code>ListBox</code> (and the <code>ListView</code>) by default are composed of <code>&lt;TextBlock&gt;</code> elements, so each <code>Person</code> in the list is being bound to a <code>&lt;TextBlock&gt;</code>&rsquo;s <code>Text</code> property.  This invokes the <code>ToString()</code> method on the <code>Person</code> object, hence the <code>DataBindingExample.Person</code> displayed for each entry.</p>
<p>We could, of course, override the <code>ToString()</code> method on person.  But we can also overwrite the <code>DataTemplate</code> the list uses to display its contents.  Instead of using the default <code>&lt;TextView&gt;</code>, the list will use the <code>DataContext</code>, and the bindings, we supply.  For example, we could re-write the <code>DirectoryControl</code> control as:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#f92672">&lt;UserControl</span> <span style="color:#a6e22e">x:Class=</span><span style="color:#e6db74">&#34;DataBindingExample.DirectoryControl&#34;</span>
</span></span><span style="display:flex;"><span>             <span style="color:#a6e22e">xmlns=</span><span style="color:#e6db74">&#34;http://schemas.microsoft.com/winfx/2006/xaml/presentation&#34;</span>
</span></span><span style="display:flex;"><span>             <span style="color:#a6e22e">xmlns:x=</span><span style="color:#e6db74">&#34;http://schemas.microsoft.com/winfx/2006/xaml&#34;</span>
</span></span><span style="display:flex;"><span>             <span style="color:#a6e22e">xmlns:mc=</span><span style="color:#e6db74">&#34;http://schemas.openxmlformats.org/markup-compatibility/2006&#34;</span> 
</span></span><span style="display:flex;"><span>             <span style="color:#a6e22e">xmlns:d=</span><span style="color:#e6db74">&#34;http://schemas.microsoft.com/expression/blend/2008&#34;</span> 
</span></span><span style="display:flex;"><span>             <span style="color:#a6e22e">xmlns:local=</span><span style="color:#e6db74">&#34;clr-namespace:DataBindingExample&#34;</span>
</span></span><span style="display:flex;"><span>             <span style="color:#a6e22e">mc:Ignorable=</span><span style="color:#e6db74">&#34;d&#34;</span> 
</span></span><span style="display:flex;"><span>             <span style="color:#a6e22e">d:DesignHeight=</span><span style="color:#e6db74">&#34;450&#34;</span> <span style="color:#a6e22e">d:DesignWidth=</span><span style="color:#e6db74">&#34;800&#34;</span><span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;Grid&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;ListBox</span> <span style="color:#a6e22e">ItemsSource=</span><span style="color:#e6db74">&#34;{Binding}&#34;</span><span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&lt;ListBox.ItemTemplate&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="color:#f92672">&lt;DataTemplate&gt;</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#f92672">&lt;Border</span> <span style="color:#a6e22e">BorderBrush=</span><span style="color:#e6db74">&#34;Black&#34;</span> <span style="color:#a6e22e">BorderThickness=</span><span style="color:#e6db74">&#34;2&#34;</span><span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>                        <span style="color:#f92672">&lt;StackPanel&gt;</span>
</span></span><span style="display:flex;"><span>                            <span style="color:#f92672">&lt;TextBlock</span> <span style="color:#a6e22e">Text=</span><span style="color:#e6db74">&#34;{Binding Path=FullName}&#34;</span><span style="color:#f92672">/&gt;</span>
</span></span><span style="display:flex;"><span>                            <span style="color:#f92672">&lt;CheckBox</span> <span style="color:#a6e22e">IsChecked=</span><span style="color:#e6db74">&#34;{Binding Path=IsCartoon}&#34;</span> <span style="color:#a6e22e">IsEnabled=</span><span style="color:#e6db74">&#34;False&#34;</span><span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>                                Is a Looney Toon
</span></span><span style="display:flex;"><span>                            <span style="color:#f92672">&lt;/CheckBox&gt;</span>
</span></span><span style="display:flex;"><span>                        <span style="color:#f92672">&lt;/StackPanel&gt;</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#f92672">&lt;/Border&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="color:#f92672">&lt;/DataTemplate&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&lt;/ListBox.ItemTemplate&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;/ListBox&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;/Grid&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;/UserControl&gt;</span></span></span></code></pre></div><p>And the resulting application would display:</p>
<p>
<a href="#image-10e6518e2a6fa21170757a6407f3686e" class="lightbox-link">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/2.4.4.2.png" alt="The updated ListView in the running application" style="height: auto; width: auto;" loading="lazy">
</a>
<a href="javascript:history.back();" class="lightbox" id="image-10e6518e2a6fa21170757a6407f3686e">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/2.4.4.2.png" alt="The updated ListView in the running application" class="lightbox-image" loading="lazy">
</a></p>
<p>Note that in our <code>DataTemplate</code>, we can bind to properties in the <code>Person</code> object.  This works because as the <code>ListBox</code> processes its <code>ItemsSource</code> property, it creates a new instance of its <code>ItemTemplate</code> (in this case, our custom <code>DataTemplate</code>) and assigns the item from the <code>ItemSource</code> to its <code>DataContext</code>.</p>
<p>Using custom <code>DataTemplates</code> for XAML controls is a powerful feature to customize the appearance and behavior of your GUI.</p>
<p>Lists also can interact with other elements through bindings.  Let&rsquo;s refactor our window so that we have a <code>&lt;PersonRegistry&gt;</code> side-by-side with our <code>&lt;PersonControl&gt;</code>:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#f92672">&lt;Window</span> <span style="color:#a6e22e">x:Class=</span><span style="color:#e6db74">&#34;DataBindingExample.MainWindow&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">xmlns=</span><span style="color:#e6db74">&#34;http://schemas.microsoft.com/winfx/2006/xaml/presentation&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">xmlns:x=</span><span style="color:#e6db74">&#34;http://schemas.microsoft.com/winfx/2006/xaml&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">xmlns:d=</span><span style="color:#e6db74">&#34;http://schemas.microsoft.com/expression/blend/2008&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">xmlns:mc=</span><span style="color:#e6db74">&#34;http://schemas.openxmlformats.org/markup-compatibility/2006&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">xmlns:local=</span><span style="color:#e6db74">&#34;clr-namespace:DataBindingExample&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">mc:Ignorable=</span><span style="color:#e6db74">&#34;d&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">Title=</span><span style="color:#e6db74">&#34;MainWindow&#34;</span> <span style="color:#a6e22e">Height=</span><span style="color:#e6db74">&#34;450&#34;</span> <span style="color:#a6e22e">Width=</span><span style="color:#e6db74">&#34;800&#34;</span><span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;Grid&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;Grid.ColumnDefinitions&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&lt;ColumnDefinition/&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&lt;ColumnDefinition/&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;/Grid.ColumnDefinitions&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;local:PersonControl</span> <span style="color:#a6e22e">Grid.Column=</span><span style="color:#e6db74">&#34;0&#34;</span> <span style="color:#a6e22e">DataContext=</span><span style="color:#e6db74">&#34;{Binding Path=CurrentItem}&#34;</span><span style="color:#f92672">/&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;local:DirectoryControl</span> <span style="color:#a6e22e">Grid.Column=</span><span style="color:#e6db74">&#34;1&#34;</span><span style="color:#f92672">/&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;/Grid&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;/Window&gt;</span></span></span></code></pre></div><p>Note how we bind the <code>&lt;PersonControl&gt;</code>&rsquo;s <code>DataContext</code> to the <code>CurrentItem</code> of the <code>ObservableCollection&lt;Person&gt;</code>.  In our <code>&lt;RegistryControl&gt;</code>&rsquo;s <code>ListBox</code>, we&rsquo;ll also set its <code>IsSynchronizedWithCurrentItem</code> property to true:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#f92672">&lt;UserControl</span> <span style="color:#a6e22e">x:Class=</span><span style="color:#e6db74">&#34;DataBindingExample.DirectoryControl&#34;</span>
</span></span><span style="display:flex;"><span>             <span style="color:#a6e22e">xmlns=</span><span style="color:#e6db74">&#34;http://schemas.microsoft.com/winfx/2006/xaml/presentation&#34;</span>
</span></span><span style="display:flex;"><span>             <span style="color:#a6e22e">xmlns:x=</span><span style="color:#e6db74">&#34;http://schemas.microsoft.com/winfx/2006/xaml&#34;</span>
</span></span><span style="display:flex;"><span>             <span style="color:#a6e22e">xmlns:mc=</span><span style="color:#e6db74">&#34;http://schemas.openxmlformats.org/markup-compatibility/2006&#34;</span> 
</span></span><span style="display:flex;"><span>             <span style="color:#a6e22e">xmlns:d=</span><span style="color:#e6db74">&#34;http://schemas.microsoft.com/expression/blend/2008&#34;</span> 
</span></span><span style="display:flex;"><span>             <span style="color:#a6e22e">xmlns:local=</span><span style="color:#e6db74">&#34;clr-namespace:DataBindingExample&#34;</span>
</span></span><span style="display:flex;"><span>             <span style="color:#a6e22e">mc:Ignorable=</span><span style="color:#e6db74">&#34;d&#34;</span> 
</span></span><span style="display:flex;"><span>             <span style="color:#a6e22e">d:DesignHeight=</span><span style="color:#e6db74">&#34;450&#34;</span> <span style="color:#a6e22e">d:DesignWidth=</span><span style="color:#e6db74">&#34;800&#34;</span><span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;Grid&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;ListBox</span> <span style="color:#a6e22e">ItemsSource=</span><span style="color:#e6db74">&#34;{Binding}&#34;</span> <span style="color:#a6e22e">HorizontalContentAlignment=</span><span style="color:#e6db74">&#34;Stretch&#34;</span> <span style="color:#a6e22e">IsSynchronizedWithCurrentItem=</span><span style="color:#e6db74">&#34;True&#34;</span><span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&lt;ListBox.ItemTemplate&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="color:#f92672">&lt;DataTemplate&gt;</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#f92672">&lt;Border</span> <span style="color:#a6e22e">BorderBrush=</span><span style="color:#e6db74">&#34;Black&#34;</span> <span style="color:#a6e22e">BorderThickness=</span><span style="color:#e6db74">&#34;1&#34;</span><span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>                        <span style="color:#f92672">&lt;StackPanel&gt;</span>
</span></span><span style="display:flex;"><span>                            <span style="color:#f92672">&lt;TextBlock</span> <span style="color:#a6e22e">Text=</span><span style="color:#e6db74">&#34;{Binding Path=FullName}&#34;</span><span style="color:#f92672">/&gt;</span>
</span></span><span style="display:flex;"><span>                            <span style="color:#f92672">&lt;CheckBox</span> <span style="color:#a6e22e">IsChecked=</span><span style="color:#e6db74">&#34;{Binding Path=IsCartoon, Mode=OneWay}&#34;</span> <span style="color:#a6e22e">IsEnabled=</span><span style="color:#e6db74">&#34;False&#34;</span><span style="color:#f92672">&gt;</span>Cartoon<span style="color:#f92672">&lt;/CheckBox&gt;</span>
</span></span><span style="display:flex;"><span>                        <span style="color:#f92672">&lt;/StackPanel&gt;</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#f92672">&lt;/Border&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="color:#f92672">&lt;/DataTemplate&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&lt;/ListBox.ItemTemplate&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;/ListBox&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;/Grid&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;/UserControl&gt;</span></span></span></code></pre></div><p>With these changes, when we select a person in the <code>&lt;RegistryControl&gt;</code>, their information will appear in the <code>&lt;PersonControl&gt;</code>:</p>
<p>
<a href="#image-0148ebd684d1c20577f42f0688d31e31" class="lightbox-link">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/2.4.4.3.png" alt="The bound controls" style="height: auto; width: auto;" loading="lazy">
</a>
<a href="javascript:history.back();" class="lightbox" id="image-0148ebd684d1c20577f42f0688d31e31">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/2.4.4.3.png" alt="The bound controls" class="lightbox-image" loading="lazy">
</a></p>

            <footer class="footline">

            </footer>
          </article>

    
    
          <article class="default">
            <header class="headline">
            </header>
<h1 id="binding-enumerations">Binding Enumerations</h1>

<p>Now let&rsquo;s delve into a more complex data binding examples - binding enumerations.  For this discussion, we&rsquo;ll use a simple enumeration of fruits:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// Possible fruits</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">enum</span> Fruit
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    Apple,
</span></span><span style="display:flex;"><span>    Orange,
</span></span><span style="display:flex;"><span>    Peach,
</span></span><span style="display:flex;"><span>    Pear
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>And add a <code>FavoriteFruit</code> property to our <code>Person</code> class:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">private</span> Fruit favoriteFruit;
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// The person&#39; favorite fruit</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> Fruit FavoriteFruit
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">get</span> { <span style="color:#66d9ef">return</span> favoriteFruit; }
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">set</span>
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        favoriteFruit = <span style="color:#66d9ef">value</span>;
</span></span><span style="display:flex;"><span>        PropertyChanged?.Invoke(<span style="color:#66d9ef">this</span>, <span style="color:#66d9ef">new</span> PropertyChangedEventArgs(<span style="color:#e6db74">&#34;FavoriteFruit&#34;</span>));
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>For example, what if we wanted to use a <code>ListBox</code>  to select an item out of this enumeration?  We&rsquo;d actually need to bind <em>two</em> properties, the <code>ItemSource</code> to get the enumeration values, and the <code>SelectedItem</code> to mark the item being used.  To accomplish this binding, we&rsquo;d need to first make the fruits available for binding by creating a static resource to hold them using an <code>ObjectDataProvider</code>:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#f92672">&lt;ObjectDataProvider</span> <span style="color:#a6e22e">x:Key=</span><span style="color:#e6db74">&#34;fruits&#34;</span> <span style="color:#a6e22e">ObjectType=</span><span style="color:#e6db74">&#34;system:Enum&#34;</span> <span style="color:#a6e22e">MethodName=</span><span style="color:#e6db74">&#34;GetValues&#34;</span><span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;ObjectDataProvider.MethodParameters&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;x:Type</span> <span style="color:#a6e22e">TypeName=</span><span style="color:#e6db74">&#34;local:Fruit&#34;</span><span style="color:#f92672">/&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;/ObjectDataProvider.MethodParameters&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;/ObjectDataProvider&gt;</span></span></span></code></pre></div><p>The <a href="https://docs.microsoft.com/en-us/dotnet/api/system.windows.data.objectdataprovider?view=netcore-3.1" target="_blank"><code>ObjectDataProvider</code></a>
 is an object that can be used as a data source for WPF bindings, and wraps around an object and invokes a method to get the data - in this case the <code>Enum</code> class, and its static method <code>GetValues()</code>, which takes one parameter, the <code>Type</code> of the enum we want to pull the values of (provided as the nested element, <code>&lt;x:Type&gt;</code>).</p>
<p>Also, note that because the <code>Enum</code> class is defined in the System namespace, we need to bring it into the XAML with an xml namespace mapped to it, with the attribute <code>xmlns</code> defined on the UserControl, i.e.: <code>xmlns:system=&quot;clr-namespace:System;assembly=mscorlib&quot;</code>.</p>
<p>Now we can use the <code>fruits</code> key as part of a data source for a listbox: <code>&lt;ListBox ItemsSource=&quot;{Binding Source={StaticResource fruits}}&quot; SelectedItem=&quot;{Binding Path=FavoriteFruit}&quot;/&gt;</code></p>
<p>Notice that we use the <code>Source</code> property of the <code>Binding</code> class to bind the <code>ItemsSource</code> to the enumeration values exposed in the static resource <code>fruits</code>.  Then we bind the <code>SelectedItem</code> to the person&rsquo;s <code>FavoriteFruit</code> property.  The entire control would be:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#f92672">&lt;UserControl</span> <span style="color:#a6e22e">x:Class=</span><span style="color:#e6db74">&#34;DataBindingExample.PersonControl&#34;</span>
</span></span><span style="display:flex;"><span>             <span style="color:#a6e22e">xmlns=</span><span style="color:#e6db74">&#34;http://schemas.microsoft.com/winfx/2006/xaml/presentation&#34;</span>
</span></span><span style="display:flex;"><span>             <span style="color:#a6e22e">xmlns:x=</span><span style="color:#e6db74">&#34;http://schemas.microsoft.com/winfx/2006/xaml&#34;</span>
</span></span><span style="display:flex;"><span>             <span style="color:#a6e22e">xmlns:mc=</span><span style="color:#e6db74">&#34;http://schemas.openxmlformats.org/markup-compatibility/2006&#34;</span> 
</span></span><span style="display:flex;"><span>             <span style="color:#a6e22e">xmlns:d=</span><span style="color:#e6db74">&#34;http://schemas.microsoft.com/expression/blend/2008&#34;</span>     
</span></span><span style="display:flex;"><span>             <span style="color:#a6e22e">xmlns:local=</span><span style="color:#e6db74">&#34;clr-namespace:DataBindingExample&#34;</span>
</span></span><span style="display:flex;"><span>             <span style="color:#a6e22e">xmlns:system=</span><span style="color:#e6db74">&#34;clr-namespace:System;assembly=mscorlib&#34;</span>
</span></span><span style="display:flex;"><span>             <span style="color:#a6e22e">mc:Ignorable=</span><span style="color:#e6db74">&#34;d&#34;</span> 
</span></span><span style="display:flex;"><span>             <span style="color:#a6e22e">d:DesignHeight=</span><span style="color:#e6db74">&#34;450&#34;</span> <span style="color:#a6e22e">d:DesignWidth=</span><span style="color:#e6db74">&#34;400&#34;</span><span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;UserControl.Resources&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;ObjectDataProvider</span> <span style="color:#a6e22e">x:Key=</span><span style="color:#e6db74">&#34;fruits&#34;</span> <span style="color:#a6e22e">MethodName=</span><span style="color:#e6db74">&#34;GetValues&#34;</span> <span style="color:#a6e22e">ObjectType=</span><span style="color:#e6db74">&#34;{x:Type system:Enum}&#34;</span><span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&lt;ObjectDataProvider.MethodParameters&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="color:#f92672">&lt;x:Type</span> <span style="color:#a6e22e">TypeName=</span><span style="color:#e6db74">&#34;local:Fruit&#34;</span><span style="color:#f92672">/&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&lt;/ObjectDataProvider.MethodParameters&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;/ObjectDataProvider&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;/UserControl.Resources&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;StackPanel&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;TextBlock</span> <span style="color:#a6e22e">Text=</span><span style="color:#e6db74">&#34;{Binding Path=FullName}&#34;</span><span style="color:#f92672">/&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;Label&gt;</span>First<span style="color:#f92672">&lt;/Label&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;TextBox</span> <span style="color:#a6e22e">Text=</span><span style="color:#e6db74">&#34;{Binding Path=First}&#34;</span><span style="color:#f92672">/&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;Label&gt;</span>Last<span style="color:#f92672">&lt;/Label&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;TextBox</span> <span style="color:#a6e22e">Text=</span><span style="color:#e6db74">&#34;{Binding Path=Last}&#34;</span><span style="color:#f92672">/&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;CheckBox</span> <span style="color:#a6e22e">IsChecked=</span><span style="color:#e6db74">&#34;{Binding Path=IsCartoon}&#34;</span><span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>            Is a Looney Toon
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;/CheckBox&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;ListBox</span> <span style="color:#a6e22e">ItemsSource=</span><span style="color:#e6db74">&#34;{Binding Source={StaticResource fruits}}&#34;</span> <span style="color:#a6e22e">SelectedItem=</span><span style="color:#e6db74">&#34;{Binding Path=FavoriteFruit}&#34;</span><span style="color:#f92672">/&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;/StackPanel&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;/UserControl&gt;</span></span></span></code></pre></div><h3 id="binding-a-combobox-to-an-enum">Binding a ComboBox to an Enum</h3>
<p>Binding a <code>&lt;ComboBox&gt;</code> is almost identical to the <code>ListBox</code> example; we just swap a <code>ComboBox</code> for a <code>ListBox</code>:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#f92672">&lt;UserControl</span> <span style="color:#a6e22e">x:Class=</span><span style="color:#e6db74">&#34;DataBindingExample.PersonControl&#34;</span>
</span></span><span style="display:flex;"><span>             <span style="color:#a6e22e">xmlns=</span><span style="color:#e6db74">&#34;http://schemas.microsoft.com/winfx/2006/xaml/presentation&#34;</span>
</span></span><span style="display:flex;"><span>             <span style="color:#a6e22e">xmlns:x=</span><span style="color:#e6db74">&#34;http://schemas.microsoft.com/winfx/2006/xaml&#34;</span>
</span></span><span style="display:flex;"><span>             <span style="color:#a6e22e">xmlns:mc=</span><span style="color:#e6db74">&#34;http://schemas.openxmlformats.org/markup-compatibility/2006&#34;</span> 
</span></span><span style="display:flex;"><span>             <span style="color:#a6e22e">xmlns:d=</span><span style="color:#e6db74">&#34;http://schemas.microsoft.com/expression/blend/2008&#34;</span>     
</span></span><span style="display:flex;"><span>             <span style="color:#a6e22e">xmlns:local=</span><span style="color:#e6db74">&#34;clr-namespace:DataBindingExample&#34;</span>
</span></span><span style="display:flex;"><span>             <span style="color:#a6e22e">xmlns:system=</span><span style="color:#e6db74">&#34;clr-namespace:System;assembly=mscorlib&#34;</span>
</span></span><span style="display:flex;"><span>             <span style="color:#a6e22e">mc:Ignorable=</span><span style="color:#e6db74">&#34;d&#34;</span> 
</span></span><span style="display:flex;"><span>             <span style="color:#a6e22e">d:DesignHeight=</span><span style="color:#e6db74">&#34;450&#34;</span> <span style="color:#a6e22e">d:DesignWidth=</span><span style="color:#e6db74">&#34;400&#34;</span><span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;UserControl.Resources&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;ObjectDataProvider</span> <span style="color:#a6e22e">x:Key=</span><span style="color:#e6db74">&#34;fruits&#34;</span> <span style="color:#a6e22e">MethodName=</span><span style="color:#e6db74">&#34;GetValues&#34;</span> <span style="color:#a6e22e">ObjectType=</span><span style="color:#e6db74">&#34;{x:Type system:Enum}&#34;</span><span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&lt;ObjectDataProvider.MethodParameters&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="color:#f92672">&lt;x:Type</span> <span style="color:#a6e22e">TypeName=</span><span style="color:#e6db74">&#34;local:Fruit&#34;</span><span style="color:#f92672">/&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&lt;/ObjectDataProvider.MethodParameters&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;/ObjectDataProvider&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;/UserControl.Resources&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;StackPanel&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;TextBlock</span> <span style="color:#a6e22e">Text=</span><span style="color:#e6db74">&#34;{Binding Path=FullName}&#34;</span><span style="color:#f92672">/&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;Label&gt;</span>First<span style="color:#f92672">&lt;/Label&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;TextBox</span> <span style="color:#a6e22e">Text=</span><span style="color:#e6db74">&#34;{Binding Path=First}&#34;</span><span style="color:#f92672">/&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;Label&gt;</span>Last<span style="color:#f92672">&lt;/Label&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;TextBox</span> <span style="color:#a6e22e">Text=</span><span style="color:#e6db74">&#34;{Binding Path=Last}&#34;</span><span style="color:#f92672">/&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;CheckBox</span> <span style="color:#a6e22e">IsChecked=</span><span style="color:#e6db74">&#34;{Binding Path=IsCartoon}&#34;</span><span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>            Is a Looney Toon
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;/CheckBox&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;ComboBox</span> <span style="color:#a6e22e">ItemsSource=</span><span style="color:#e6db74">&#34;{Binding Source={StaticResource fruits}}&#34;</span> <span style="color:#a6e22e">SelectedItem=</span><span style="color:#e6db74">&#34;{Binding Path=FavoriteFruit}&#34;</span><span style="color:#f92672">/&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;/StackPanel&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;/UserControl&gt;</span></span></span></code></pre></div><h4 id="binding-radiobuttons-to-an-enum">Binding RadioButtons to an Enum</h4>
<p>Binding a <code>&lt;RadioButton&gt;</code> requires a very different approach, as a radio button exposes an <code>IsChecked</code> boolean property that determines if it is checked, much like a <code>&lt;CheckBox&gt;</code>, but we want it bound to an enumeration property.  There are a lot of attempts to do this by creating a custom content converter, but ultimately they all have flaws.</p>
<p>Instead, we can restyle a <code>ListBox</code> to <em>look</em> like radio buttons, but still provide the same functionality by adding a <code>&lt;Style&gt;</code> that applies to the <code>ListBoxItem</code> contents of the <code>ListBox</code>:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#f92672">&lt;Style</span> <span style="color:#a6e22e">TargetType=</span><span style="color:#e6db74">&#34;{x:Type ListBoxItem}&#34;</span><span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;Setter</span> <span style="color:#a6e22e">Property=</span><span style="color:#e6db74">&#34;Template&#34;</span><span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;Setter.Value&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&lt;ControlTemplate&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="color:#f92672">&lt;RadioButton</span> <span style="color:#a6e22e">Content=</span><span style="color:#e6db74">&#34;{TemplateBinding ContentPresenter.Content}&#34;</span> <span style="color:#a6e22e">IsChecked=</span><span style="color:#e6db74">&#34;{Binding Path=IsSelected, RelativeSource={RelativeSource TemplatedParent}, Mode=TwoWay}&#34;</span><span style="color:#f92672">/&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&lt;/ControlTemplate&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;/Setter.Value&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;/Setter&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;/Style&gt;</span></span></span></code></pre></div><p>This style can be used in conjunction with a <code>ListBox</code> declared as we did above:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#f92672">&lt;UserControl</span> <span style="color:#a6e22e">x:Class=</span><span style="color:#e6db74">&#34;DataBindingExample.PersonControl&#34;</span>
</span></span><span style="display:flex;"><span>             <span style="color:#a6e22e">xmlns=</span><span style="color:#e6db74">&#34;http://schemas.microsoft.com/winfx/2006/xaml/presentation&#34;</span>
</span></span><span style="display:flex;"><span>             <span style="color:#a6e22e">xmlns:x=</span><span style="color:#e6db74">&#34;http://schemas.microsoft.com/winfx/2006/xaml&#34;</span>
</span></span><span style="display:flex;"><span>             <span style="color:#a6e22e">xmlns:mc=</span><span style="color:#e6db74">&#34;http://schemas.openxmlformats.org/markup-compatibility/2006&#34;</span> 
</span></span><span style="display:flex;"><span>             <span style="color:#a6e22e">xmlns:d=</span><span style="color:#e6db74">&#34;http://schemas.microsoft.com/expression/blend/2008&#34;</span>     
</span></span><span style="display:flex;"><span>             <span style="color:#a6e22e">xmlns:local=</span><span style="color:#e6db74">&#34;clr-namespace:DataBindingExample&#34;</span>
</span></span><span style="display:flex;"><span>             <span style="color:#a6e22e">xmlns:system=</span><span style="color:#e6db74">&#34;clr-namespace:System;assembly=mscorlib&#34;</span>
</span></span><span style="display:flex;"><span>             <span style="color:#a6e22e">mc:Ignorable=</span><span style="color:#e6db74">&#34;d&#34;</span> 
</span></span><span style="display:flex;"><span>             <span style="color:#a6e22e">d:DesignHeight=</span><span style="color:#e6db74">&#34;450&#34;</span> <span style="color:#a6e22e">d:DesignWidth=</span><span style="color:#e6db74">&#34;400&#34;</span><span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;UserControl.Resources&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;ObjectDataProvider</span> <span style="color:#a6e22e">x:Key=</span><span style="color:#e6db74">&#34;fruits&#34;</span> <span style="color:#a6e22e">MethodName=</span><span style="color:#e6db74">&#34;GetValues&#34;</span> <span style="color:#a6e22e">ObjectType=</span><span style="color:#e6db74">&#34;{x:Type system:Enum}&#34;</span><span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&lt;ObjectDataProvider.MethodParameters&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="color:#f92672">&lt;x:Type</span> <span style="color:#a6e22e">TypeName=</span><span style="color:#e6db74">&#34;local:Fruit&#34;</span><span style="color:#f92672">/&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&lt;/ObjectDataProvider.MethodParameters&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;/ObjectDataProvider&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;Style</span> <span style="color:#a6e22e">TargetType=</span><span style="color:#e6db74">&#34;{x:Type ListBoxItem}&#34;</span><span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&lt;Setter</span> <span style="color:#a6e22e">Property=</span><span style="color:#e6db74">&#34;Template&#34;</span><span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="color:#f92672">&lt;Setter.Value&gt;</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#f92672">&lt;ControlTemplate&gt;</span>
</span></span><span style="display:flex;"><span>                        <span style="color:#f92672">&lt;RadioButton</span> <span style="color:#a6e22e">Content=</span><span style="color:#e6db74">&#34;{TemplateBinding ContentPresenter.Content}&#34;</span> <span style="color:#a6e22e">IsChecked=</span><span style="color:#e6db74">&#34;{Binding Path=IsSelected, RelativeSource={RelativeSource TemplatedParent}, Mode=TwoWay}&#34;</span><span style="color:#f92672">/&gt;</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#f92672">&lt;/ControlTemplate&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="color:#f92672">&lt;/Setter.Value&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&lt;/Setter&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;/Style&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;/UserControl.Resources&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;StackPanel&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;TextBlock</span> <span style="color:#a6e22e">Text=</span><span style="color:#e6db74">&#34;{Binding Path=FullName}&#34;</span><span style="color:#f92672">/&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;Label&gt;</span>First<span style="color:#f92672">&lt;/Label&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;TextBox</span> <span style="color:#a6e22e">Text=</span><span style="color:#e6db74">&#34;{Binding Path=First}&#34;</span><span style="color:#f92672">/&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;Label&gt;</span>Last<span style="color:#f92672">&lt;/Label&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;TextBox</span> <span style="color:#a6e22e">Text=</span><span style="color:#e6db74">&#34;{Binding Path=Last}&#34;</span><span style="color:#f92672">/&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;CheckBox</span> <span style="color:#a6e22e">IsChecked=</span><span style="color:#e6db74">&#34;{Binding Path=IsCartoon}&#34;</span><span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>            Is a Looney Toon
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;/CheckBox&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;ListBox</span> <span style="color:#a6e22e">ItemsSource=</span><span style="color:#e6db74">&#34;{Binding Source={StaticResource fruits}}&#34;</span> <span style="color:#a6e22e">SelectedItem=</span><span style="color:#e6db74">&#34;{Binding Path=FavoriteFruit}&#34;</span><span style="color:#f92672">/&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;/StackPanel&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;/UserControl&gt;</span></span></span></code></pre></div>
            <footer class="footline">

            </footer>
          </article>

    
    
          <article class="default">
            <header class="headline">
            </header>
<h1 id="summary">Summary</h1>

<p>In this chapter we explored the concept of data binding and how it is employed in Windows Presentation Foundation.  We saw how bound classes need to implement the <code>INotifyPropertyChanged</code> interface for bound properties to automatically synchronize. We saw how the binding is managed by a <code>Binding</code> class instance, and how we can customize its <code>Path</code>, <code>Mode</code>, and <code>Source</code> properties in XAML to modify the binding behavior.  We bound simple controls like <code>&lt;TextBlock&gt;</code> and <code>&lt;CheckBox&gt;</code> and more complex elements like <code>&lt;ListView&gt;</code> and <code>&lt;ListBox&gt;</code>.  We also explored how to bind enumerations to controls. And we explored the use of templates like <code>DataTemplate</code> and <code>ControlTemplate</code> to modify WPF controls.</p>
<p>The full example project discussed in this chapter can be found at <a href="https://github.com/ksu-cis/DataBindingExample" target="_blank">https://github.com/ksu-cis/DataBindingExample</a>
.</p>

            <footer class="footline">

            </footer>
          </article>

          </section>
    
    
          <article class="chapter">
            <header class="headline">
            </header>


<div class="article-subheading">Chapter 5</div>
<h1 id="dependency-objects">Dependency Objects</h1>

<p>The Bedrock of WPF</p>

            <footer class="footline">

            </footer>
          </article>

          <section>
            <h1 class="a11y-only">Subsections of Dependency Objects</h1>
    
    
          <article class="default">
            <header class="headline">
            </header>
<h1 id="introduction">Introduction</h1>

<p>You&rsquo;ve now worked with a variety of WPF controls, laid out components using containers, traversed the elements tree, performed data binding,and worked with routed events.  Each of these is made possible through the use of several classes:  <code>DependencyObject</code>, <code>UIElement</code>, and <code>FrameworkElement</code>, which serve as a base classes for all WPF controls.  In this chapter we&rsquo;ll dig deeper into how these base classes implement <em>dependency properties</em> and <em>routed events</em>.</p>
<h2 id="key-terms">Key Terms</h2>
<p>Some key terms to learn in this chapter are:</p>
<ul>
<li>Dependency Property</li>
<li>Routed Event</li>
<li>MVVM Pattern</li>
</ul>
<h2 id="key-skills">Key Skills</h2>
<p>Some key skills you need to develop in this chapter are:</p>
<ul>
<li>Creating custom dependency properties</li>
<li>Handling routed events</li>
<li>Creating custom routed events</li>
<li>Using dependency property callbacks</li>
</ul>

            <footer class="footline">

            </footer>
          </article>

    
    
          <article class="default">
            <header class="headline">
            </header>
<h1 id="dependency-properties">Dependency Properties</h1>

<p>Perhaps the most important aspect of the <code>DependencyObject</code> is its support for hosting <em>dependency properties</em>.  While these appear and can be used much like the C# properties we have previously worked with, internally they are managed very differently.  Consider when we place a <code>&lt;TextBox&gt;</code> in a <code>&lt;Grid&gt;</code>:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#f92672">&lt;Grid&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;Grid.ColumnDefinitions&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;ColumnDefinition/&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;ColumnDefinition/&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;/Grid.ColumnDefinitions&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;Grid.RowDefinitions&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;RowDefinition/&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;RowDefinition/&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;/Grid.RowDefinitions&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;TextBox</span> <span style="color:#a6e22e">Name=</span><span style="color:#e6db74">&#34;textBox&#34;</span> <span style="color:#a6e22e">Grid.Column=</span><span style="color:#e6db74">&#34;1&#34;</span> <span style="color:#a6e22e">Grid.Row=</span><span style="color:#e6db74">&#34;1&#34;</span><span style="color:#f92672">/&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;/Grid&gt;</span></span></span></code></pre></div><p>Where does the <code>Column</code> and <code>Row</code> properties come from?  They aren&rsquo;t defined on the <code>TextBox</code> class - you can <a href="https://docs.microsoft.com/en-us/dotnet/api/system.windows.controls.textbox?view=netcore-3.1#properties" target="_blank">check the documentation</a>
.  The answer is they are made available through the dependency property system.</p>
<p>At the heart of this system is a collection of key/value pairs much like the <code>Dictionary</code>.  When the XAML code <code>Grid.Column=&quot;1&quot;</code> is processed, this key and value are added to the <code>TextBox</code>&rsquo;s dependency properties collection, and is thereafter accessible by the WPF rendering algorithm.</p>
<p>The <code>DependencyObject</code> exposes these stored values with the <code>GetValue(DependencyProperty)</code> and <code>SetValue(DependencyProperty, value)</code> methods.  For example, we can set the <code>Column</code> property to <code>2</code> with:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>textBox.SetValue(Grid.ColumnProperty, <span style="color:#ae81ff">2</span>);</span></span></code></pre></div><p>We can also create <em>new</em> dependency properties on our own custom classes extending the <code>DependencyObject</code> (which is also a base class for all WPF controls).  Let&rsquo;s say we are making a custom control for entering number values on a touch screen, which we&rsquo;ll call <code>NumberBox</code>.  We can extend a <code>UserControl</code> to create a textbox centered between two buttons, one to increase the value, and one to decrease it:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#f92672">&lt;UserControl</span> <span style="color:#a6e22e">x:Class=</span><span style="color:#e6db74">&#34;CustomDependencyObjectExample.NumberBox&#34;</span>
</span></span><span style="display:flex;"><span>             <span style="color:#a6e22e">xmlns=</span><span style="color:#e6db74">&#34;http://schemas.microsoft.com/winfx/2006/xaml/presentation&#34;</span>
</span></span><span style="display:flex;"><span>             <span style="color:#a6e22e">xmlns:x=</span><span style="color:#e6db74">&#34;http://schemas.microsoft.com/winfx/2006/xaml&#34;</span>
</span></span><span style="display:flex;"><span>             <span style="color:#a6e22e">xmlns:mc=</span><span style="color:#e6db74">&#34;http://schemas.openxmlformats.org/markup-compatibility/2006&#34;</span> 
</span></span><span style="display:flex;"><span>             <span style="color:#a6e22e">xmlns:d=</span><span style="color:#e6db74">&#34;http://schemas.microsoft.com/expression/blend/2008&#34;</span> 
</span></span><span style="display:flex;"><span>             <span style="color:#a6e22e">xmlns:local=</span><span style="color:#e6db74">&#34;clr-namespace:CustomDependencyObjectExample&#34;</span>
</span></span><span style="display:flex;"><span>             <span style="color:#a6e22e">mc:Ignorable=</span><span style="color:#e6db74">&#34;d&#34;</span> 
</span></span><span style="display:flex;"><span>             <span style="color:#a6e22e">d:DesignHeight=</span><span style="color:#e6db74">&#34;50&#34;</span> <span style="color:#a6e22e">d:DesignWidth=</span><span style="color:#e6db74">&#34;200&#34;</span><span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;Grid&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;Grid.ColumnDefinitions&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&lt;ColumnDefinition/&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&lt;ColumnDefinition</span> <span style="color:#a6e22e">Width=</span><span style="color:#e6db74">&#34;2*&#34;</span><span style="color:#f92672">/&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&lt;ColumnDefinition/&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;/Grid.ColumnDefinitions&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;Button</span> <span style="color:#a6e22e">Grid.Column=</span><span style="color:#e6db74">&#34;0&#34;</span><span style="color:#f92672">&gt;</span>+<span style="color:#f92672">&lt;/Button&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;TextBox</span> <span style="color:#a6e22e">Grid.Column=</span><span style="color:#e6db74">&#34;1&#34;</span> <span style="color:#f92672">/&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;Button</span> <span style="color:#a6e22e">Grid.Column=</span><span style="color:#e6db74">&#34;2&#34;</span><span style="color:#f92672">&gt;</span>-<span style="color:#f92672">&lt;/Button&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;/Grid&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;/UserControl&gt;</span></span></span></code></pre></div><p>Now, let&rsquo;s assume we want to provide a property <code>Step</code> of type <code>double</code>, which is the amount the number should be incremented when the &ldquo;+&rdquo; or &ldquo;-&rdquo; button is pressed.</p>
<p>The first step is to <em>register</em> the dependency property by creating a <code>DependencyProperty</code> instance.  This will serve as the key to setting and retrieving the dependency property on a dependency object.  We register new dependency properties with <code>DependencyProperty.Register(string propertyName, Type propertyType, Type dependencyObjectType)</code>.  The string is the name of the property, the first type is the type of the property, and the second is the class we want to associated this property with.  So our <code>Step</code> property would be registered with:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>DependencyProperty.Register(nameof(Step), <span style="color:#66d9ef">typeof</span>(<span style="color:#66d9ef">double</span>), <span style="color:#66d9ef">typeof</span>(NumberBox));</span></span></code></pre></div><p>There is an optional fourth property to <code>DependencyProperty.Register()</code> which is a <code>PropertyMetadata</code>.  This is used to set the default value of the property.  We probably should specify a default step, so let&rsquo;s add a <code>PropertyMetadata</code> object with a default value of 1:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>DependencyProperty.Register(nameof(Step), <span style="color:#66d9ef">typeof</span>(<span style="color:#66d9ef">double</span>), <span style="color:#66d9ef">typeof</span>(NumberBox), <span style="color:#66d9ef">new</span> PropertyMetadata(<span style="color:#ae81ff">1.0</span>));</span></span></code></pre></div><p>The <code>DependencyProperty.Register()</code> method returns a registered <code>DependencyObject</code> to serve as a key for accessing our new property.  To make sure we can access this key from <em>other</em> classes, we define it as a field that is <code>public</code>, <code>static</code>, and <code>readonly</code>.  The naming convention for <code>DependencyProperties</code> is to name this field by appending &ldquo;Property&rdquo; to the name of the property.</p>
<p>Thus, the complete registration, including saving the result to the public static field is:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// Identifies the NumberBox.Step XAML attached property</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">readonly</span> DependencyProperty StepProperty = DependencyProperty.Register(nameof(Step), <span style="color:#66d9ef">typeof</span>(<span style="color:#66d9ef">double</span>), <span style="color:#66d9ef">typeof</span>(NumberBox), <span style="color:#66d9ef">new</span> PropertyMetadata(<span style="color:#ae81ff">1.0</span>)); </span></span></code></pre></div><p>We also want to declare a traditional property with the name &ldquo;Step&rdquo;.  But instead of declaring a backing field, we will use the key/value pair stored in our <code>DependencyObject</code> using <code>GetValue()</code> and <code>SetValue()</code>:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// The amount each increment or decrement operation should change the value by</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">double</span> Step
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">get</span> { <span style="color:#66d9ef">return</span> (<span style="color:#66d9ef">double</span>)GetValue(StepProperty); }
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">set</span> { SetValue(StepProperty, <span style="color:#66d9ef">value</span>); }
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>As dependency property values are stored as an <code>object</code>, we need to cast the value to a the appropriate type when it is returned.</p>
<p>One of the great benefits of dependency properties is that they can be set using XAML.  I.e. we could declare an instance of our <code>&lt;NumberBox&gt;</code> and set its <code>Step</code> using an attribute:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#f92672">&lt;StackPanel&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;NumberBox</span> <span style="color:#a6e22e">Step=</span><span style="color:#e6db74">&#34;3.0&#34;</span><span style="color:#f92672">/&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;/StackPanel&gt;</span></span></span></code></pre></div>
            <footer class="footline">

            </footer>
          </article>

    
    
          <article class="default">
            <header class="headline">
            </header>
<h1 id="framework-elements">Framework Elements</h1>

<p>WPF controls are built on the foundation of dependency objects - the <code>DependencyObject</code> is at the bottom of their inheritance chain.  But they also add additional functionality on top of that through another common base class, <code>FrameworkElement</code>.  The <code>FrameworkElement</code> is involved in the layout algorithm, as well as helping to define the <a href="https://ksu-cs-textbooks.github.io/cis400/2-desktop-development/02-element-tree/">elements tree</a>
.  Let&rsquo;s add a <em>second</em> dependency property to our <code>&lt;NumberBox&gt;</code>, a <code>Value</code> property that will represent the value the <code>&lt;NumberBox&gt;</code> currently represents, which will be displayed in the <code>&lt;TextBox&gt;</code>.</p>
<p>We register this dependency property in much the same way as our <code>Step</code>.  But instead of supplying the <code>DependencyProperty.Register()</code> method a <code>PropertyMetadata</code>, we&rsquo;ll instead supply a <code>FrameworkPropertyMetadata</code>, which extends <code>PropertyMetadata</code> to include additional data about how the property interacts with the WPF rendering and layout algorithms.  This additional data is in the form of a bitmask defined in <a href="https://docs.microsoft.com/en-us/dotnet/api/system.windows.frameworkpropertymetadataoptions?view=netcore-3.1" target="_blank">FrameworkPropertyMetadataOptions</a>
 enumeration.</p>
<p>Some of the possible options are:</p>
<ul>
<li><code>FrameworkPropertyMetadataOptions.AffectsMeasure</code> - changes to the property may affect the size of the control</li>
<li><code>FrameworkPropertyMetadataOptions.AffectsArrange</code> - changes to the property may affect the layout of the control</li>
<li><code>FrameworkPropertyMetadataOptions.AffectsRender</code> - changes to the property may affect the appearance of the control</li>
<li><code>FrameworkPropertyMetadataOptions.BindsTowWayByDefault</code> - This property uses two-way bindings by default (i.e. the control is an editable control)</li>
<li><code>FrameworkPropertyMetadataOptions.NotDataBindable</code> - This property does not allow data binding</li>
</ul>
<p>In this case, we want a two-way binding by default, so we&rsquo;ll include that flag, and we also we&rsquo;ll note that it affects the rendering process.  Multiple flags can be combined with a <a href="https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/operators/bitwise-and-shift-operators#logical-or-operator-" target="_blank">bitwise OR</a>
.  Constructing our <code>FrameworkPropertyMetadata</code> object would then look like:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">new</span> FrameworkPropertyMetadata(<span style="color:#ae81ff">0</span>, FrameworkPropertyMetadataOptions.AffectsRender | FrameworkPropertyMetadataOptions.BindsTwoWayByDefault)</span></span></code></pre></div><p>And registering the dependency property would be:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// Identifies the NumberBox.Value XAML attached property</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">readonly</span> DependencyProperty ValueProperty = DependencyProperty.Register(nameof(Value), <span style="color:#66d9ef">typeof</span>(<span style="color:#66d9ef">double</span>), <span style="color:#66d9ef">typeof</span>(NumberBox), <span style="color:#66d9ef">new</span> FrameworkPropertyMetadata(<span style="color:#ae81ff">0</span>, FrameworkPropertyMetadataOptions.AffectsRender | FrameworkPropertyMetadataOptions.BindsTwoWayByDefault));</span></span></code></pre></div><p>As with the <code>Step</code>, we also want to declare a traditional property with the name &ldquo;Value&rdquo;.  But instead of declaring a backing field, we will use the key/value pair stored in our <code>DependencyObject</code> using <code>GetValue()</code> and <code>SetValue()</code>:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// The NumberBox&#39;s displayed value</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">double</span> Value {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">get</span> { <span style="color:#66d9ef">return</span> ( <span style="color:#66d9ef">double</span>)GetValue(ValueProperty); }
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">set</span> { SetValue(ValueProperty, <span style="color:#66d9ef">value</span>); }
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>If we want to display the current value of <code>Value</code> it in the textbox of our <code>NumberBox</code> control, we&rsquo;ll need to bind the <code>&lt;TextBox&gt;</code> element&rsquo;s <code>Text</code> property.  This is accomplished in a similar fashion to the other bindings we&rsquo;ve done previously, only we need to specify a <code>RelativeSource</code>.  This is a source relative to the control in the <a href="https://ksu-cs-textbooks.github.io/cis400/2-desktop-development/02-element-tree/">elements tree</a>
.  We&rsquo;ll specify two properties on the <code>RelativeSource</code>: the <code>Mode</code> which we set to <code>FindAncestor</code> to search up the tree, and the <code>AncestorType</code> which we set to our <code>NumberBox</code>.  Thus, instead of binding to the <code>DataContext</code>, we&rsquo;ll bind to the <code>NumberBox</code> the <code>&lt;TextBox&gt;</code> is located within.  The full declaration would be:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#f92672">&lt;TextBox</span> <span style="color:#a6e22e">Grid.Column=</span><span style="color:#e6db74">&#34;1&#34;</span> <span style="color:#a6e22e">Text=</span><span style="color:#e6db74">&#34;{Binding Path=Value, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType=local:NumberBox}}&#34;</span><span style="color:#f92672">/&gt;</span></span></span></code></pre></div><p>Now a two-way binding exists between the <code>Value</code> of the <code>&lt;NumberBox&gt;</code> and the <code>Text</code> value of the textbox.  Updating either one will update the other.  We&rsquo;ve in effect made an editable control!</p>

            <footer class="footline">

            </footer>
          </article>

    
    
          <article class="default">
            <header class="headline">
            </header>
<h1 id="routed-events">Routed Events</h1>

<p>Another aspect of WPF elements are <em>routed events</em>.  Just as <em>dependency properties</em> are similar to regular C# properties, but add additional functionality, <em>routed events</em> are similar to regular C# events, but provide additional functionality.  One of the most important of these is the ability of the routed event to &ldquo;bubble&rdquo; up the <a href="https://ksu-cs-textbooks.github.io/cis400/2-desktop-development/02-element-tree/">elements tree</a>
.  Essentially, the event will be passed up each successive WPF element until one chooses to &ldquo;handle&rdquo; it, or the top of the tree is reached (in which case the event is ignored).  This routed event functionality is managed by the <a href="https://docs.microsoft.com/en-us/dotnet/api/system.windows.uielement?view=netcore-3.1" target="_blank"><code>UIElement</code></a>
 base class, a third base class shared by all WPF elements.</p>
<p>Let&rsquo;s consider the two buttons we declared in our <code>&lt;NumberBox&gt;</code>.  When clicked, these each trigger a <code>Click</code> routed event.  We could attach a handler to each button, but it is also possible to instead attach it to any other element up the tree; for example, our <code>&lt;Grid&gt;</code>:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#f92672">&lt;UserControl</span> <span style="color:#a6e22e">x:Class=</span><span style="color:#e6db74">&#34;CustomDependencyObjectExample.NumberBox&#34;</span>
</span></span><span style="display:flex;"><span>             <span style="color:#a6e22e">xmlns=</span><span style="color:#e6db74">&#34;http://schemas.microsoft.com/winfx/2006/xaml/presentation&#34;</span>
</span></span><span style="display:flex;"><span>             <span style="color:#a6e22e">xmlns:x=</span><span style="color:#e6db74">&#34;http://schemas.microsoft.com/winfx/2006/xaml&#34;</span>
</span></span><span style="display:flex;"><span>             <span style="color:#a6e22e">xmlns:mc=</span><span style="color:#e6db74">&#34;http://schemas.openxmlformats.org/markup-compatibility/2006&#34;</span>
</span></span><span style="display:flex;"><span>             <span style="color:#a6e22e">xmlns:d=</span><span style="color:#e6db74">&#34;http://schemas.microsoft.com/expression/blend/2008&#34;</span>
</span></span><span style="display:flex;"><span>             <span style="color:#a6e22e">xmlns:local=</span><span style="color:#e6db74">&#34;clr-namespace:CustomDependencyObjectExample&#34;</span>
</span></span><span style="display:flex;"><span>             <span style="color:#a6e22e">mc:Ignorable=</span><span style="color:#e6db74">&#34;d&#34;</span>
</span></span><span style="display:flex;"><span>             <span style="color:#a6e22e">d:DesignHeight=</span><span style="color:#e6db74">&#34;50&#34;</span> <span style="color:#a6e22e">d:DesignWidth=</span><span style="color:#e6db74">&#34;200&#34;</span><span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;Grid</span> <span style="color:#a6e22e">Button.Click=</span><span style="color:#e6db74">&#34;HandleButtonClick&#34;</span><span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;Grid.ColumnDefinitions&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&lt;ColumnDefinition/&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&lt;ColumnDefinition</span> <span style="color:#a6e22e">Width=</span><span style="color:#e6db74">&#34;2*&#34;</span><span style="color:#f92672">/&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&lt;ColumnDefinition/&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;/Grid.ColumnDefinitions&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;Button</span> <span style="color:#a6e22e">Grid.Column=</span><span style="color:#e6db74">&#34;0&#34;</span> <span style="color:#a6e22e">Name=</span><span style="color:#e6db74">&#34;Increment&#34;</span><span style="color:#f92672">&gt;</span>+<span style="color:#f92672">&lt;/Button&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;TextBox</span> <span style="color:#a6e22e">Grid.Column=</span><span style="color:#e6db74">&#34;1&#34;</span> <span style="color:#a6e22e">Text=</span><span style="color:#e6db74">&#34;{Binding Path=Value, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType=local:NumberBox}}&#34;</span><span style="color:#f92672">/&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;Button</span> <span style="color:#a6e22e">Grid.Column=</span><span style="color:#e6db74">&#34;2&#34;</span> <span style="color:#a6e22e">Name=</span><span style="color:#e6db74">&#34;Decrement&#34;</span><span style="color:#f92672">&gt;</span>-<span style="color:#f92672">&lt;/Button&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;/Grid&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;/UserControl&gt;</span></span></span></code></pre></div><p>We&rsquo;d need to define <code>HandleButtonClick</code> in our codebehind:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// Handles the click of the increment or decrement button</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;param name=&#34;sender&#34;&gt;The button clicked&lt;/param&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;param name=&#34;e&#34;&gt;The event arguments&lt;/param&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">void</span> HandleButtonClick(<span style="color:#66d9ef">object</span> sender, RoutedEventArgs e)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span>(sender <span style="color:#66d9ef">is</span> Button button)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">switch</span>(button.Name)
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">case</span> <span style="color:#e6db74">&#34;Increment&#34;</span>:
</span></span><span style="display:flex;"><span>                Value += Step;
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">break</span>;
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">case</span> <span style="color:#e6db74">&#34;Decrement&#34;</span>:
</span></span><span style="display:flex;"><span>                Value -= Step;
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">break</span>;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    e.Handled = <span style="color:#66d9ef">true</span>;
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>When either button is clicked, it creates a <code>Button.Click</code> event.  As the buttons don&rsquo;t handle it, the event bubbles to the next element in the elements tree - in this case, the <code>&lt;Grid&gt;</code>.  As the <code>&lt;Grid&gt;</code> <em>does</em> attach a <code>Button.Click</code> listener, the event is passed to <code>HandleButtonClick</code>.  In this method we use the button&rsquo;s <code>Name</code> property to decide the correct action to take.  Also, note that we set the <code>RoutedEventArgs.Handled</code> property to <code>true</code>.  This lets WPF know that we&rsquo;ve taken care of the event, and it does not need to bubble up any farther (if we didn&rsquo;t, we could process the event <em>again</em> further up the elements tree).</p>
<p>Much like dependency properties, we can declare our own routed events.  These also use a <code>Register()</code> method, but for events this is a static method of the <code>EventHandler</code> class:  <code>EventManger.Register(string eventName, RoutingStrategy routing, Type eventHandlerType, Type controlType)</code>.  The first argument is a string, which is the name of the event, the second is one of the values from the <code>RoutingStrategy</code> enum, the third is the type of event handler, and the fourth is the type of the control it is declared in.  This <code>Register()</code> method returns a <code>RoutedEvent</code> that is used as a key when registering event listeners, which we typically store in a <code>public static readonly RoutedEvent</code> field.</p>
<p>The <code>RoutingStrategy</code> options are</p>
<ul>
<li><code>RoutingStrategy.Bubble</code> - which travels up the elements tree through ancestor nodes</li>
<li><code>RoutingStrategy.Tunnel</code> - which travels down the elements tree through descendant nodes</li>
<li><code>RoutingStrategy.Direct</code> - which can only be handled by the source element</li>
</ul>
<p>Let&rsquo;s create an example routed event for our <code>NumberBox</code>.  Let&rsquo;s assume we define two more routed properties <code>MinValue</code> and <code>MaxValue</code>, and that any time we change the value of our <code>NumberBox</code> it must fall within this range, or be clamped to one of those values.  To make it easer for UI designers to provide user feedback, we&rsquo;ll create a <code>NumberBox.ValueClamped</code> event that will trigger in these circumstances.  We need to register our new routed event:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// Identifies the NumberBox.ValueClamped event</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">readonly</span> RoutedEvent ValueClampedEvent = EventManager.RegisterRoutedEvent(nameof(ValueClamped), RoutingStrategy.Bubble, <span style="color:#66d9ef">typeof</span>(RoutedEventHandler), <span style="color:#66d9ef">typeof</span>(NumberBox));</span></span></code></pre></div><p>Also like dependency properties also need to declare a corresponding C# property, routed events need to declare a corresponding C# event:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// Event that is triggered when the value of this NumberBox changes</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">event</span> RoutedEventHandler ValueClamped
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">add</span> { AddHandler(ValueClampedEvent, <span style="color:#66d9ef">value</span>); }
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">remove</span> { RemoveHandler(ValueClampedEvent, <span style="color:#66d9ef">value</span>); }
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>Finally, we would want to raise this event whenever the value is clamped.  This can be done with the <code>RaiseEvent(RoutedEventArgs)</code> method defined on the <code>UIElement</code> base class that we inherit in our custom controls.  But where should we place this call?</p>
<p>You might think we would do this in the <code>HandleButtonClick()</code> method, and we could, but that misses when a user types a number <em>directly into the textbox</em>, as well as when <code>Value</code> is updated through a two-way binding.  Instead, we&rsquo;ll utilize the callback functionality available in the <code>FrameworkPropertyMetadata</code> for the <code>Value</code> property.  Since the dependency property and its metadata are both <code>static</code>, our callback also needs to be declared <code>static</code>:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// Callback for the ValueProperty, which clamps the Value to the range</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// defined by MinValue and MaxValue</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;param name=&#34;sender&#34;&gt;The NumberBox whose value is changing&lt;/param&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;param name=&#34;e&#34;&gt;The event args&lt;/param&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> HandleValueChanged(DependencyObject sender, DependencyPropertyChangedEventArgs e)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span>(e.Property.Name == <span style="color:#e6db74">&#34;Value&#34;</span> &amp;&amp; sender <span style="color:#66d9ef">is</span> NumberBox box)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span>(box.Value &lt; box.MinValue)
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            box.Value = box.MinValue;
</span></span><span style="display:flex;"><span>            box.RaiseEvent(<span style="color:#66d9ef">new</span> RoutedEventArgs(ValueClampedEvent));
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span>(box.Value &gt; box.MaxValue)
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            box.Value = box.MaxValue;
</span></span><span style="display:flex;"><span>            box.RaiseEvent(<span style="color:#66d9ef">new</span> RoutedEventArgs(ValueClampedEvent));
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>Note that since this method is static, we must get the instance of the <code>NumberBox</code> by casting the <code>sender</code>.  We also double-check the property name, though this is not strictly necessary as the method is private and only we should be invoking it from within this class.</p>
<p>Now we need to refactor our <code>Value</code> dependency property registration to use this callback:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// Identifies the NumberBox.Value XAML attached property</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">readonly</span> DependencyProperty ValueProperty = DependencyProperty.Register(<span style="color:#e6db74">&#34;Value&#34;</span>, <span style="color:#66d9ef">typeof</span>(<span style="color:#66d9ef">double</span>), <span style="color:#66d9ef">typeof</span>(NumberBox), <span style="color:#66d9ef">new</span> FrameworkPropertyMetadata(<span style="color:#ae81ff">0</span>, FrameworkPropertyMetadataOptions.AffectsRender | FrameworkPropertyMetadataOptions.BindsTwoWayByDefault, HandleValueChanged));</span></span></code></pre></div><p>By adding the callback to the dependency property, we ensure that <em>any time it changes</em>, regardless of the method the change occurs by, we will ensure the value is clamped to the specified range.</p>
<p>There are additional options for dependency property callbacks, including validation callbacks and the ability to coerce values.  See <a href="https://docs.microsoft.com/en-us/dotnet/desktop/wpf/advanced/dependency-property-callbacks-and-validation?view=netframeworkdesktop-4.8" target="_blank">the documentation</a>
 for details.</p>

            <footer class="footline">

            </footer>
          </article>

    
    
          <article class="default">
            <header class="headline">
            </header>
<h1 id="mvvm-architecture">MVVM Architecture</h1>

<p>You have probably noticed that as our use of WPF grows more sophisticated, our controls start getting large, and often filled with complex logic.  You are not alone in noticing this trend.  Microsoft architects Ken Cooper and Ted Peters also struggled with the idea, and introduced a new software architectural pattern to help alleviate it: <a href="https://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93viewmodel" target="_blank">Model-View-ViewModel</a>
.  This approach splits the user interface code into two classes: the View (the XAML + codebehind), and a ViewModel, which applies any logic needed to format the data from the model object into a form more easily bound and consumed by the view.</p>
<p>
<a href="#image-92d20342961fea684f94627c5255ea75" class="lightbox-link">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/MVVMPattern.png" alt="MVVM Pattern" style="height: auto; width: auto;" loading="lazy">
</a>
<a href="javascript:history.back();" class="lightbox" id="image-92d20342961fea684f94627c5255ea75">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/MVVMPattern.png" alt="MVVM Pattern" class="lightbox-image" loading="lazy">
</a></p>
<p>There are several benefits to this pattern:</p>
<ol>
<li>Complex logic is kept out of the View classes, allowing them to focus on the task of presentation</li>
<li>Presentation logic is kept out of the Model classes, allowing them ot focus on the task of data management and allowing them to be easily re-used for other views</li>
<li>Presentation logic is gathered in the ViewModel class, where it can be easily tested</li>
</ol>
<p>Essentially, this pattern is an application of the <a href="https://en.wikipedia.org/wiki/Single-responsibility_principle" target="_blank">Single-Responsibility Principle</a>
 (that each class in your project should bear a single responsibility).</p>

            <footer class="footline">

            </footer>
          </article>

    
    
          <article class="default">
            <header class="headline">
            </header>
<h1 id="summary">Summary</h1>

<p>In this chapter we examined how dependency properties and routed events are implemented in WPF.  The <code>DependencyObject</code>, which serves as a base class for WPF elements, provides a collection of key/value pairs, where the key is a <code>DependencyProperty</code> and the value is the object it is set to.  This collection can be accessed through the <code>GetValue()</code> and <code>SetValue()</code> methods, and is also used as a backing store for regular C# properties.  We also saw that we can register callbacks on dependency properties to execute logic when the property is changed.  The <code>UIElement</code>, which also serves as a base class for WPF elements, provided similar functionality for registering routed event listeners, whose key is <code>RoutedEvent</code>.  We saw how these routed events could &ldquo;bubble&rdquo; up the elements tree, or &ldquo;tunnel&rdquo; down it, and how marking the event <code>Handled</code> property would stop it.  Finally, we discussed the MVVM architecture, which works well with WPF applications to keep our code manageable.</p>
<p>We also created an example control using these ideas.  The full project can be found <a href="https://github.com/ksu-cis/CustomDependencyObjectExample" target="_blank">here</a>
.</p>

            <footer class="footline">

            </footer>
          </article>

          </section>
    
    
          <article class="chapter">
            <header class="headline">
            </header>


<div class="article-subheading">Chapter 60</div>
<h1 id="testing-wpf">Testing WPF</h1>

<h3 id="chapter-6">Chapter 6</h3>
<h1 id="testing-wpf">Testing WPF</h1>
<p>How do we test this stuff?</p>

            <footer class="footline">

            </footer>
          </article>

          <section>
            <h1 class="a11y-only">Subsections of Testing WPF</h1>
    
    
          <article class="default">
            <header class="headline">
            </header>
<h1 id="introduction">Introduction</h1>

<p>Now that you&rsquo;ve learned how to build a WPF application, how do you test that it is working?  For that matter, how do you test <em>any</em> GUI-based application?  In this chapter, we&rsquo;ll explore some common techniques used to test GUIs.  We&rsquo;ll also explore the MVVM architecture developed in parallel with WPF to make unit-testing WPF apps easier.</p>
<h2 id="key-terms">Key Terms</h2>
<p>Some key terms to learn in this chapter are:</p>
<ul>
<li>Test Plan</li>
<li>Model View ViewModel (MVVM) Architecture</li>
</ul>
<h2 id="key-skills">Key Skills</h2>
<p>Some key skills you need to develop in this chapter are:</p>
<ul>
<li>Writing and Using Test Plans</li>
<li>Structuring a GUI using the MVVM Approach</li>
</ul>

            <footer class="footline">

            </footer>
          </article>

    
    
          <article class="default">
            <header class="headline">
            </header>
<h1 id="testing-guis">Testing GUIs</h1>

<p>Testing a GUI-based application presents some serious challenges.  A GUI has a strong dependence on the environment it is running in - the operating system is ultimately responsible for displaying the GUI components, and this is also influenced by the hardware it runs on.  As we noted in our <a href="https://ksu-cs-textbooks.github.io/cis400/2-desktop-development/01-wpf/02-wpf-features/">discussion of WPF</a>
, screen resolution can vary dramatically.  So how our GUI appears on one machine may be completely acceptable, but unusable on another.</p>
<p>For example, I once had an installer that used a fixed-size dialog that was so large, on my laptop the &ldquo;accept&rdquo; button was off-screen below the bottom of the screen - and there was no way to click it.  This is clearly a problem, but the developer failed to recognize it because on their development machine (with nice large monitors) everything fit!  So how do we test a GUI application in this uncertain environment?</p>
<p>One possibility is to fire the application up on as many different hardware platforms as we can, and check that each one performs acceptably.  This, of course, requires a <em>lot</em> of different computers, so increasingly we see companies instead turning to <em>virtual machines</em> - a program that <em>emulates</em> the hardware of a different computer, possibly even running a different operating system!  In either case, we need a way to go through a series of checks to ensure that on each platform, our application is usable.</p>
<p>How can we ensure rigor in this process?  Ideally we&rsquo;d like to automate it, just as we do with our Unit tests&hellip; and while there have been some steps in this direction, the honest truth is we&rsquo;re just not there yet.  Currently, there is no substitute for human eyes - and human judgement - on the problem.  But humans are also notorious for loosing focus when doing the same thing repeatedly&hellip; which is exactly what this kind of testing <em>is</em>.  Thus, we develop <em>test plans</em> to help with this process.  We&rsquo;ll take a look at those next.</p>

            <footer class="footline">

            </footer>
          </article>

    
    
          <article class="default">
            <header class="headline">
            </header>
<h1 id="testing-plans">Testing Plans</h1>

<p>A testing plan is simply a step-by-step guide for a human tester to follow when testing software.  You may remember that we mentioned them back on our testing chapter&rsquo;s discussion on <a href="https://ksu-cs-textbooks.github.io/cis400/1-object-orientation/04-testing/02-manual-testing/">manual testing</a>
. Indeed, we can use a test plan to test <em>all</em> aspects of software, not just the GUI.  However, automated testing is usually cheaper and more effective in many aspects of software design, which is why we prefer it when possible.  So what does a GUI application testing plan look like?</p>
<p>It usually consists of a description of the test to perform, broken down into tasks, and populated with annotated screenshots.  Here is an example:</p>
<blockquote>
<ol>
<li>
<p>Launch the application</p>
</li>
<li>
<p>Select the &ldquo;Cowpoke Chili&rdquo; button from the &ldquo;Entrees&rdquo; menu</p>
</li>
</ol>
<p>
<a href="#image-121b977f49ca034b6295e6b0905f9c4d" class="lightbox-link">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/2.6.3.1.png" alt="The Cowpoke Chili Button" style="height: auto; width: auto;" loading="lazy">
</a>
<a href="javascript:history.back();" class="lightbox" id="image-121b977f49ca034b6295e6b0905f9c4d">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/2.6.3.1.png" alt="The Cowpoke Chili Button" class="lightbox-image" loading="lazy">
</a></p>
<p>The app should switch to a customization screen that looks like this:</p>
<p>
<a href="#image-a907f64afde5c4fcad5e4b070ba5f1ce" class="lightbox-link">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/2.6.3.2.png" alt="The Customize Cowpoke Chili Screen" style="height: auto; width: auto;" loading="lazy">
</a>
<a href="javascript:history.back();" class="lightbox" id="image-a907f64afde5c4fcad5e4b070ba5f1ce">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/2.6.3.2.png" alt="The Customize Cowpoke Chili Screen" class="lightbox-image" loading="lazy">
</a></p>
<p>There should be a checkbox for &ldquo;Cheese&rdquo;, &ldquo;Sour Cream&rdquo;, &ldquo;Green Onions&rdquo;, and &ldquo;Tortilla Strips&rdquo;</p>
<table>
  <tr>
    <th width=30>Initial</th>
    <th>Test Item</th>
  </tr>
  <tr>
    <td></td>
    <td>Cheese</td>
  </tr>
  <tr>
    <td></td>
    <td>Sour Cream</td>
  </tr>
  <tr>
    <td></td>
    <td>Green Onion</td>
  </tr>
  <tr>
    <td></td>
    <td>Tortilla Strips</td>
  </tr>
</table>
<p>A Cowpoke Chili entry should appear in the order, with a cost of $6.10</p>
<table>
  <tr>
    <th width=30>Initial</th>
    <th>Test Item</th>
  </tr>
  <tr>
    <td></td>
    <td>Chili Entry in the order</td>
  </tr>
  <tr>
    <td></td>
    <td>Price of $6.10</td>
  </tr>
</table>
<ol start="3">
<li>Uncheck the checkboxes, and a corresponding &ldquo;Hold&rdquo; detail should appear in the order, i.e. un-checking cheese should cause the order to look like:</li>
</ol>
<p>
<a href="#image-f5d23dc1d98cb6e00d6db016cb994a34" class="lightbox-link">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/2.6.3.3.png" alt="Unchecked Cheese" style="height: auto; width: auto;" loading="lazy">
</a>
<a href="javascript:history.back();" class="lightbox" id="image-f5d23dc1d98cb6e00d6db016cb994a34">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/2.6.3.3.png" alt="Unchecked Cheese" class="lightbox-image" loading="lazy">
</a></p>
<table>
  <tr>
    <th width=30>Initial</th>
    <th>Test Item</th>
  </tr>
  <tr>
    <td></td>
    <td>Cheese checkbox appears and functions</td>
  </tr>
  <tr>
    <td></td>
    <td>Sour Cream checkbox appears and functions</td>
  </tr>
  <tr>
    <td></td>
    <td>Green Onion checkbox appears and functions</td>
  </tr>
  <tr>
    <td></td>
    <td>Tortilla Strips checkbox appears and functions</td>
  </tr>
</table>
4. Click the "Menu Item Selection" Button.  This should return you to the main menu screen, with the order still containing the details about the Cowpoke Chili:
<p>
<a href="#image-c76f5feb03a377b6c83fcbc67e9c2365" class="lightbox-link">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/2.6.3.4.png" alt="Return to Main Menu" style="height: auto; width: auto;" loading="lazy">
</a>
<a href="javascript:history.back();" class="lightbox" id="image-c76f5feb03a377b6c83fcbc67e9c2365">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/2.6.3.4.png" alt="Return to Main Menu" class="lightbox-image" loading="lazy">
</a></p>
<table>
  <tr>
    <th width=30>Initial</th>
    <th>Test Item</th>
  </tr>
  <tr>
    <td></td>
    <td>Chili Entry in the order</td>
  </tr>
  <tr>
    <td></td>
    <td>Price of $6.10</td>
  </tr>
  <tr>
    <td></td>
    <td>with "Hold Cheese"</td>
  </tr>
  <tr>
    <td></td>
    <td>with "Hold Sour Cream"</td>
  </tr>
  <tr>
    <td></td>
    <td>with "Hold Green Onion"</td>
  </tr>
  <tr>
    <td></td>
    <td>with "Hold Tortilla Strips"</td>
  </tr>
</table>
<p>If you encountered problems with this test, please describe:</p>
</blockquote>
<p>The essential parts of the test plan are clear instructions of what the tester should do, and what they should see, and a mechanism for reporting issues.  Note the tables in this testing plan, where the tester can initial next to each &ldquo;passing&rdquo; test, as well as the area for describing issues at the bottom.  This reporting can either be integrated into the test document, or, it can be a separate form used with the test document (allowing the printed instructional part of the test documents to be reused).  Additionally, some test documents are created in spreadsheet software or specialized testing documentation software for ease of collection and processing.</p>
<p>Test plans like this one are then executed by people (often titled &ldquo;Tester&rdquo; or &ldquo;Software Tester&rdquo;) by opening the application, following the steps outlined in the plan, and documenting the results.  This documentation then goes back to the software developers so that they can address any issues found.</p>

  
  
<div class="box notices cstyle tip">
  <div class="box-label"><i class="fa-fw fas fa-lightbulb"></i> Tip</div>
  <div class="box-content">

<p>Taking screen shots of your running program is an easy way to quickly generate visuals for your testing documentation.</p>
<p>In Windows, <code>CTRL + SHIFT + ALT + PRINT SCREEN</code> takes a screen shot and copies it to the clipboard (from which you can paste it into a text editor of your choice).</p>
<p>On a Mac, you can take a screenshot with <code>COMMAND + SHIFT + 4</code>.  This launches a utility that changes the mouse cursor and allows you to drag a rectangle across a section of the screen.  When you release the mouse, a capture will be taken of the area, and saved as a picture to the desktop.</p>
</div>
</div>

            <footer class="footline">

            </footer>
          </article>

    
    
          <article class="default">
            <header class="headline">
            </header>
<h1 id="mvvm-architecture">MVVM Architecture</h1>

<p>Compared to automated tests, using a testing plan with human testers is both slow and expensive.  It should not be surprising then that Microsoft developers sought ways to shift as much of the testing burden for WPF projects to automated tests.  Their solution was to develop a new architectural approach known as <a href="https://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93viewmodel" target="_blank">ModelView-View-Model</a>
.</p>
<p>
<a href="#image-83f7115073e6c551cc737536f2318d15" class="lightbox-link">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/MVVMPattern.png" alt="MVVM Pattern" style="height: auto; width: auto;" loading="lazy">
</a>
<a href="javascript:history.back();" class="lightbox" id="image-83f7115073e6c551cc737536f2318d15">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/MVVMPattern.png" alt="MVVM Pattern" class="lightbox-image" loading="lazy">
</a></p>
<p>This approach expands upon the usual Model-View relationship in a GUI.  A <em>Model</em> class is a class that represents some data, i.e. a <code>Student</code>, and the View is the GUI exposing that object&rsquo;s data, i.e. a WPF <code>&lt;StudentControl&gt;</code>. Thus, we might have our <code>Student</code> class:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Student</span> : INotifyPropertyChanged
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt;Notifies when a property changes&lt;/summary&gt;        </span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">event</span> PropertyChangedEventHandler? PropertyChanged;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt;The student&#39;s course-taking history&lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> List&lt;CourseRecord&gt; _courseRecords = <span style="color:#66d9ef">new</span>();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt;The student&#39;s first name&lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">string</span> FirstName { <span style="color:#66d9ef">get</span>; <span style="color:#66d9ef">init</span>; }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt;The student&#39;s last name&lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">string</span> LastName { <span style="color:#66d9ef">get</span>; <span style="color:#66d9ef">init</span>; }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt;The student&#39;s course records&lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;remarks&gt;We return a copy of the course records to prevent modifications&lt;/remarks&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> IEnumerable&lt;CourseRecord&gt; CourseRecords =&gt; _courseRecords.ToArray();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt;The student&#39;s GPA&lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">double</span> GPA
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">get</span>
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">var</span> points = <span style="color:#ae81ff">0.0</span>;
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">var</span> hours = <span style="color:#ae81ff">0.0</span>;
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">foreach</span> (<span style="color:#66d9ef">var</span> cr <span style="color:#66d9ef">in</span> CourseRecords)
</span></span><span style="display:flex;"><span>            {
</span></span><span style="display:flex;"><span>                points += (<span style="color:#66d9ef">double</span>)cr.Grade * cr.CreditHours;
</span></span><span style="display:flex;"><span>                hours += cr.CreditHours;
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">return</span> points / hours;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// Adds &lt;paramref name=&#34;cr&#34;/&gt; to the students&#39; course history</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;param name=&#34;cr&#34;&gt;The course record to add&lt;/param&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> AddCourseRecord(CourseRecord cr)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        _courseRecords.Add(cr);
</span></span><span style="display:flex;"><span>        PropertyChanged?.Invoke(<span style="color:#66d9ef">this</span>, <span style="color:#66d9ef">new</span> PropertyChangedEventArgs(nameof(CourseRecords))); 
</span></span><span style="display:flex;"><span>        PropertyChanged?.Invoke(<span style="color:#66d9ef">this</span>, <span style="color:#66d9ef">new</span> PropertyChangedEventArgs(nameof(GPA)));
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// Constructs the student object</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;param name=&#34;firstName&#34;&gt;The student&#39;s first name&lt;/param&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;param name=&#34;lastName&#34;&gt;The student&#39;s last name&lt;/param&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> Student(<span style="color:#66d9ef">string</span> firstName, <span style="color:#66d9ef">string</span> lastName)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        FirstName = firstName;
</span></span><span style="display:flex;"><span>        LastName = lastName;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>And our <code>&lt;ComputerScienceStudentControl&gt;</code>:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#f92672">&lt;UserControl</span> <span style="color:#a6e22e">x:Class=</span><span style="color:#e6db74">&#34;MvvmExample.ComputerScienceStudentControl&#34;</span>
</span></span><span style="display:flex;"><span>             <span style="color:#a6e22e">xmlns=</span><span style="color:#e6db74">&#34;http://schemas.microsoft.com/winfx/2006/xaml/presentation&#34;</span>
</span></span><span style="display:flex;"><span>             <span style="color:#a6e22e">xmlns:x=</span><span style="color:#e6db74">&#34;http://schemas.microsoft.com/winfx/2006/xaml&#34;</span>
</span></span><span style="display:flex;"><span>             <span style="color:#a6e22e">xmlns:mc=</span><span style="color:#e6db74">&#34;http://schemas.openxmlformats.org/markup-compatibility/2006&#34;</span> 
</span></span><span style="display:flex;"><span>             <span style="color:#a6e22e">xmlns:d=</span><span style="color:#e6db74">&#34;http://schemas.microsoft.com/expression/blend/2008&#34;</span> 
</span></span><span style="display:flex;"><span>             <span style="color:#a6e22e">xmlns:local=</span><span style="color:#e6db74">&#34;clr-namespace:MvvmExample&#34;</span>
</span></span><span style="display:flex;"><span>             <span style="color:#a6e22e">mc:Ignorable=</span><span style="color:#e6db74">&#34;d&#34;</span> 
</span></span><span style="display:flex;"><span>             <span style="color:#a6e22e">d:DesignHeight=</span><span style="color:#e6db74">&#34;450&#34;</span> <span style="color:#a6e22e">d:DesignWidth=</span><span style="color:#e6db74">&#34;300&#34;</span><span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;StackPanel</span> <span style="color:#a6e22e">Orientation=</span><span style="color:#e6db74">&#34;Vertical&#34;</span><span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;StackPanel</span> <span style="color:#a6e22e">Orientation=</span><span style="color:#e6db74">&#34;Horizontal&#34;</span><span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&lt;TextBlock</span> <span style="color:#a6e22e">FontWeight=</span><span style="color:#e6db74">&#34;Bold&#34;</span> <span style="color:#a6e22e">Margin=</span><span style="color:#e6db74">&#34;0,0,10,0&#34;</span><span style="color:#f92672">&gt;</span>Name<span style="color:#f92672">&lt;/TextBlock&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&lt;TextBlock</span> <span style="color:#a6e22e">Text=</span><span style="color:#e6db74">&#34;{Binding Path=FirstName}&#34;</span><span style="color:#f92672">/&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&lt;TextBlock</span> <span style="color:#a6e22e">Text=</span><span style="color:#e6db74">&#34;{Binding Path=LastName}&#34;</span><span style="color:#f92672">/&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;/StackPanel&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;StackPanel</span> <span style="color:#a6e22e">Orientation=</span><span style="color:#e6db74">&#34;Horizontal&#34;</span><span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&lt;TextBlock</span> <span style="color:#a6e22e">Margin=</span><span style="color:#e6db74">&#34;0,0,10,0&#34;</span> <span style="color:#a6e22e">FontWeight=</span><span style="color:#e6db74">&#34;Bold&#34;</span><span style="color:#f92672">&gt;</span>GPA<span style="color:#f92672">&lt;/TextBlock&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&lt;TextBlock</span> <span style="color:#a6e22e">Text=</span><span style="color:#e6db74">&#34;{Binding Path=GPA, StringFormat={}{0:N2}}&#34;</span><span style="color:#f92672">/&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;/StackPanel&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;TextBlock</span> <span style="color:#a6e22e">FontWeight=</span><span style="color:#e6db74">&#34;Bold&#34;</span><span style="color:#f92672">&gt;</span>Course History<span style="color:#f92672">&lt;/TextBlock&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;ListView</span> <span style="color:#a6e22e">ItemsSource=</span><span style="color:#e6db74">&#34;{Binding Path=CourseRecords}&#34;</span> <span style="color:#a6e22e">Margin=</span><span style="color:#e6db74">&#34;2,0,2,0&#34;</span><span style="color:#f92672">/&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;/StackPanel&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;/UserControl&gt;</span></span></span></code></pre></div><p>Now, this control is simply a thin layer using data binding to connect it to the model class.  But what if we needed to add some complex logic?  Let&rsquo;s say we want to display the student&rsquo;s GPA calculated <em>for only their computer science courses</em>.  We could put this in the <code>Student</code> class, but if every department in the university added their own custom logic and properties to that class, it would get very bloated very quickly.  Instead, we might create a <code>&lt;ComputerScienceStudentControl&gt;</code> that would be used for this purpose, and compute the Computer Science GPA in its codebehind, but now we have complex logic that we&rsquo;d prefer to test using automated tests.</p>
<p>Instead, we could create <em>two</em> new classes, our <code>&lt;ComputerScienceStudentControl&gt;</code> (a new View), and a <code>ComputerScienceStudentViewModel</code> (a ViewModel), as well as our existing <code>Student</code> (the Model).</p>
<p>Our <code>ViewModel</code> can now incorporate the custom logic for calculating a students&rsquo; computer science GPA, as well holding a reference to the <code>Student</code> class it is computed from:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">ComputerScienceStudentViewModel</span> : INotifyPropertyChanged
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// The PropertyChanged event reports when properties change</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">event</span> PropertyChangedEventHandler? PropertyChanged;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// The student this model represents</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;remarks&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// We require the student to be set in the constructor, and use </span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// the init accessor to prevent changing out the student object</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;/remarks&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> Student Student { <span style="color:#66d9ef">get</span>; <span style="color:#66d9ef">init</span>; }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// THe first name of the student</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">string</span> FirstName =&gt; Student.FirstName;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// The last name of the student</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">string</span> LastName =&gt; Student.LastName;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// The course history of the student</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> IEnumerable&lt;CourseRecord&gt; CourseRecords =&gt; Student.CourseRecords;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// The university GPA of the student</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">double</span> GPA =&gt; Student.GPA;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// The student&#39;s Computer Science GPA</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">double</span> ComputerScienceGPA
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">get</span>
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">var</span> points = <span style="color:#ae81ff">0.0</span>;
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">var</span> hours = <span style="color:#ae81ff">0.0</span>;
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">foreach</span> (<span style="color:#66d9ef">var</span> cr <span style="color:#66d9ef">in</span> Student.CourseRecords)
</span></span><span style="display:flex;"><span>            {
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">if</span> (cr.CourseName.Contains(<span style="color:#e6db74">&#34;CIS&#34;</span>))
</span></span><span style="display:flex;"><span>                {
</span></span><span style="display:flex;"><span>                    points += (<span style="color:#66d9ef">double</span>)cr.Grade * cr.CreditHours;
</span></span><span style="display:flex;"><span>                    hours += cr.CreditHours;
</span></span><span style="display:flex;"><span>                }
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">return</span> points / hours;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// An event handler for passing forward PropertyChanged events from the student object</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;param name=&#34;sender&#34;&gt;The student object&lt;/param&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;param name=&#34;e&#34;&gt;The eventargs describing the property that is changing&lt;/param&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">void</span> HandleStudentPropertyChanged(<span style="color:#66d9ef">object</span> sender, PropertyChangedEventArgs e)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">switch</span> (e.PropertyName)
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">// Both first and last names map to properties of the same name,</span>
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">// so we can reuse the PropertyChangedEventARgs</span>
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">case</span> nameof(FirstName):
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">case</span> nameof(LastName):
</span></span><span style="display:flex;"><span>                PropertyChanged?.Invoke(<span style="color:#66d9ef">this</span>, e);
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">break</span>;
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">// The Student.GPA maps to GPA, and changes to it may</span>
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">// also signal a change to the CIS GPA</span>
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">case</span> nameof(Student.GPA):
</span></span><span style="display:flex;"><span>                PropertyChanged?.Invoke(<span style="color:#66d9ef">this</span>, e);
</span></span><span style="display:flex;"><span>                PropertyChanged?.Invoke(<span style="color:#66d9ef">this</span>, <span style="color:#66d9ef">new</span> PropertyChangedEventArgs(nameof(ComputerScienceGPA)));
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">break</span>;
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">// We don&#39;t care about any other properites of the Student, as they</span>
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">// are not present in this ViewModel, so ignore them</span>
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">default</span>:
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">break</span>;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// Constructs a new ComputerScienceStudentViewModel, which wraps around the</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;paramref name=&#34;student&#34;/&gt; object and provides some additional functionality.</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;param name=&#34;student&#34;&gt;The student who is this view model&lt;/param&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> ComputerScienceStudentViewModel(Student student)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        Student = student;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>And a control to display it:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#f92672">&lt;UserControl</span> <span style="color:#a6e22e">x:Class=</span><span style="color:#e6db74">&#34;MvvmExample.StudentControl&#34;</span>
</span></span><span style="display:flex;"><span>             <span style="color:#a6e22e">xmlns=</span><span style="color:#e6db74">&#34;http://schemas.microsoft.com/winfx/2006/xaml/presentation&#34;</span>
</span></span><span style="display:flex;"><span>             <span style="color:#a6e22e">xmlns:x=</span><span style="color:#e6db74">&#34;http://schemas.microsoft.com/winfx/2006/xaml&#34;</span>
</span></span><span style="display:flex;"><span>             <span style="color:#a6e22e">xmlns:mc=</span><span style="color:#e6db74">&#34;http://schemas.openxmlformats.org/markup-compatibility/2006&#34;</span> 
</span></span><span style="display:flex;"><span>             <span style="color:#a6e22e">xmlns:d=</span><span style="color:#e6db74">&#34;http://schemas.microsoft.com/expression/blend/2008&#34;</span> 
</span></span><span style="display:flex;"><span>             <span style="color:#a6e22e">xmlns:local=</span><span style="color:#e6db74">&#34;clr-namespace:MvvmExample&#34;</span>
</span></span><span style="display:flex;"><span>             <span style="color:#a6e22e">mc:Ignorable=</span><span style="color:#e6db74">&#34;d&#34;</span> 
</span></span><span style="display:flex;"><span>             <span style="color:#a6e22e">d:DesignHeight=</span><span style="color:#e6db74">&#34;450&#34;</span> <span style="color:#a6e22e">d:DesignWidth=</span><span style="color:#e6db74">&#34;300&#34;</span><span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;StackPanel</span> <span style="color:#a6e22e">Orientation=</span><span style="color:#e6db74">&#34;Vertical&#34;</span><span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;StackPanel</span> <span style="color:#a6e22e">Orientation=</span><span style="color:#e6db74">&#34;Horizontal&#34;</span><span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&lt;TextBlock</span> <span style="color:#a6e22e">FontWeight=</span><span style="color:#e6db74">&#34;Bold&#34;</span> <span style="color:#a6e22e">Margin=</span><span style="color:#e6db74">&#34;0,0,10,0&#34;</span><span style="color:#f92672">&gt;</span>Name<span style="color:#f92672">&lt;/TextBlock&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&lt;TextBlock</span> <span style="color:#a6e22e">Text=</span><span style="color:#e6db74">&#34;{Binding Path=FirstName}&#34;</span><span style="color:#f92672">/&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&lt;TextBlock</span> <span style="color:#a6e22e">Text=</span><span style="color:#e6db74">&#34;{Binding Path=LastName}&#34;</span><span style="color:#f92672">/&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;/StackPanel&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;StackPanel</span> <span style="color:#a6e22e">Orientation=</span><span style="color:#e6db74">&#34;Horizontal&#34;</span><span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&lt;TextBlock</span> <span style="color:#a6e22e">Margin=</span><span style="color:#e6db74">&#34;0,0,10,0&#34;</span> <span style="color:#a6e22e">FontWeight=</span><span style="color:#e6db74">&#34;Bold&#34;</span><span style="color:#f92672">&gt;</span>GPA<span style="color:#f92672">&lt;/TextBlock&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&lt;TextBlock</span> <span style="color:#a6e22e">Text=</span><span style="color:#e6db74">&#34;{Binding Path=GPA, StringFormat={}{0:N2}}&#34;</span><span style="color:#f92672">/&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;/StackPanel&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;TextBlock</span> <span style="color:#a6e22e">FontWeight=</span><span style="color:#e6db74">&#34;Bold&#34;</span><span style="color:#f92672">&gt;</span>Course History<span style="color:#f92672">&lt;/TextBlock&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;ListView</span> <span style="color:#a6e22e">ItemsSource=</span><span style="color:#e6db74">&#34;{Binding Path=CourseRecords}&#34;</span> <span style="color:#a6e22e">Margin=</span><span style="color:#e6db74">&#34;2,0,2,0&#34;</span><span style="color:#f92672">/&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;/StackPanel&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;/UserControl&gt;</span></span></span></code></pre></div><p>The <code>ComputerScienceViewModel</code> can then be used interchangeably with the <code>Student</code> model class, as both have the same properties (though the view model has one additional one). We could then either tweak the student control or create a new one that binds to this new property, i.e.:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#f92672">&lt;StackPanel</span> <span style="color:#a6e22e">Orientation=</span><span style="color:#e6db74">&#34;Horizontal&#34;</span><span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;TextBlock</span> <span style="color:#a6e22e">Margin=</span><span style="color:#e6db74">&#34;0,0,10,0&#34;</span> <span style="color:#a6e22e">FontWeight=</span><span style="color:#e6db74">&#34;Bold&#34;</span><span style="color:#f92672">&gt;</span>Computer Science GPA<span style="color:#f92672">&lt;/TextBlock&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;TextBlock</span> <span style="color:#a6e22e">Text=</span><span style="color:#e6db74">&#34;{Binding Path=ComputerScienceGPA, StringFormat={}{0:N2}}&#34;</span><span style="color:#f92672">/&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;/StackPanel&gt;</span></span></span></code></pre></div><p>This represents just one of the ways a ViewModel can be used.  A View Model can also be leveraged to combine multiple data classes into a single object that can serve as a <code>DataContext</code>.  One can also be utilized to create a wrapper object around a web-based API or other data source to provide the ability to data bind that source to GUI controls.</p>
<p>Finally, because a ViewModel is simply another data class, it can be unit tested just like any other. This helps make sure that complex logic which we want thoroughly tested is not embedded in a GUI component, and simplifies our testing strategies.</p>

  
  
<div class="box notices cstyle info">
  <div class="box-label"><i class="fa-fw fas fa-info-circle"></i> Info</div>
  <div class="box-content">

<p>We&rsquo;ve really only scratched the surface of the MVVM architecture as it is used in WPF applications. In addition to providing properties to bind to, a WPF MVVM can also define <a href="https://learn.microsoft.com/en-us/archive/msdn-magazine/2013/may/mvvm-commands-relaycommands-and-eventtocommand" target="_blank">commands</a>
 that decouple event handlers from their effects.  When using commands, the GUI event handler simply signals the command, which is consumed by a ViewModel to perform the requested action.</p>
<p>Commands are outside the scope of this course, but you can refer to the Microsoft documentation and books from the O&rsquo;Riley Learning Library if you would like to explore this concept in more depth.</p>
</div>
</div>

            <footer class="footline">

            </footer>
          </article>

    
    
          <article class="default">
            <header class="headline">
            </header>
<h1 id="summary">Summary</h1>

<p>In this chapter we looked at some of the challenges of testing GUIs, and saw why most GUI applications are still manually tested.  We also explored the process of writing a <em>test plan</em>, a step-by-step process for a human tester to follow to provide rigor in the testing process.</p>
<p>We also explored the Model View ViewModel architecture in more depth, especially how it can allow us to move complex logic out of our GUI into a simple class that can be unit tested.</p>

            <footer class="footline">

            </footer>
          </article>

          </section>
          </section>
    
    
          <article class="chapter">
            <header class="headline">
            </header>


<div class="article-subheading">Chapter III</div>
<h1 id="web-development">Web Development</h1>

<p>Taking Objects Online</p>

            <footer class="footline">

            </footer>
          </article>

          <section>
            <h1 class="a11y-only">Subsections of Web Development</h1>
    
    
          <article class="chapter">
            <header class="headline">
            </header>


<div class="article-subheading">Chapter 1</div>
<h1 id="core-web-technologies">Core Web Technologies</h1>

<p>The Big Three plus HTTP</p>

            <footer class="footline">

            </footer>
          </article>

          <section>
            <h1 class="a11y-only">Subsections of Core Web Technologies</h1>
    
    
          <article class="default">
            <header class="headline">
            </header>
<h1 id="introduction">Introduction</h1>

<p>The World-Wide-Web is a tool that you likely use every day - and it&rsquo;s being used to deliver you this textbook.  There are several core technologies that enable the web to work, and these are the focus of this chapter.</p>
<h2 id="key-terms">Key Terms</h2>
<p>Some key terms to learn in this chapter are:</p>
<ul>
<li>World-Wide-Web</li>
<li>Hyper-Text Markup Language (HTML)</li>
<li>Cascading Style Sheets (CSS)</li>
<li>JavaScript (JS)</li>
<li>Hyper-Text Transfer Protocol (HTTP)</li>
</ul>

            <footer class="footline">

            </footer>
          </article>

    
    
          <article class="default">
            <header class="headline">
            </header>
<h1 id="core-web-technologies">Core Web Technologies</h1>

<p>The World-Wide Web was the brainchild of <a href="https://en.wikipedia.org/wiki/Tim_Berners-Lee" target="_blank">Sir Tim Berners-Lee</a>
.  It was conceived as a way to share information across the Internet; in Sir Berners-Lee&rsquo;s own words describing the idea as he first conceived it:</p>
<blockquote>
<p>This project is experimental and of course comes without any warranty whatsoever. However, <strong>it could start a revolution in information access.</strong></p>
</blockquote>
<p>Clearly that revolution has come to pass.  The web has become part of our daily lives.</p>
<p>There were three key technologies that Sir Tim Berners-Lee proposed and developed.  These remain the foundations upon which the web runs even today.  Two are client-side, and determine how web pages are interpreted by browsers.  These are:</p>
<ul>
<li>Hyper-Text Markup Language</li>
<li>Cascading Style Sheets</li>
</ul>
<p>They are joined with a third key client-side technology, which began as a scripting language developed by <a href="https://en.wikipedia.org/wiki/Brendan_Eich" target="_blank">Brendan Eich</a>
 to add interactivity to web pages in the Netscape Navigator.</p>
<ul>
<li>JavaScript</li>
</ul>
<p>You have already studied each of these core client-side web technologies in CIS 115, and used them to create your own personal web pages.</p>
<p>The other foundational web technology created by Sir Tim Berners-Lee is the communication protocol used to request and transmit web pages and other files across the Internet:</p>
<ul>
<li>Hyper-Text Transfer Protocol</li>
</ul>
<p>We will review each of these technologies briefly, before we see how ASP.NET builds upon them to deliver web applications.</p>

            <footer class="footline">

            </footer>
          </article>

    
    
          <article class="default">
            <header class="headline">
            </header>
<h1 id="hyper-text-markup-language">Hyper-Text Markup Language</h1>

<p>Hyper-Text Markup Language (HTML), is one of the three core technologies of the world-wide-web, along with Cascading Style Sheets (CSS) and Javascript (JS).  Each of these technologies has a specific role to play in delivering a website.  HTML defines the <em>structure</em> and <em>contents</em> of the web page.  It is a markup language, similar to XML and the XAML you have been working with (indeed, HTML is based on the SGML (Standardized General Markup Language) standard, which XML is also based on, and XAML is an extension of XML).</p>
<h2 id="html-elements">HTML Elements</h2>
<p>Thus, it uses the same kind of element structure, consisting of tags.  For example, a button in HTML looks like this:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>&lt;<span style="color:#f92672">button</span> <span style="color:#a6e22e">onclick</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;doSomething&#34;</span>&gt;
</span></span><span style="display:flex;"><span>    Do Something
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#f92672">button</span>&gt;</span></span></code></pre></div><p>You likely notice how similar this definition is to buttons in XAML.  As with XAML elements, HTML elements have and opening and closing tag, and can have additional HTML content nested inside these tags.  HTML tags can also be self-closing, as is the case with the line break tag:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>&lt;<span style="color:#f92672">br</span>/&gt;</span></span></code></pre></div><p>Let&rsquo;s explore the parts of an HTML element in more detail.</p>
<p>
<a href="#image-823166b3b8080f11bde9ed97ec2686fb" class="lightbox-link">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/html-element-structure.svg" alt="HTML Element Structure" style="height: auto; width: auto;" loading="lazy">
</a>
<a href="javascript:history.back();" class="lightbox" id="image-823166b3b8080f11bde9ed97ec2686fb">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/html-element-structure.svg" alt="HTML Element Structure" class="lightbox-image" loading="lazy">
</a></p>
<h3 id="the-start-tag">The Start Tag</h3>
<p>The start tag is enclosed in angle brackets (<code>&lt;</code> and <code>&gt;</code>).  The angle brackets differentiate the text inside them as being HTML elements, rather than text.  This guides the browser to interpret them correctly.</p>

  
  
<div class="box notices cstyle note">
  <div class="box-label"><i class="fa-fw fas fa-exclamation-circle"></i> Note</div>
  <div class="box-content">

<p>Because angle brackets are interpreted as defining HTML tags, you cannot use those characters to represent greater than and less than signs.  Instead, HTML defines escape character sequences to represent these and other special characters.  Greater than is <code>&amp;gt;</code>, less than is <code>&amp;lt;</code>.  A full list can be found on <a href="https://developer.mozilla.org/en-US/docs/Glossary/Entity" target="_blank">mdn</a>
.</p>
</div>
</div>
<h4 id="the-tag-name">The Tag Name</h4>
<p>Immediately after the <code>&lt;</code> is the tag name.  In HTML, tag names like <code>button</code> should be expressed in <strong>lowercase letters</strong> (unlike XAML where they are expressed in Pascal case - each word starting with a capital letter).  This is a convention (as most browsers will happily accept any mixture of uppercase and lowercase letters), but is very important when using popular modern web technologies like Razor and React, as these use Pascal case tag names to differentiate between HTML and components they inject into the web page.</p>
<h4 id="the-attributes">The Attributes</h4>
<p>After the tag name come optional attributes, which are key-value pairs expressed as <code>key=&quot;value&quot;</code>.  Attributes should be separated from each other and the tag name by whitespace characters (any whitespace will do, but traditionally spaces are used).  As with XAML, different elements have different attributes available - and you can read up on what these are by visiting the MDN article about the specific element.</p>
<p>However, several attributes bear special mention:</p>
<ul>
<li>
<p>The <code>id</code> attribute is used to assign a unique id to an element, i.e. <code>&lt;button id=&quot;that-one-button&quot;&gt;</code>.  The element can thereafter be referenced by that id in both CSS and JavaScript code.  <em>An element ID must be unique in an HTML page, or unexpected behavior may result!</em></p>
</li>
<li>
<p>The <code>class</code> attribute is also used to assign an identifier used by CSS and JavaScript.  However, classes don&rsquo;t need to be unique; many elements can have the same class.  Further, each element can be assigned <em>multiple</em> classes, as a space-delimited string, i.e. <code>&lt;button class=&quot;large warning&quot;&gt;</code> assigns both the classes &ldquo;large&rdquo; and &ldquo;warning&rdquo; to the button.</p>
</li>
</ul>
<p>Also, some web technologies (like Angular) introduce new attributes specific to their framework, taking advantage of the fact that a browser will ignore any attributes it does not recognize.</p>
<h3 id="the-tag-content">The Tag Content</h3>
<p>The content nested inside the tag can be plain text, or another HTML element (or collection of elements).  Unlike XAML elements, which usually can have only one child, HTML elements can have multiple children.  Indentation should be used to keep your code legible by indenting any nested content, i.e.:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>&lt;<span style="color:#f92672">div</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">h1</span>&gt;A Title&lt;/<span style="color:#f92672">h1</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">p</span>&gt;This is a paragraph of text that is nested inside the div&lt;/<span style="color:#f92672">p</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">p</span>&gt;And this is another paragraph of text&lt;/<span style="color:#f92672">p</span>&gt;
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#f92672">div</span>&gt;</span></span></code></pre></div><h3 id="the-end-tag">The End Tag</h3>
<p>The end tag is also enclosed in angle brackets (<code>&lt;</code> and <code>&gt;</code>).  Immediately after the <code>&lt;</code> is a forward slash <code>/</code>, and then the tag name.  You do not include attributes in a end tag.</p>
<p>If the element has no content, the end tag can be combined with the start tag in a <em>self-closing tag</em>, i.e. the <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input" target="_blank">input</a>
 tag is typically written as self-closing:</p>
<p><code>&lt;input id=&quot;first-name&quot; type=&quot;text&quot; placeholder=&quot;Your first name&quot;/&gt;</code></p>
<h2 id="text-in-html">Text in HTML</h2>
<p>Text in HTML works a bit differently than you might expect.  Most notably, all white space is converted into a single space.  Thus, the lines:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>&lt;<span style="color:#f92672">blockquote</span>&gt;
</span></span><span style="display:flex;"><span>    If you can keep your head when all about you   
</span></span><span style="display:flex;"><span>        Are losing theirs and blaming it on you,   
</span></span><span style="display:flex;"><span>    If you can trust yourself when all men doubt you,
</span></span><span style="display:flex;"><span>        But make allowance for their doubting too;   
</span></span><span style="display:flex;"><span>    If you can wait and not be tired by waiting,
</span></span><span style="display:flex;"><span>        Or being lied about, donât deal in lies,
</span></span><span style="display:flex;"><span>    Or being hated, donât give way to hating,
</span></span><span style="display:flex;"><span>        And yet donât look too good, nor talk too wise:
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">i</span>&gt;-Rudyard Kipling, excerpt from &#34;If&#34;&lt;/<span style="color:#f92672">i</span>&gt;
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#f92672">blockquote</span>&gt;</span></span></code></pre></div><p>Would be rendered:</p>
<blockquote>
    If you can keep your head when all about you   
        Are losing theirs and blaming it on you,   
    If you can trust yourself when all men doubt you,
        But make allowance for their doubting too;   
    If you can wait and not be tired by waiting,
        Or being lied about, donât deal in lies,
    Or being hated, donât give way to hating,
        And yet donât look too good, nor talk too wise:
    <i>-Rudyard Kipling, excerpt from "If"</i>
</blockquote>
<p>If, for some reason you need to maintain formatting of the included text, you can use the <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/pre" target="_blank">&lt;pre&gt;</a>
 element (which indicates the text is preformatted):</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>&lt;<span style="color:#f92672">blockquote</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">pre</span>&gt;
</span></span><span style="display:flex;"><span>If you can keep your head when all about you   
</span></span><span style="display:flex;"><span>    Are losing theirs and blaming it on you,   
</span></span><span style="display:flex;"><span>If you can trust yourself when all men doubt you,
</span></span><span style="display:flex;"><span>    But make allowance for their doubting too;   
</span></span><span style="display:flex;"><span>If you can wait and not be tired by waiting,
</span></span><span style="display:flex;"><span>    Or being lied about, donât deal in lies,
</span></span><span style="display:flex;"><span>Or being hated, donât give way to hating,
</span></span><span style="display:flex;"><span>    And yet donât look too good, nor talk too wise:
</span></span><span style="display:flex;"><span>    &lt;/<span style="color:#f92672">pre</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">i</span>&gt;-Rudyard Kipling, excerpt from &#34;If&#34;&lt;/<span style="color:#f92672">i</span>&gt;
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#f92672">blockquote</span>&gt;</span></span></code></pre></div><p>Which would be rendered:</p>
<article>
    <pre style="background: none; color:darkgray">
If you can keep your head when all about you   
    Are losing theirs and blaming it on you,   
If you can trust yourself when all men doubt you,
    But make allowance for their doubting too;   
If you can wait and not be tired by waiting,
    Or being lied about, donât deal in lies,
Or being hated, donât give way to hating,
    And yet donât look too good, nor talk too wise:
    </pre>
    <blockquote>-Rudyard Kipling, excerpt from "If"</blockquote>
</article>
<p>Note that the &lt;pre&gt; preserves <em>all</em> formatting, so it is necessary <em>not to indent</em> its contents.</p>
<p>Alternatively, you can denote line breaks with <code>&lt;br/&gt;</code>, and non-breaking spaces with <code>&amp;nbsp;</code>:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>&lt;<span style="color:#f92672">blockquote</span>&gt;        
</span></span><span style="display:flex;"><span>    If you can keep your head when all about you&lt;<span style="color:#f92672">br</span>/&gt;
</span></span><span style="display:flex;"><span>    &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;Are losing theirs and blaming it on you,&lt;<span style="color:#f92672">br</span>/&gt;   
</span></span><span style="display:flex;"><span>    If you can trust yourself when all men doubt you,&lt;<span style="color:#f92672">br</span>/&gt;
</span></span><span style="display:flex;"><span>    &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;But make allowance for their doubting too;&lt;<span style="color:#f92672">br</span>/&gt;
</span></span><span style="display:flex;"><span>    If you can wait and not be tired by waiting,&lt;<span style="color:#f92672">br</span>/&gt;
</span></span><span style="display:flex;"><span>    &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;Or being lied about, donât deal in lies,&lt;<span style="color:#f92672">br</span>/&gt;
</span></span><span style="display:flex;"><span>    Or being hated, donât give way to hating,&lt;<span style="color:#f92672">br</span>/&gt;
</span></span><span style="display:flex;"><span>    &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;And yet donât look too good, nor talk too wise:&lt;<span style="color:#f92672">br</span>/&gt;    
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">i</span>&gt;-Rudyard Kipling, excerpt from &#34;If&#34;&lt;/<span style="color:#f92672">i</span>&gt;
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#f92672">blockquote</span>&gt;</span></span></code></pre></div><p>Which renders:</p>
<blockquote>        
    If you can keep your head when all about you<br/>
    &nbsp;&nbsp;&nbsp;&nbsp;Are losing theirs and blaming it on you,<br/>   
    If you can trust yourself when all men doubt you,<br/>
    &nbsp;&nbsp;&nbsp;&nbsp;But make allowance for their doubting too;<br/>
    If you can wait and not be tired by waiting,<br/>
    &nbsp;&nbsp;&nbsp;&nbsp;Or being lied about, donât deal in lies,<br/>
    Or being hated, donât give way to hating,<br/>
    &nbsp;&nbsp;&nbsp;&nbsp;And yet donât look too good, nor talk too wise:<br/><br/>    
    <i>-Rudyard Kipling, excerpt from "If"</i>
</blockquote>
<p>Additionally, as a program you may want to use the the <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/code" target="_blank">code</a>
 element in conjunction with the <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/pre" target="_blank">pre</a>
 element to display preformatted code snippets in your pages.</p>
<h2 id="html-comments">HTML Comments</h2>
<p>HTML comments are identical to XAML comments (as both inherited from SGML).  Comments start with the sequence <code>&lt;!--</code> and end with the sequence <code>--&gt;</code>, i.e.:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span><span style="color:#75715e">&lt;!-- This is an example of a HTML comment --&gt;</span></span></span></code></pre></div><h2 id="basic-page-structure">Basic Page Structure</h2>
<p>HTML5.0 (the current HTML standard) pages have an expected structure that you should follow.  This is:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span><span style="color:#75715e">&lt;!DOCTYPE html&gt;</span>
</span></span><span style="display:flex;"><span>&lt;<span style="color:#f92672">html</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">head</span>&gt;
</span></span><span style="display:flex;"><span>        &lt;<span style="color:#f92672">title</span>&gt;<span style="color:#75715e">&lt;!-- The title of your page goes here --&gt;</span>&lt;/<span style="color:#f92672">title</span>&gt;
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">&lt;!-- other metadata about your page goes here --&gt;</span>
</span></span><span style="display:flex;"><span>    &lt;/<span style="color:#f92672">head</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">body</span>&gt;
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">&lt;!-- The contents of your page go here --&gt;</span>
</span></span><span style="display:flex;"><span>    &lt;/<span style="color:#f92672">body</span>&gt;
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#f92672">html</span>&gt;</span></span></code></pre></div><h2 id="html-elements-1">HTML Elements</h2>
<p>Rather than include an exhaustive list of HTML elements, I will direct you to the list provided by <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element" target="_blank">MDN</a>
.  However, it is useful to recognize that elements can serve different purposes:</p>
<ul>
<li>
<p>Some organize the page into sections like the header and footer - MDN calls these the <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element#Content_sectioning" target="_blank">Content Section elements</a>
</p>
</li>
<li>
<p>Some define the meaning, structure or style of text - MDN calls these the <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element#Inline_text_semantics" target="_blank">Inline text semantics elements</a>
</p>
</li>
<li>
<p>Some present images, audio, video, or other embedded multimedia content - MDN calls these the <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element#Image_and_multimedia" target="_blank">Image and multimedia elements</a>
 and <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element#Embedded_content" target="_blank">Embedded content elements</a>
</p>
</li>
<li>
<p>Tables are composed of <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Table_content" target="_blank">Table content elements</a>
</p>
</li>
<li>
<p>User input is collected with <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element#Forms" target="_blank">Forms</a>
</p>
</li>
</ul>
<p>There are more tags than this, but these are the most commonly employed, and the ones you should be familiar with.</p>
<h2 id="learning-more">Learning More</h2>
<p>The <a href="https://developer.mozilla.org/en-US/docs/Web/HTML" target="_blank">MDN HTML Docs</a>
 are recommended reading for learning more about HTML.</p>

            <footer class="footline">

            </footer>
          </article>

    
    
          <article class="default">
            <header class="headline">
            </header>
<h1 id="cascading-style-sheets">Cascading Style Sheets</h1>

<p>Cascading Style Sheets (CSS) is the second core web technology of the web.  It defines the <em>appearance</em> of web pages by applying stylistic rules to matching HTML elements.  CSS is normally declared in a file with the <em>.css</em> extension, separate from the HTML files it is modifying, though it can also be declared within the page using the <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/style" target="_blank">&lt;style&gt;</a>
 element, or directly on an element using the <code>style</code> attribute.</p>
<h2 id="css-rules">CSS Rules</h2>
<p>A CSS rule consists of a <em>selector</em> and a <em>definition block</em>, i.e.:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-css" data-lang="css"><span style="display:flex;"><span><span style="color:#f92672">h1</span>
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">color</span>: <span style="color:#66d9ef">red</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">font-weight</span>: <span style="color:#66d9ef">bold</span>;
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><h3 id="css-selectors">CSS Selectors</h3>
<p>A CSS selector determines which elements the associated <em>definition block</em> apply to.  In the above example, the <code>h1</code> selector indicates that the style definition supplied applies to <em>all</em> <code>&lt;h1&gt;</code> elements.  The selectors can be:</p>
<ul>
<li>By element type, indicated by the name of the element.  I.e. the selector <code>p</code> applies to all <code>&lt;p&gt;</code> elements.</li>
<li>By the element id, indicated by the id prefixed with a <code>#</code>.  I.e. the selector <code>#foo</code> applies to the element <code>&lt;span id=&quot;foo&quot;&gt;</code>.</li>
<li>By the element class, indicated by the class prefixed with a <code>.</code>.  I.e. the selector <code>.bar</code> applies to the elements <code>&lt;div class=&quot;bar&quot;&gt;</code>, <code>&lt;span class=&quot;bar none&quot;&gt;</code>, and <code>&lt;p class=&quot;alert bar warning&quot;&gt;</code>.</li>
</ul>
<p>CSS selectors can also be combined in a number of ways, and pseudo-selectors can be applied under certain circumstances, like the <code>:hover</code> pseudo-selector which applies only when the mouse cursor is over the element.</p>
<p>You can read more on <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Selectors" target="_blank">MDN&rsquo;s CSS Selectors Page</a>
.</p>
<h3 id="css-definition-block">CSS Definition Block</h3>
<p>A CSS definition block is bracketed by curly braces and contains a series of key-value pairs in the format <code>key=value;</code>.  Each key is a property that defines how an HTML Element should be displayed, and the value needs to be a valid value for that property.</p>
<p>Measurements can be expressed in a number of units, from pixels (px), points (pt), the font size of the parent (em), the font size of the root element (rem), a percentage of the available space (%), or a percentage of the viewport width (vw) or height (vh). See <a href="https://developer.mozilla.org/en-US/docs/Learn/CSS/Building_blocks/Values_and_units" target="_blank">MDN&rsquo;s CSS values and units</a>
 for more details.</p>
<p>Other values are specific to the property.  For example, the <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/cursor" target="_blank">cursor</a>
 property has possible values <code>help</code>, <code>wait</code>, <code>crosshair</code>, <code>not-allowed</code>, <code>zoom-in</code>, and <code>grab</code>.  You should use the MDN documentation for a reference.</p>
<h3 id="styling-text">Styling Text</h3>
<p>One common use for CSS is to change properties about how the text in an element is rendered.  This can include changing attributes of the <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/font" target="_blank">font</a>
 (<code>font-style</code>, <code>font-weight</code>, <code>font-size</code>, <code>font-family</code>), the <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/color" target="_blank">color</a>
, and the <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Text" target="_blank">text</a>
 (<code>text-align</code>, <code>line-break</code>, <code>word-wrap</code>, <code>text-indent</code>, <code>text-justify</code>).  These are just a sampling of some of the most commonly used properties.</p>
<h3 id="styling-elements">Styling Elements</h3>
<p>A second common use for CSS is to change properties of the element itself.  This can include setting dimensions (<a href="https://developer.mozilla.org/en-US/docs/Web/CSS/width" target="_blank">width</a>
, <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/height" target="_blank">height</a>
), adding <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/margin" target="_blank">margins</a>
, <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/border" target="_blank">borders</a>
, and <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/padding" target="_blank">padding</a>
.</p>
<p>These values provide additional space around the content of the element, following the <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Box_Model/Introduction_to_the_CSS_box_model" target="_blank">CSS Box Model</a>
:</p>
<p>
<a href="#image-61ce9de345f009622fe90e698ba5e8e9" class="lightbox-link">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/boxmodel.png" alt="CSS Box Model" style="height: auto; width: auto;" loading="lazy">
</a>
<a href="javascript:history.back();" class="lightbox" id="image-61ce9de345f009622fe90e698ba5e8e9">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/boxmodel.png" alt="CSS Box Model" class="lightbox-image" loading="lazy">
</a></p>
<h3 id="providing-layout">Providing Layout</h3>
<p>The third common use for CSS is to change how elements are laid out on the page.  By default HTML elements follow the <a href="https://developer.mozilla.org/en-US/docs/Learn/CSS/CSS_layout/Normal_Flow" target="_blank">flow model</a>
, where each element appears on the page after the one before it.  Some elements are <em>block</em> level elements, which stretch across the entire page (so the next element appears below it), and others are <em>inline</em> and are only as wide as they need to be to hold their contents, so the next element can appear to the right, if there is room.</p>
<p>The <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/float" target="_blank">float</a>
 property can make an element float to the left or right of its container, allowing the rest of the page to flow around it.</p>
<p>Or you can swap out the layout model entirely by changing the <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/display" target="_blank">display</a>
 property to <code>flex</code> (for flexbox, similar to the XAML <code>StackPanel</code>) or <code>grid</code> (similar to the XAML <code>Grid</code>).  For learning about these two display models, the CSS-Tricks <a href="https://css-tricks.com/snippets/css/a-guide-to-flexbox/" target="_blank">A Complete Guide to Flexbox</a>
 and <a href="https://css-tricks.com/snippets/css/complete-guide-grid/" target="_blank">A Complete Guide to Grid</a>
 are recommended reading.  These can provide quite powerful layout tools to the developer.</p>
<h3 id="learning-more">Learning More</h3>
<p>This is just the tip of the iceberg of what is possible with CSS.  Using <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/Media_Queries/Using_media_queries" target="_blank">CSS media queries</a>
 can change the rules applied to elements based on the size of the device it is viewed on, allowing for <em>responsive design</em>.  <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/animation" target="_blank">CSS Animation</a>
 can allow properties to change over time, making stunning visual animations easy to implement.  And CSS can also carry out calculations and store values, leading some computer scientists to argue that it is a Turing Complete language.</p>
<p>The <a href="https://developer.mozilla.org/en-US/docs/Web/CSS" target="_blank">MDN Cascading Stylesheets Docs</a>
 and <a href="https://css-tricks.com/" target="_blank">CSS Tricks</a>
 are recommended reading to learn more about CSS and its uses.</p>

            <footer class="footline">

            </footer>
          </article>

    
    
          <article class="default">
            <header class="headline">
            </header>
<h1 id="javascript">JavaScript</h1>

<p>Javascript (or ECMAScript, which is the standard Javascript is derived from), was originally developed for Netscape Navigator by <a href="https://en.wikipedia.org/wiki/Brendan_Eich" target="_blank">Brendon Eich</a>
.  The original version was completed in just 10 days.  The name &ldquo;javascript&rdquo; was a marketing move by Netscape as they had just secured the rights to use Java Applets in their browser, and wanted to tie the two languages together.  Similarly, they pushed for a Java-like syntax, which Brandon accommodated.  However, he also incorporated functional behaviors based on the <a href="https://en.wikipedia.org/wiki/Scheme_%28programming_language%29" target="_blank">Scheme</a>
 and drew upon <a href="https://en.wikipedia.org/wiki/Self_%28programming_language%29" target="_blank">Self</a>
&rsquo;s implementation of object-orientation.  The result is a language that may look familiar to you, but often works in unexpected ways.</p>
<h2 id="javascript-is-a-dynamically-typed-language">Javascript is a Dynamically Typed Language</h2>
<p>Unlike the statically-typed C# we&rsquo;ve been working with, Javascript has <em>dynamic</em> types.  This means that we always declare variables using the <code>var</code> keyword, i.e.:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">i</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">story</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Jack and Jill went up a hill...&#34;</span>;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">pi</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">3.14</span>;</span></span></code></pre></div><p>Much like the <code>var</code> type in C#, the type of the variable is <em>inferred</em> when it is set.  Unlike C# though, the type can change with a new assignment, i.e.:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">i</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; <span style="color:#75715e">// i is an integer
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">i</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;The sky is blue&#34;</span>; <span style="color:#75715e">// now i is a string
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">i</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">true</span>; <span style="color:#75715e">// now i is a boolean
</span></span></span></code></pre></div><p>This would cause an error in C#, but is perfectly legal in Javascript.  Because Javascript is dynamically typed, it is impossible to determine type errors until the program is run.</p>
<p>In addition to <code>var</code>, variables can be declared with the <code>const</code> keyword (for constants that cannot be re-assigned), or the <code>let</code> keyword (discussed below).</p>
<h2 id="javascript-types">JavaScript Types</h2>
<p>While the type of a variable is inferred, Javascript still supports types.  You can determine the type of a variable with the <code>typeof()</code> function.  The available types in Javascript are:</p>
<ul>
<li>integers (declared as numbers without a decimal point)</li>
<li>floats (declared as numbers with a decimal point)</li>
<li>booleans (the constants <code>true</code> or <code>false</code>)</li>
<li>strings (declared using double quotes (<code>&quot;I'm a string&quot;</code>), single quotes <code>'Me too!'</code>, or backticks <code>`I'm a template string ${2 + 3}`</code>) which indicate a template string and can execute and concatenate embedded Javascript expressions.</li>
<li>lists (declared using square brackets, i.e. <code>[&quot;I am&quot;, 2, &quot;listy&quot;, 4, &quot;u&quot;]</code>), which are a generic catch-all data structure, which can be treated as an array, list, queue, or stack.</li>
<li>objects (declared using curly braces or constructed with the <code>new</code> keyword, discussed later)</li>
</ul>
<p>In Javascript, there are two keywords that represent a null value, <code>undefined</code> and <code>null</code>.  These have a different meaning: <code>undefined</code> refers to values that have not yet been initialized, while <code>null</code> must be explicitly set by the programmer (and thus intentionally meaning nothing).</p>
<h2 id="javascript-is-a-functional-langauge">Javascript is a Functional Langauge</h2>
<p>As suggested in the description, Javascript is a functional language incorporating many ideas from Scheme. In JavaScript we declare functions using the <code>function</code> keyword, i.e.:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#66d9ef">function</span> <span style="color:#a6e22e">add</span>(<span style="color:#a6e22e">a</span>, <span style="color:#a6e22e">b</span>) {
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">a</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">b</span>;
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>We can also declare an anonymous function (one without a name):</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#66d9ef">function</span> (<span style="color:#a6e22e">a</span>, <span style="color:#a6e22e">b</span>) {
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">a</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">b</span>;
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>or with the lambda syntax:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span>(<span style="color:#a6e22e">a</span>,<span style="color:#a6e22e">b</span>) =&gt; {
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">a</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">b</span>;
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>In Javascript, functions are first-class objects, which means they can be stored as variables, i.e.:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">add</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">function</span>(<span style="color:#a6e22e">a</span>,<span style="color:#a6e22e">b</span>) {
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">a</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">b</span>;
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>Added to arrays:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">math</span> <span style="color:#f92672">=</span> [
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">add</span>,
</span></span><span style="display:flex;"><span>  (<span style="color:#a6e22e">a</span>,<span style="color:#a6e22e">b</span>) =&gt; {<span style="color:#66d9ef">return</span> <span style="color:#a6e22e">a</span> <span style="color:#f92672">-</span> <span style="color:#a6e22e">b</span>;},
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">function</span>(<span style="color:#a6e22e">a</span>,<span style="color:#a6e22e">b</span>) { <span style="color:#a6e22e">a</span> <span style="color:#f92672">*</span> <span style="color:#a6e22e">b</span>; },
</span></span><span style="display:flex;"><span>]</span></span></code></pre></div><p>Or passed as function arguments.</p>
<h2 id="javascript-has-function-scope">Javascript has Function Scope</h2>
<p>Variable scope in Javascript is bound to functions.  Blocks like the body of an <code>if</code> or <code>for</code> loop do not declare a new scope.  Thus, this code:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#66d9ef">for</span>(<span style="color:#66d9ef">var</span> <span style="color:#a6e22e">i</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; <span style="color:#a6e22e">i</span> <span style="color:#f92672">&lt;</span> <span style="color:#ae81ff">3</span>; <span style="color:#a6e22e">i</span><span style="color:#f92672">++</span>;)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#34;Counting i=&#34;</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">i</span>);
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#34;Final value of i is: &#34;</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">i</span>);</span></span></code></pre></div><p>Will print:</p>
<div class="wrap-code highlight"><pre tabindex="0"><code>Counting i=0
Counting i=1
Counting i=2
Final value of i is: 3</code></pre></div><p>Because the <code>i</code> variable is not scoped to the block of the <code>for</code> loop, but rather, the function that contains it.</p>
<p>The keyword <code>let</code> was introduced in ECMAScript version 6 as an alternative for <code>var</code> that enforces block scope.  Using <code>let</code> in the example above would result in a reference error being thrown, as <code>i</code> is not defined outside of the <code>for loop</code> block.</p>
<h2 id="javascript-is-event-driven">Javascript is Event-Driven</h2>
<p>Javascript was written to run within the browser, and was therefore event-driven from the start.  It uses the event loop and queue pattern we saw in C#.  For example, we can set an event to occur in the future with <code>setTimeout()</code>:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#a6e22e">setTimeout</span>(<span style="color:#66d9ef">function</span>(){<span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#34;Hello, future!&#34;</span>)}, <span style="color:#ae81ff">2000</span>);</span></span></code></pre></div><p>This will cause &ldquo;Hello, Future!&rdquo; to be printed 2 seconds (2000 milliseconds) in the future (notice too that we can pass a function to a function).</p>
<h2 id="javascript-is-object-oriented">Javascript is Object-Oriented</h2>
<p>As suggested above, Javascript is object-oriented, but in a manner more similar to Self than to C#.  For example, we can declare objects literally:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">student</span> <span style="color:#f92672">=</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">first</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;Mark&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">last</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;Delaney&#34;</span>
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>Or we can write a constructor, which in Javascript is simply a function we capitalize by convention:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#66d9ef">function</span> <span style="color:#a6e22e">Student</span>(<span style="color:#a6e22e">first</span>, <span style="color:#a6e22e">last</span>){
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">first</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">first</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">last</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">last</span>;
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>And invoke with the <code>new</code> keyword:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">js</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Student</span>(<span style="color:#e6db74">&#34;Jack&#34;</span>, <span style="color:#e6db74">&#34;Sprat&#34;</span>);</span></span></code></pre></div><p>Objects constructed from classes have a <em>prototype</em>, which can be used to attach methods:</p>
<div class="wrap-code highlight"><pre tabindex="0"><code>Student.prototype.greet = function(){
  console.log(`Hello, my name is ${this.first} ${this.last}`);
}</code></pre></div><p>Thus, <code>js.greet()</code> would print <code>Hello, my name is Jack Sprat</code>;</p>
<p>ECMAScript 6 introduced a more familiar form of class definition:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Student</span>{
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">constructor</span>(<span style="color:#a6e22e">first</span>, <span style="color:#a6e22e">last</span>) {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">first</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">first</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">last</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">last</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">greet</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">greet</span>.<span style="color:#a6e22e">bind</span>(<span style="color:#66d9ef">this</span>);
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">greet</span>(){
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">`Hello, my name is </span><span style="color:#e6db74">${</span><span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">first</span><span style="color:#e6db74">}</span><span style="color:#e6db74"> </span><span style="color:#e6db74">${</span><span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">last</span><span style="color:#e6db74">}</span><span style="color:#e6db74">`</span>);
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>However, because JavaScript uses function scope, the <code>this</code> in the method <code>greet</code> would not refer to the student constructed in the constructor, but the <code>greet()</code> method itself.  The constructor line <code>this.greet = this.greet.bind(this);</code> fixes that issue by binding the <code>greet()</code> method to the <code>this</code> of the constructor.</p>
<h2 id="the-document-object-model">The Document Object Model</h2>
<p>The Document Object Model (DOM) is a tree-like structure that the browser constructs from parsed HTML to determine size, placement, and appearance of the elements on-screen.  In this, it is much like the elements tree we used with Windows Presentation Foundation (which was most likely inspired by the DOM).  The DOM is also accessible to Javascript - in fact, one of the most important uses of Javascript is to manipulate the DOM.</p>
<p>You can learn more about the DOM from <a href="https://developer.mozilla.org/en-US/docs/Web/API/Document_Object_Model" target="_blank">MDN&rsquo;s Document Object Model</a>
 documentation entry.</p>

            <footer class="footline">

            </footer>
          </article>

    
    
          <article class="default">
            <header class="headline">
            </header>
<h1 id="hyper-text-transfer-protocol">Hyper-Text Transfer Protocol</h1>

<p>At the heart of the world wide web is the Hyper-Text Transfer Protocol (HTTP).  This is a protocol defining how HTTP servers (which host web pages) interact with HTTP clients (which display web pages).</p>
<p>It starts with a request initiated from the web browser (the client).  This request is sent over the Internet using the TCP protocol to a web server.  Once the web server receives the request, it must decide the appropriate response - ideally sending the requested resource back to the browser to be displayed.  The following diagram displays this typical request-response pattern.</p>
<p>
<a href="#image-2ab0729feed19da60b3c91cddcf4b3a8" class="lightbox-link">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/request-response-pattern.png" alt="HTTP&amp;rsquo;s request-response pattern" style="height: auto; width: auto;" loading="lazy">
</a>
<a href="javascript:history.back();" class="lightbox" id="image-2ab0729feed19da60b3c91cddcf4b3a8">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/request-response-pattern.png" alt="HTTP&amp;rsquo;s request-response pattern" class="lightbox-image" loading="lazy">
</a></p>
<p>This HTTP request-response pattern is at the core of how all web applications communicate.  Even those that use websockets begin with an HTTP request.</p>
<h2 id="the-http-request">The HTTP Request</h2>
<p>A HTTP Request is just text that follows a specific format and sent from a client to a server.  It consists of one or more lines terminated by a CRLF (a carriage return and a line feed character, typically written <code>\r\n</code> in most programming languages).</p>
<ol>
<li>A <em>request-line</em> describing the request</li>
<li>Additional optional lines containing HTTP headers.  These specify details of the request or describe the body of the request</li>
<li>A blank line, which indicates the end of the request headers</li>
<li>An optional body, containing any data belonging of the request, like a file upload or form submission.  The exact nature of the body is described by the headers.</li>
</ol>
<h2 id="the-http-response">The HTTP Response</h2>
<p>Similar to an HTTP Request, an HTTP response consists of one or more lines of text, terminated by a CRLF (sequential carriage return and line feed characters):</p>
<ol>
<li>A <em>status-line</em> indicating the HTTP protocol, the status code, and a textual status</li>
<li>Optional lines containing the Response Headers.  These specify the details of the response or describe the response body</li>
<li>A blank line, indicating the end of the response metadata</li>
<li>An optional response body.  This will typically be the text of an HTML file, or binary data for an image or other file type, or a block of bytes for streaming data.</li>
</ol>
<h2 id="making-a-request">Making a Request</h2>
<p>With our new understanding of HTTP requests and responses as consisting of streams of text that match a well-defined format, we can try manually making our own requests, using a Linux command line tool <em>netcat</em>.</p>
<p>Open a PowerShell instance (Windows) or a terminal (Mac/Linux) and enter the command:</p>
<p><code>$ ssh [eid]@cslinux.cs.ksu.edu</code></p>
<p>Alternatively, you can us Putty to connect to cslinux.  Detailed instructions on both approaches can be found <a href="https://support.cs.ksu.edu/CISDocs/wiki/Remote_Access#Remote_Linux_Access#Remote_Linux_Access" target="_blank">on the Ccompute Science support pages</a>
.</p>

  
  
<div class="box notices cstyle warning">
  <div class="box-label"><i class="fa-fw fas fa-exclamation-triangle"></i> Warning</div>
  <div class="box-content">

<p>If you are connecting from off-campus, you will also need to connect through the K-State VPN to access the Computer Science Linux server. You can find more information about the K-State VPN on the <a href="https://www.k-state.edu/it/cybersecurity/vpn/" target="_blank">K-State IT pages</a>
</p>
</div>
</div>
<p>The <strong>$</strong> indicates a terminal prompt; you don&rsquo;t need to type it.  The <code>[eid]</code> should be replaced with your eid.  This should ssh you into the CS Linux system.  It will prompt you for your CS password, unless you&rsquo;ve set up public/private key access.</p>
<p>Once in, type the command:</p>
<p><code>$ nc google.com 80</code></p>
<p>The <strong>nc</strong> is the netcat executable - we&rsquo;re asking Linux to run netcat for us, and providing two command-line arguments, <strong>google.com</strong> and <strong>80</strong>, which are the webserver we want to talk to and the port we want to connect to (port 80 is the default port for HTTP requests).</p>
<p>Now that a connection is established, we can stream our request to Google&rsquo;s server:</p>
<p><code>GET / HTTP/1.1</code></p>
<p>The <strong>GET</strong> indicates we are making a GET request, i.e. requesting a resource from the server. The <strong>/</strong> indicates the resource on the server we are requesting (at this point, just the top-level page).  Finally, the <strong>HTTP/1.1</strong> indicates the version of HTTP we are using.</p>
<p><strong>Note that you need to press the return key <em>twice</em> after the GET line, once to end the line, and the second time to end the HTTP request.  Pressing the return key in the terminal enters the CRLF character sequence (Carriage Return &amp; Line Feed) the HTTP protocol uses to separate lines</strong></p>
<p>Once the second return is pressed, a whole bunch of text will appear in the terminal.  This is the <strong>HTTP Response</strong> from Google&rsquo;s server.  We&rsquo;ll take a look at that next.</p>
<h2 id="reading-the-response">Reading the Response</h2>
<p>Scroll up to the top of the request, and you should see something like:</p>
<div class="wrap-code highlight"><pre tabindex="0"><code>HTTP/1.1 200 OK
Date: Wed, 16 Jan 2019 15:39:33 GMT
Expires: -1
Cache-Control: private, max-age=0
Content-Type: text/html; charset=ISO-8859-1
P3P: CP=&#34;This is not a P3P policy! See g.co/p3phelp for more info.&#34;
Server: gws
X-XSS-Protection: 1; mode=block
X-Frame-Options: SAMEORIGIN
Set-Cookie: 1P_JAR=2019-01-16-15; expires=Fri, 15-Feb-2019 15:39:33 GMT; path=/; domain=.google.com
Set-Cookie: NID=154=XyALfeRzT9rj_55NNa006-Mmszh7T4rIp9Pgr4AVk4zZuQMZIDAj2hWYoYkKU6Etbmjkft5YPW8Fens07MvfxRSw1D9mKZckUiQ--RZJWZyurfJUyRtoJyTfSOMSaniZTtffEBNK7hY2M23GAMyFIRpyQYQtMpCv2D6xHqpKjb4; expires=Thu, 18-Jul-2019 15:39:33 GMT; path=/; domain=.google.com; HttpOnly
Accept-Ranges: none
Vary: Accept-Encoding

&lt;!doctype html&gt;...</code></pre></div><p>The first line indicates that the server responded using the HTTP 1.1 protocol, the status of the response is a 200 code, which corresponds to the human meaning &ldquo;OK&rdquo;.  In other words, the request worked.  The remaining lines are headers describing aspects of the request - the <strong>Date</strong>, for example, indicates when the request was made, and the <strong>path</strong> indicates what was requested.  Most important of these headers, though is the <strong>Content-Type</strong> header, which indicates what the body of the response consists of.  The content type <strong>text/html</strong> means the body consists of text, which is formatted as HTML &ndash; in other words, a webpage.</p>
<p>Everything after the blank line is the body of the response - in this case, the page content as HTML text.  If you scroll far enough through it, you should be able to locate all of the HTML elements in Google&rsquo;s search page.</p>
<p>That&rsquo;s really all there is with a HTTP request and response.  They&rsquo;re just streams of data.  A webserver just receives a request, processes it, and sends a response.</p>

            <footer class="footline">

            </footer>
          </article>

    
    
          <article class="default">
            <header class="headline">
            </header>
<h1 id="summary">Summary</h1>

<p>In this chapter we explored the three client-side core web technologies: HTML, which defines the content of a web page; CSS, which defines the appearance of the web page; and Javascript, which adds interactivity to the web page.  We also examined Hyper-Text Transfer Protocol (HTTP) which is used to transmit web pages from the server to the client.  We learned that HTTP always follows a request-response pattern, and how both requests and responses are simply streams of data that follow a specific layout.</p>
<p>With this basic understanding of the web client files, and the means to transmit them to the client, we are ready to tackle creating a web server, which we will do in the next chapter.</p>

            <footer class="footline">

            </footer>
          </article>

          </section>
    
    
          <article class="chapter">
            <header class="headline">
            </header>


<div class="article-subheading">Chapter 2</div>
<h1 id="aspnet">ASP.NET</h1>

<p>.NET Goes Online</p>

            <footer class="footline">

            </footer>
          </article>

          <section>
            <h1 class="a11y-only">Subsections of ASP.NET</h1>
    
    
          <article class="default">
            <header class="headline">
            </header>
<h1 id="introduction">Introduction</h1>

<p>While web browsers request resources (including HTTP, CSS, and JavaScript) files over HTTP, the other end of this connection, and what supplies those files, is a <em>web server</em>.  Unlike web clients, which are limited by what technologies a browser understands (namely HTML, CSS, and JS), a web server can be written in any programming language.  In this chapter, we will explore writing web servers in C#, using aspects of the ASP.NET framework.</p>
<h2 id="key-terms">Key Terms</h2>
<p>Some key terms to learn in this chapter are:</p>
<ul>
<li>Web Server</li>
<li>ASP.NET</li>
<li>Dynamic Web Pages</li>
<li>Templates</li>
<li>Razor Pages</li>
</ul>
<h2 id="key-skills">Key Skills</h2>
<p>The key skills you will be developing in this chapter are:</p>
<ul>
<li>Creating a web server to serve a web application using ASP.NET</li>
<li>The ability to author Razor Pages combining HTML with embedded C# code</li>
</ul>

            <footer class="footline">

            </footer>
          </article>

    
    
          <article class="default">
            <header class="headline">
            </header>
<h1 id="static-webservers">Static Webservers</h1>

<p>The earliest web servers simply served files held in a directory. If you think back to your web development assignment from CIS 115, this is exactly what you did - you created some HTML, CSS, and JS files and placed them in the <em>public_html</em> directory in your user directory on the CS Linux server.  Anything placed in this folder is automatically served by an instance of the Apache web server running on the Linux server, at the address <code>https://people.cs.ksu.edu/~[eid]/</code> where <code>[eid]</code> is your K-State eid.</p>
<p><a href="https://www.apache.org/" target="_blank">Apache</a>
 is one of the oldest and most popular open-source web servers in the world.  Microsoft introduced their own web server, <a href="https://www.iis.net/" target="_blank">Internet Information Services (IIS)</a>
 around the same time.  Unlike Apache, which can be installed on most operating systems, IIS only runs on the Windows Server OS.</p>
<p>While Apache installations typically serve static files from either a <em>html</em> or <em>public_html</em> directory, IIS serves files from a <em>wwwroot</em> directory.</p>
<p>As the web grew in popularity, there was tremendous demand to supplement static pages with pages created on the fly in response to requests - allowing pages to be customized to a user, or displaying the most up-to-date information from a database.  In other words, <em>dynamic</em> pages.  We&rsquo;ll take a look at these next.</p>

            <footer class="footline">

            </footer>
          </article>

    
    
          <article class="default">
            <header class="headline">
            </header>
<h1 id="dynamic-pages">Dynamic Pages</h1>

<p>Modern websites are more often full-fledged applications than collections of static files.  But these applications remain built upon the foundations of the core web technologies of HTML, CSS, and JavaScript.  In fact, the client-side application is typically built of <em>exactly</em> these three kinds of files!  So how can we create a dynamic web application?</p>
<p>One of the earliest approaches was to write a program to <em>dynamically create</em> the HTML file that was being served.  Consider this method:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">string</span> GeneratePage()
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    StringBuilder sb = <span style="color:#66d9ef">new</span> StringBuilder();
</span></span><span style="display:flex;"><span>    sb.Append(<span style="color:#e6db74">&#34;&lt;!DOCTYPE html&gt;&#34;</span>);
</span></span><span style="display:flex;"><span>    sb.Append(<span style="color:#e6db74">&#34;&lt;html&gt;&#34;</span>);
</span></span><span style="display:flex;"><span>    sb.Append(<span style="color:#e6db74">&#34;&lt;head&gt;&#34;</span>);
</span></span><span style="display:flex;"><span>    sb.Append(<span style="color:#e6db74">&#34;&lt;title&gt;My Dynamic Page&lt;/title&gt;&#34;</span>);
</span></span><span style="display:flex;"><span>    sb.Append(<span style="color:#e6db74">&#34;&lt;/head&gt;&#34;</span>);
</span></span><span style="display:flex;"><span>    sb.Append(<span style="color:#e6db74">&#34;&lt;body&gt;&#34;</span>);
</span></span><span style="display:flex;"><span>    sb.Append(<span style="color:#e6db74">&#34;&lt;h1&gt;Hello, world!&lt;/h1&gt;&#34;</span>);
</span></span><span style="display:flex;"><span>    sb.Append(<span style="color:#e6db74">&#34;&lt;p&gt;Time on the server is &#34;</span>);
</span></span><span style="display:flex;"><span>    sb.Append(DateTime.Now);
</span></span><span style="display:flex;"><span>    sb.Append(<span style="color:#e6db74">&#34;&lt;/p&gt;&#34;</span>);
</span></span><span style="display:flex;"><span>    sb.Append(<span style="color:#e6db74">&#34;&lt;/body&gt;&#34;</span>);
</span></span><span style="display:flex;"><span>    sb.Append(<span style="color:#e6db74">&#34;&lt;/html&gt;&#34;</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> sb.ToString();
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>It generates the HTML of a page showing the current date and time.  Remember too that HTTP responses are simply text, so we can generate a response as a string as well:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">string</span> GenerateResponse()
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">string</span> page = GeneratePage();
</span></span><span style="display:flex;"><span>    StringBuilder sb = <span style="color:#66d9ef">new</span> StringBuilder();
</span></span><span style="display:flex;"><span>    sb.AppendLine(<span style="color:#e6db74">&#34;HTTP/1.1 200&#34;</span>);
</span></span><span style="display:flex;"><span>    sb.AppendLine(<span style="color:#e6db74">&#34;Content-Type: text/html; charset=utf-8&#34;</span>);
</span></span><span style="display:flex;"><span>    sb.AppendLine(<span style="color:#e6db74">&#34;ContentLength:&#34;</span> + page.Length);
</span></span><span style="display:flex;"><span>    sb.AppendLine(<span style="color:#e6db74">&#34;&#34;</span>);
</span></span><span style="display:flex;"><span>    sb.Append(page);
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> sb.ToString();
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>The resulting string could then be streamed back to the requesting web browser.  This is the basic technique used in all server-side web frameworks: they dynamically assemble the response to a request by assembling strings into an HTML page.  Where they differ is what language they use to do so, and how much of the process they&rsquo;ve abstracted.</p>
<p>This approach was adopted by Microsoft and implemented as <em>Active Server Pages (ASP)</em>.  By placing files with the <em>.asp</em> extension among those served by an IIS server, C# or Visual Basic code written on that page would be executed, and the resulting string would be served as a file.  This would happen on each request - so a request for <a href="http://somesite.com/somepage.asp" target="_blank">http://somesite.com/somepage.asp</a>
 would execute the code in the <em>somepage.asp</em> file, and the resulting text would be served.</p>
<p>You might have looked at the above examples and shuddered.  After all, who wants to assemble text like that?  And when you assemble HTML using raw string concatenation, you don&rsquo;t have the benefit of syntax highlighting, code completion, or any of the other modern development tools we&rsquo;ve grown to rely on.  Thankfully, most web development frameworks provide some abstraction around this process, and by and large have adopted some form of <em>template syntax</em> to make the process of writing a page easier.</p>

            <footer class="footline">

            </footer>
          </article>

    
    
          <article class="default">
            <header class="headline">
            </header>
<h1 id="template-rendering">Template Rendering</h1>

<p>It was not long before new technologies sprang up to replace the ad-hoc string concatenation approach to creating dynamic pages.  These template approaches allow you to write a page using primarily HTML, but embed snippets of another language to execute and concatenate into the final page.  This is very similar to the template strings we have used in C#, i.e.:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">string</span> time = <span style="color:#e6db74">$&#34;The time is {DateTime.Now}&#34;</span>;</span></span></code></pre></div><p>Which concatenates the invoking the <a href="">DateTime.Now</a>
 property&rsquo;s <code>ToString()</code> method into the string <code>time</code>.  While the C# template string above uses curly braces to call out the script snippets, most HTML template libraries initially used some variation of angle brackets + additional characters.  As browsers interpret anything within angle brackets (<code>&lt;&gt;</code>) as HTML tags, these would not be rendered if the template was accidentally served as HTML wihout executing and concatenating scripts.  Two early examples are:</p>
<ul>
<li><code>&lt;?php echo &quot;This is a PHP example&quot; ?&gt;</code></li>
<li><code>&lt;% Response.Write(&quot;This is a classic ASP example) %&gt;</code></li>
</ul>
<p>And abbreviated versions:</p>
<ul>
<li><code>&lt;?= &quot;This is the short form for PHP&quot; ?&gt;</code></li>
<li><code>&lt;%= &quot;This is the short form for classic ASP&quot; %&gt;</code></li>
</ul>
<p>Template rendering proved such a popular and powerful tool that rendering libraries were written for most programming languages, and could be used for more than just HTML files - really <em>any</em> kind of text file can be rendered with a template.  Thus, you can find template rendering libraries for JavaScript, Python, Ruby, and pretty much any language you care to (and they aren&rsquo;t that hard to write either).</p>
<p>Microsoft&rsquo;s classic ASP implementation was limited to the Visual Basic programming language.  As the C# language gained in popularity, they replaced classic ASP with ASP.NET web pages.  Like classic ASP, each page file (named with a <em>.aspx</em> extension) generates a corresponding HTML page.  The script could be either Visual Basic or C#, and a new syntax using the at symbol (<code>@</code>) to proceed the code snippets was adopted.  Thus the page:</p>
<div class="wrap-code highlight"><pre tabindex="0"><code class="language-aspx" data-lang="aspx">&lt;html&gt;
    &lt;body&gt;
        &lt;h1&gt;Hello Web Pages&lt;/h1&gt;
        &lt;p&gt;The time is @DateTime.Now&lt;/p&gt;
    &lt;/body&gt;
&lt;/html&gt;</code></pre></div><p>Would render the current time.  You can run (and modify) this example on the <a href="https://www.w3schools.com/asp/showfile_c.asp?filename=try_webpages_cs_001" target="_blank">w3schools.com</a>
.</p>
<p>This template syntax is the <a href="https://en.wikipedia.org/wiki/ASP.NET_Razor" target="_blank">Razor syntax</a>
, and used throughout Microsoft&rsquo;s ASP.NET platform.  Additionally it can be used outside of ASP.NET with the open-source <a href="https://antaris.github.io/RazorEngine/" target="_blank">RazorEngine</a>
.</p>
<p>Classic PHP, Classic ASP, and ASP.NET web pages all use a single-page model, where the client (the browser) requests a specific file, and as that file is interpreted, the dynamic page is generated.  This approach worked well in the early days of the world-wide-web, where web sites were essentially a collection of pages.  However, as the web grew increasingly interactive, many web sites grew into full-fledged <em>web applications</em>, full-blown programs that did lend themselves to a page-baed structure.  This new need resulted in new technologies to fill the void - web frameworks.  We&rsquo;ll talk about these next.</p>

            <footer class="footline">

            </footer>
          </article>

    
    
          <article class="default">
            <header class="headline">
            </header>
<h1 id="web-frameworks">Web Frameworks</h1>

<p>As web <em>sites</em> became web <em>applications</em>, developers began looking to use ideas and techniques drawn from traditional software development.  These included architectural patterns like <a href="https://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller" target="_blank">Model-View-Controller (MVC)</a>
 and <a href="https://en.wikipedia.org/wiki/Pipeline_%28software%29" target="_blank">Pipeline</a>
 that simply were not possible with the server page model.  The result was the development of a host of web frameworks across multiple programming languages, including:</p>
<ul>
<li><a href="https://rubyonrails.org/" target="_blank">Ruby on Rails</a>
, which uses the <a href="https://www.ruby-lang.org/en/" target="_blank">Ruby</a>
 programming language and adopts a MVC architecture</li>
<li><a href="https://laravel.com/" target="_blank">Laravel</a>
, which uses the <a href="https://www.php.net/" target="_blank">PHP</a>
 programming language and adopts a MVC architecture</li>
<li><a href="https://www.djangoproject.com/" target="_blank">Django</a>
, which uses the <a href="https://www.python.org/" target="_blank">Python</a>
 programming language and adopts a MVC architecture</li>
<li><a href="https://expressjs.com/" target="_blank">Express</a>
, which uses the <a href="https://nodejs.org/en/" target="_blank">Node implementation of the JavaScript</a>
 programming language and adopts the Pipeline architecture</li>
<li><a href="https://revel.github.io/" target="_blank">Revel</a>
, which uses the <a href="https://golang.org/" target="_blank">Go</a>
 programming language and adopts a Pipeline architecture</li>
<li><a href="https://github.com/ninenines/cowboy" target="_blank">Cowboy</a>
, which uses the <a href="https://www.erlang.org/" target="_blank">erlang</a>
 programming language and adopts a Pipeline architecture</li>
<li><a href="https://www.phoenixframework.org/" target="_blank">Phoenix</a>
, which uses the <a href="https://elixir-lang.org/" target="_blank">elixir</a>
 programming language, and adopts a Pipeline architecture</li>
</ul>
<h3 id="aspnet-frameworks">ASP.NET Frameworks</h3>
<p>This is only a sampling of the many frameworks and languages used in the modern web.  Microsoft adapted to the new approach by creating their own frameworks within the ASP.NET family:</p>
<ul>
<li><a href="https://dotnet.microsoft.com/apps/aspnet/mvc" target="_blank">ASP.NET MVC</a>
 uses C# (or Visual Basic) for a language and adopts a MVC architecture</li>
<li><a href="https://docs.microsoft.com/en-us/aspnet/core/tutorials/razor-pages/?view=aspnetcore-3.1" target="_blank">ASP.NET Razor Pages</a>
, which also uses C# (or Visual Basic) for its language, and adopts a Pipeline architecture</li>
<li><a href="https://dotnet.microsoft.com/apps/aspnet/apis" target="_blank">ASP.NET API</a>
 is a web framework focused on creating RESTful web APIs (i.e. a web application that serves data instead of HTML)</li>
</ul>
<h3 id="iis-and-aspnet-core">IIS and ASP.NET Core</h3>
<p>While ASP.NET applications are traditionally hosted on IIS running on the Windows Server operating system, the introduction of .NET Core made it possible to run .NET programs on Linux machines.  As Linux operating systems are typically free and dominate the web server market (W3Cook<sup id="fnref:1"><a href="#fn:1" class="footnote-ref" role="doc-noteref">1</a></sup> reports 98.1% of web servers worldwide run on a Linux OS).</p>
<p>Microsoft has accordingly migrated its ASP.NET family to a new implementation can run on .NET Core <em>or</em> IIS: <a href="https://docs.microsoft.com/en-us/aspnet/core/?view=aspnetcore-5.0" target="_blank">ASP.NET Core</a>
.  When you build a ASP.NET Core application, you can choose your deployment target: IIS, .NET Core, or even Microsoft&rsquo;s cloud service, Azure.  The same application can run on <em>any</em> of these platforms.</p>
<div class="footnotes" role="doc-endnotes">
<hr>
<ol>
<li id="fn:1">
<p><a href="https://web.archive.org/web/20150806093859/http://www.w3cook.com/os/summary/" target="_blank">W3Cook OS Summary</a>
&#160;<a href="#fnref:1" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
</ol>
</div>

            <footer class="footline">

            </footer>
          </article>

    
    
          <article class="default">
            <header class="headline">
            </header>
<h1 id="razor-pages">Razor Pages</h1>

<p>ASP.NET Core adds a project type to Visual Studio&rsquo;s new project wizard, <em>ASP.NET Core web application</em> which uses <em>Razor Pages</em>.  The Razor Page approach represents a hybrid approach between a MVC and Pipeline architecture and leverages some of the ideas of component-based design that we saw with WPF applications.</p>
<p>The program entry point is <em>Program.cs</em>, which creates the web server our application will run on.  In it, we initialize and configure the server based on the <em>Startup.cs</em> class, which details what aspects of the ASP.NET program we want to use.  The wizard does the initial configuration for us, and for now we&rsquo;ll leave the defaults:</p>
<ul>
<li>Adding the Razor Pages service (which allows us to use Razor Pages)</li>
<li>Enabling HTTPS redirection (which instructs browsers making HTTP requests against our server to make HTTPS requests instead)</li>
<li>Enabling the use of static files, which means files in the <em>wwwroot</em> folder will be served as they are, in as efficient a manner of possible</li>
<li>Mapping requests to razor pages (this makes a request against a route like <em>/index</em> map to the <em>Pages/Index.cshtml</em> razor page)</li>
</ul>
<p>Under this architecture, any file we want to serve as-is (i.e. our CSS and JavaScript files), we&rsquo;ll place in <em>wwwroot</em> folder.  Any route we want to serve dynamically, we&rsquo;ll create a corresponding Razor page for in the <em>Pages</em> folder.</p>
<h2 id="razor-page-syntax">Razor Page Syntax</h2>
<p>Let&rsquo;s look at an example Razor page, <em>index.cshtml</em>, and then break down its components:</p>
<div class="wrap-code highlight"><pre tabindex="0"><code class="language-razor" data-lang="razor">@page 
@model IndexModel
@{
    ViewData[&#34;Title&#34;] = &#34;Home page&#34;;
}
&lt;div class=&#34;text-center&#34;&gt;
    &lt;h1 class=&#34;display-4&#34;&gt;Welcome&lt;/h1&gt;
    &lt;p&gt;Learn about &lt;a href=&#34;https://docs.microsoft.com/aspnet/core&#34;&gt;building Web apps with ASP.NET Core&lt;/a&gt;.&lt;/p&gt;
&lt;/div&gt;</code></pre></div><p>The <code>@page</code> line indicates to the compiler that this file represents a Razor page.  This is necessary for the page to be interpreted correctly, and for setting up the mapping from a request for the route <em>/index</em> to be mapped to this page (<em>Index.cshtml</em>).</p>
<p>The <code>@model</code> line indicates the <em>model</em> class to use with this page.  Conventionally, the model class has the same name as the Razor page, plus a <em>.cs</em> extension, though we can use a different model file if needed.  If we follow the convention, the model file is grouped with the Razor page file, much like the codebehind files in WPF and Forms. The model class provides the data for the web page, in a manner somewhat like the ViewModel classes we worked with in WPF.  We&rsquo;ll talk more about model classes shortly.</p>
<p>The <code>@{}</code> section is a place to define variables.  In this case, we add a key/value pair to the <code>ViewData</code> dictionary.  This dictionary is available in both the page and the layout, and is an easy way to pass values between them (in this case, we are providing a title to the layout). The layout is discussed below.</p>
<p>Finally, the page content itself is presented in Razor syntax - a mixture of HTML and embedded C# proceeded by the <code>@</code> symbol.  Note that we do not need to provide termination to the C# code - the compiler will automatically determine when we switch from code back to HTML based on the grammar of the C# language.</p>
<h2 id="layouts">Layouts</h2>
<p>If you remember from our discussions of HTML, a valid HTML page must have a <code>&lt;!DOCTYPE html&gt;</code> element, and <code>&lt;html&gt;</code>, <code>&lt;head&gt;</code>, <code>&lt;title&gt;</code>, and <code>&lt;body&gt;</code> elements.  But where are these in our Razor page?  It exists in the _Pages/Shared/<em>Layout.cshtml</em> file:</p>
<div class="wrap-code highlight"><pre tabindex="0"><code class="language-cshtml" data-lang="cshtml">&lt;!DOCTYPE html&gt;
&lt;html lang=&#34;en&#34;&gt;
&lt;head&gt;
    &lt;meta charset=&#34;utf-8&#34; /&gt;
    &lt;meta name=&#34;viewport&#34; content=&#34;width=device-width, initial-scale=1.0&#34; /&gt;
    &lt;title&gt;@ViewData[&#34;Title&#34;] - ExampleWebApplication&lt;/title&gt;
    &lt;link rel=&#34;stylesheet&#34; href=&#34;~/lib/bootstrap/dist/css/bootstrap.min.css&#34; /&gt;
    &lt;link rel=&#34;stylesheet&#34; href=&#34;~/css/site.css&#34; /&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;header&gt;
        &lt;nav class=&#34;navbar navbar-expand-sm navbar-toggleable-sm navbar-light bg-white border-bottom box-shadow mb-3&#34;&gt;
            &lt;div class=&#34;container&#34;&gt;
                &lt;a class=&#34;navbar-brand&#34; asp-area=&#34;&#34; asp-page=&#34;/Index&#34;&gt;ExampleWebApplication&lt;/a&gt;
                &lt;button class=&#34;navbar-toggler&#34; type=&#34;button&#34; data-toggle=&#34;collapse&#34; data-target=&#34;.navbar-collapse&#34; aria-controls=&#34;navbarSupportedContent&#34;
                        aria-expanded=&#34;false&#34; aria-label=&#34;Toggle navigation&#34;&gt;
                    &lt;span class=&#34;navbar-toggler-icon&#34;&gt;&lt;/span&gt;
                &lt;/button&gt;
                &lt;div class=&#34;navbar-collapse collapse d-sm-inline-flex flex-sm-row-reverse&#34;&gt;
                    &lt;ul class=&#34;navbar-nav flex-grow-1&#34;&gt;
                        &lt;li class=&#34;nav-item&#34;&gt;
                            &lt;a class=&#34;nav-link text-dark&#34; asp-area=&#34;&#34; asp-page=&#34;/Index&#34;&gt;Home&lt;/a&gt;
                        &lt;/li&gt;
                        &lt;li class=&#34;nav-item&#34;&gt;
                            &lt;a class=&#34;nav-link text-dark&#34; asp-area=&#34;&#34; asp-page=&#34;/Privacy&#34;&gt;Privacy&lt;/a&gt;
                        &lt;/li&gt;
                    &lt;/ul&gt;
                &lt;/div&gt;
            &lt;/div&gt;
        &lt;/nav&gt;
    &lt;/header&gt;
    &lt;div class=&#34;container&#34;&gt;
        &lt;main role=&#34;main&#34; class=&#34;pb-3&#34;&gt;
            @RenderBody()
        &lt;/main&gt;
    &lt;/div&gt;

    &lt;footer class=&#34;border-top footer text-muted&#34;&gt;
        &lt;div class=&#34;container&#34;&gt;
            &amp;copy; 2020 - ExampleWebApplication - &lt;a asp-area=&#34;&#34; asp-page=&#34;/Privacy&#34;&gt;Privacy&lt;/a&gt;
        &lt;/div&gt;
    &lt;/footer&gt;

    &lt;script src=&#34;~/lib/jquery/dist/jquery.min.js&#34;&gt;&lt;/script&gt;
    &lt;script src=&#34;~/lib/bootstrap/dist/js/bootstrap.bundle.min.js&#34;&gt;&lt;/script&gt;
    &lt;script src=&#34;~/js/site.js&#34; asp-append-version=&#34;true&#34;&gt;&lt;/script&gt;

    @RenderSection(&#34;Scripts&#34;, required: false)
&lt;/body&gt;
&lt;/html&gt;</code></pre></div><p>Using a layout file allows us to place boilerplate HTML (code that is repeated on every page of our site) in a single location, and share it amongst all pages in our application.  The <code>@RenderBody()</code> line indicates where the content of the Razor page will be rendered.</p>
<p>Note that we also implement a navigation menu in this layout.  Instead of giving the links in this navigation page a <code>href</code> element, we use <code>asp-page</code>, which converts into an appropriate <code>href</code> linking to one of our Razor pages on compilation.  Thus <code>asp-page=&quot;/Index&quot;</code> will point to our <em>Index.cshtml.cs</em> page.  The <code>asp-page</code> is an example of a <a href="https://docs.microsoft.com/en-us/aspnet/core/mvc/views/tag-helpers/intro?view=aspnetcore-3.1" target="_blank">TagHelper</a>
, syntax that provides extra details to be processed by the Razor rendering engine.</p>
<p>We can include other sections within the layout with <code>@RenderSection()</code> For example, the <code>@RenderSection(&quot;Scripts&quot;, required: false)</code> will render a &ldquo;Scripts&rdquo; section, if there is one defined in our Razor page.  We define such sections with the <code>@section</code> syntax, i.e.:</p>
<div class="wrap-code highlight"><pre tabindex="0"><code class="language-cshtml" data-lang="cshtml">@section Scripts{
    &lt;script src=&#34;my-script.js&#34;&gt;&lt;/script&gt;
}</code></pre></div><p>Would place the additional <code>&lt;script&gt;</code> element in the rendered Razor page.  You can define as many sections as you want.</p>
<p>While the _Pages/Shared/<em>Layout.cshtml</em> file is the default layout, you can define your own layout files.  These should also be placed in the <em>Pages/Shared</em> folder, and their name should begin with an underscore.  You can then set it to be used as the layout for your page by setting the page&rsquo;s <code>Layout</code> property:</p>
<div class="wrap-code highlight"><pre tabindex="0"><code class="language-cshtml" data-lang="cshtml">@{
    Layout = &#34;_YourLayout&#34;;
}</code></pre></div><p>Where the string you set the property to is the name of your layout.</p>
<h2 id="model-classes">Model Classes</h2>
<p>The model class serves a similar role to the codebehind classes of your WPF and Windows Forms applications.  Any public properties defined in the model class are accessible in the Razor page.  I.e. if we defined a property:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">IndexModel</span>:PageModel {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> DateTime CurrentTime 
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">get</span> 
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">return</span> DateTime.Now;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> IActionResult OnGet()
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>We could use it in the corresponding Razor page:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>@page 
</span></span><span style="display:flex;"><span>@model IndexModel 
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>&lt;p&gt;The current time <span style="color:#66d9ef">is</span> @Model.CurrentTime&lt;/p&gt;</span></span></code></pre></div><p>In addition, the model class can define a method to be triggered on each HTTP Request, i.e. the <code>OnGet()</code> method will be triggered with each HTTP GET request, and <code>OnPost()</code> will be called with each HTTP POST request.  You can define a method for any of the valid HTTP request verbs that will be invoked on each corresponding request.</p>

            <footer class="footline">

            </footer>
          </article>

    
    
          <article class="default">
            <header class="headline">
            </header>
<h1 id="summary">Summary</h1>

<p>In this chapter we explored how server-side web technologies have evolved to create <em>dynamic</em> web sites and web applications.  The ASP.NET Core platform is Microsoft&rsquo;s answer to this evolution.  It can run on either Microsoft&rsquo;s flagship IIS server, or as a stand-alone server on a variety of platforms.  It brings together a suite of technologies to build web pages and web applications.  We took an in-depth look at one of these - Razor pages, and learned how to build our own Razor pages app.</p>

            <footer class="footline">

            </footer>
          </article>

          </section>
    
    
          <article class="chapter">
            <header class="headline">
            </header>


<div class="article-subheading">Chapter 3</div>
<h1 id="form-data">Form Data</h1>

<p>Talk Back to your Server</p>

            <footer class="footline">

            </footer>
          </article>

          <section>
            <h1 class="a11y-only">Subsections of Form Data</h1>
    
    
          <article class="default">
            <header class="headline">
            </header>
<h1 id="introduction">Introduction</h1>

<p>Now that we have explored some ideas about getting data <em>from</em> the web server, let&rsquo;s turn our attention to sending data <em>to</em> the webserver.  One of the earliest approaches for doing so is to use a HTML form sent as a HTTP Request, which we&rsquo;ll take a look at in this chapter.</p>
<h2 id="key-terms">Key Terms</h2>
<p>Some key terms to learn in this chapter are:</p>
<ul>
<li>Form</li>
<li>Input</li>
<li>Encoding</li>
<li><code>Nullable&lt;T&gt;</code> and <code>?</code></li>
</ul>
<p>And the HTML tags:</p>
<ul>
<li><code>&lt;form&gt;</code></li>
<li><code>&lt;input&gt;</code></li>
<li><code>&lt;textarea&gt;</code></li>
</ul>

            <footer class="footline">

            </footer>
          </article>

    
    
          <article class="default">
            <header class="headline">
            </header>
<h1 id="http-forms">HTTP Forms</h1>

<p>One of the earliest (and still widely used) mechanisms for transferring data from a browser (client) to the server is a <em>form</em>.  The <code>&lt;form&gt;</code> is a specific HTML element that contains input fields and buttons the user can interact with.</p>
<h3 id="the-input-element">The <code>&lt;input&gt;</code> Element</h3>
<p>Perhaps the most important - and versatile - of these is the <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input" target="_blank"><code>&lt;input&gt;</code></a> element.  By setting its <code>type</code> attribute, we can represent a wide range of possible inputs, as is demonstrated by this table <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input" target="_blank">taken from the MDN Web Docs</a>
:</p>
<table class="standard-table">
 <colgroup>
  <col>
  <col style="width: 50%;">
  <col>
 </colgroup>
 <thead>
  <tr>
   <th>Type</th>
   <th>Description</th>
   <th colspan=2>Basic Examples</th>
  </tr>
 </thead>
 <tbody>
  <tr>
    <td><a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input/button" title="<input> elements of type button are rendered as simple push buttons, which can be programmed to control custom functionality anywhere on a webpage as required when assigned an event handler function (typically for the click event).">button</a></td>
    <td>A push button with no default behavior displaying the value of the <a href="#htmlattrdefvalue">value</a> attribute, empty by default.</td>
    <td>
      <pre><code class="html">&lt;input type="button" name="ExampleButton" value="Click Me!"/&gt;</code></pre>
    </td>
    <td>
      <input type="button" name="ExampleButton" value="Click Me!"/>
    </td>
  </tr>
  <tr>
    <td><a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input/checkbox" title="<input> elements of type checkbox are rendered by default as boxes that are checked (ticked) when activated, like you might see in an official government paper form. The exact appearance depends upon the operating system configuration under which the browser is running. Generally this is a square but it may have rounded corners. A checkbox allows you to select single values for submission in a form (or not).">checkbox</a></td>
    <td>A check box allowing single values to be selected/deselected.</td>
    <td>
      <pre><code class="html">&lt;label&gt;&lt;input type="checkbox" name="ExampleCheckbox"/&gt;&lt;label&gt;</code></pre></td>
    <td>
      <label><input type="checkbox" name="ExampleCheckbox"/>
    </td>
  </tr>
  <tr>
    <td><a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input/color" title="<input> elements of type color provide a user interface element that lets a user specify a color, either by using a visual color picker interface or by entering the color into a text field in #rrggbb hexadecimal format.">color</a></td>
    <td>A control for specifying a color; opening a color picker when active in supporting browsers.</td>
    <td>
      <pre><code class="html">&lt;input type="color" name="ExampleColor" style="width: 40px; height: 40px;"/&gt;</code></pre>
    </td>
    <td>
      <input type="color" name="ExampleColor" style="width: 40px; height: 40px;"/>
    </td>
  </tr>
  <tr>
    <td><a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input/date" title="<input> elements of type=&quot;date&quot; create input fields that let the user enter a date, either with a textbox that validates the input or a special date picker interface.">date</a></td>
    <td>A control for entering a date (year, month, and day, with no time). Opens a date picker or numeric wheels for year, month, day when active in supporting browsers.</td>
    <td>
     <pre><code class="html">&lt;input type="date" name="ExampleDate"/&gt;</code></pre>
   </td>
   <td>
    <input type="date" name="ExampleDate"/>
   </td>
  </tr>
  <tr>
    <td><a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input/datetime-local" title="<input> elements of type datetime-local create input controls that let the user easily enter both a date and a time, including the year, month, and day as well as the time in hours and minutes.">datetime-local</a></td>
    <td>A control for entering a date and time, with no time zone. Opens a date picker or numeric wheels for date- and time-components when active in supporting browsers.</td>
    <td>
      <pre><code class="html">&lt;input type="datetime-local" name="ExampleDatetimeLocal"/&gt;</code></pre>
    </td>
    <td>
      <input type="datetime-local" name="ExampleDatetimeLocal"/>
    </td>
  </tr>
  <tr>
  <tr>
    <td><a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input/email" title="<input> elements of type email are used to let the user enter and edit an e-mail address, or, if the multiple attribute is specified, a list of e-mail addresses.">email</a></td>
    <td>A field for editing an email address. Looks like a <code>text</code> input, but has validation parameters and relevant keyboard in supporting browsers and devices with dynamic keyboards.</td>
    <td>
      <pre><code class="html">&lt;input type="email" name="ExampleEmail"/&gt;</code></pre>
    </td>
    <td>
      <input type="email" name="ExampleEmail"/>
    </td>
  </tr>
  <tr>
    <td><a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input/file" title="<input> elements with type=&quot;file&quot; let the user choose one or more files from their device storage. Once chosen, the files can be uploaded to a server using form submission, or manipulated using JavaScript code and the File API.">file</a></td>
    <td>A control that lets the user select a file. Use the <a href="#htmlattrdefaccept">accept</a> attribute to define the types of files that the control can select.</td>
    <td>
      <pre><code style="html">&lt;input type="file" name="ExampleFile"/&gt;</code></pre>
    </td>
    <td>
      <input type="file" name="ExampleFile"/>
    </td>
  </tr>
  <tr>
   <td><a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input/hidden" title="<input> elements of type hidden let web developers include data that cannot be seen or modified by users when a form is submitted. For example, the ID of the content that is currently being ordered or edited, or a unique security token. Hidden inputs are completely invisible in the rendered page, and there is no way to make it visible in the page's content.">hidden</a></td>
    <td>A control that is not displayed but whose value is submitted to the server. There is an example in the last column, but it's hidden!</td>
    <td>
      <pre><code class="html">&lt;input type="hidden" name="ExampleHidden" value="f0321dc35"/&gt;</code></pre>
    </td>
    <td>
      <input type="hidden" name="ExampleHidden" value="f0321dc35"/> â Itâs here!
    </td>
  </tr>
  <tr>
    <td><a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input/image" title="<input> elements of type image are used to create graphical submit buttons, i.e. submit buttons that take the form of an image rather than text.">image</a></td>
    <td>A graphical <code>submit</code> button. Displays an image defined by the <code>src</code> attribute. The <a href="#htmlattrdefalt">alt</a> attribute displays if the image <a href="#htmlattrdefsrc">src</a> is missing.</td>
    <td>
      <pre><code class="html">&lt;input type="image" name="ExampleImage" src="https://ksu-cs-textbooks.github.io/cis400/images/button.png">}}"/&gt;</code></pre>
    </td>
    <td>
      <input type="image" name="ExampleImage" src="https://ksu-cs-textbooks.github.io/cis400/images/button.png">}}"/>
    </td>
  </tr>
  <tr>
    <td><a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input/number" title="<input> elements of type number are used to let the user enter a number. They include built-in validation to reject non-numerical entries.">number</a></td>
    <td>A control for entering a number. Displays a spinner and adds default validation when supported. Displays a numeric keypad in some devices with dynamic keypads.</td>
    <td>
      <pre><code class="html">&lt;input type="number" name="ExampleNumber" min=0 max=10 step=1/&gt;</code></pre>
    </td>
    <td>
      <input type="number" name="ExampleNumber" min=0 max=10 step=1/>
    </td>
  </tr>
  <tr>
    <td><a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input/password" title="<input> elements of type password provide a way for the user to securely enter a password.">password</a></td>
    <td>A single-line text field whose value is obscured. Will alert user if site is not secure.</td>
    <td>
      <pre><code class="html">&lt;input type="password"&gt;</code></pre>
    </td>
    <td>
      <input type="password"/>
    </td>
  </tr>
  <tr>
    <td><a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input/radio" title="<input> elements of type radio are generally used in radio groupsâcollections of radio buttons describing a set of related options.">radio</a></td>
    <td>A radio button, allowing a single value to be selected out of multiple choices with the same <a href="#htmlattrdefname">name</a> value.</td>
    <td>
      <pre><code class="html">
&lt;label&gt;
  &lt;input type="radio" name="ExampleRadio" value="1"/&gt;
  Choice One
&lt;/label&gt;
&lt;label&gt;
  &lt;input type="radio" name="ExampleRadio" value="2"/&gt;
  Choice Two
&lt;/label&gt;
&lt;label&gt;
  &lt;input type="radio" name="ExampleRadio" value="3"/&gt;
  Choice Three
&lt;/label&gt;
      </code></pre>
    </td>
    <td>
      <label>
        <input type="radio" name="ExampleRadio" value="1"/>
        Choice One</label>
      <label>
        <input type="radio" name="ExampleRadio" value="2"/>
        Choice Two</label>
      <label>
        <input type="radio" name="ExampleRadio" value="3"/>
        Choice Three</label>
    </td>
  </tr>
  <tr>
    <td><a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input/range" title="<input> elements of type range let the user specify a numeric value which must be no less than a given value, and no more than another given value. The precise value, however, is not considered important. This is typically represented using a slider or dial control rather than a text entry box like the number input type.">range</a></td>
    <td>A control for entering a number whose exact value is not important. Displays as a range widget defaulting to the middle value. Used in conjunction <a href="#htmlattrdefmin">min</a> and <a href="#htmlattrdefmax">max</a> to define the range of acceptable values.</td>
    <td>
      <pre><code class="html">&lt;input type="range" name="ExampleRange" min="0" max="25"/&gt;</code></pre>
    </td>
    <td>
      <input type="range" name="ExampleRange" min="0" max="25"/>
    </td>
  </tr>
  <tr>
    <td><a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input/reset" title="<input> elements of type reset are rendered as buttons, with a default click event handler that resets all of the inputs in the form to their initial values.">reset</a></td>
    <td>A button that resets the contents of the form to default values. Not recommended.</td>
    <td>
      <pre><code class="html">&lt;input type="reset" name="ResetExample"/&gt;</code></pre>
    </td>
    <td>
      <input type="reset" name="ResetExample"/>
    </td>
  </tr>
  <tr>
    <td><a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input/search" title="<input> elements of type search are text fields designed for the user to enter search queries into. These are functionally identical to text inputs, but may be styled differently by the user agent. ">search</a></td>
    <td>A single-line text field for entering search strings. Line-breaks are automatically removed from the input value. May include a delete icon in supporting browsers that can be used to clear the field. Displays a search icon instead of enter key on some devices with dynamic keypads.</td>
    <td>
      <pre><code class="html">&lt;input type="search" name="ExampleSearch"/&gt;</code></pre>
    </td>
    <td>
      <input type="search" name="ExampleSearch"/>
    </td>
  </tr>
  <tr>
    <td><a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input/submit" title="<input> elements of type submit are rendered as buttons. When the click event occurs (typically because the user clicked the button), the user agent attempts to submit the form to the server.">submit</a></td>
    <td>A button that submits the form.</td>
    <td>
      <pre><code class="html">&lt;input type="submit" name="ExampleSubmit" value="Save Changes"/&gt;</code></pre>
    </td>
    <td>
      <input type="submit" name="ExampleSubmit" value="Save Changes"/>
    </td>
  </tr>
  <tr>
    <td><a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input/tel" title="<input> elements of type tel are used to let the user enter and edit a telephone number. Unlike <input type=&quot;email&quot;> and <input type=&quot;url&quot;> , the input value is not automatically validated to a particular format before the form can be submitted, because formats for telephone numbers vary so much around the world.">tel</a></td>
    <td>A control for entering a telephone number. Displays a telephone keypad in some devices with dynamic keypads.</td>
    <td>
      <pre><code class="html">&lt;input type="tel" name="ExampleTel"/&gt;</code></pre>
    </td>
    <td>
      <input type="tel" name="ExampleTel"/>
    </td>
  </tr>
  <tr>
    <td><a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input/text" title="<input> elements of type text create basic single-line text fields.">text</a></td>
    <td>The default value. A single-line text field. Line-breaks are automatically removed from the input value.</td>
    <td>
      <pre><code class="html">&lt;input type="text" name="ExampleText"/&gt;</code></pre>
    </td>
    <td>
      <input type="text" name="ExampleText"/>
    </td>
  </tr>
  <tr>
    <td><a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input/time" title="<input> elements of type time create input fields designed to let the user easily enter a time (hours and minutes, and optionally seconds).">time</a></td>
    <td>A control for entering a time value with no time zone.</td>
    <td>
      <pre><code class="html">&lt;input type="time" name="ExampleTime"/&gt;</code></pre>
    </td>
    <td>
      <input type="time" name="ExampleTime"/>
    </td>
  </tr>
  <tr>
    <td><a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input/url" title="<input> elements of type url are used to let the user enter and edit a URL.">url</a></td>
    <td>A field for entering a URL. Looks like a <code>text</code> input, but has validation parameters and relevant keyboard in supporting browsers and devices with dynamic keyboards.</td>
    <td>
      <pre><code class="html">&lt;input type="url" name="ExampleUrl"&gt;</code></pre>
    </td>
    <td>
      <input type="url" name="ExampleUrl">
    </td>
  </tr>
 </tbody>
</table>
<p>Regardless of the type, the <code>&lt;input&gt;</code> element also has a <code>name</code> and <code>value</code> property.  The <code>name</code> is similar to a variable name, in that it is used to identify the input&rsquo;s value when we serialize the form (more about that later), and the <code>value</code> is the value the input currently is (this starts as the value you specify in the HTML, but it changes when the user edits it).</p>
<p>Additionally, checkboxes and radio buttons have a boolean <code>ischecked</code> property.  These indicate if the box/button is checked or not (and that the box/button&rsquo;s <code>value</code> should be submitted).</p>
<h3 id="the-textarea-element">The <code>&lt;textarea&gt;</code> Element</h3>
<p>The <a href="https://developer.mozilla.orghttps://developer.mozilla.org/en-US/docs/Web/HTML/Element/textarea" target="_blank"><code>&lt;textarea&gt;</code></a>
 element represents a multi-line text input.  Similar to terminal programs, this is represented by columns and rows, the numbers of which are set by the <code>cols</code> and <code>rows</code> attributes, respectively.  Thus:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>&lt;<span style="color:#f92672">textarea</span> <span style="color:#a6e22e">cols</span><span style="color:#f92672">=</span><span style="color:#e6db74">40</span> <span style="color:#a6e22e">rows</span><span style="color:#f92672">=</span><span style="color:#e6db74">5</span>&gt;&lt;/<span style="color:#f92672">textarea</span>&gt;</span></span></code></pre></div><p>Would look like:</p>
<textarea cols=40 rows=5></textarea>
<p>As with inputs, a <code>&lt;textarea&gt;</code> has a <code>name</code> and <code>value</code> attribute.</p>
<h3 id="the-select-element">The <code>&lt;select&gt;</code> Element</h3>
<p>The <a href="https://developer.mozilla.orghttps://developer.mozilla.org/en-US/docs/Web/HTML/Element/select" target="_blank"><code>&lt;select&gt;</code></a>
 element, along with <code>&lt;option&gt;</code> and <code>&lt;optgroup&gt;</code> make drop-down selection boxes.  The <code>&lt;select&gt;</code> takes a name attribute, while each <code>&lt;option&gt;</code> provides a different value.  The <code>&lt;options&gt;</code> can further be nested in <code>&lt;optgroup&gt;</code>s with their own labels.  The <code>&lt;select&gt;</code> also has a <code>multiple</code> attribute (to allow selecting multiple options), and <code>size</code> which determines how many options should be displayed at once (with scrolling if more are available).</p>
<p>For example:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>&lt;<span style="color:#f92672">select</span> <span style="color:#a6e22e">id</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;dino-select&#34;</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">optgroup</span> <span style="color:#a6e22e">label</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;Theropods&#34;</span>&gt;
</span></span><span style="display:flex;"><span>        &lt;<span style="color:#f92672">option</span>&gt;Tyrannosaurus&lt;/<span style="color:#f92672">option</span>&gt;
</span></span><span style="display:flex;"><span>        &lt;<span style="color:#f92672">option</span>&gt;Velociraptor&lt;/<span style="color:#f92672">option</span>&gt;
</span></span><span style="display:flex;"><span>        &lt;<span style="color:#f92672">option</span>&gt;Deinonychus&lt;/<span style="color:#f92672">option</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;/<span style="color:#f92672">optgroup</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">optgroup</span> <span style="color:#a6e22e">label</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;Sauropods&#34;</span>&gt;
</span></span><span style="display:flex;"><span>        &lt;<span style="color:#f92672">option</span>&gt;Diplodocus&lt;/<span style="color:#f92672">option</span>&gt;
</span></span><span style="display:flex;"><span>        &lt;<span style="color:#f92672">option</span>&gt;Saltasaurus&lt;/<span style="color:#f92672">option</span>&gt;
</span></span><span style="display:flex;"><span>        &lt;<span style="color:#f92672">option</span>&gt;Apatosaurus&lt;/<span style="color:#f92672">option</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;/<span style="color:#f92672">optgroup</span>&gt;
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#f92672">select</span>&gt;</span></span></code></pre></div><p>Displays as:</p>
<select id="dino-select">
    <optgroup label="Theropods">
        <option>Tyrannosaurus</option>
        <option>Velociraptor</option>
        <option>Deinonychus</option>
    </optgroup>
    <optgroup label="Sauropods">
        <option>Diplodocus</option>
        <option>Saltasaurus</option>
        <option>Apatosaurus</option>
    </optgroup>
</select>
<h3 id="the-label-element">The <code>&lt;label&gt;</code> Element</h3>
<p>A <a href="https://developer.mozilla.orghttps://developer.mozilla.org/en-US/docs/Web/HTML/Element/label" target="_blank"><code>&lt;label&gt;</code></a>
 element represents a caption for an element in the form.  It can be tied to a specific input using its <code>for</code> attribute, by setting its value to the <code>id</code> attribute of the associated input.  This allows screen readers to identify the label as belonging to the input, and also allows browsers to give focus or activate the input element when the label is clicked.</p>
<p>For example, if you create a checkbox with a label:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>&lt;<span style="color:#f92672">fieldset</span> <span style="color:#a6e22e">style</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;display:flex; align-items:center;&#34;</span>&gt;
</span></span><span style="display:flex;"><span>  &lt;<span style="color:#f92672">input</span> <span style="color:#a6e22e">type</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;checkbox&#34;</span> <span style="color:#a6e22e">id</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;example&#34;</span>/&gt;
</span></span><span style="display:flex;"><span>  &lt;<span style="color:#f92672">label</span> <span style="color:#a6e22e">for</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;example&#34;</span>&gt;Is Checked&lt;/<span style="color:#f92672">label</span>&gt;
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#f92672">fieldset</span>&gt;</span></span></code></pre></div><fieldset style="display:flex; align-items:center;">
  <input type="checkbox" id="example"/>
  <label for="example">Is Checked</label>
</fieldset>
<p>Clicking the label will toggle the checkbox!</p>
<h3 id="the-fieldset-element">The <code>&lt;fieldset&gt;</code> Element</h3>
<p>The <code>&lt;fieldset&gt;</code> element is used to group related form parts together, which can be captioned with a <code>&lt;legend&gt;</code>.  It also has a <code>for</code> attribute which can be set to the <code>id</code> of a form on the page to associate with, so that the fieldset will be serialized with the form (this is not necessary if the fieldset is inside the form).  Setting the fieldset&rsquo;s <code>disabled</code> attribute will also disable all elements inside of it.</p>
<p>For example:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>&lt;<span style="color:#f92672">fieldset</span>&gt;
</span></span><span style="display:flex;"><span>  &lt;<span style="color:#f92672">legend</span>&gt;Who is your favorite muppet?&lt;/<span style="color:#f92672">legend</span>&gt;
</span></span><span style="display:flex;"><span>  &lt;<span style="color:#f92672">input</span> <span style="color:#a6e22e">type</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;radio&#34;</span> <span style="color:#a6e22e">name</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;muppet&#34;</span> <span style="color:#a6e22e">id</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;kermit&#34;</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">label</span> <span style="color:#a6e22e">for</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;kermit&#34;</span>&gt;Kermit&lt;/<span style="color:#f92672">label</span>&gt;
</span></span><span style="display:flex;"><span>  &lt;/<span style="color:#f92672">input</span>&gt;
</span></span><span style="display:flex;"><span>  &lt;<span style="color:#f92672">input</span> <span style="color:#a6e22e">type</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;radio&#34;</span> <span style="color:#a6e22e">name</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;muppet&#34;</span> <span style="color:#a6e22e">id</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;animal&#34;</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">label</span> <span style="color:#a6e22e">for</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;animal&#34;</span>&gt;Animal&lt;/<span style="color:#f92672">label</span>&gt;
</span></span><span style="display:flex;"><span>  &lt;/<span style="color:#f92672">input</span>&gt;
</span></span><span style="display:flex;"><span>  &lt;<span style="color:#f92672">input</span> <span style="color:#a6e22e">type</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;radio&#34;</span> <span style="color:#a6e22e">name</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;muppet&#34;</span> <span style="color:#a6e22e">id</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;piggy&#34;</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">label</span> <span style="color:#a6e22e">for</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;piggy&#34;</span>&gt;Miss Piggy&lt;/<span style="color:#f92672">label</span>&gt;
</span></span><span style="display:flex;"><span>  &lt;/<span style="color:#f92672">input</span>&gt;
</span></span><span style="display:flex;"><span>  &lt;<span style="color:#f92672">input</span> <span style="color:#a6e22e">type</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;radio&#34;</span> <span style="color:#a6e22e">name</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;muppet&#34;</span> <span style="color:#a6e22e">id</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;gonzo&#34;</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">label</span> <span style="color:#a6e22e">for</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;gonzo&#34;</span>&gt;Gonzo&lt;/<span style="color:#f92672">label</span>&gt;
</span></span><span style="display:flex;"><span>  &lt;/<span style="color:#f92672">input</span>&gt;
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#f92672">fieldset</span>&gt;</span></span></code></pre></div><p>Would render:</p>
<style>fieldset>label {display: inline; margin-right: 2rem;} </style>
<fieldset>
  <legend>Who is your favorite muppet?</legend>
  <input type="radio" name="muppet" id="kermit">
    <label for="kermit">Kermit</label>
  </input>
  <input type="radio" name="muppet" id="animal">
    <label for="animal">Animal</label>
  </input>
  <input type="radio" name="muppet" id="piggy">
    <label for="piggy">Miss Piggy</label>
  </input>
  <input type="radio" name="muppet" id="gonzo">
    <label for="gonzo">Gonzo</label>
  </input>
</fieldset>
<h3 id="the-form-element">The <code>&lt;form&gt;</code> Element</h3>
<p>Finally, the <code>&lt;form&gt;</code> element wraps around all the <code>&lt;input&gt;</code>, <code>&lt;textarea&gt;</code>, and <code>&lt;select&gt;</code> elements, and gathers them along with any contained within associated <code>&lt;fieldset&gt;</code>s to submit in a serialized form.  This is done when an <code>&lt;input type=&quot;submit&quot;&gt;</code> is clicked within the form, when the enter key is pressed and the form has focus, or by calling the <code>submit()</code> method on the form with JavaScript.</p>
<p>There are a couple of special attributes we should know for the <code>&lt;form&gt;</code> element:</p>
<ul>
<li><code>action</code> - the URL this form should be submitted to.  Defaults to the URL the form was served from.</li>
<li><code>enctype</code> - the encoding strategy used, discussed in the next section.  Possible values are:
<ul>
<li><code>application/x-www-form-urlencoded</code> - the default</li>
<li><code>multipart/form-data</code> - must be used to submit files</li>
<li><code>text/plain</code> - useful for debugging</li>
</ul>
</li>
<li><code>method</code> - the HTTP method to submit the form using, most often GET or POST</li>
</ul>
<p>When the form is submitted, the form is serialized using the <code>enctype</code>, and submitted using the HTTP <code>method</code> to the URL specified by the <code>action</code> attribute.  Let&rsquo;s take a deeper look at this process next.</p>

            <footer class="footline">

            </footer>
          </article>

    
    
          <article class="default">
            <header class="headline">
            </header>
<h1 id="form-data">Form Data</h1>

<p>Form data is simply serialized key/value pairs pulled from a form and encoded using one of the three possible encoding strategies, and submitted using the specified method (usually GET or POST).</p>
<p>So when we submit a form containing two text inputs for first and last name:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>&lt;<span style="color:#f92672">form</span> <span style="color:#a6e22e">method</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;post&#34;</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">label</span> <span style="color:#a6e22e">for</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;First&#34;</span>&gt;First Name:&lt;/<span style="color:#f92672">label</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">input</span> <span style="color:#a6e22e">type</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;text&#34;</span> <span style="color:#a6e22e">name</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;First&#34;</span>/&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">label</span> <span style="color:#a6e22e">for</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;Last&#34;</span>&gt;Last Name:&lt;/<span style="color:#f92672">label</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">input</span> <span style="color:#a6e22e">type</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;text&#34;</span> <span style="color:#a6e22e">name</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;Last&#34;</span>/&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">input</span> <span style="color:#a6e22e">type</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;Submit&#34;</span> <span style="color:#a6e22e">value</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;Save Name&#34;</span>/&gt;
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#f92672">form</span>&gt;</span></span></code></pre></div><p>And enter the values &ldquo;Frank&rdquo; and &ldquo;Jones&rdquo;, the form is serialized as the key-value pairs:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;First&#34;</span>: <span style="color:#e6db74">&#34;Frank&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;Last&#34;</span>: <span style="color:#e6db74">&#34;Jones&#34;</span>
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div>
  
  
<div class="box notices cstyle info">
  <div class="box-label"><i class="fa-fw fas fa-info-circle"></i> Info</div>
  <div class="box-content">

<p>Here we are displaying the key-value pairs as JSON for legibility, but how the pairs ar encoded depends on the encoding strategy as discussed below.</p>
</div>
</div>
<p>If a form contains <em>multiple</em> inputs with the same name, they are serialized as an array, i.e. the form:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>&lt;<span style="color:#f92672">form</span> <span style="color:#a6e22e">method</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;post&#34;</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">label</span>&gt;Enter three numbers:&lt;/<span style="color:#f92672">label</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">input</span> <span style="color:#a6e22e">type</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;number&#34;</span> <span style="color:#a6e22e">name</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;Number&#34;</span>/&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">input</span> <span style="color:#a6e22e">type</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;number&#34;</span> <span style="color:#a6e22e">name</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;Number&#34;</span>/&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">input</span> <span style="color:#a6e22e">type</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;number&#34;</span> <span style="color:#a6e22e">name</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;Number&#34;</span>/&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">input</span> <span style="color:#a6e22e">type</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;Submit&#34;</span> <span style="color:#a6e22e">value</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;Save Numbers&#34;</span>/&gt;
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#f92672">form</span>&gt;</span></span></code></pre></div><p>Would be serialized as:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;Number&#34;</span> : [<span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">3</span>, <span style="color:#ae81ff">4</span>]
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>Finally, toggle inputs like checkboxes and radio buttons <em>only</em> submit a value when checked, i.e. given the following form:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>&lt;<span style="color:#f92672">form</span> <span style="color:#a6e22e">method</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;post&#34;</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">label</span>&gt;Do the thing:&lt;/<span style="color:#f92672">label</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">input</span> <span style="color:#a6e22e">type</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;checkbox&#34;</span> <span style="color:#a6e22e">name</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;DoTheThing&#34;</span> <span style="color:#a6e22e">value</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;thing&#34;</span>/&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">input</span> <span style="color:#a6e22e">type</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;Submit&#34;</span> <span style="color:#a6e22e">value</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;Save Numbers&#34;</span>/&gt;
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#f92672">form</span>&gt;</span></span></code></pre></div><p>Would serialize as:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{}</span></span></code></pre></div><p>When the checkbox is <strong>not</strong> checked, or:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;DoTheThing&#34;</span>: <span style="color:#e6db74">&#34;thing&#34;</span>
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>When the checkbox <strong>is</strong> checked.</p>
<p>Now that we&rsquo;ve discussed how inputs are serialized into key/value or key/array of value pairs, let&rsquo;s turn our attention to the method used to submit the form, and then look at each encoding strategy in turn.</p>
<h3 id="method">Method</h3>
<p>The HTTP method determines if the form data is sent as part of the <em>url</em> of the request, or in the <em>body</em> of the request.</p>
<h4 id="get-requests">GET Requests</h4>
<p>With a GET request, the serialized form data is appended to the url as a <em>query</em> or <em>search</em> parameter. This takes the form of a question mark: <code>?</code> followed by the serialized form data.  In addition, the serialized data must be url-encoded to ensure the URL remains valid, as it may contain reserved characters (i.e. the characters <code>:</code>,<code>/</code>,<code>?</code>,<code>#</code>, <code>&amp;</code>, and <code>=</code>) have special meanings in URLs, so the encoded data can&rsquo;t contain them).</p>
<p>For example, searching using Google uses a GET request, so when we type &ldquo;Razor Pages&rdquo; in into Google and click search, it makes a request against the URL: <code>https://www.google.com/search?q=razor+pages</code> (Note it adds additional form data fields for a variety of purposes).</p>
<p>A GET request is appropriate when the data you are submitting is small, like search terms or filter values.  Once you start submitting larger amounts of data (like parameters to build an object from), you&rsquo;ll probably want to switch to POST requests.  Also, remember the form data for GET requests are visible in the URL, so you&rsquo;ll want to use POST requests when seeing those values might be confusing or annoying to users.</p>
<p>Finally, passwords should <strong>NEVER</strong> be sent using a GET request, as doing so makes them visible in the URL.</p>

  
  
<div class="box notices cstyle tip">
  <div class="box-label"><i class="fa-fw fas fa-lightbulb"></i> Tip</div>
  <div class="box-content">

<p>The default method for form submission is a GET request, so if you don&rsquo;t specify the <code>method</code> parameter, the form will be submitted using this method.</p>
</div>
</div>
<h4 id="post-requests">POST Requests</h4>
<p>A POST request is submitted as the <em>body</em> of the request.  This is the most appropriate method for large submissions, submissions with data you don&rsquo;t want visibly displayed in the browser, and it is the <em>only</em> way to submit form data including files (which must be encoded using &ldquo;multipart/form-data&rdquo; as described below).</p>
<h3 id="encoding-strategies">Encoding Strategies</h3>
<p>There are two primary strategies for submitting data to a server <em>from HTML forms</em> (note that you can submit data to servers using other strategies when submitting from a program - we&rsquo;ll discuss some of these in the next chapter).  These strategies are <code>x-www-form-urlencoded</code> and <code>multipart/form-data</code>.  We&rsquo;ll take a look at how these encode data next.</p>
<h4 id="x-www-form-urlencoded">x-www-form-urlencoded</h4>
<p>The default encoding method is <code>application/x-www-form-urlencoded</code>, which encodes the form data as a string consisting of key/value pairs.  Each pair is joined by a <code>=</code> symbol, and pairs are in turn joined by <code>&amp;</code> symbols.  The key and value strings are further encoded using <a href="https://developer.mozilla.org/en-US/docs/Glossary/percent-encoding" target="_blank">percent encoding (URL encoding)</a>
, which replaces special characters with a code beginning with a percent sign (i.e. <code>&amp;</code> is encoded to <code>%26</code>).  This prevents misinterpretations of the key and value as additional pairs, etc.  Percent encoding is also used to encode URL segments (hence the name URL encoding).</p>
<p>Thus, the form:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>&lt;<span style="color:#f92672">form</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">input</span> <span style="color:#a6e22e">type</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;text&#34;</span> <span style="color:#a6e22e">name</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;Name&#34;</span> <span style="color:#a6e22e">value</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;Grover&#34;</span>/&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">select</span> <span style="color:#a6e22e">name</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;Color&#34;</span>&gt;
</span></span><span style="display:flex;"><span>        &lt;<span style="color:#f92672">option</span> <span style="color:#a6e22e">value</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;Red&#34;</span>&gt;Red&lt;/<span style="color:#f92672">option</span>&gt;
</span></span><span style="display:flex;"><span>        &lt;<span style="color:#f92672">option</span> <span style="color:#a6e22e">selected</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;true&#34;</span> <span style="color:#a6e22e">value</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;Blue&#34;</span>&gt;Blue&lt;/<span style="color:#f92672">option</span>&gt;
</span></span><span style="display:flex;"><span>        &lt;<span style="color:#f92672">option</span> <span style="color:#a6e22e">value</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;Green&#34;</span>&gt;Green&lt;/<span style="color:#f92672">option</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;/<span style="color:#f92672">select</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">input</span> <span style="color:#a6e22e">type</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;number&#34;</span> <span style="color:#a6e22e">name</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;Age&#34;</span> <span style="color:#a6e22e">value</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;36&#34;</span>/&gt;
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#f92672">form</span>&gt;</span></span></code></pre></div><p>Would be encoded as:</p>
<div class="wrap-code highlight"><pre tabindex="0"><code>Name=Grover&amp;Color=Blue&amp;Age=36</code></pre></div><p>The <a href="https://docs.microsoft.com/en-us/dotnet/api/system.web.httputility.urlencode?view=netcore-3.1" target="_blank">HTTPUtility</a>
 class in the <code>System.Web</code> namespace contains helpful methods for encoding and decoding URL strings.</p>
<p>URL-Encoded form data can be submitted with either a GET or POST request.  With a GET request, the form data is included in the URL&rsquo;s query (search) string, i.e. our form above might be sent to:</p>
<div class="wrap-code highlight"><pre tabindex="0"><code>www.sesamestreet.com/muppets/find?Name=Grover&amp;Color=Blue&amp;Age=36</code></pre></div><p>Which helps explain why the entire seralized form data needs to be URL encoded - it is included as part of the url!</p>
<p>When submitted as a post request, the string of form data is the body of the request.</p>
<h4 id="multipartform-data">multipart/form-data</h4>
<p>The encoding for <code>multipart/form-data</code> is a bit more involved, as it needs to deal with encoding both regular form values and binary file data.  It deals with this challenge by separating each key/value pair by a sequence of bytes known as a <em>boundary</em>, which does not appear in any of the files.  This boundary can then be used to split the body back into its constituent parts when parsing.  Each part of the body consists of its own <em>head</em> and <em>body</em> sections, with the body of most elements simply their value, while the body of file inputs is the file data encoded in base64.  Thus, the form:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>&lt;<span style="color:#f92672">form</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">input</span> <span style="color:#a6e22e">type</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;text&#34;</span> <span style="color:#a6e22e">name</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;Name&#34;</span> <span style="color:#a6e22e">value</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;Grover&#34;</span>/&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">select</span> <span style="color:#a6e22e">name</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;Color&#34;</span>&gt;
</span></span><span style="display:flex;"><span>        &lt;<span style="color:#f92672">option</span> <span style="color:#a6e22e">value</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;Red&#34;</span>&gt;Red&lt;/<span style="color:#f92672">option</span>&gt;
</span></span><span style="display:flex;"><span>        &lt;<span style="color:#f92672">option</span> <span style="color:#a6e22e">selected</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;true&#34;</span> <span style="color:#a6e22e">value</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;Blue&#34;</span>&gt;Blue&lt;/<span style="color:#f92672">option</span>&gt;
</span></span><span style="display:flex;"><span>        &lt;<span style="color:#f92672">option</span> <span style="color:#a6e22e">value</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;Green&#34;</span>&gt;Green&lt;/<span style="color:#f92672">option</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;/<span style="color:#f92672">select</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">input</span> <span style="color:#a6e22e">type</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;number&#34;</span> <span style="color:#a6e22e">name</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;Age&#34;</span> <span style="color:#a6e22e">value</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;36&#34;</span>/&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">input</span> <span style="color:#a6e22e">type</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;file&#34;</span> <span style="color:#a6e22e">name</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;Image&#34;</span> <span style="color:#a6e22e">value</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;Grover.jpg&#34;</span> /&gt;
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#f92672">form</span>&gt;</span></span></code></pre></div><p>Would be encoded into a POST request as:</p>
<div class="wrap-code highlight"><pre tabindex="0"><code>POST /test HTTP/1.1 
Host: foo.example
Content-Type: multipart/form-data;boundary=&#34;boundary&#34; 

--boundary 
Content-Disposition: form-data; name=&#34;Name&#34; 

Grover
--boundary 
Content-Disposition: form-data; name=&#34;Color&#34; 

Blue
--boundary 
Content-Disposition: form-data; name=&#34;Age&#34; 

36
--boundary 
Content-Disposition: form-data; name=&#34;Image&#34;; filename=&#34;Grover.jpg&#34; 

/9j/4AAQSkZJRgABAQEAYABgAAD/2wBDAAgGBgcGBQgHBwcJCQgKDBQNDAsLDBkSEw8UHRofHh0aHBwgJC4nICIsIxwcKDcpLDAxNDQ0Hyc5PTgyPC4zNDL/2wBDAQkJCQwLDBgNDRgyIRwhMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjI...
--boundary--</code></pre></div><p>Files can <em>only</em> be submitted using <code>multipart/form-data</code> encoding.  If you attempt to use <code>application/x-www-form-urlencoded</code>, only the file name will be submitted as the value.  Also, as <code>multipart/form-data</code> is always submitted as the body of the request, it can only be submitted as part of a POST request, never a GET.  So a form containing a <code>file</code> input should always specify:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>&lt;<span style="color:#f92672">form</span> <span style="color:#a6e22e">enctype</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;multipart/form-data&#34;</span> <span style="color:#a6e22e">method</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;POST&#34;</span>&gt;</span></span></code></pre></div>
            <footer class="footline">

            </footer>
          </article>

    
    
          <article class="default">
            <header class="headline">
            </header>
<h1 id="razor-pages-and-form-data">Razor Pages and Form Data</h1>

<p>While C# does provide utilities for parsing URL-encoded strings, the functionality of parsing incoming form data is built into the ASP.NET response handling.  Thus, when writing a Razor page application, we don&rsquo;t need to perform decoding on the form data - it has already been done for us.  There are several strategies built into Razor Pages to access this information:</p>
<h3 id="the-request-object">The Request Object</h3>
<p>The first of these is the <a href="https://docs.microsoft.com/en-us/dotnet/api/system.web.httprequest?view=netframework-4.8" target="_blank">HttpRequest</a>
 object, which is available as the <code>Request</code> property within a <code>Page</code>.  This object provides access to the <code>QueryString</code> and <code>Form</code>, as well as <code>Cookies</code>, <code>ServerVariables</code> and more.</p>
<p>If the form was submitted as a GET request, then the <code>Request.QueryString</code> is a collection of key-value pairs used like a dictionary, i.e. to access the value of the input with name &ldquo;Color&rdquo;, we would use: <code>Request.QueryString[&quot;Color&quot;]</code>.</p>
<p>Similarly, the <code>Form</code> also exposes the form content as a collection key-value pairs, so we could access a POST request&rsquo;s input with the name &ldquo;Color&rdquo; value with <code>Request.Form[&quot;Color&quot;]</code>.</p>
<p>Finally, the request also allows for checking <em>both</em> collections using its own accessor property, i.e. <code>Request[&quot;Color&quot;]</code> would provide the submitted value for the input &ldquo;Color&rdquo; if it was send with <em>either</em> a GET or POST request.</p>
<h3 id="parameter-binding">Parameter Binding</h3>
<p>A second approach to accessing form data in ASP.NET is <a href="https://docs.microsoft.com/en-us/aspnet/web-api/overview/formats-and-model-binding/parameter-binding-in-aspnet-web-api" target="_blank">Parameter Binding</a>
.  You&rsquo;ve already seen the <code>OnGet()</code> method of the <code>PageModel</code> class.  This is invoked every time a GET request to our server matches the page it is associated with.  We can also supply methods for other HTTP actions, i.e. POST, PUT, DELETE map to <code>OnPost()</code>, <code>OnPut()</code>, and <code>OnDelete()</code> respectively.  For each of these methods, we can use parameter binding to automatically parse and convert form data into parameter variables.</p>
<p>In its simplest form, we simply declare parameters whose type and name match those of our form.  Thus, for the form:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>&lt;<span style="color:#f92672">form</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">input</span> <span style="color:#a6e22e">type</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;text&#34;</span> <span style="color:#a6e22e">name</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;Name&#34;</span> <span style="color:#a6e22e">value</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;Grover&#34;</span>/&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">select</span> <span style="color:#a6e22e">name</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;Color&#34;</span>&gt;
</span></span><span style="display:flex;"><span>        &lt;<span style="color:#f92672">option</span> <span style="color:#a6e22e">value</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;Red&#34;</span>&gt;Red&lt;/<span style="color:#f92672">option</span>&gt;
</span></span><span style="display:flex;"><span>        &lt;<span style="color:#f92672">option</span> <span style="color:#a6e22e">selected</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;true&#34;</span> <span style="color:#a6e22e">value</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;Blue&#34;</span>&gt;Blue&lt;/<span style="color:#f92672">option</span>&gt;
</span></span><span style="display:flex;"><span>        &lt;<span style="color:#f92672">option</span> <span style="color:#a6e22e">value</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;Green&#34;</span>&gt;Green&lt;/<span style="color:#f92672">option</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;/<span style="color:#f92672">select</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">input</span> <span style="color:#a6e22e">type</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;number&#34;</span> <span style="color:#a6e22e">name</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;Age&#34;</span> <span style="color:#a6e22e">value</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;36&#34;</span>/&gt;
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#f92672">form</span>&gt;</span></span></code></pre></div><p>We could add several parameters to our <code>OnGet()</code> corresponding the names and types of the form fields:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>OnGet(<span style="color:#66d9ef">string</span> Name, <span style="color:#66d9ef">string</span> Color, <span style="color:#66d9ef">int</span> Age){
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// Name would be &#34;Grover&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// Color would be &#34;Blue&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// Number would be 36</span>
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>The form values are automatically converted and bound to the corresponding parameters of the <code>OnGet</code> method.  If the form does not contain the corresponding parameter, then it is assigned the default value (for value types) or null (for reference types).</p>

  
  
<div class="box notices cstyle info">
  <div class="box-label"><i class="fa-fw fas fa-info-circle"></i> Info</div>
  <div class="box-content">

<p>There are times you may not want to use default values for value types.  For example, in the form above, if the <code>Age</code> property is not specified, it will default to <code>0</code>.  If we instead wanted it to be <code>null</code>, we could use the <a href="https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/builtin-types/nullable-value-types" target="_blank"><code>Nullable&lt;T&gt;</code></a>
 type:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>OnGet(<span style="color:#66d9ef">string</span> Name, <span style="color:#66d9ef">string</span> Color, Nullable&lt;<span style="color:#66d9ef">int</span>&gt; Age) {...}</span></span></code></pre></div><p>This allows <code>Age</code> to be <code>null</code>, in addition to all its normal possible values.  You can also specify a nullable type with the <code>?</code> shorthand, i.e.:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>OnGet(<span style="color:#66d9ef">string</span> Name, <span style="color:#66d9ef">string</span> Color, <span style="color:#66d9ef">int?</span> Age) {...}</span></span></code></pre></div></div>
</div>
<h3 id="model-binding">Model Binding</h3>
<p>A third approach is <a href="https://docs.microsoft.com/en-us/aspnet/core/mvc/models/model-binding?view=aspnetcore-3.1" target="_blank">Model Binding</a>
, where decorators are used on public properties of the <code>PageModel</code> class to indicate that they should be bound to form data, i.e.:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Muppet</span> : PageModel {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt;The muppet&#39;s name&lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">    [BindProperty]</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">string</span> Name { <span style="color:#66d9ef">get</span>; <span style="color:#66d9ef">set</span>; }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt;The muppet&#39;s color&lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">    [BindProperty]</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">string</span> Color { <span style="color:#66d9ef">get</span>; <span style="color:#66d9ef">set</span>; }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">///&lt;summary&gt;The muppet&#39;s age&lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">    [BindProperty]</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">int</span> Age {<span style="color:#66d9ef">get</span>; <span style="color:#66d9ef">set</span>;}    
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>When set up this way, the properties will be populated with the corresponding form data on POST, PUT, and PATCH requests.  By default, they will <em>not</em> be populated on GET requests, though you can override this behavior with <code>SupportsGet</code>:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt;The muppet&#39;s name&lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">    [BindProperty(SupportGet = true)]</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">string</span> Name { <span style="color:#66d9ef">get</span>; <span style="color:#66d9ef">set</span>; }</span></span></code></pre></div><p>Finally, we can indicate <em>all</em> properties of the model class should be bound with a single <code>[BindsProperties]</code> decorator on the class, i.e.:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#a6e22e">[BindProperties(SupportsGet = true)]</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Muppet</span> : PageModel {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt;The muppet&#39;s name&lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">string</span> Name { <span style="color:#66d9ef">get</span>; <span style="color:#66d9ef">set</span>; }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt;The muppet&#39;s color&lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">string</span> Color { <span style="color:#66d9ef">get</span>; <span style="color:#66d9ef">set</span>; }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">///&lt;summary&gt;The muppet&#39;s age&lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">int</span> Age {<span style="color:#66d9ef">get</span>; <span style="color:#66d9ef">set</span>;}    
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div>
  
  
<div class="box notices cstyle info">
  <div class="box-label"><i class="fa-fw fas fa-info-circle"></i> Info</div>
  <div class="box-content">

<p>You might be wondering why ModelBinding does not work with GET requests by default.  In the previous section, we discussed when to use GET or POST requests to submit form data - we use GET requests for smaller data we don&rsquo;t mind displaying the URL, like search terms or filter values.  We use POST requests for large data, especially data we will use to populate an object.  So when using Model Binding, using the POST method is most appropriate.  Microsoft choose to reinforce this practice through the choice to not bind GET requests by default.</p>
</div>
</div>

            <footer class="footline">

            </footer>
          </article>

    
    
          <article class="default">
            <header class="headline">
            </header>
<h1 id="validation">Validation</h1>

<p>Validation refers to the process of making sure the submitted data matches our expectations.  Validation can be done client-side or server-side.  For example, we can use the built-in HTML form validation properties to enforce rules, like a number that must be positive:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>&lt;<span style="color:#f92672">input</span> <span style="color:#a6e22e">type</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;number&#34;</span> <span style="color:#a6e22e">min</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;0&#34;</span> <span style="color:#a6e22e">name</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;Age&#34;</span> <span style="color:#a6e22e">required</span>&gt;</span></span></code></pre></div><p>If a user attempts to submit a form containing this input is submitted, and the value is less than 0, the browser will display an error message instead of submitting.  In addition, the psuedo-css class <code>:invalid</code> will be applied to the element.</p>
<p>We can also mark inputs as required using the <code>required</code> attribute.  The browser will refuse to submit the form until all required inputs are completed. Inputs with a <code>required</code> attribute also receive the <code>:required</code> pseudo-class, allowing you to assign specific styles to them.</p>
<p>You can read more about HTML Form validation on <a href="https://developer.mozilla.org/en-US/docs/Learn/Forms/Form_validation" target="_blank">MDN</a>
.</p>
<p>Client-side validation is a good idea, because is minimizes invalid requests against our web application.  However, we cannot always depend on it, so we <em>also</em> need to implement server-side validation.  We can write custom logic for doing this, but Razor Pages also supports special validation decorators for bound properties.  For example, the corresponding validation for the input above would be:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#a6e22e">[BindProperty]</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">[Required]</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">[Range(0, int.MaxValue)]</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">int</span> Age { <span style="color:#66d9ef">get</span>; <span style="color:#66d9ef">set</span>; }</span></span></code></pre></div><p>The available validation decorators are:</p>
<ul>
<li><code>[CreditCard]</code>: Validates that the property has a credit card format. Requires jQuery Validation Additional Methods.</li>
<li><code>[Compare]</code>: Validates that two properties in a model match.</li>
<li><code>[EmailAddress]</code>: Validates that the property has an email format.</li>
<li><code>[Phone]</code>: Validates that the property has a telephone number format.</li>
<li><code>[Range]</code>: Validates that the property value falls within a specified range.</li>
<li><code>[RegularExpression]</code>: Validates that the property value matches a specified regular expression.</li>
<li><code>[Required]</code>: Validates that the field is not null. See [Required] attribute for details about this attribute&rsquo;s behavior.</li>
<li><code>[StringLength]</code>: Validates that a string property value doesn&rsquo;t exceed a specified length limit.</li>
<li><code>[Url]</code>: Validates that the property has a URL format.</li>
</ul>
<p>If validation fails, then the <code>PageModel</code>&rsquo;s <code>IsValid</code> attribute is false.</p>
<p>You can read more about server-side validation with Razor pages in the <a href="https://docs.microsoft.com/en-us/aspnet/core/mvc/models/validation?view=aspnetcore-3.1" target="_blank">Microsoft Documentation</a>
.</p>

            <footer class="footline">

            </footer>
          </article>

    
    
          <article class="default">
            <header class="headline">
            </header>
<h1 id="summary">Summary</h1>

<p>In this chapter we looked at how data is handled in web applications.  We saw how forms can be used to submit data to our server, and examined several common encoding strategies.  We also saw how we can retrieve this data in our Razor Pages - through the <code>Request</code> object, or by parameter or model binding. Finally, we discussed validating submitted values, on both the client and server side of a HTTP request.</p>
<p>You should now be able to handle creating web forms and processing the submitted data.</p>

            <footer class="footline">

            </footer>
          </article>

          </section>
    
    
          <article class="chapter">
            <header class="headline">
            </header>


<div class="article-subheading">Chapter 4</div>
<h1 id="web-apis">Web APIs</h1>

<p>Making the Web Accessible - for Programs</p>

            <footer class="footline">

            </footer>
          </article>

          <section>
            <h1 class="a11y-only">Subsections of Web APIs</h1>
    
    
          <article class="default">
            <header class="headline">
            </header>
<h1 id="introduction">Introduction</h1>

<p>Not all web applications are built to be viewed in a browser.  Many are built to be used by other programs.  We call these web applications Web APIs (Application Programming Interfaces).  These also make HTTP or HTTPS requests against our apps, but usually instead of serving HTML, we serve some form of serialized data instead - most commonly XML or JSON.</p>

            <footer class="footline">

            </footer>
          </article>

    
    
          <article class="default">
            <header class="headline">
            </header>
<h1 id="making-requests">Making Requests</h1>

<p>Making a HTTP request is a multi-step process.  First you must establish a connection with the server, then create the request data, then you must stream that data to your server through the connection.  Once the server has received and processed your request data, it should stream a response back to you.</p>
<p>You can write code to handle each step, but most programming languages provide one or more libraries that provide a level of abstraction to this process. The C# language actually offers several options in its system libraries, and there are multiple open-source options as well.</p>
<h3 id="webrequest">WebRequest</h3>
<p>The simplest of these is the <code>WebRequest</code> object.  It represents and carries out a single HTTP request and provides the response.  Let&rsquo;s take a look at an example, which retrieves a &ldquo;Joke of the Day&rdquo; from a web API at <a href="https://jokes.one" target="_blank">https://jokes.one</a>
:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>WebRequest request = WebRequest.Create(<span style="color:#e6db74">&#34;http://api.jokes.one/jod&#34;</span>);</span></span></code></pre></div><p>This one line of code creates the <code>WebRequest</code> object.  Notice that we are <strong>not using a constructor</strong>.  Instead, we invoke a <code>Create()</code> method.  This is an example of the <a href="https://en.wikipedia.org/wiki/Factory_method_pattern" target="_blank">Factory Method Pattern</a>
, which you will learn more about in CIS 501.  But to briefly introduce the concept, the <code>WebRequest</code> class is actually a <em>base class</em> for a multiple different classes, each representing a <em>specific kind</em> of web request (i.e. using HTTP, HTTPS, FTP and so on).  Based on the URI supplied to <code>WebRequest.Create(Uri uri)</code>, the method will determine the appropriate kind of request to make, and create and return the corresponding object.</p>
<p>Now that we have our request, we can send it and obtain a response with:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>WebResponse response = request.GetResponse();</span></span></code></pre></div><p>This opens the connection to the server, streams the request to it, and then captures the sever&rsquo;s response.  We can access this response as a stream (similar to how we would read a file):</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">using</span> Stream responseStream = response.GetStream() 
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  StreamReader reader = <span style="color:#66d9ef">new</span> StreamReader(responseStream);
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">string</span> responseText= reader.ReadToEnd();
</span></span><span style="display:flex;"><span>  Console.WriteLine(responseText);
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>You likely are wondering what the <code>using</code> and curly braces <code>{}</code> are doing in this code.  They are there because the <code>Stream</code> object implements the <code>IDisposable</code> interface.  We&rsquo;ll discuss this in detail in the next section.  But for now, let&rsquo;s focus on how we use the stream.  First we create a <code>StreamReader</code> to read it:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>  StreamReader reader = <span style="color:#66d9ef">new</span> StreamReader(responseStream);</span></span></code></pre></div><p>Then read to the end of the stream:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>  <span style="color:#66d9ef">string</span> responseFromServer = reader.ReadToEnd();</span></span></code></pre></div><p>And write the response&rsquo;s text to the console:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>  Console.WriteLine(responseText);</span></span></code></pre></div><p>Finally, we must close the <code>WebResponse</code> object&rsquo;s connection to the server once we are done:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>  response.Close();</span></span></code></pre></div><p>This last step is important, as the open connection is actually managed by our operating system, and unless we close it, our system resources will be tied up, making our computer slower and potentially unable to make web requests for other programs (including your browser)!</p>

            <footer class="footline">

            </footer>
          </article>

    
    
          <article class="default">
            <header class="headline">
            </header>
<h1 id="working-with-disposables">Working With Disposables</h1>

<p>In the previous section, we looked at a line of code that included the keyword <code>using</code> in a way you haven&rsquo;t probably seen it before:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">using</span> Stream responseStream = response.GetStream() 
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">// TODO: Use the responseStream</span>
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>Let&rsquo;s examine this statement in more detail.  This use of <code>using</code> is a <a href="https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/keywords/using-statement" target="_blank">using statement</a>
, not to be confused with a <a href="https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/keywords/using-directive" target="_blank">using directive</a>
.</p>
<p>When you put a statement like <code>using System.Text</code>, you are using the <em>using directive</em>, which instructs the compiler to use types in the corresponding namespace without needing to provide the fully qualified namespace. You&rsquo;ve been using this technique for some time, so it should be familiar to you.</p>
<p>In contrast, the <em>using statement</em> is used in the body of your code in conjunction with an object implementing the <code>IDisposable</code> interface.  Objects that implement this interface have a <code>Dispose()</code> method, which needs to be called when you are done with them.  These kinds of objects typically access some resource from outside of the program, which needs to be released when you are done with it.</p>
<h4 id="managed-vs-unmanaged-resources">Managed vs. Unmanaged Resources</h4>
<p>To understand this better, let&rsquo;s talk about <em>managed</em> vs. <em>unmanaged</em> resources.  We say a resource is <em>managed</em> when obtaining and releasing it is handled by the language.  Memory is a great example of this.  In C#, we are using <em>managed memory</em>.  When we invoke a constructor or declare an array, the interpreter automatically creates the memory we need to hold them.</p>
<p>In contrast, C uses <em>unmanaged memory</em>.  When we want to create an array, we must <em>allocate</em> that memory with <code>alloc()</code>, <code>calloc()</code>, or <code>malloc()</code> function call.</p>
<p>This might not seem very different, until we are done with the array.  In C#, we can simply let it fall out of scope, knowing the garbage collector should eventually free that memory.  But in a C program, we must manually free the memory with a call to <code>free()</code>.</p>
<p>Sometimes in C#, we need to access some resource in a way that is unmanaged - in which case, we must be sure to free the resource when we are done with it.</p>
<h4 id="idisposable">IDisposable</h4>
<p>The <code>IDisposable()</code> interface provides a standard way of handling this kind of situation. It requires any class implementing it to define a <code>Dispose()</code> method that frees any unmanaged resources.  A <em>stream</em> (the data being read in from a file, the network, or a terminal) is a good example of an unmanaged resource - the stream is actually created by the operating system, and the <code>Stream</code> object (a <code>FileStream</code>, <code>BufferedStream</code>, etc) is a C# object providing access to it.</p>
<p>Let&rsquo;s focus on a <code>FileStream</code> for a moment.  One is created every time you ask the operating system to open a file, i.e.:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>FileStream fs = File.OpenRead(<span style="color:#e6db74">&#34;somefile.txt&#34;</span>);</span></span></code></pre></div><p>The <code>File.OpenRead()</code> method asks the operating system to provide a stream to the file named <code>&quot;somefile.txt&quot;</code>.  We can then read that stream until we reach the end of file marker (indicating we&rsquo;ve read the entire file):</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">byte</span> data = fs.ReadByte();
</span></span><span style="display:flex;"><span><span style="color:#75715e">// Invariant: while there are bytes in the file to read</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">while</span>(data != -<span style="color:#ae81ff">1</span>)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">// Write the current byte to the console</span>
</span></span><span style="display:flex;"><span>  System.Out.Write(data);
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">// Read the next byte</span>
</span></span><span style="display:flex;"><span>  data = fs.ReadByte();
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>Once we&rsquo;ve finished reading the file, we need to call <code>Dispose()</code> on the stream to tell the operating system that we&rsquo;re done with it:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>fs.Dispose();</span></span></code></pre></div><p>If we don&rsquo;t, then the operating system will assume we&rsquo;re still working with the file, and refuse to let any other program read it.  Including our own program, if we were to run it again.</p>
<p>But what happens if an error occurs while reading the file? We&rsquo;ll never reach the call to <code>Dispose()</code>, so we&rsquo;ll <em>never free the file</em>!  In order to access it, we&rsquo;d have to restart the computer.  Not great.</p>
<p>We <em>could</em> manage this with a <code>try/catch/finally</code>, i.e.:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">try</span> 
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  FileStream fs = File.OpenRead(<span style="color:#e6db74">&#34;somefile.txt&#34;</span>);
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">byte</span> data = fs.ReadByte();
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">// Invariant: while there are bytes in the file to read</span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">while</span>(data != -<span style="color:#ae81ff">1</span>)
</span></span><span style="display:flex;"><span>  {
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// Write the current byte to the console</span>
</span></span><span style="display:flex;"><span>    System.Out.Write(data);
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// Read the next byte</span>
</span></span><span style="display:flex;"><span>    data = fs.ReadByte();
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>  fs.Dispose();
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">catch</span>(Exception e) 
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">// Do something with e</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">finally</span>
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  fs.Dispose();
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>But you have to catch all exceptions.</p>
<h4 id="using-statement">Using Statement</h4>
<p>A using statement operates similarly, but takes far less typing:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">using</span> FileStream fs = File.OpenRead(<span style="color:#e6db74">&#34;somefile.txt&#34;</span>)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">byte</span> data = fs.ReadByte();
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">// Invariant: while there are bytes in the file to read</span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">while</span>(data != -<span style="color:#ae81ff">1</span>)
</span></span><span style="display:flex;"><span>  {
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// Write the current byte to the console</span>
</span></span><span style="display:flex;"><span>    System.Out.Write(data);
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// Read the next byte</span>
</span></span><span style="display:flex;"><span>    data = fs.ReadByte();
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>It also comes with some benefits.  One, it creates a new scope (within the <code>{}</code> following the using statement).  If for some reason the stream can&rsquo;t be opened, this scope is skipped over.  Similarly it jumps execution to the end of the scope if an error occurs.  Finally, it <em>automatically</em> calls <code>Dispose()</code> when the scope ends.</p>
<h4 id="syntax-shorthand">Syntax Shorthand</h4>
<p>As of C# 8.0, a shorthand for the using statement that omits the scope markers (the <code>{}</code>) is available.  In this case, the scope is from the start of the <code>using</code> statement to the end of its containing scope (usually a method):</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">using</span> FileStream fs = File.OpenRead(<span style="color:#e6db74">&#34;somefile.txt&#34;</span>);
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">byte</span> data = fs.ReadByte();
</span></span><span style="display:flex;"><span><span style="color:#75715e">// Invariant: while there are bytes in the file to read</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">while</span>(data != -<span style="color:#ae81ff">1</span>)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">// Write the current byte to the console</span>
</span></span><span style="display:flex;"><span>  System.Out.Write(data);
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">// Read the next byte</span>
</span></span><span style="display:flex;"><span>  data = fs.ReadByte();
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>This format can be nice when you need to nest multiple <code>using</code> statements, but I would suggest sticking with the scoped version until you are comfortable with the concepts involved.</p>

            <footer class="footline">

            </footer>
          </article>

    
    
          <article class="default">
            <header class="headline">
            </header>
<h1 id="parsing-api-data">Parsing API Data</h1>

<p>Web APIs typically provide their data in a structured format, i.e. XML or JSON.  To use this within a C# program you&rsquo;ll need to either parse it or convert it into an object or objects.</p>
<p>The Joke of the Day API can provide either - we just need to specify our preference with a <code>Accept</code> header in our HTTP request. This header lets the server know what format(s) of data we are ready to process.  XML is signified by the MIME type <code>application/xml</code> and JSON by <code>application/json</code>.</p>
<p>To set this (or any other header) in our <code>WebRequest</code> object, we use the <code>Header</code> property&rsquo;s <code>Add()</code> method:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>WebRequest request = WebRequest.Create(<span style="color:#e6db74">&#34;http://api.jokes.one/jod&#34;</span>);
</span></span><span style="display:flex;"><span>request.Headers.Add(<span style="color:#e6db74">&#34;Accept&#34;</span>, <span style="color:#e6db74">&#34;application/json&#34;</span>);</span></span></code></pre></div><p>For JSON, or:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>WebRequest request = WebRequest.Create(<span style="color:#e6db74">&#34;http://api.jokes.one/jod&#34;</span>);
</span></span><span style="display:flex;"><span>request.Headers.Add(<span style="color:#e6db74">&#34;Accept&#34;</span>, <span style="color:#e6db74">&#34;application/xml&#34;</span>);</span></span></code></pre></div><p>For XML.</p>
<h4 id="parsing-xml">Parsing XML</h4>
<p>Let&rsquo;s start by examining the older format, XML.  Assuming you have set the <code>Accept</code> header as discussed above, you will receive a response similar to (but with a different joke):</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#f92672">&lt;response&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&lt;success&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;total&gt;</span>1<span style="color:#f92672">&lt;/total&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&lt;/success&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&lt;contents&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;jokes&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&lt;description&gt;</span>Joke of the day <span style="color:#f92672">&lt;/description&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&lt;language&gt;</span>en<span style="color:#f92672">&lt;/language&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&lt;background/&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&lt;category&gt;</span>jod<span style="color:#f92672">&lt;/category&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&lt;date&gt;</span>2021-11-29<span style="color:#f92672">&lt;/date&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&lt;joke&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;title&gt;</span>Signs for every job<span style="color:#f92672">&lt;/title&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;lang&gt;</span>en<span style="color:#f92672">&lt;/lang&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;length&gt;</span>1749<span style="color:#f92672">&lt;/length&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;clean&gt;</span>0<span style="color:#f92672">&lt;/clean&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;racial&gt;</span>0<span style="color:#f92672">&lt;/racial&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;date&gt;</span>2021-11-29<span style="color:#f92672">&lt;/date&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;id&gt;</span>HqJ1i9L1ujVCcZmS5C4nhAeF<span style="color:#f92672">&lt;/id&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;text&gt;</span>
</span></span><span style="display:flex;"><span>        In the front yard of a funeral home, &#34;Drive carefully, we&#39;ll wait.&#34; On an electrician&#39;s truck, &#34;Let us remove your shorts.&#34; Outside a radiator repair shop, &#34;Best place in town to take a leak.&#34; In a non-smoking area, &#34;If we see you smoking, we will assume you are on fire and take appropriate action.&#34; On a maternity room door, &#34;Push, Push, Push.&#34; On a front door, &#34;Everyone on the premises is a vegetarian except the dog.&#34; At an optometrist&#39;s office, &#34;If you don&#39;t see what you&#39;re looking for, you&#39;ve come to the right place.&#34; On a taxidermist&#39;s window, &#34;We really know our stuff.&#34; On a butcher&#39;s window, &#34;Let me meat your needs.&#34; On a butcher&#39;s window, &#34;You can beat our prices, but you can&#39;t beat our meat.&#34; On a fence, &#34;Salesmen welcome. Dog food is expensive.&#34; At a car dealership, &#34;The best way to get back on your feet - miss a car payment.&#34; Outside a muffler shop, &#34;No appointment necessary. We&#39;ll hear you coming.&#34; In a dry cleaner&#39;s emporium, &#34;Drop your pants here.&#34; On a desk in a reception room, &#34;We shoot every 3rd salesman, and the 2nd one just left.&#34; In a veterinarian&#39;s waiting room, &#34;Be back in 5 minutes. Sit! Stay!&#34; At the electric company, &#34;We would be delighted if you send in your bill. However, if you don&#39;t, you will be.&#34; In a Beauty Shop, &#34;Dye now!&#34; In a Beauty Shop, &#34;We curl up and Dye for you.&#34; On the side of a garbage truck, &#34;We&#39;ve got what it takes to take what you&#39;ve got.&#34; (Burglars please copy.) In a restaurant window, &#34;Don&#39;t stand there and be hungry, come in and get fed up.&#34; Inside a bowling alley, &#34;Please be quiet. We need to hear a pin drop.&#34; In a cafeteria, &#34;Shoes are required to eat in the cafeteria. Socks can eat any place they want.&#34;
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;/text&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&lt;/joke&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;/jokes&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;copyright&gt;</span>2019-20 https://jokes.one<span style="color:#f92672">&lt;/copyright&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&lt;/contents&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;/response&gt;</span></span></span></code></pre></div><p>We can parse this response with C#&rsquo;s <a href="https://docs.microsoft.com/en-us/dotnet/api/system.xml.xmldocument?view=net-6.0" target="_blank">XmlDocument Class</a>
 from the <code>System.Xml</code> namespace.  First, we create an instance of the class, using our response text.  We can use one of the <code>XmlDocument.Load()</code> overrides, which takes a stream, to process our response stream directly:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">using</span> Stream responseStream = response.GetStream() 
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  XmlDocument xDoc = <span style="color:#66d9ef">new</span> XmlDocument();
</span></span><span style="display:flex;"><span>  xDoc.Load(responseStream);
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">// TODO: get our joke!</span>
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>Then we can query the <code>XmlDocument</code> for the tag we care about, i.e. <em>response &gt; contents &gt; jokes &gt; joke &gt; text</em> (the text of the joke).  We use XPath syntax for this:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>  <span style="color:#66d9ef">var</span> node = xDoc.SelectSingleNode(<span style="color:#e6db74">&#34;/response/contents/jokes/joke/text&#34;</span>);</span></span></code></pre></div><p><a href="https://en.wikipedia.org/wiki/XPath" target="_blank">XPath</a>
 is a query language, much like CSS selectors, which allow you to navigate a XML document in a lot of different ways.  In this case, we are just finding the exact element based on its path.  Then we can pull its value, and do something with it (such as logging it to the console):</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>  Console.WriteLine(node.InnerText);</span></span></code></pre></div><h4 id="parsing-json">Parsing JSON</h4>
<p>JavaScript Object Notation (JSON) has become a popular format for web APIs, as it usually requires less characters than the corresponding XML, and is natively serializable from JavaScript making it extremely compatible with client-side web applications.</p>
<p>Assuming you have set the <code>Accept</code> header as discussed above, you will receive a response similar to (but with a different joke):</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;success&#34;</span>:{
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;total&#34;</span>:<span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>  },
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;contents&#34;</span>:{
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;jokes&#34;</span>:[
</span></span><span style="display:flex;"><span>      {
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;description&#34;</span>:<span style="color:#e6db74">&#34;Joke of the day &#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;language&#34;</span>:<span style="color:#e6db74">&#34;en&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;background&#34;</span>:<span style="color:#e6db74">&#34;&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;category&#34;</span>:<span style="color:#e6db74">&#34;jod&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;date&#34;</span>:<span style="color:#e6db74">&#34;2021-11-30&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;joke&#34;</span>:{
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">&#34;title&#34;</span>:<span style="color:#e6db74">&#34;Class With Claus&#34;</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">&#34;lang&#34;</span>:<span style="color:#e6db74">&#34;en&#34;</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">&#34;length&#34;</span>:<span style="color:#e6db74">&#34;78&#34;</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">&#34;clean&#34;</span>:<span style="color:#66d9ef">null</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">&#34;racial&#34;</span>:<span style="color:#66d9ef">null</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">&#34;date&#34;</span>:<span style="color:#e6db74">&#34;2021-11-30&#34;</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">&#34;id&#34;</span>:<span style="color:#e6db74">&#34;LuVeRJsEIzCzvTnRmBTHXweF&#34;</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">&#34;text&#34;</span>:<span style="color:#e6db74">&#34;Q: What do you say to Santa when he&#39;s taking attendance at school?\nA: Present.&#34;</span>
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>      }
</span></span><span style="display:flex;"><span>    ],
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;copyright&#34;</span>:<span style="color:#e6db74">&#34;2019-20 https:\/\/jokes.one&#34;</span>
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>The C# system libraries provide JSON support in the <code>System.Text.Json</code> namespace using the <a href="https://docs.microsoft.com/en-us/dotnet/api/system.text.json.jsonserializer?view=net-6.0" target="_blank">JsonSerializer</a>
 class. The default behavior of the deserializer is to deserialize into a <code>JsonDocument</code> composed of nested <code>JsonElement</code> objects - essentially, dictionaries of dictionaries.  As with the <code>XDocument</code>, we can deserialize JSON directly from a <code>Stream</code>:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">using</span> Stream responseStream = response.GetStream() 
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  JsonDocument jDoc = JsonSerializer.Deserialize(responseStream);
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">// TODO: get our joke!</span>
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>Then we can navigate from the root element (a <code>JsonElement</code> instance) down the nested path of key/value pairs, by calling <code>GetProperty()</code> to access each successive property, and then print the joke text to the console:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>  <span style="color:#66d9ef">var</span> contents = jDoc.RootElement.GetProperty(<span style="color:#e6db74">&#34;contents&#34;</span>);
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">var</span> jokes = contents.GetProperty(<span style="color:#e6db74">&#34;jokes&#34;</span>);
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">var</span> jokeData = jokes[<span style="color:#ae81ff">0</span>];
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">var</span> joke = jokeData.GetProperty(<span style="color:#e6db74">&#34;joke&#34;</span>);
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">var</span> text = joke.GetProperty(<span style="color:#e6db74">&#34;text&#34;</span>);
</span></span><span style="display:flex;"><span>  Console.WriteLine(text);</span></span></code></pre></div><!-- 
This approach can be cumbersome, but there is another possibility - to deserialize the JSON directly into a C# object.  Let's look at that next.


#### Deserializing JSON into a C# Object

The `JsonSerializer` also allows us to deserialize JSON directly into a corresponding C# object.  For this to work, we have to define the structure of this object to match our expected response.  Since our JSON is a nested structure, we'll actually need _multiple_ classes to represent it.  Let's start with the innermost one - the joke itself, which has a structure like:

```json
{
  "title":"Class With Claus",
  "lang":"en",
  "length":"78",
  "clean":null,
  "racial":null,
  "date":"2021-11-30",
  "id":"LuVeRJsEIzCzvTnRmBTHXweF",
  "text":"Q: What do you say to Santa when he's taking attendance at school?\nA: Present."
}
```

We need to reproduce this as a C# class, converting the JSON properties into C# equivalents i.e.:

```csharp
public class Joke
{
  [JsonPropertyName("title")]
  public string Title {get; set;}

  [JsonPropertyName("lang")]
  public string Lang {get; set;}

  [JsonPropertyName("length")]
  public int Length {get; set;}

  [JsonPropertyName("clean")]
  public bool? Clean {get; set;}

  [JsonPropertyName("racial")]
  public bool? Racial {get; set;}

  [JsonPropertyName("date")]
  public DateTime Date {get; set;}

  [JsonPropertyName("id")]
  public string Id {get; set;}

  [JsonPropertyName("text")]
  public string Text {get; set;}
}
```

Note that for JSON, the standard naming convention is to use Camel Case property names, not the Pascal Case we use in C#.  The `[JsonPropertyName()]` attribute from the `System.Text.Json.Serialization` namespace allows us to indicate how the name needs to be transformed when we transform to and from a JSON string to match both naming conventions.

The `Joke` is then nested in a second object that provides additional metadata describing the joke:

```json
{
  "description":"Joke of the day ",
  "language":"en",
  "background":"",
  "category":"jod",
  "date":"2021-11-30",
  "joke":{...}
}
```

All we really care about here is the joke itself.  But the `JsonSerializer` will throw an error unless all properties are accounted for.  However, it does allow a bit of a wildcard in the form of a `Dictionary<string, JsonElement>` property - if we provide one named `ExtensionData`, then any property not otherwise present in the object will be mapped to it.  Let's take advantage of this to simplify our next class:

-->
            <footer class="footline">

            </footer>
          </article>

    
    
          <article class="default">
            <header class="headline">
            </header>
<h1 id="asynchronous-requests">Asynchronous Requests</h1>

<p>Now that we&rsquo;re more comfortable with <code>using</code> statements, let&rsquo;s return to our request-making code:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>WebRequest request = WebRequest.Create(<span style="color:#e6db74">&#34;http://api.jokes.one/jod&#34;</span>);
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">using</span> Stream responseStream = response.GetStream() 
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  StreamReader reader = <span style="color:#66d9ef">new</span> StreamReader(responseStream);
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">string</span> responseText= reader.ReadToEnd();
</span></span><span style="display:flex;"><span>  Console.WriteLine(responseText);
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>response.Close();</span></span></code></pre></div><p>The <code>response.GetStream()</code> triggers the http request, which hits the API and returns its result.  Remember a HTTP request is streamed across the internet, then processed by the server, and the response streamed back.  That can take some time (at least to a computer).  While the program waits on it to finish, it cannot do anything else.  For some programs, like one that only displays jokes, this is fine. But what if our program needs to also be responding to the user&rsquo;s events - like typing or moving the mouse? While the program is waiting, it is effectively paused, and nothing the user does will cause the program to change.</p>
<h4 id="asynchronous-methods">Asynchronous Methods</h4>
<p>This is where asynchronous methods come in. An asynchronous method operates on a separate thread, allowing execution of the program to continue.</p>
<p>let&rsquo;s revisit our <code>WebRequest</code> example:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>WebRequest request = WebRequest.Create(<span style="color:#e6db74">&#34;http://api.jokes.one/jod&#34;</span>);</span></span></code></pre></div><p>We can then make the request <em>asynchronously</em> by calling the asynchronous version of <code>GetResponse()</code> - <code>GetResponseAsync()</code>:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>WebResponse response = <span style="color:#66d9ef">await</span> request.GetResponseAsync();</span></span></code></pre></div><p>The <code>await</code> keyword effectively pauses this thread of execution until the response is received.  Effectively, the subsequent code is set aside to be processed when the asynchronous method finishes or encounters an error.  This allows the main thread of the program to continue responding to user input and other events.  The rest of the process is handled exactly as before:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">using</span> Stream responseStream = response.GetStream() 
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  StreamReader reader = <span style="color:#66d9ef">new</span> StreamReader(responseStream);
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">string</span> responseText= reader.ReadToEnd();
</span></span><span style="display:flex;"><span>  Console.WriteLine(responseText);
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><h4 id="writing-asynchronous-methods">Writing Asynchronous Methods</h4>
<p>Normally we would wrap the asynchronous method calls within our own asynchronous method.  Thus, we might define a method, <code>GetJoke()</code>:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">string</span> <span style="color:#66d9ef">async</span> GetJoke()
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  WebRequest request = WebRequest.Create(<span style="color:#e6db74">&#34;http://api.jokes.one/jod&#34;</span>);
</span></span><span style="display:flex;"><span>  WebResponse response = <span style="color:#66d9ef">await</span> request.GetResponseAsync();
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">using</span> Stream responseStream = response.GetStream() 
</span></span><span style="display:flex;"><span>  {
</span></span><span style="display:flex;"><span>    XmlDocument xDoc = <span style="color:#66d9ef">new</span> XmlDocument();
</span></span><span style="display:flex;"><span>    xDoc.Load(responseStream);
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">var</span> node = xDoc.SelectSingleNode(<span style="color:#e6db74">&#34;/response/contents/jokes/joke/text&#34;</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> node.InnerText;
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">return</span> <span style="color:#e6db74">&#34;&#34;</span>;
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><h4 id="asynchronous-asp-requestresponse-methods">Asynchronous ASP Request/Response Methods</h4>
<p>ASP.Net includes built-in support for asynchronous request handling.  You just need to add the <code>async</code> keyword to your <code>OnGet()</code> or <code>OnPost()</code> method, and the ASP.NET server will process it asynchronously.</p>
<p>For example, we could invoke our <code>GetJoke()</code> method in a <code>OnGet()</code>:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">JokeModel</span> : PageModel 
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">async</span> IActionResult OnGet()
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">var</span> joke = <span style="color:#66d9ef">await</span> GetJoke();
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> Content(joke);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>This will cause the text of the joke to be sent as the response, and allow other pages to be served while this one request is awaiting a response from the Joke API.</p>

            <footer class="footline">

            </footer>
          </article>

    
    
          <article class="default">
            <header class="headline">
            </header>
<h1 id="restful-routes">RESTful Routes</h1>

<p>Many web applications deal with some kind of <em>resource</em>, i.e. people, widgets, records.  Much like in object-orientation we have organized the program around objects, many web applications are organized around resources.  And as we have specialized ways to construct, access, and destroy objects, web applications need to create, read, update, and destroy resource records (we call these CRUD operations).</p>
<p>In his 2000 PhD. dissertation, Roy Fielding defined <a href="https://en.wikipedia.org/wiki/Representational_state_transfer" target="_blank">Representational State Transfer (REST</a>
), a way of mapping HTTP routes to the CRUD operations for a specific resource.  This practice came to be known as RESTful routing, and has become one common strategy for structuring a web application&rsquo;s routes.  Consider the case where we have an online directory of students.  The students would be our resource, and we would define routes to create, read, update and destroy them by a combination of HTTP action and route:</p>
<table>
  <tr>
    <th>CRUD Operation</th>
    <th>HTTP Action</th>
    <th>Route</th>
  </tr>
  <tr>
    <td>Create</td>
    <td>POST</td>
    <td>/students</td>
  </tr>
  <tr>
    <td>Read (all)</td>
    <td>GET</td>
    <td>/students</td>
  </tr>
  <tr>
    <td>Read (one)</td>
    <td>GET</td>
    <td>/students/[ID]</td>
  </tr>
  <tr>
    <td>Update</td>
    <td>PUT or POST</td>
    <td>/students/[ID]</td>
  </tr>  
  <tr>
    <td>Destroy</td>
    <td>DELETE</td>
    <td>/students/[ID]</td>
  </tr>
</table>
<p>Here the <code>[ID]</code> is a unique identifier for the individual student.  Note too that we have <em>two</em> routes for reading - one for getting a list of <em>all</em> students, and one for getting the details of an individual student.</p>
<p>REST is a remarkably straightforward implementation of very common functionality, no doubt driving its wide adoption.  Razor pages supports REST implicitly - the RESTful resource <em>is the PageModel object</em>.  This is the reason model binding does not bind properties on GET requests by default - because a GET request is used to retrieve, not update a resource.  However, properties derived from the route (such as <code>:ID</code> in our example, <em>will</em> be bound and available on GET requests).</p>
<p>With Razor Pages, you can specify a route parameter after the <code>@page</code> directive.  I.e. to add our <code>ID</code> parameter, we would use:</p>
<div class="wrap-code highlight"><pre tabindex="0"><code class="language-cshtml" data-lang="cshtml">@page &#34;{ID?}&#34;</code></pre></div><p>We can use any parameter name; it doesn&rsquo;t have to be <code>ID</code> (though this is common).  The <code>?</code> indicates that the ID parameter is optional - so we can still visit <code>/students</code>.  Without it, we only can visit specific students, i.e. <code>/students/2</code>.</p>
<p>Route parameters can be bound using any of the binding methods we discussed previously - parameter binding, model binding, or be accessed directly from the <code>@RouteData.Values</code> dictionary.  When we <em>are</em> using these parameters to create or update new resources, we often want to take an additional step - <em>validating</em> the supplied data.</p>

            <footer class="footline">

            </footer>
          </article>

    
    
          <article class="default">
            <header class="headline">
            </header>
<h1 id="summary">Summary</h1>

<p>In this chapter we explored using web APIs to retrieve data from remote servers. We saw how to use the <code>WebRequest</code> object to make this task approachable.  We also revisited ideas you&rsquo;ve seen in prior courses like the <code>IDisposable</code> interface and <code>using</code> statements to work with unmanaged objects.  We saw how to consume XML data we receive as a response from a web API.</p>
<p>We also discussed using <code>async</code> methods to allow our programs to continue to respond to user input and incoming web requests while processing long-running tasks in parallel.  Finally, we discussed RESTful routes, a standardized way of determining the routes for your web API.</p>

            <footer class="footline">

            </footer>
          </article>

          </section>
    
    
          <article class="chapter">
            <header class="headline">
            </header>


<div class="article-subheading">Chapter 6</div>
<h1 id="deployment">Deployment</h1>

<p>Putting your work out there</p>

            <footer class="footline">

            </footer>
          </article>

          <section>
            <h1 class="a11y-only">Subsections of Deployment</h1>
    
    
          <article class="default">
            <header class="headline">
            </header>
<h1 id="introduction">Introduction</h1>

<p>Now that we&rsquo;ve explored building web applications and writing web servers, we&rsquo;ll explore in more detail how to make them available on the web, a process known as <em>deployment</em>.</p>
<h2 id="key-terms">Key Terms</h2>
<p>Some key terms to learn in this chapter are:</p>
<ul>
<li>Deployment</li>
<li>IP Address</li>
<li>IPV4</li>
<li>IPV6</li>
<li>Domain Name</li>
<li>Ports</li>
<li>Virtual Machine</li>
</ul>
<h2 id="key-skills">Key Skills</h2>
<p>The key skills to develop in this chapter are:</p>
<ul>
<li>Setting up your web applications to deploy to a virtual machine</li>
</ul>

            <footer class="footline">

            </footer>
          </article>

    
    
          <article class="default">
            <header class="headline">
            </header>
<h1 id="web-addresses">Web Addresses</h1>

<h2 id="ip-addresses">IP Addresses</h2>
<p>As we discussed previously, when we visit web pages in our browser, the browser makes a HTTP or HTTPS request against the web server for the resource.  For this request to be sent to the right server, we must first the server&rsquo;s <em>address</em>.  This address takes the form of an Internet Protocol (IP) address.  There are currently two ways these IP addresses are specified, IPv4 and IPv6.  An IPv4 address consists of 32 bits split into 8 bit chunks, and typically expressed as four integers between 0 and 255 separated by periods.  For example, the IP address for Kansas State University is:</p>
<p>$$
129.130.200.56
$$</p>
<p>Consider that an IPv4 address consists of 32 bits.  This means we can represent $2^{32}$ unique values, or $4,294,967,296$ different addresses.  You can see how many websites are currently online at <a href="https://www.internetlivestats.com/watch/websites/" target="_blank">https://www.internetlivestats.com/watch/websites/</a>
, as of this writing it was nearly 2 million.  Combine that with the fact that <em>every computer connecting to the interent</em>, not just those hosting, <em>must have an ip address</em>, and you can see that we are running out of possible addresses.</p>
<p>This is the issue that IPv6 was created to counter.  IPv6 addresses are 128 bits, so we can represent $2^{128}$ different values, or $340,282,366,920,938,463,463,374,607,431,768,211,456$ possible addresses (quite a few more than IPv4)!  An IPv6 address is typically expressed as eight groups of four hexidecimal digits, each representing 16 bits.  For example, Google&rsquo;s IPv6 address is:</p>
<p>$$
2607:f8b0:4000:813::200e
$$</p>
<p>IPv6 adoption requires changes to the internet infrastructure as well as all connected machines, and is typically done on a volunteer basis.  Thus, it is a gradual process.  The United States is at rougly a 47% adoption level; you can see current adoption statistics for all countries at <a href="https://www.akamai.com/us/en/resources/our-thinking/state-of-the-internet-report/state-of-the-internet-ipv6-adoption-visualization.jsp" target="_blank">Akamai&rsquo;s IPv6 Adoption Tool</a>
.</p>
<h2 id="ports">Ports</h2>
<p>In addition to the address, requests are sent to a <em>port</em>, a specific communication endpoint for the computer.  Different applications &ldquo;listen&rdquo; at specific ports on your computer - this allows your computer to have multiple applications communicating across the network or interent at the same time.  You might think of your computer as an apartment complex; the IP address is its street address, and the ports are individual aparement numbers.  Different applications then live in different apartments.  Many of these ports are unused (the apartments are vacant), as most computers are only running a few network-facing applications at any given time.</p>
<p>Many applications and communication services have a &ldquo;default&rdquo; port they are expected to use.  This makes it easy to connect to a remote computer.  For example, a webserver uses port 80 by default for HTTP requests, and port 433 for HTTPS requests.  If your server is listening at these ports, there is no need to specify the port number in HTTP/HTTPS requests targeting your IP address.  You can also run a program on a non-standard port.  For example, with our Razor Page applications, we have typically been running our debug version on port $44344$ (with IIS Express) or $5001$ (when running as a console application).  If you know the IP address of your computer, you can visit your running debug server by using the address <strong>http://[ip address]:[port]</strong> from another computer on your network.</p>
<p>Some of the most common services and thier associated default ports are:</p>
<table>
    <tr>
        <th>Port</th><th>Protocol</th><th>Use</th>
    </tr>
    <tr>
        <td>22</td>
        <td>Secure Shell (ssh)</td> 
        <td>Used to communicate between computers via a comand line interface</td>
    </tr>
    <tr>
        <td>25</td>
        <td>Simple Mail Transfer Protocol (SMTP)</td>
        <td>A common email routing protocol</td>
    </tr>
    <tr>
        <td>53</td>
        <td>Domain Name System (DNS) Service</td>
        <td>IP lookup by domain name</td>
    </tr>
    <tr>
        <td>80</td>
        <td>Hyper-Text Transfer Protocol (HTTP)</td>
        <td>Servicing WWW requests</td>
    </tr>
    <tr>
        <td>143</td>
        <td>Post Office Protocol (POP)</td>
        <td>Retrieving email</td>
    </tr>
    <tr>
        <td>143</td>
        <td>Interent Message Access Protocol (IMAP)</td>
        <td>Managing email</td>
    </tr>
    <tr>
        <td>193</td>
        <td>Interent Relay Chat (IRC)</td>
        <td>Chat messages</td>
    </tr>
    <tr>
        <td>443</td>
        <td>Secure Hyper-Text Transfer Protocol (HTTPS)</td>
        <td>Servicing secure WWW requests</td>
    </tr>
</table>
<h2 id="domain-names">Domain Names</h2>
<p>Of course, you don&rsquo;t normally type $129.130.200.56$ into your browser to visit K-State&rsquo;s website.  Instead, you type <strong>k-state.edu</strong> or <strong>ksu.edu</strong>, which are <em>domain names</em> owned by the university.  A <em>Domain Name</em> is simply a human-readable name that maps to an IP address.  This mapping is accomplished by the <em>Domain Name System</em> (DNS), a lookup service composed of a hierarchial network of servers, with the root servers maintained by the Internet Corporation for Assigned Names and Numbers (ICANN).</p>
<p>When you enter a domain name into your browser, it requests the corresponding IP address from its local DNS server (typically maintained by your ISP). If it does not know it, this server can make a request against the broader DNS system.  If a matching IP address exists, it is returned to the local DNS server and through that server, your browser.  Then your browser makes the request using the supplied IP address.  Your browser, as well as your local DNS server, cache these mappings to minimize the amount of requests made against the DNS system.</p>
<p>To get a domain name, you must purchase it from a domain name reseller.  These resellers work with ICANN to establish ownership of specific domain names - each domain name can have only one owner, and map to an IP address.  Once you&rsquo;ve purchased your domain name (which is actually leased on an annual basis), you work with the reseller to target the domain name at your preferred IP address(es).  This entire process is typically handled through a web application.</p>

  
  
<div class="box notices cstyle info">
  <div class="box-label"><i class="fa-fw fas fa-info-circle"></i> Info</div>
  <div class="box-content">

<p>The <strong>localhost</strong> domain name is a special <em>loopback</em> domain.  It always points at IP address $127.0.0.1$, which is always the local machine (i.e. the computer you are using).</p>
</div>
</div>

            <footer class="footline">

            </footer>
          </article>

    
    
          <article class="default">
            <header class="headline">
            </header>
<h1 id="secure-http">Secure HTTP</h1>

<p>We have talked several times about HTTP and HTTPS, without really discussing what is different about these two approaches other than HTTPS is &ldquo;secure&rdquo;.  Essentially, HTTPS uses the same protocol as HTTP, but requests and responses are <em>encrypted</em> rather than being sent as plain text.  This encryption is handled at a level below HTTP, in the communication layer (currently this uses <a href="https://en.wikipedia.org/wiki/Transport_Layer_Security" target="_blank">TLS - Transport Layer Security</a>
).  This encryption is done through symmetric crypography using a shared secret.  You may remember studying this approach in CIS 115.  Remember this Computerphile video demonstrating a Diffie-Hellman key exchange by mixing paint colors?</p>
<iframe width="560" height="315" src="https://www.youtube.com/embed/NmM9HA2MQGI" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
<p>By using this encryption scheme, we make it impossible (or at least very difficult) for third parties intercepting our HTTP requests and responses to determine exactly what they contain.  Hence, credit card information, passwords, and other personal information is protected, as is search terms, etc.  However, this is only half of the process of HTTPS.  The second half invovles establishing that the web server you are making requests is the one you want, and not an impersonator.  This requires an <em>authentication</em> process, to ensure you are communicating to the correct server.</p>
<p>This authentication aspect of TLS is manged through <em>security certificates</em>.  These are built around public/private key encryption and the <a href="https://en.wikipedia.org/wiki/X.509" target="_blank">X.509</a>
 certificate standard.  A certificate provides proof the server serving the certificate is the one of the domain address in question.  Think of it as a driver&rsquo;s license or your student ID card - it lists identifying information, and you carry it with you to prove you are who you say you are.  And much like a drivers&rsquo; license or a student ID card, it is issued by an authoritative source - one of several &ldquo;trusted&rdquo; certificate authorites, or an authority whose own certificate is signed by one of these authorities.</p>
<p>Anyone can issue a security certificate, but only one with a chain of signed certificates that goes back to a root trusted certificate authority will be considered &ldquo;trusted&rdquo; by your browser.  This is why you may have had issues running your web applications using HTTPS - when launching the project in debug mode, it uses a self-signed certificate (i.e. your application creates its own certificate), which the browser reports as untrustworthy.  Depending on your browser, you may be able to allow this &ldquo;untrusted&rdquo; site to be served, or it may be disallowed completely.  Visual Studio and ASP.NET projects typically offer to install a &ldquo;dev certificate&rdquo; that allows your localhost communications to treated as trusted.</p>

  
  
<div class="box notices cstyle info">
  <div class="box-label"><i class="fa-fw fas fa-info-circle"></i> Info</div>
  <div class="box-content">

<p>Traditionally, security certificates are issued from a trusted authority using annual fees, and often accompanied by insurance that pays for legal issues if the certificate is ever violated.  However, the Let&rsquo;s Encrypt Security Group, launched in April 2016, offers free security certificates with the goal of making HTTPS ubiquitious on the web.  This easy availablility means there is no reason to not host your websites using HTTPS instead of vulnerable HTTP.  You can visit the Let&rsquo;s Encrypt website at <a href="https://letsencrypt.org/" target="_blank">letsencrypt.org</a>
.</p>
</div>
</div>

            <footer class="footline">

            </footer>
          </article>

    
    
          <article class="default">
            <header class="headline">
            </header>
<h1 id="web-hosting">Web Hosting</h1>

<p>To host your website, you will need:</p>
<ol>
<li>A computer connected to the Internet</li>
<li>A web server program listening at port 80 and/or 433 (depending on if you are using secure communications)</li>
<li>If you are using secure communications, a security certificate issued by a valid authority.  <a href="https://letsencrypt.org/" target="_blank">Let&rsquo;s Encrypt</a>
 offers free certificates, and is a good source for startign web developers</li>
<li>A domain name (while this is technically optional, if you expect users to visit your website you&rsquo;ll probably need one)</li>
</ol>
<p>While you have been running your website in debug mode on your develpment computer, you probably won&rsquo;t use it to host your actual website on the Internet. First, you machine would need to be running the web server application constantly.  Any time your computer was turned off, or the web server was not running, your website would be inaccessible.</p>
<p>Also, in most residental setups, you probably won&rsquo;t be able to access the running program across the Internet anyway.  This is especially if you have multiple computers connected through a router.  In that case, only your router has a unique IP address, and all communications are routed through it using that address.  The router also assigns &ldquo;internal&rdquo; addresses to the computers networked to it, and handles distributing request results to those computers that made them (kind of like a mailroom for a very large institution).  To make your website available, you would probably need to set up port forwarding or a similar technique with your router to have it forward requests to the computer running your web server.  You probably would also need to modify your firewall settings (firewalls prevent connections against ports that you don&rsquo;t mean to have open to the Internet).</p>
<p>A third challenge is that you most likely do not have a <em>static</em> IP address, i.e. one that will always point to your computer.  Most Internet Service Providers instead typically assign a <em>dynamic IP</em> address to your router or modem when you estabish a connection, drawn from a pool of IP addresses they maintain for this purpose.  This address is yours until the next time you connect (i.e. after a power loss or rebooting your router), at which point the ISP assigns you a different IP address from the pool.  This simplifies the configuration for their network, and allows them to share IP addresses amongst infrequently-connecting users.  Further, most residential ISP plans specifically forbid hosting web applications using thier connection - instead you must sign up for a commercial plan that includes a static IP address.</p>
<h2 id="remote-machines">Remote Machines</h2>
<p>Instead, you will probably host your websites on a remote machine running in a server farm (similar to how the CIS Linux servers that you put your personal web pages on in CIS 115).  There are several benefits to using a machine in a server farm: typically they are very good machines, optimized for hosting web applications, the server farm has ideal operating conditions (good air conditioning, a backup power system), better uptime, and on-staff IT professionals that keep the equipment in good repair.  Of course, you will have to pay fees to have access to a machine.  There are typically several options offered by these service providers:</p>
<ol>
<li>A machine you own (in this case, you would purchase your server hardware, and you would own it).  The service maintains your machine and its connection to the internet.  This is typically the most expensive option, but is sometimes used when information security is espeically paramount.</li>
<li>A machine you rent.  In this case, it is owned by the service but made available to you.  You get the entire machine for your use.</li>
<li>A shared machine - in this case you are granted access to only part of the computer, where you can store files.  In this approach, web hosting is often acccomplished with an Apache server, and each user has a special file (i.e. <code>public_html</code> where they can place files to be served statically).  This is the approach our department uses for your access to the CS Linux server.</li>
<li>A virtual machine - this is also a shared access to a computer, but mediated through a <em>virutal machine</em> - a virtual computer running in the real computer.  A computer can host an arbitrary number of virtual machines.  In this case, you have complete access to your virtual machine.</li>
<li>A containerized approach - this approach separates your application from the environment in which it runs.  In essence, you package up everything your application needs to run in a single image file, which can then be run from within a container environment (like Docker).  The beauty of this approach is that the same container can be deployed multiple times on different kinds of machines running a conatiner environment. This is also a virtual machine approach, only the virutal machine is different.</li>
</ol>
<p>We&rsquo;ll take a deeper look at virutal machines next.</p>

            <footer class="footline">

            </footer>
          </article>

    
    
          <article class="default">
            <header class="headline">
            </header>
<h1 id="virtual-machines">Virtual Machines</h1>

<p>A <em>virtual machine</em> is a <em>simulated</em> computing device.  Let&rsquo;s start with a simple example.  You can <a href="https://www.nintendo.com/switch/online-service/nes/" target="_blank">play classic NES and Super NES games using the Switch</a>
.  How is this done?  Does the Switch contain the same hardware as the original NES or SNES?  No. It uses a NVIDA Tegra processor, which utilizes the 64-bit ARM architecture.  The NES used an 8-bit CPU, and the SNES used a 16-bit CPU.  These are <em>very different architectures</em>.  Of course, you may note the service I reference is an <em>online</em> service.  So do they hook up thousands of NES and SNES units to a web server processing input and output?  Also no, but also <em>yes</em>.</p>
<p>What they actually do is <em>emulate</em> that hardware with software.  Thus, they have a program that <em>pretends</em> to be the NES hardware, and the load into that program the actual NES game (the software) you wish to play.  This emulator is a part of a web server that streams the resulting game images to the Switch, and the Switch likewise streams the player&rsquo;s input back to the server.  This is essentially the same approach used by any video game console emulator (sans the use of a web server).</p>
<p>In the same way, we can use a virtual machine to emulate another kind of computer within our own computers.  For example, the <a href="https://support.cs.ksu.edu/CISDocs/wiki/FAQ#VMWare" target="_blank">VMWare</a>
 platform you have access to as a CS student allows you to install VMWare on your computer.  Once installed, you can create virtual Linux or Windows PCs that run within the program.  Essentially, VMWare pretends to be a separate computer and shares your computer&rsquo;s real resources through interfaces that make it seem to be the hardware the program emulates.  Another approach to running a Linux VM within a Windows environment is the <a href="https://docs.microsoft.com/en-us/windows/wsl/install-win10" target="_blank">Windows Subsystem for Linux (WSL)</a>
.  This is essentailly a virtual machine that runs a Linux kernel (of your choice) within Windows.  It offers better performance than VMWare as the VM plugs directly into Windows OS procedures.</p>
<p>Most Internet hosting services offer Virtual Machines that you can rent.  Typically you specify the amount of RAM and storage, as well as the number of CPUs you wish to utilize.  These represent a portion of the real machine&rsquo;s resources that are assigned to your specific VM.  You then are granted root access to the VM, and can install whatever software you need; for example, installing Linux, Dotnet Core, and a relational database to run your web application. Once you have your application set up, you launch it as a constantly running service, and it begins to listen for HTTP and HTTPS requests on port 80 and 443.  The service usually provides you with a static IP address, which you can then hook up to your domain name.</p>
<p>The computing device being emulated does not have to equate to hardware analogues.  In CIS 200 you worked with a VM extensively that does not correspond to physical hardware - the Java Virtual Machine (JVM).  The JVM is a virtual machine that does not correspond to any real-world hardware, but provides a similar computing environment that can process Java Byte Code (which is similar to the assembly code run by hardware-based processors).  A different JVM exists for every hardware platform that Java can be run on, mapping the virtual system procedures to the specific platform&rsquo;s hardware and operating system.</p>

  
  
<div class="box notices cstyle info">
  <div class="box-label"><i class="fa-fw fas fa-info-circle"></i> Info</div>
  <div class="box-content">

<p>You may be asking yourself &ldquo;is .NET also a virtual machine?&rdquo;  In one sense, yes, as it works from a similar concept as Java, but the reality is a bit more complex.  The DOTNET languages are compiled into <em>Intermedate Langauge</em>, a format similar to Java&rsquo;s Bytecode.  And the DOTNET runtime has specific builds for different operating systems and hardware platforms, much like the JVM.  But rather than the DOTNET runtime running the IL in a virutal environment, when you execute a DOTNET program, it is <em>further compiled</em> by the DOTNET runtime into assembly for the specific platform using a <em>Just-in-Time</em> compiler.  So ultimately, DOTNET code is run in actual machine, not a virtual machine.</p>
</div>
</div>
<p>In recent years, <em>containerized</em> applications have become increasingly popular, especially for web-based deployments.  This is a variant on the Virtual Machine idea, where the application and the execution environment are separated into two parts - the container (an image file containing the binary code and resources of an application) and an execution environment (a virtual machine, often emulating a Linux or Windows machine, but possibly more specialized).  The containerized application is then run within this execution environment.  The chief benefits of containerized approaches are portability and scaleability.  As the execution environment can be installed on a variety of platforms, much like the JVM, the container can be run on different hardware - a development PC, a development Mac, a production server, or someting more esoteric like a cloud server.</p>
<p>As the emulated execution environment is the same across each of these platforms, the same containerized application should run identially on each.  Moreover, to create additional instances of a containerized application, you just launch another copy of the container - a process that takes milliseconds.  Compare this to adding another traditonal server or VM - you have to intialize the VM, install the necessary supporting environment, libraries, and other dependencies, and then install your application and launch it.  This process can take minutes to hours, and often requires an IT professional to work through the steps.  Cloud services like Amazon Web Services, Microsoft&rsquo;s Azure, and Google Cloud all utilize container-based approaches to allow rapid upscaling and downscaling of web servers to meet the actual demand for a web application.  These platforms typically handle load balancing (directing traffic evenly amongst the containers running instances of your web server) automatically, making the process of hosting large-volume web traffic much easier.  And for small, limited-demand web applications, many of these cloud services offer a free tier with a limited amount of bandwith a month.  The speed at which a containerized application can be spun up means that these free tier applications can be shut down most of the time, and only run when requests are coming in.</p>

            <footer class="footline">

            </footer>
          </article>

    
    
          <article class="default">
            <header class="headline">
            </header>
<h1 id="summary">Summary</h1>

<p>In this chapter we discussed what is necessary for hosting a web application: a computer running your web server, a static Internet Protocol address, a domain name that maps to your IP addresss, and a security certificate for using HTTPS. Each of these concepts we explored in some detail.  We saw how using HTTPS allows encrypted end-to-end communication between the web client and server, as well as providing assurance that the server we are communicating with is the one we intended to make requests from.  We also discussed the differences between self-signed certificates and those signed by a certificate authority, and introduced the nonprofit <a href="https://letsencrypt.org/" target="_blank">letsencrypt.org</a>
 which provides free certificates to help secure the web.</p>
<p>We also described several options for the computing environment running your web server: a dedicated machine in your home or office, a dedicated machine in a server farm, a virutal machine, or a containerized cloud service.  We discussed the benefits and drawbacks of each approach.  As you prepare to host your own applications, you&rsquo;ll want to consider these, along with the costs of the various services, to decide how you want to deploy your production application.</p>

            <footer class="footline">

            </footer>
          </article>

          </section>
    
    
          <article class="chapter">
            <header class="headline">
            </header>


<div class="article-subheading">Chapter 5</div>
<h1 id="linq">LINQ</h1>

<p>Bridging the Gap Between Databases and Data Structures</p>

            <footer class="footline">

            </footer>
          </article>

          <section>
            <h1 class="a11y-only">Subsections of LINQ</h1>
    
    
          <article class="default">
            <header class="headline">
            </header>
<h1 id="introduction">Introduction</h1>

<p>We saw in the last chapter how many web applications are built around the concept of <em>resources</em>.  An online store has products to sell.  A social media application has people with accounts.  Resource-oriented web applications therefore need to store these resources in some fashion - possibly as objects in some kind of collection, or possibly with a database.</p>
<h2 id="key-terms">Key Terms</h2>
<p>Some key terms to learn in this chapter are:</p>
<ul>
<li>Database</li>
<li>Relational Database</li>
<li>Object-Oriented Database</li>
<li>Document-Based Database</li>
<li>Structured Query Language (SQL)</li>
<li>Language Integrated Query (LINQ)</li>
<li>Anonymous Types</li>
<li>Extension Methods</li>
</ul>
<h2 id="key-skills">Key Skills</h2>
<p>The key skills to develop in this chapter are:</p>
<ul>
<li>Using LINQ to perform query operations on data sets</li>
<li>Writing extension methods to provide new functionality to existing classes</li>
</ul>

            <footer class="footline">

            </footer>
          </article>

    
    
          <article class="default">
            <header class="headline">
            </header>
<h1 id="databases">Databases</h1>

<p>We use the term &ldquo;Database&rdquo; to describe a program primarily designed to efficiently store and retrieve data.  These are often used in conjunction with other kinds of applications - such as web applications or desktop applications.  Why use a separate program rather than building this storage and retrieval into the application we are building?  There are a lot of possible reasons, but some common ones are:</p>
<ol>
<li>
<p>Centralized access.  Consider a desktop application that tracks inventory for a large company.  You might want to have the application installed on every computer in the sales department, and you want the inventory to stay up-to-date for all of these.  If each desktop app connects to the same centralized database, they will all be kept up-to-date.</p>
</li>
<li>
<p>Efficiency of specialization.  By designing a database program for the sole purpose of storing and retrieving data, it can be designed by programmers who specialize in this area, and be designed to be as efficient as possible&hellip; often far more than we would be able to build into our own applications.</p>
</li>
</ol>
<h3 id="relational-databases">Relational Databases</h3>
<p>The most common type of database in use today are <em>relational databases</em>.  These are databases that organize data into structured <em>tables</em> consisting of columns with a specific data type.  Each record is therefore a row in the database.  Visually, such a database appears much like a spreadsheet.  These databases are typically communicated with using <em>Structured Query Language (SQL)</em>.  This is a special programming language developed specifically to express the kinds of operations we need to carry out on these databases.</p>
<p>For example, to retrieve the first and last names of all students in the <em>students</em> table who are earning above a 3.0, we would use the query:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-SQL" data-lang="SQL"><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> <span style="color:#66d9ef">first</span>, <span style="color:#66d9ef">last</span> <span style="color:#66d9ef">FROM</span> students <span style="color:#66d9ef">WHERE</span> gpa <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">3</span>.<span style="color:#ae81ff">0</span>;</span></span></code></pre></div><p>And the results would be provided as a stream of text:</p>
<div class="wrap-code highlight"><pre tabindex="0"><code>first | last
Mike | Rowe
Jan | Herting
Sam | Sprat</code></pre></div><p>You&rsquo;ll learn more about these databases in CIS 560.</p>
<h3 id="object-oriented-databases">Object-Oriented Databases</h3>
<p>Relational databases were developed in the 60&rsquo;s and 70&rsquo;s to deal with the specific challenges of computer systems in those days.  The way they organize data lends itself to large, flat files, and SQL and its results are handled as streams of data.  When object-orientation became a popular programming language paradigm, object-oriented databases - databases that store data as objects, were also developed.  However, while object-oriented programming languages became quite popular, the corresponding databases failed to.  As a result, object-oriented databases remain quite niche.</p>
<h3 id="document-based-databases">Document-Based Databases</h3>
<p>The popularity of JSON and XML with the web led to another category of databases being developed, document-based databases (sometimes called No-SQL databases).  These databases store records in a serialized format like JSON or XML, and downplay relationships between records.  Unlike relational databases, document-based databases can be flexible in what data exists for an individual record.</p>
<p>For example, if we were to create a Student table in a relational database, and wanted to hold the student&rsquo;s degree plan, we&rsquo;d need two columns to represent a dual-major.  All students in the table would have two columns, even if they only had one degree plan.  In contrast, with a document-based database most students would only have one degree plan, but dual major would have two, and if we had a rare triple major, they could have three!</p>
<p>Thus, document-based databases add flexibility at the cost of some efficiency in retrieval.</p>
<h3 id="object-relational-mapping">Object-Relational Mapping</h3>
<p>Despite the growing popularity of Document-Based Databases, the vast majority of databases remain relational (MySql, MSSQL, PostgreSQL, Oracle, SQLite).  Yet, most of the programs that utilize them are now object-oriented.  This creates a bit of a disconnect for many programmers working with both.  One of the solutions devised to help with this challenge are object-relational mappers (ORMs).  These are libraries that are written for object-oriented languages that facilitate talking to the relational database.  When a query is run against the database with an ORM, the results are provided as a collection of objects instead of the normal text (basically, the ORM parses the results and transforms them into an object representation).  This simplifies working with databases for the programmer.</p>

            <footer class="footline">

            </footer>
          </article>

    
    
          <article class="default">
            <header class="headline">
            </header>
<h1 id="linq">LINQ</h1>

<p>One solution that Microsoft has developed to tackle the disconnect between relational databases and C# is Language Integrated Query (LINQ).  This technology integrates querying directly into the C# language.  It can act as a bridge to a MS SQL server, replacing the need for writing SQL queries and processing the results.  But it can <em>also</em> be used to query collections that implement the <code>IEnumerable</code> interface, as well as XML files.  As such, we can design the logic of our program to use LINQ, and change out the data source for any of these options with minimal refactoring.</p>
<p>LINQ queries are written as either <em>query expressions</em> or by using <em>query operators</em>.  Let&rsquo;s examine the two.</p>
<h3 id="query-expressions">Query Expressions</h3>
<p>LINQ query expressions appear much like SQL statements.  For example, the query from the last section, selecting the names of students whose GPA is greater than 3.0 as a LINQ query expression would be:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">var</span> highGPAStudents = <span style="color:#66d9ef">from</span> student <span style="color:#66d9ef">in</span> students <span style="color:#66d9ef">where</span> student.GPA &gt; <span style="color:#ae81ff">3.0</span> <span style="color:#66d9ef">select</span> <span style="color:#66d9ef">new</span> { First = student.First, Last = student.Last};</span></span></code></pre></div><p>This format looks much like SQL, and is often more comfortable for programmers who come from a SQL background.</p>
<h3 id="query-operators">Query Operators</h3>
<p>LINQ queries are actually implemented through C# operators.  Query expressions, like the one above, are compiled into an equivalent series of query operators.  Programmers can also use these operators directly.  For example, the above query expressed using operators would be:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">var</span> highGPAStudents = students.Where(student =&gt; student.GPA &gt; <span style="color:#ae81ff">3.0</span>).Select(student =&gt; <span style="color:#66d9ef">new</span> {First = student.First, Last = student.Last});</span></span></code></pre></div><p>Programmers from an object-oriented background often find the operators (which are essentially methods that take lambda expressions as parameters) more comfortable.</p>
<h3 id="query-execution">Query Execution</h3>
<p>Queries are not actually executed until you start iterating over their results.  This allows you to chain additional queries on an existing query, and allows the compiler to optimize queries by grouping query expressions together.  Consider this compound query to select half of low-performing students to assign to an advisor:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">var</span> strugglingStudents = <span style="color:#66d9ef">from</span> student <span style="color:#66d9ef">in</span> students <span style="color:#66d9ef">where</span> student.GPA &lt; <span style="color:#ae81ff">2.0</span> <span style="color:#66d9ef">select</span> student;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">var</span> strugglingStudentsAtoN = <span style="color:#66d9ef">from</span> strugglingStudents <span style="color:#66d9ef">where</span> student.Last.CharAt(<span style="color:#ae81ff">0</span>) &gt;= <span style="color:#e6db74">&#39;A&#39;</span> &amp;&amp; student.Last.CharAt(<span style="color:#ae81ff">0</span>) &lt; <span style="color:#e6db74">&#39;N&#39;</span> <span style="color:#66d9ef">select</span> student;</span></span></code></pre></div><p>If we wrote this as C# algorithm, we might do something like:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">var</span> strugglingStudents = <span style="color:#66d9ef">new</span> List&lt;Student&gt;();
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">foreach</span>(<span style="color:#66d9ef">var</span> student <span style="color:#66d9ef">in</span> students) {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span>(student.GPA &lt; <span style="color:#ae81ff">2.0</span>) strugglingStudents.Add(student);
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">var</span> strugglingStudentsAtoN = <span style="color:#66d9ef">new</span> List&lt;Student&gt;();
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">foreach</span>(<span style="color:#66d9ef">var</span> student <span style="color:#66d9ef">in</span> strugglingStudents) {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span>(student.Last.CharAt(<span style="color:#ae81ff">0</span>) &gt;= <span style="color:#e6db74">&#39;A&#39;</span> &amp;&amp; student.Last.CharAt(<span style="color:#ae81ff">0</span>) &lt; <span style="color:#e6db74">&#39;N&#39;</span>) strugglingStudentsAtoN.Add(student)
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>As you can see, this results in <em>two</em> iterations over lists of students.  In the worst case (when every student is struggling) this has a complexity of $O(2*n)$.</p>
<p>On the other hand, by delaying the execution of the query until the first time its values are used, LINQ can refactor the query into a form like:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">var</span> strugglingStudentsAtoN = <span style="color:#66d9ef">new</span> List&lt;Student&gt;();
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">foreach</span>(<span style="color:#66d9ef">var</span> student <span style="color:#66d9ef">in</span> students) {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span>(student.GPA &lt; <span style="color:#ae81ff">2.0</span> &amp;&amp; student.Last.CharAt(<span style="color:#ae81ff">0</span>) &gt;= <span style="color:#e6db74">&#39;A&#39;</span> &amp;&amp; student.Last.CharAt(<span style="color:#ae81ff">0</span>) &lt; <span style="color:#e6db74">&#39;N&#39;</span>) 
</span></span><span style="display:flex;"><span>        strugglingStudents.Add(student);
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>With this refactoring, the worst case becomes $O(n)$ - our query would run twice as fast!  Also, if we never <em>use</em> <code>strugglingStudentsAtoN</code>, the query is never executed, so the cost is $O(0)$.  This might seem nonsensical, but consider if we have some kind of conditional, i.e.:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">switch</span>(advisor.Number) {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">case</span> <span style="color:#ae81ff">1</span>:
</span></span><span style="display:flex;"><span>        ReportStudents(strugglingStudentsAtoN);
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">break</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">case</span> <span style="color:#ae81ff">2</span>: 
</span></span><span style="display:flex;"><span>        ReportStudents(strugglingStudentsNtoZ);
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">break</span>;
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>We only end up executing the query necessary for the logged-in advisor.</p>

  
  
<div class="box notices cstyle info">
  <div class="box-label"><i class="fa-fw fas fa-info-circle"></i> Info</div>
  <div class="box-content">

<p>LINQ uses a programming pattern known as <a href="https://en.wikipedia.org/wiki/Method_chaining" target="_blank"><em>method chaining</em></a>
, where each query method returns an object upon which additional query operations can be performed.  Thus, it is perfectly legal to write a query like:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">var</span> query = students.Where(s =&gt; s.GPA &gt; <span style="color:#ae81ff">2.0</span>).Where(s =&gt; s.Age &gt; <span style="color:#ae81ff">25</span>).Where(s =&gt; s.Last.CharAt(<span style="color:#ae81ff">0</span>) == <span style="color:#e6db74">&#39;C&#39;</span>);</span></span></code></pre></div><p>While this may seem silly (as we could have expressed this with one where clause), it makes more sense when we have user interface filters that may or may not have a value, i.e.:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">var</span> query = students.All();
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">if</span>(minGPA != <span style="color:#66d9ef">null</span>) query = query.Where(s =&gt; s.GPA &gt;= minGPA);
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">if</span>(maxGPA != <span style="color:#66d9ef">null</span>) query = query.Where(s =&gt; s.GPA &lt;= maxGPA);
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">if</span>(first != <span style="color:#66d9ef">null</span>) query = query.Where(s =&gt; s.First == first);
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">if</span>(last != <span style="color:#66d9ef">null</span>) query = query.Where(s =&gt; s.Last == last);</span></span></code></pre></div></div>
</div>
<h3 id="query-results">Query Results</h3>
<p>The result of the query is therefore a specialized object created by LINQ that implements the <code>IEnumerable&lt;T&gt;</code> interface.  The type of <code>T</code> depends on the query (queries are always strongly typed, though the type can be inferred).  Fore example, in our <code>strugglingStudent</code> query, the result type is <code>IEnumerable&lt;Student&gt;</code>:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">var</span> strugglingStudents = <span style="color:#66d9ef">from</span> student <span style="color:#66d9ef">in</span> students <span style="color:#66d9ef">where</span> student.GPA &lt; <span style="color:#ae81ff">2.0</span> <span style="color:#66d9ef">select</span> student;</span></span></code></pre></div><p>In contrast, the <code>highGPAStudents</code> result uses an <a href="https://docs.microsoft.com/en-us/dotnet/csharp/programming-guide/classes-and-structs/anonymous-types" target="_blank"><em>anonymous type</em></a>
:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">var</span> highGPAStudents = <span style="color:#66d9ef">from</span> student <span style="color:#66d9ef">in</span> students <span style="color:#66d9ef">where</span> student.GPA &gt; <span style="color:#ae81ff">3.0</span> <span style="color:#66d9ef">select</span> <span style="color:#66d9ef">new</span> { First = student.First, Last = student.Last};</span></span></code></pre></div><p>The anonymous type is created by the expression <code>new { First = student.First, Last = student.Last}</code>.  Basically, it&rsquo;s an object with a <code>First</code> and <code>Last</code> property (and no methods or other properties).  Anonymous types are created by the interpreter at runtime (much like an auto-Property&rsquo;s backing field).  As such, we aren&rsquo;t able to use its type in our code.</p>
<p>If we want the query to return a specific type, we can instead declare a struct or object to return, i.e.:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">StudentName</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">string</span> First;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">string</span> Last;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> StudentName(<span style="color:#66d9ef">string</span> first, <span style="color:#66d9ef">string</span> last) {
</span></span><span style="display:flex;"><span>        First = first;
</span></span><span style="display:flex;"><span>        Last = last;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>And then set this as the projection type:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">var</span> highGPAStudents = <span style="color:#66d9ef">from</span> student <span style="color:#66d9ef">in</span> students <span style="color:#66d9ef">where</span> student.GPA &gt; <span style="color:#ae81ff">3.0</span> <span style="color:#66d9ef">select</span> <span style="color:#66d9ef">new</span> StudentName(student.First, student.Last);</span></span></code></pre></div><p>Let&rsquo;s take a deeper look at LINQ syntax next.</p>

            <footer class="footline">

            </footer>
          </article>

    
    
          <article class="default">
            <header class="headline">
            </header>
<h1 id="linq-syntax">LINQ Syntax</h1>

<p>Let&rsquo;s discuss some of the more common operations we might want to perform with LINQ.  Please note that this is <em>not an exhaustive list</em> - just some of the most common operations you will be encountering at this time.</p>
<h2 id="data-source">Data Source</h2>
<p>For these examples, we&rsquo;ll be using a data source consisting of <code>Student</code> objects.  These are defined by the class:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Student</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">string</span> EID;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">string</span> First;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">string</span> Last;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">double</span> GPA;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">int</span> Age;    
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">string</span> Major;
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>And the variable <code>students</code> is a <code>List&lt;Student&gt;</code> that we can assume is populated with initialized student objects.</p>
<p>We select this as our data source with the LINQ <code>from</code> operator.  In query syntax, this would be:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">var</span> query = <span style="color:#66d9ef">from</span> student <span style="color:#66d9ef">in</span> students ...</span></span></code></pre></div><p>And with method syntax, we would simply use the <code>students</code> list:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">var</span> query = students.SomeQueryMethod(student =&gt; ...)</span></span></code></pre></div><p>To create a query from a data source using method syntax without applying any query methods (useful for chaining optional queries), we can invoke <code>All()</code> on the collection:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">var</span> query = students.All();</span></span></code></pre></div><p>To use a different data source, we would just swap <code>students</code> for that source, an object that supports either the <code>IEnumerable</code> (usually data structures) or <code>IQueryable</code> (typically SQL or XML data sources) interface.</p>
<h2 id="projecting">Projecting</h2>
<p>Projecting refers to selecting specific data from a data source.  For example, if we wanted to select the full name of every  <code>Student</code>, we could do so with this query syntax:</p>
<div class="wrap-code highlight"><pre tabindex="0"><code class="language-chsarp" data-lang="chsarp">var studentNames = from student in students select $&#34;{student.First} {student.Last}&#34;;</code></pre></div><p>Or with method syntax:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">var</span> studentNames = students.Select(student =&gt; <span style="color:#e6db74">$&#34;{student.First} {student.Last}&#34;</span>);</span></span></code></pre></div><p>As the name is simply a string, the select above simply constructs the string, and the type of <code>studentNames</code> is inferred to be <code>IEnumerable&lt;string&gt;</code>.</p>
<p>We can also project an <a href="https://docs.microsoft.com/en-us/dotnet/csharp/programming-guide/classes-and-structs/anonymous-types" target="_blank">anonymous type</a>
.  This is a special kind of object whose type is created at runtime.  Anonymous types are basically collections of properties and nothing more (they cannot have methods).  For example, if we wanted just the student&rsquo;s full name and age, we would use this query syntax:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">var</span> studentInfo = <span style="color:#66d9ef">from</span> student <span style="color:#66d9ef">in</span> students <span style="color:#66d9ef">select</span> <span style="color:#66d9ef">new</span> {FullName = <span style="color:#e6db74">$&#34;{student.First} {student.Last}&#34;</span>, Age = student.Age};</span></span></code></pre></div><p>or this method syntax:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">var</span> studentInfo = students.Select(student =&gt; <span style="color:#66d9ef">new</span> {FullName = <span style="color:#e6db74">$&#34;{student.First} {student.Last}&#34;</span>, Age = student.Age});</span></span></code></pre></div><p>Finally, we could also define a new data type (i.e. class) and create an instance of it as our projection:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">StudentInfo</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">string</span> FullName {<span style="color:#66d9ef">get</span>; <span style="color:#66d9ef">set</span>;}
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">int</span> Age {<span style="color:#66d9ef">get</span>; <span style="color:#66d9ef">set</span>;}
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> StudentInfo(<span style="color:#66d9ef">string</span> fullName, <span style="color:#66d9ef">int</span> age)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        FullName = fullName;
</span></span><span style="display:flex;"><span>        Age = age;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>Using query syntax:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">var</span> studentInfo = <span style="color:#66d9ef">from</span> student <span style="color:#66d9ef">in</span> students <span style="color:#66d9ef">select</span> <span style="color:#66d9ef">new</span> StudentInfo(<span style="color:#e6db74">$&#34;{student.First} {student.Last}&#34;</span>, student.Age);</span></span></code></pre></div><p>or this method syntax:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">var</span> studentInfo = students.Select(student =&gt; <span style="color:#66d9ef">new</span> StudentInfo(<span style="color:#e6db74">$&#34;{student.First} {student.Last}&#34;</span>, student.Age));</span></span></code></pre></div><h2 id="filtering">Filtering</h2>
<p>One of the most common operations you will do with a query is filter the data, so the results contains only part of the original data.  This is done with the <code>where</code> operator takes a statement that resolves to a boolean.  If this boolean expression resolves to true, then the data is included in the results; if it is false, it is excluded.  For example, to find all students older than 25, we would use this query syntax:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">var</span> olderStudents = <span style="color:#66d9ef">from</span> student <span style="color:#66d9ef">in</span> students <span style="color:#66d9ef">where</span> student.Age &gt; <span style="color:#ae81ff">25</span>;</span></span></code></pre></div><p>or this method syntax:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">var</span> olderStudents = students.Where(student =&gt; student.Age &gt; <span style="color:#ae81ff">25</span>);</span></span></code></pre></div><h2 id="filtering-by-type">Filtering By Type</h2>
<p>If we have a list that contains multiple types, we can filter for specific types with the <code>where</code> operator or the <code>OfType</code> operator (this is an instance where query and operator syntax vary more greatly).  Consider the case where our <code>Student</code> class is a base class to <code>GraduateStudent</code> and <code>UndergraduateStudent</code> classes.  If we wanted to get a list of only the undergraduates, we could use a <code>where</code> query syntax combined with an <code>is</code> casting test:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">var</span> undergraduates = <span style="color:#66d9ef">from</span> student <span style="color:#66d9ef">in</span> students <span style="color:#66d9ef">where</span> student <span style="color:#66d9ef">is</span> UndergraduateStudent;</span></span></code></pre></div><p>In this case, the result would be an <code>IEnumerable&lt;UndergraduateStudent&gt;</code>.  But the corresponding where in operator syntax would result in an <code>IEnumerable&lt;Student&gt;</code> that contained only <code>UndergraduateStudent</code> objects.  To perform a cast as part of the filtering, we would instead use the <code>OfType&lt;T&gt;()</code> method:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">var</span> undergraduates = students.OfType&lt;UndergraduateStudent&gt;();</span></span></code></pre></div><h2 id="ordering">Ordering</h2>
<p>Often we want to apply some form of sorting to our results, i.e. we might want to sort students by GPA.  This can be done with an <code>orderby</code> operator.  In query syntax it would be:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">var</span> studentsByGPA = <span style="color:#66d9ef">from</span> student <span style="color:#66d9ef">in</span> students <span style="color:#66d9ef">orderby</span> student.GPA;</span></span></code></pre></div><p>And in method syntax:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">var</span> studentsByGPA = students.OrderBy(student =&gt; student.GPA);</span></span></code></pre></div><p>The <code>orderby</code> operator sorts in <em>ascending</em> order (so students with the lowest grades would come first in the list).  If we wanted to sort in <em>descending</em> order, we would need to specify descending order in our query syntax:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">var</span> studentsByGPA = <span style="color:#66d9ef">from</span> student <span style="color:#66d9ef">in</span> students <span style="color:#66d9ef">orderby</span> student.GPA <span style="color:#66d9ef">descending</span>;</span></span></code></pre></div>
  
  
<div class="box notices cstyle tip">
  <div class="box-label"><i class="fa-fw fas fa-lightbulb"></i> Tip</div>
  <div class="box-content">

<p>There is also an <em>ascending</em> keyword you can use.  This is helpful if you can&rsquo;t remember the default or want to make it clear to other programmers that the list will be sorted in ascending order:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">var</span> studentsByGPA = <span style="color:#66d9ef">from</span> student <span style="color:#66d9ef">in</span> students <span style="color:#66d9ef">orderby</span> student.GPA <span style="color:#66d9ef">ascending</span>;</span></span></code></pre></div></div>
</div>
<p>However, in method syntax this is accomplished by a separate operator, the <code>OrderByDescending()</code> method:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">var</span> studentsByGPA = students.OrderByDescending(student =&gt; student.GPA);</span></span></code></pre></div><p>If we need to order by multiple properties, i.e. first and last names, this is accomplished by a comma-separated list in query syntax:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">var</span> studentsByName = <span style="color:#66d9ef">from</span> student <span style="color:#66d9ef">in</span> students <span style="color:#66d9ef">orderby</span> student.Last, student.First;</span></span></code></pre></div><p>But in method syntax, we need to use a <code>ThenBy()</code> operator for subsequent sorting options:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">var</span> studentsByName = students.OrderBy(student =&gt; student.Last).ThenBy(student =&gt; student.First);</span></span></code></pre></div><p>We can mix and match ascending and descending sorting as well - for example, to sort students by descending GPA, then by names in alphabetical order we would use the query syntax:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">var</span> studentsByGPAAndName = <span style="color:#66d9ef">from</span> student <span style="color:#66d9ef">in</span> students <span style="color:#66d9ef">orderby</span> student.GPA <span style="color:#66d9ef">ascending</span>, student.Last, student.First;</span></span></code></pre></div><p>The corresponding method syntax would need separate operators for each sorting:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">var</span> studentsByGPAAndName = students.OrderByDescending(student =&gt; student.GPA).ThenBy(student =&gt; student.Last).ThenBy(student =&gt; student.First);</span></span></code></pre></div><p>There is also a <code>ThenByDescending()</code> operator for chaining descending sorts.</p>
<p>Finally, there is also a <code>Reverse()</code> operator which simply reverses the order of items in the collection without sorting.</p>
<h2 id="grouping">Grouping</h2>
<p>We often want to split our results into groups, which can be accomplished with the <code>group by</code> operator.  Consider the case where we want to split our students by the value of their <code>Major</code> field.  We can accomplish this with query syntax:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">var</span> studentsByMajor = <span style="color:#66d9ef">from</span> student <span style="color:#66d9ef">in</span> students <span style="color:#66d9ef">select</span> student <span style="color:#66d9ef">group</span> student <span style="color:#66d9ef">by</span> student.Major;</span></span></code></pre></div><p>or using method syntax:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">var</span> studentsByMajor = students.GroupBy(student =&gt; student.Major);</span></span></code></pre></div><p>The result type of a grouping operation is an <code>IEnumerable&lt;IGrouping&lt;TKey, TSource&gt;&gt;</code>; the <code>IGrouping</code> is essentially a key/value pair with the key being the type we were grouping by.  In the example it would be <code>IEnumerable&lt;IGrouping&lt;string, Student&gt;&gt;</code> (Seeing this, you can probably begin to appreciate why we normally use <code>var</code> for query variables).</p>
<p>To print out each student in each category, we&rsquo;d need to iterate over this collection, and then over the groupings:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">foreach</span>(<span style="color:#66d9ef">var</span> <span style="color:#66d9ef">group</span> <span style="color:#66d9ef">in</span> studentsByMajor) {
</span></span><span style="display:flex;"><span>    Console.WriteLine(<span style="color:#e6db74">$&#34;{group.Key} Students&#34;</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">foreach</span>(<span style="color:#66d9ef">var</span> student <span style="color:#66d9ef">in</span> <span style="color:#66d9ef">group</span>) {
</span></span><span style="display:flex;"><span>        Console.WriteLine(<span style="color:#e6db74">$&#34;{student.First} {student.Last}&#34;</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><h2 id="paging">Paging</h2>
<p>A common strategy with large data sets is to separate them into <em>pages</em>, i.e. the first 20 items might appear on page 1, and by clicking the page 2 link, the user could view the next twenty items, and so on.  This paging functionality is implemented in LINQ using the <code>Skip()</code> and <code>Take()</code> operators.  The <code>Skip()</code> operator specifies how many records to skip over, while the <code>Take()</code> operator indicates how many records to include.  Thus, to take the second page of students when each page displays twenty students, we would use:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">var</span> pagedStudents = students.Skip(<span style="color:#ae81ff">20</span>).Take(<span style="color:#ae81ff">20</span>);</span></span></code></pre></div><p>Note that there is no query syntax corresponding to the <code>Skip()</code> and <code>Take()</code> operations, so to use them with query syntax, we wrap the query in parenthesis and invoke the methods on the result.  I.e. sorting students alphabetically and then taking the third page of twenty would be:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">var</span> pagedSortedStudents = (<span style="color:#66d9ef">from</span> student <span style="color:#66d9ef">in</span> students sort <span style="color:#66d9ef">by</span> last, first).Skip(<span style="color:#ae81ff">40</span>).Take(<span style="color:#ae81ff">20</span>);</span></span></code></pre></div><h2 id="existence-checks">Existence Checks</h2>
<p>Sometimes we want to know if a particular record exists in our data source.  The <code>Any()</code> operator can be used to perform such a check.  It evaluates to <code>true</code> if the query has any results, or <code>false</code> if it does not.  Like the <code>Skip()</code> and <code>Take()</code>, it does not have a query syntax form, so it must be invoked using the method syntax.  For example, to determine if we have at least one student named Bob Smith, we could use:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">var</span> bobSmithExists = (<span style="color:#66d9ef">from</span> student <span style="color:#66d9ef">in</span> students <span style="color:#66d9ef">where</span> student.First == <span style="color:#e6db74">&#34;Bob&#34;</span> &amp;&amp; student.Last == <span style="color:#e6db74">&#34;Smith&#34;</span>).Any();</span></span></code></pre></div><p>Or, in method syntax:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">var</span> bobSmithExists = students.Any(student =&gt; student.First == <span style="color:#e6db74">&#34;Bob&#34;</span> &amp;&amp; student.Last == <span style="color:#e6db74">&#34;Smith&#34;</span>);</span></span></code></pre></div><p>Alternatively, if we wanted to retrieve Bob Smith&rsquo;s record instead of simply determining if we had one, we could use <code>First()</code>:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">var</span> bobSmith = (<span style="color:#66d9ef">from</span> student <span style="color:#66d9ef">in</span> students <span style="color:#66d9ef">where</span> student.First == <span style="color:#e6db74">&#34;Bob&#34;</span> &amp;&amp; student.Last == <span style="color:#e6db74">&#34;Smith&#34;</span>).First();</span></span></code></pre></div><p>or in method syntax:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">var</span> bobSmith = students.First(student =&gt; student.First == <span style="color:#e6db74">&#34;Bob&#34;</span> &amp;&amp; student.Last == <span style="color:#e6db74">&#34;Smith&#34;</span>);</span></span></code></pre></div><p>This evaluates to the first matching result of the query (if we have multiple Bob Smiths, we&rsquo;ll only get the first one).  If there is no matching record, an <code>InvalidOperationException</code> is thrown.  Alternatively, we can use <code>FirstOrDefault()</code> which returns a default value corresponding to the query data type. For classes, this would be <code>null</code>, so given this query:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">var</span> bobSmith = students.FirstOrDefault(student =&gt; student.First == <span style="color:#e6db74">&#34;Bob&#34;</span> &amp;&amp; student.Last == <span style="color:#e6db74">&#34;Smith&#34;</span>);</span></span></code></pre></div><p>The value of <code>bobSmith</code> would be his record (if he is in the collection) or <code>null</code> (if he was not).</p>
<h2 id="aggregating">Aggregating</h2>
<p>Sometimes we want to perform aggregate operations upon a data source, i.e. counting, summing, or averaging. As with paging, these are accomplished via method-only operators.  For example, to count all students in our data source, we could use:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">var</span> studentCount = students.Count();</span></span></code></pre></div><p>This can be combined with any LINQ query, i.e. the count of students with a GPA above 3.0 in query syntax would be:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">var</span> studentsAbove3GPA = (<span style="color:#66d9ef">from</span> student <span style="color:#66d9ef">in</span> students <span style="color:#66d9ef">where</span> student.GPA &gt; <span style="color:#ae81ff">3.0</span>).Count();</span></span></code></pre></div><p>or in method syntax:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">var</span> studentsAbove3GPA = students.Where(student =&gt; student.GPA &gt; <span style="color:#ae81ff">3.0</span>).Count();</span></span></code></pre></div><p>Similarly, to compute the average GPA we would use the <code>Average()</code> method in conjunction with a projection.  In query syntax:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">var</span> averageGPA = (<span style="color:#66d9ef">from</span> student <span style="color:#66d9ef">in</span> students <span style="color:#66d9ef">select</span> student.GPA).Average();</span></span></code></pre></div><p>or in method syntax:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">var</span> averageGPA = students.Select(student =&gt; student.GPA).Average();</span></span></code></pre></div><p>or we can move the selector Predicate into the <code>Average()</code> directly:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">var</span> averageGPA = students.Average(student =&gt; student.GPA);</span></span></code></pre></div><p>We can create more complex queries to address specific questions.  For example, with a <code>group by</code> we could compute the average GPA by major:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">var</span> gpaByMajor = <span style="color:#66d9ef">from</span> student <span style="color:#66d9ef">in</span> students <span style="color:#66d9ef">group</span> student <span style="color:#66d9ef">by</span> student.Major <span style="color:#66d9ef">into</span> majorGroup <span style="color:#66d9ef">select</span> <span style="color:#66d9ef">new</span> 
</span></span><span style="display:flex;"><span>    { 
</span></span><span style="display:flex;"><span>        Major = majorGroup.Key,
</span></span><span style="display:flex;"><span>        AverageGPA = majorGroup.Average(student =&gt; student.GPA);
</span></span><span style="display:flex;"><span>    }</span></span></code></pre></div><p>The <code>Sum()</code> operator works similarly, summing a value.  To sum the ages of all students, we could use:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">var</span> sumOfAges = (<span style="color:#66d9ef">from</span> student <span style="color:#66d9ef">in</span> students <span style="color:#66d9ef">select</span> student.Age).Sum();</span></span></code></pre></div><p>or</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">var</span> sumOfAges = students.Select(student =&gt; student.Age).Sum();</span></span></code></pre></div><p>or</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">var</span> sumOfAges = students.Sum(student =&gt; student.Age);</span></span></code></pre></div><p>There are also <code>Min()</code> and <code>Max()</code> aggregate operators which select the minimum and maximum values, respectively.  For example, we could find the maximum and minimum earned GPAs with:</p>
<div class="wrap-code highlight"><pre tabindex="0"><code class="language-chsarp" data-lang="chsarp">var minGPA = students.Min(student =&gt; student.GPA);
var maxGPA = students.Max(student =&gt; student.GPA);</code></pre></div><p>Finally, there is a generic <code>Aggregate()</code> method which provides an aggregator variable that we can use to build any kind of aggregate function.  Let&rsquo;s first see how it can be used to duplicate the functionality of the <code>Sum()</code> method:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">var</span> sumOfAges = students.Aggregate((sum, student) =&gt; sum + student.Age);</span></span></code></pre></div><p>Here, <code>sum</code> is inferred to be an <code>int</code>, as <code>student.Age</code> is an int.  So it starts at <code>0</code>, and each time the <code>Aggregate</code> method processes a student, it adds that student&rsquo;s <code>Age</code> into the <code>sum</code>.</p>
<p>Now let&rsquo;s use this method for something new - generating a string of email addresses for a bulk mailing.  Assume our email application needs a list of semicolon-separated email addresses.  In that case, we could generate the emails for all students from:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">var</span> emails = students.Aggregate((emails, student) =&gt; emails + <span style="color:#e6db74">$&#34;; {student.EID}@k-state.edu&#34;</span>);</span></span></code></pre></div><p>If we had students with EIDs &ldquo;mary&rdquo;, &ldquo;brb30&rdquo;, and &ldquo;stan&rdquo;, the resulting string would be:</p>
<div class="wrap-code highlight"><pre tabindex="0"><code>mary@k-state.edu; brb30@k-state.edu; stan@ksu.edu</code></pre></div>
  
  
<div class="box notices cstyle info">
  <div class="box-label"><i class="fa-fw fas fa-info-circle"></i> Info</div>
  <div class="box-content">

<p>You may have heard the term <a href="https://en.wikipedia.org/wiki/MapReduce" target="_blank">map/reduce</a>
 in the context of functional programming or big data.  This is an algorithmic approach to processing data.  This pattern can be duplicated in LINQ using a query as the mapping function, and <code>Aggregate()</code> as the reduce function.</p>
</div>
</div>

            <footer class="footline">

            </footer>
          </article>

    
    
          <article class="default">
            <header class="headline">
            </header>
<h1 id="extension-methods">Extension Methods</h1>

<p>In order to use LINQ with your <code>IEnumerable</code> collections, you must include this using statement:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">using</span> System.LINQ </span></span></code></pre></div><p>Without it, the LINQ collection methods will not be available.  You might be wondering why, as your collections are mostly defined in the <code>System.Collections</code> or <code>System.Collections.Generic</code> namespaces.</p>
<p>The answer is that LINQ on collections is implemented using <a href="https://docs.microsoft.com/en-us/dotnet/csharp/programming-guide/classes-and-structs/extension-methods" target="_blank">extension methods</a>
.  This is a C# feature that allows you to add methods to any class, even a <code>sealed</code> class.  But how can we add methods to a sealed class?  Isn&rsquo;t the point of sealing a class to prevent altering it?</p>
<p>The answer is that extension methods don&rsquo;t actually modify the class itself.  Instead, they make available additional methods that the compiler &ldquo;pretends&rdquo; are a part of the class.  But these are defined separate from the class, and cannot modify it, nor access private or protected members of the class.  As the LINQ extension methods are defined in the <code>System.LINQ</code> namespace, we must make them available with a using statement before the compiler and intellisense will let us use them.</p>
<p>Let&rsquo;s see an example of creating our own extension methods.  As programmers, we often use class names in Pascal case, that might be useful to convert into human-readable strings.  Let&rsquo;s write an extension method to do this transformation:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">using</span> System.Text;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">namespace</span> StringExtensions {
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// Converts a camel-case or pascal case string into a human-readable one </span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">string</span> Humanize(<span style="color:#66d9ef">this</span> String s)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        StringBuilder sb = <span style="color:#66d9ef">new</span> StringBuilder();
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">int</span> start = <span style="color:#ae81ff">0</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">for</span>(<span style="color:#66d9ef">int</span> i = <span style="color:#ae81ff">1</span>; i &lt; s.Length; i++) 
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">// An upper case character is the start of a new word</span>
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">if</span>(Char.IsUpper(s[i]))
</span></span><span style="display:flex;"><span>            {
</span></span><span style="display:flex;"><span>                <span style="color:#75715e">// So we&#39;ll add the last word to the StringBuilder</span>
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">string</span> word = s.Substring(start, i - start);
</span></span><span style="display:flex;"><span>                sb.Append(word);
</span></span><span style="display:flex;"><span>                <span style="color:#75715e">// Since that wasn&#39;t the last word, add a space </span>
</span></span><span style="display:flex;"><span>                sb.Append(<span style="color:#e6db74">&#34; &#34;</span>);
</span></span><span style="display:flex;"><span>                <span style="color:#75715e">// Mark the start of the new word </span>
</span></span><span style="display:flex;"><span>                start = i;
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        } 
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// We should have one more word left </span>
</span></span><span style="display:flex;"><span>        sb.Append(s.Substring(start));
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> sb.ToString();
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>Notice a couple of important features.  First, the method is defined as <code>static</code>.  All extension methods are <code>static</code> methods.  Second, note the use of <code>this</code> in the first parameter, <code>this string s</code>.  The use of the <code>this</code> keyword is what tells C# the method is an extension method.  Moreover, it indicates the class that is being extended - <code>String</code> (which is equivalent to <code>string</code>).</p>
<p>Other than these two details, the rest of the method looks much like any other method.  But any time this method is in scope (i.e. within the <code>StringExtensions</code> namespace, or in any file with a <code>using StringExtensions</code> statement), there will be an additional method available on <code>string</code>, <code>Humanize()</code>.</p>
<p>That&rsquo;s all there is to writing an extension method.  Go ahead and try writing your own to convert human-readable strings into Pascal or Camel case!</p>

            <footer class="footline">

            </footer>
          </article>

    
    
          <article class="default">
            <header class="headline">
            </header>
<h1 id="summary">Summary</h1>

<p>In this chapter we learned about LINQ, Microsoft&rsquo;s query technology for querying collections, relational databases, and XML files (along with community implementations for many other queryable things).  We saw how to use both query and method syntax provided by LINQ to perform common query operations.  Finally, we examined the mechanism LINQ uses to provide new functionality to <code>IEnumerable</code> collections - extension methods.  We even implemented a few extension methods of our own!</p>
<p>Now you should be ready to use LINQ in your own projects, as well as define your own custom extension methods.</p>

            <footer class="footline">

            </footer>
          </article>

          </section>
          </section>
    
    
          <article class="chapter">
            <header class="headline">
            </header>


<div class="article-subheading">Chapter A</div>
<h1 id="learning-programming">Learning Programming</h1>

<h6 id="the-science-of-learning-programming">The Science of Learning Programming</h6>
<p>Get schooled</p>

            <footer class="footline">

            </footer>
          </article>

          <section>
            <h1 class="a11y-only">Subsections of Learning Programming</h1>
    
    
          <article class="default">
            <header class="headline">
            </header>
<h1 id="introduction">Introduction</h1>

<p>You may not have given much thought to how you are learning to program. Very likely, you&rsquo;ve just been engrossed in <em>doing so</em>.  But understanding the learning process can help you improve how quickly, and how well you learn.  As we tackle the subject of object-oriented programming, it will greatly benefit you to have a better grasp of exactly what&rsquo;s going on upstairs. Especially as we embark on our first semester-long programming project. In the immortal words of Marty McFly, things are about to get heavy! <sup id="fnref:1"><a href="#fn:1" class="footnote-ref" role="doc-noteref">1</a></sup></p>
<p>
<a href="#image-738a2d7a60034b1c4cbbf3b964a4c5f3" class="lightbox-link">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/a.1.1.jpg" alt="Doc Brown asking about heavy problems" style="height: auto; width: auto;" loading="lazy">
</a>
<a href="javascript:history.back();" class="lightbox" id="image-738a2d7a60034b1c4cbbf3b964a4c5f3">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/a.1.1.jpg" alt="Doc Brown asking about heavy problems" class="lightbox-image" loading="lazy">
</a></p>
<div class="footnotes" role="doc-endnotes">
<hr>
<ol>
<li id="fn:1">
<p>This is a reference to the classic 1985 film &ldquo;Back to the Future,&rdquo; in which Marty McFly (played by Michael J. Fox) travels back in time to save his scientist friend Doc Brown (played by Christopher Loyd). An advance warning: Many of my pop-culture references are going to be grounded in the 80&rsquo;s and 90&rsquo;s.  You may be more familiar with the animated show &ldquo;Rick and Morty,&rdquo; which was inspired by Doc and Marty&rsquo;s relationship in the film.&#160;<a href="#fnref:1" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
</ol>
</div>

            <footer class="footline">

            </footer>
          </article>

    
    
          <article class="default">
            <header class="headline">
            </header>
<h1 id="natural-born-programmers">Natural Born Programmers</h1>

<p>There is a prevalent myth that some people are &ldquo;natural born programmers&rdquo; to whom programming comes easily. This is a dangerous idea, because of its corollary - the idea that &ldquo;some people simply aren&rsquo;t able to learn programming.&rdquo;  If you embrace these related ideas, you will find yourself wondering to which set you actually belong.</p>
<p>The truth is that in learning to <em>program</em>, we are learning to solve problems <em>in a way that can be performed by a computing machine</em>.  Think back to your introductory computer science course - you may have been asked to give instructions to the professor or a peer to perform a task.  Shuffling cards, for example, or making a peanut butter sandwich, as in the following video from the Darnit family:</p>
<iframe width="560" height="315" src="https://www.youtube.com/embed/FN2RM-CHkuI" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
<p>The point of this exercise is to understand the <em>exactitude</em> or <em>precision</em> with which programs must be written. But it also reveals just how different people are from computers. The simple truth is that to become good programmers, we must <em>learn</em> to write programs by developing an understanding of how the computers work, as well as how to express instructions in a form they can use.</p>
<p>The rest of this chapter is devoted to understanding that learning process.</p>

            <footer class="footline">

            </footer>
          </article>

    
    
          <article class="default">
            <header class="headline">
            </header>
<h1 id="mindsets">Mindsets</h1>

<p>Carol Dweck is a researcher who has been developing a theory on &ldquo;Mindsets.&rdquo;  She describes her research in the following Ted Talk:</p>
<iframe width="697" height="522" src="https://www.youtube.com/embed/_X0mgOOSpLU" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>

            <footer class="footline">

            </footer>
          </article>

    
    
          <article class="default">
            <header class="headline">
            </header>
<h1 id="the-new-science-of-learning">The New Science of Learning</h1>

<p>Terry Doyle and Todd Zakrajsek explore the implications of mindsets and other understandings of the learning process emerging from cognitive science in their book <a href="https://www.amazon.com/New-Science-Learning-Learn-Harmony/dp/1620360098" target="_blank">The New Science of Learning: How to Learn in Harmony with your Brain</a>
, which they specifically wrote for college-age learners.  I would encourage you to read this book.  But I&rsquo;ll offer a brief summary here:</p>
<h2 id="sleep">Sleep</h2>
<p>Perhaps the most impactful thing you can do to improve your learning is to get high-quality sleep. It is during sleep that your brain consolidates the memories of the day (including what you were learning) into long-term storage. Insufficient sleep has a large negative impact on this process, resulting in lost or inaccessible memories.</p>
<blockquote>
The three stages of memory processing are encoding, storage, and retrieval.  All three are affected in different ways by the amount of sleep you get.  It is difficult to encode new learning when you are tired and unable to pay attention to the information.  In fact, when you are sleep deprived, it becomes more difficult to learn new information the longer you are awake.  Similarly, without the proper amount of sleep, storage of new memories will be disrupted. The third stage of memory processing is the recall phase (retrieval).  During retrieval, the memory is accessed and re-edited. This is often the most important stage, as learned information is of limited value if it can't be recalled when needed, for example, for an exam. [...] Converging scientific evidence, from the molecular to the phenomenological, leaves little doubt that memory reprocessing "offline," that is, during sleep is an important component of how our memories are formed, shaped, and remembered.
<p>Dolye and Zakrajsek, 2013, pp. 21-22</p>
</blockquote>
<p>The NIH recommends 7.5 to 9 hours of sleep nightly. Individuals can vary greatly in their sleep needs, and may have different sleep patterns known as &ldquo;chronotypes&rdquo; which are the basis for stereotypes like &lsquo;morning people&rsquo; or &rsquo;night owls&rsquo;.  It is important to understand your own sleep patterns to be able to adapt your study and sleep habits to maximize your learning effectiveness.  Doyle and Zakrajsek offer advice to tailor your sleep and study patterns, as well as how to deal with &lsquo;sleep debt&rsquo; - the learning penalty incurred when you were unable to get enough rest.</p>

  
  
<div class="box notices cstyle info">
  <div class="box-label"><i class="fa-fw fas fa-info-circle"></i> Info</div>
  <div class="box-content">

<p>Caffeine and alcohol, especially when consumed in large quantities, disrupt your ability to sleep effectively, and therefore your ability to learn.</p>
</div>
</div>
<h2 id="exercise">Exercise</h2>
<p>Exercise plays a surprisingly important role in learning.  When you exercise - especially aerobic exercise (the kind that gets your heart rate up), your body releases extra neurochemicals and proteins that are used by the brain cells to communicate. This rush of extra resources improves your ability to learn new concepts and skills.</p>
<p>
<a href="#image-559e5a52cb7414929f551987a68709b5" class="lightbox-link">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/a.4.1.jpg" alt="How Much Physical Exercise do you need?" style="height: auto; width: auto;" loading="lazy">
</a>
<a href="javascript:history.back();" class="lightbox" id="image-559e5a52cb7414929f551987a68709b5">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/a.4.1.jpg" alt="How Much Physical Exercise do you need?" class="lightbox-image" loading="lazy">
</a></p>
<p>In addition to getting this regular exercise, you should periodically get up from your computer and walk around, or even better, adopt a standing desk.  The human body is not meant to sit for extended periods of time. Doing so can lead to blood pooling in the buttocks and thighs and increases dramatically your risk of heart attack and stroke.</p>
<h2 id="the-senses">The Senses</h2>
<p>As memories are encoded, they draw upon <em>all</em> the senses involved in the experience.  Research is starting to show that involving multiple senses in a learning activity can improve the learning.  This is one reason I sprinkle these readings with images and videos.  It is also one of the reasons I like using <a href="https://en.wikipedia.org/wiki/Cognitive_apprenticeship" target="_blank">Cognitive Apprenticeship</a>
 in my teaching.  By showing you the code I am writing (seeing), and talking about what and why I am doing it (hearing), and having you write the same code (touching), we are engaging multiple senses for a stronger learning experience.</p>
<p>You can also leverage this in your own learning efforts.  Creating <a href="https://learningcenter.unc.edu/tips-and-tools/using-concept-maps/" target="_blank">concept maps</a>
 connecting the ideas you are learning in this and other CS courses engages you visually with the learning, and also encourages your brain to recognize and utilize those connections to strengthen your reasoning about them.  Annotating your textbooks engages you in both reading (seeing) and touching (writing), and helps you reflect more strongly on what you are studying.  Try printing out the pages of this textbook as you read them, and make your own annotations in the margins and put it into a three-ring binder.  It will improve your learning and give you a physical copy of the text when you&rsquo;re done!</p>
<h2 id="patterns">Patterns</h2>
<p>The human brain is built to recognize and process patterns.  Explicitly seeking patterns in what you&rsquo;re doing can therefore help your learning.  And programming is chock full of patterns!  Consider if I asked you to write some code to add one to each element in an array.  What would you do?  Possibly a <code>for</code> loop like this:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C#" data-lang="C#"><span style="display:flex;"><span><span style="color:#66d9ef">for</span>(<span style="color:#66d9ef">int</span> i = <span style="color:#ae81ff">0</span>; i &lt; array.Length; i++) {
</span></span><span style="display:flex;"><span>    array[i] += <span style="color:#ae81ff">1</span>;
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>But what if I asked you to <em>halve</em> the value instead?  perhaps:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C#" data-lang="C#"><span style="display:flex;"><span><span style="color:#66d9ef">for</span>(<span style="color:#66d9ef">int</span> i = <span style="color:#ae81ff">0</span>; i &lt; array.Length; i++) {
</span></span><span style="display:flex;"><span>    array[i] /= <span style="color:#ae81ff">2</span>;
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>Notice the parts that stay the same?  We call this pattern <em>iteration</em>, and use it constantly.  Moreover, the syntax of the <code>for</code> loop itself is a pattern.  In fact, <code>for</code> loops were developed because of another pattern programmers found themselves using regularly:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C#" data-lang="C#"><span style="display:flex;"><span><span style="color:#66d9ef">int</span> i = <span style="color:#ae81ff">0</span>;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">while</span>(i &lt; array.Length) {
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// DO SOMETHING WITH ARRAY</span>
</span></span><span style="display:flex;"><span>    i++;
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>Notice the three statements <code>int i = 0;</code>, <code>i &lt; array.Length</code>, and <code>i++;</code>?  These are the three parts of a <code>for</code> loop!  When programmers found themselves using this pattern over and over again, they added new syntax to programming languages to simplify writing it<sup id="fnref:1"><a href="#fn:1" class="footnote-ref" role="doc-noteref">1</a></sup>.  In fact, the reason we use the semicolon to separate the three parts of a <code>for</code> loop is <em>because</em> they were originally separate statements in this <code>while</code> loop construction.</p>
<p>We also can apply this pattern recognition on similar, but unfamiliar formulations.  Consider this code:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C#" data-lang="C#"><span style="display:flex;"><span><span style="color:#66d9ef">for</span>(<span style="color:#66d9ef">int</span> i = array.Length; i &gt; <span style="color:#ae81ff">1</span>; i--) {
</span></span><span style="display:flex;"><span>    array[i] += array[i-<span style="color:#ae81ff">1</span>];
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>What does it do?</p>
<p>You likely noticed that it iterates through an array, but not <em>forward</em> through the array but rather <em>backwards</em>.  And at each step we increase the value of an item by the value of the item before it.  Could we rewrite this code as a forward iteration?</p>
<h2 id="memory">Memory</h2>
<p>We already talked about the role of sleep in memory formation, but Doyle and Zakrajsek go deeper into how memories form and how that can be enhanced in the context of college life. For example, cognitive science has shown that parts of the brain responsible for memory formation remain active <em>up to an hour</em> after the learning experience (i.e. a lecture) has ended.  So the common practice of scheduling your classes back-to-back may be impacting your ability to learn in the earlier classes!</p>
<p>Research has also shown that <em>distributed practice</em> is crucial to reinforcing and making available memories involved in skills as well as conceptual reasoning.  The process of <em>using</em> the skill, or <em>recalling</em> the knowledge at regular intervals helps &lsquo;settle&rsquo; the learning into our minds.  In contrast, the practice of <em>cramming</em> may help us recall answers for an exam, but shortly after those answers will be lost to us, as the memories we formed were short-term.  This is also why this class, as well as your math and physics courses emphasize solving problem after problem. It isn&rsquo;t that we want to torture you - it&rsquo;s that this continual practice <em>is what helps you to learn the skills you&rsquo;re developing</em>.</p>
<p><em>Elaboration</em> is another key to strengthening memory and recall.  This involves adding more nuanced understandings to what you already know.  For example, in this class we&rsquo;re revisiting programming syntax that you&rsquo;ve already learned, and I&rsquo;ll be introducing new ideas and concepts that tie into that.  Just like the example of how a <code>for</code> loop is nothing more than syntactic sugar for a specific <code>while</code> loop formulation.  Do you <em>need</em> to know that?  Probably not.  But <em>learning</em> about it helps reinforce your understandings of how <em>both</em> kinds of loops operate, and that can make you a more proficient programmer.</p>
<p>Do you study while watching YouTube or conversing with friends?  You might be interested to know that <em>multitasking</em> has a significant impact on memory formation:</p>
<blockquote>
When you shift task while working on something that requires thinking, such as texting your friend and listening to a lecture in class, your brain goes through a four-step process that allows you to switch your attention: (a) shift alert, (b) rule activation for task 1, (c) disengagement, (d) rule activation for task 2. This process is repeated every time you switch tasks that involve thinking, and you never get better or faster at it.  You may have noticed that when you try to do two thinking tasks at the same time, you cannot complete both simultaneously, as the brain must shut down one task before working on the other. [...R]esearch demonstrates that individuals who shift tasks make 50% more errors and spend at least 50% more time on both tasks.
<p>Dolye and Zakrajsek, 2013, p. 79</p>
</blockquote>
<p><em>Stress</em> also has an impact on memory formation - even minor stressful events can cause the release of hormones that disrupt the brain&rsquo;s learning process.  Exercise is the best counter to this issue, both helping repair the damage from stress and prevent it from occurring.</p>
<div class="footnotes" role="doc-endnotes">
<hr>
<ol>
<li id="fn:1">
<p>We call this common practice of adding new syntax to a language to simplify writing commonly used patterns <a href="https://en.wikipedia.org/wiki/Syntactic_sugar" target="_blank"><em>syntactic sugar</em></a>
, as it&rsquo;s not strictly necessary, but makes the process of writing programs so much sweeter.&#160;<a href="#fnref:1" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
</ol>
</div>

            <footer class="footline">

            </footer>
          </article>

    
    
          <article class="default">
            <header class="headline">
            </header>
<h1 id="jean-piaget">Jean Piaget</h1>

<p>Jean Piaget was a biologist and psychologist who performed some of the earliest studies on knowledge acquisition in children.  His work is the foundation of <a href="https://en.wikipedia.org/wiki/Constructivism_%28philosophy_of_education%29" target="_blank">Constructivism</a>
, one of the more influential philosophies of education.</p>
<p>
<a href="#image-b218219d4da9bb62c6a67e4097d716eb" class="lightbox-link">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/a.5.1.jpg" alt="Jean Piaget" style="height: auto; width: auto;" loading="lazy">
</a>
<a href="javascript:history.back();" class="lightbox" id="image-b218219d4da9bb62c6a67e4097d716eb">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/a.5.1.jpg" alt="Jean Piaget" class="lightbox-image" loading="lazy">
</a></p>
<h2 id="genetic-epistemology">Genetic Epistemology</h2>
<p>Of especial interest to us is his theory of <em>genetic epistemology</em>.  Epistemology is the study of human knowledge, and genetic in this sense refers to <em>origins</em> i.e. the <em>genesis</em>, so his theory concerns <em>how knowledge is created by humans</em>.</p>
<p>Piaget&rsquo;s genetic epistemology was inspired by studies he conducted of snails of the genus Lymnea native to the lakes of his home, Switzerland.  He was able to establish that what had previously been considered different species of snails based on the shape of their shells were actually one species.  He showed that when the snails of one lake were placed in a different lake, the way their shells grew changed to match those of the snails living in the second lake.  In other words, the traits the snails displayed altered in response to their environment.</p>
<p>
<a href="#image-103b56672672d0f07e72608d5885f7d5" class="lightbox-link">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/a.5.2.jpg" alt="Examples of Lymnea" style="height: auto; width: auto;" loading="lazy">
</a>
<a href="javascript:history.back();" class="lightbox" id="image-103b56672672d0f07e72608d5885f7d5">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/a.5.2.jpg" alt="Examples of Lymnea" class="lightbox-image" loading="lazy">
</a></p>
<p>Piaget suspected a similar mechanism was at work in human learning.  He proposed that the human brain, much like the bodies of the snails, sought to exist in equilibrium with its environment.  For the brain, this environment meant the ideas it was exposed to.  He proposed two different mechanisms for learning, <em>accommodation</em> and <em>assimilation</em>, which related to how structures of knowledge were formed in the brain.</p>
<p>Assimilation referred to the process of adding new knowledge into existing mental structures.  For example, once you know of and understand colors, you might encounter a new one - say periwinkle, which falls between blue and violet.  Since you already know blue and violet, adding the knowledge of periwinkle is a straightforward task for the brain of assigning it to a slot between the two in the mental structure of &lsquo;colors&rsquo;.</p>
<p>In contrast, accommodation refers to the process by which knowledge <em>for which you have no mental structures to represent</em> are learned. This process involves <em>building</em> these mental structures, and is far more work.  Modern cognitive science equates this process to the formation and reinforcement of new connections between neurons - a significant biological investment. Thus, triggering accommodation requires significant stimulus, in the form of wrestling with concepts that are currently beyond your grasp - a struggle that creates <em>disequilibrium</em> for your brain, eventually leading to it creating the new structure to accommodate the new knowledge.</p>
<p>This is the basis of the &rsquo;eureka&rsquo; moment, when a difficult concept has finally become clear.  No doubt you have experienced this in a subject such as mathematics or programming, where a skill or idea you&rsquo;ve been struggling with suddenly snaps into place, and becomes far easier to work with.  This is also why your math and programming courses put so much emphasis on homework - this work helps create the disequilibrium you need to trigger accommodation.  This is also why mindsets are so powerful - a fixed mindset provides a <em>different</em> mechanism for managing cognitive disequilibrium - by denying your ability to learn a subject, you provide justification for not engaging in the learning process.</p>
<h2 id="stage-theory">Stage Theory</h2>
<p>In addition to the mechanisms of accommodation and assimilation he outlined in his Genetic Epistemology theories, Piaget identified four stages children progress through as they learn to reason more abstractly.  Those stages are:</p>
<ul>
<li><strong>Sensorimotor</strong> - where the learner uses their senses to interact with their surroundings.  This is the hallmark of babies and toddlers who gaze wide-eyed at, touch, and taste the objects in their surroundings.</li>
<li><strong>Preoperational</strong> - in this stage the learner begins to think <em>symbolically</em>, using words and pictures to represent objects and actions.</li>
<li><strong>Concrete Operational</strong> - In this stage, the learner begins to think logically, but only about concrete events.  Inductive logic - the ability to reason from specific information to a general principle also appears.</li>
<li><strong>Formal Operational</strong> - This final stage marks the ability to grasp and work with abstractions, and is marked by hypothetico-deductive reasoning (i.e. formulating and testing hypotheses)</li>
</ul>
<h2 id="neo-piagetian-theory">Neo-Piagetian Theory</h2>
<p>While Piaget focused his study on children, many of the researchers who followed him also looked at how <em>adults</em> learn.  Their findings suggest that <em>all</em> learners progress through the four stages with <em>any</em> new learning.  That is, when you begin to learn a novel concept or skill, you are building the cognitive structures necessary to support it, and that your progress through this process corresponds to these four stages.  Moreover, they have found that the divisions between stages are not rigid and clearly delineated; learners can exist in multiple stages at once (which they call the <em>overlapping waves model</em>).</p>
<p>
<a href="#image-75991b7c5bc78d4e33e0f02f3f469469" class="lightbox-link">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/a.5.3.png" alt="The Overlapping Waves Model" style="height: auto; width: auto;" loading="lazy">
</a>
<a href="javascript:history.back();" class="lightbox" id="image-75991b7c5bc78d4e33e0f02f3f469469">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/a.5.3.png" alt="The Overlapping Waves Model" class="lightbox-image" loading="lazy">
</a></p>

            <footer class="footline">

            </footer>
          </article>

    
    
          <article class="default">
            <header class="headline">
            </header>
<h1 id="developmental-epistemology-of-computer-programming">Developmental Epistemology of Computer Programming</h1>

<p>Among these neo-Piagetian researchers is a group including Raymond Lister and Donna M. Teague whom applied these theories to the learning of computer science, formulating a theory Lister calls <em>The Developmental Epistemology of Computer Programming</em>. This theory describes the traits of programmers at each of the stages of development.  In particular, they use a student&rsquo;s ability to <em>trace</em> code (explain line-by-line what it does) as a demarcation between stages.</p>
<table>
  <tr>
    <th>Stage</th>
    <th>Traits</th>
  </tr>
  <tr>
    <td>Sensorimotor</td>
    <td>
      <ul>
        <li>Cannot trace code with >= 50% accuracy</li>
        <li>Dominant problem-solving strategy is trial and error</li>
      </ul>
    </td>
  </tr>
  <tr>
    <td>Preoperational</td>
    <td>
      <ul>
        <li>Can trace code with >= 50% accuracy</li>
        <li>Traces without abstracting any meaning from the code</li>
        <li>Cannot see relationships between lines of code</li>
        <li>Struggles to make effective use of diagrammatic abstractions of code</li> 
        <li>Dominant problem-solving strategy is quasi-random code changes and copious trial runs</li>
      </ul>
    </td>
  </tr>
  <tr>
    <td>Concrete Operational</td>
    <td>
      <ul>
        <li>Dominant problem-solving strategy is hasty design, futile patching</li>
        <li>Can establish purpose of code by working backwards from execution results</li>
        <li>Tends to reduce levels of abstraction to make concepts more understandable</li>
      </ul>
    </td>
  </tr>
  <tr>
    <td>Formal Operational</td>
    <td>
      <ul>
        <li>Uses hypothetico-deductive reasoning</li>
        <li>Reads code rather than traces to deduce purpose</li>
      </ul>
    </td>
  </tr>
</table>
<p>These stages reflect the progress the learner is making through <em>accommodation</em>, creating the mental structures needed to reason about programming.  An expert has developed these structures, which reflect patterns in how code is written - that is why an expert no longer traces code - they can <em>see</em> the patterns in the code and immediately grasp its action and purpose.  In contrast, the novice must deduce the result of each line of code, put those understandings together, and then deduce what it is doing overall.</p>
<p>Writing a program is similar, the expert begins with a clear picture of the patterns she must employ, and focuses on fleshing those out, while a novice must create the program &lsquo;from whole cloth&rsquo;, reasoning out each step of the process.  They are not yet capable of reasoning about the program they are writing in the abstract.</p>
<p>This also helps explain why learning to program can be so hard.  Abstraction is considered a central tool in programming; we use abstractions constantly to simplify and make programs more understandable to other programmers.  Consider a higher-level programing language, like C#.  Each syntax element is an abstraction for a more complex machine-level process.  The statement:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C#" data-lang="C#"><span style="display:flex;"><span>x += <span style="color:#ae81ff">2</span>;</span></span></code></pre></div><p>Stands in for machine instructions along the lines of:</p>
<div class="wrap-code highlight"><pre tabindex="0"><code>PUSH REG5 TO REG1
PUSH 2 TO REG2
ADD REG1 AND REG2
PUSH REG3 TO REG5</code></pre></div><p>Which are in turn, simplifications and abstractions of the actual process of adding the two binary values in register 1 and register 2 (remember studying binary math in CIS 115)?</p>
<p>Also, many of the productivity tools created to support expert programmers (i.e. automatic code completion) may actually <em>hamper</em> your learning, as they alleviate the need to carry out part of the process you are learning.  Consider turning these features off in your development environment until you have developed fluency as a programmer.</p>

  
  
<div class="box notices cstyle info">
  <div class="box-label"><i class="fa-fw fas fa-info-circle"></i> Info</div>
  <div class="box-content">

<p>To turn off autocomplete in Visual Studio:</p>
<ul>
<li>From Visual Studio, select <strong>&ldquo;Tools&rdquo; &gt; &ldquo;Options&rdquo;</strong>.</li>
<li>Select <strong>&ldquo;Text Editor&rdquo;</strong> in the left pane.</li>
<li>Select the language you are using (C#, C++, Basic, etc.).</li>
<li>For C# and Basic, choose <strong>&ldquo;IntelliSense&rdquo;</strong>. For C or C++, choose <strong>&ldquo;Advanced&rdquo;</strong>, then scroll to the <strong>&ldquo;IntelliSense&rdquo;</strong> section.</li>
<li>For C# and Basic, check the <strong>&ldquo;Show completion list after a character is typed&rdquo;</strong> to disable it. For C/C++, you will have a few options, such as <strong>&ldquo;Disable Auto Updating&rdquo;</strong>, <strong>&ldquo;Disable Squiggles&rdquo;</strong>, and <strong>&ldquo;Disable #include Auto Complete&rdquo;</strong>. Set any of these to <strong>&ldquo;True&rdquo;</strong> to turn them off.</li>
</ul>
</div>
</div>

            <footer class="footline">

            </footer>
          </article>

    
    
          <article class="default">
            <header class="headline">
            </header>
<h1 id="summary">Summary</h1>

<p>So what does all of this mean in the context of <em>your</em> learning?</p>
<ul>
<li>Developing into an expert programmer is going to take hard work</li>
<li>It will require a <em>lot</em> of writing and reading code</li>
<li>There is <em>no</em> shortcut in this learning process, because <em>you must create disequilibrium in your brain</em> in order for the necessary cognitive structures to form through the process of accommodation</li>
<li>This process can be very frustrating</li>
<li><em>You can <strong>do this</strong></em>, just as many students before you have</li>
</ul>
<p>What can you do to improve your learning process?</p>
<ul>
<li>Get enough sleep, both in quantity and regularity</li>
<li>Exercise regularly</li>
<li>Engage with the readings and activities.</li>
<li>Take notes, annotate your text, draw concept diagrams</li>
<li>Don&rsquo;t try to multitask while working on your classwork</li>
<li>Turn off autocompletion in your development environment</li>
<li>Don&rsquo;t copy/paste code directly into your program.  Instead, type it - it will take longer, but it will also give you the time to study each line and develop and understanding of what it is doing and how it interacts with the rest of the program.</li>
<li>Read programs written by other people, and try to understand what they are doing - <a href="https://github.com" target="_blank">GitHub</a>
 is a great source of examples, and you can filter it by programming language</li>
</ul>

            <footer class="footline">

            </footer>
          </article>

          </section>
    
    
          <article class="chapter">
            <header class="headline">
            </header>


<div class="article-subheading">Chapter B</div>
<h1 id="git-and-github">Git and GitHub</h1>

<p>Be a Better Version</p>

            <footer class="footline">

            </footer>
          </article>

          <section>
            <h1 class="a11y-only">Subsections of Git and GitHub</h1>
    
    
          <article class="default">
            <header class="headline">
            </header>
<h1 id="introduction">Introduction</h1>

<p>Code version control is a staple of modern software development.  So it&rsquo;s a good idea to learn and practice it <em>now</em>, so it becomes a core element of your software development practice.  This appendix covers one of the most popular distributed version control software in use today - Git.  It also covers one of the most popular online platforms for hosting remote Git repositories - GitHub.  (Hint: Despite the tendency for many programmers to use the names interchangeably, they <em>aren&rsquo;t</em> the same thing!)</p>
<p>Over the next few sections we&rsquo;ll take you through the basic concepts of how Git actually works, and then show you the most common <em>workflows</em> you&rsquo;ll find yourself using with Git.</p>
<h2 id="key-terms">Key Terms</h2>
<p>Some key terms to learn in this chapter are:</p>
<ul>
<li>Version Control</li>
<li>Git</li>
<li>GitHub</li>
<li>Repository</li>
<li>Commit</li>
<li>Branch</li>
<li>Remote</li>
<li>Clone</li>
<li>Origin</li>
<li>Push</li>
<li>Pull</li>
</ul>

            <footer class="footline">

            </footer>
          </article>

    
    
          <article class="default">
            <header class="headline">
            </header>
<h1 id="version-control-software">Version Control Software</h1>

<p>Have you ever been working on a paper for a class, and stopped every now and then to save it under a slightly different name, i.e. &ldquo;Paper draft 1.docx&rdquo;, &ldquo;Paper draft 2.docx&rdquo;, &ldquo;Paper final draft.docx&rdquo;, &ldquo;Paper final draft with Merge suggestions.docx&rdquo;, and so on?</p>
<p>Effectively what you were doing was <em>version control</em> - keeping old copies of a project around. This can be a lifesaver if your current file gets corrupted and becomes unusable.  It can also be helpful to go back and see older versions, perhaps to see what a section looked like <em>before</em> your last set of changes.  It might also be handy if that last major revision just isn&rsquo;t working, and you want to go back to what the paper looked like <em>before</em> you started making changes.</p>
<p>Now think about programming projects, which involve <em>multiple</em> files.  You could copy your project directory and rename it&hellip; but it&rsquo;s a lot of effort, and also chews up memory on your computer.  And have you ever found those multiple folders/files become difficult to navigate and sort through?  Also, what happens if your entire <em>computer</em> gets trashed?  Or stolen?  Where are you with your multiple copies of files/directories then?</p>
<p>Version control software was invented to help solve these problems, along with one more pressing issue - working with others and <em>sharing</em> those code files between everyone on the team.  No doubt you probably have or have heard some horror stories from CIS 115 or other courses were one member of the team accidentally overwrote the content that the rest of the team had painstakingly added to the group&rsquo;s Wiki page&hellip;</p>
<p>Ideal version control software therefore:</p>
<ul>
<li>Provides a mechanism for saving incremental changes to a project</li>
<li>Allows you to easily revert back to an earlier version of the project</li>
<li>Can be used to back up the project to a separate machine/location (preferably with some geographic distance, so if your workplace is destroyed by fire, flood, or other disaster your work isn&rsquo;t forever lost)</li>
<li>Allows different team members to contribute to a shared project without overwriting your teammates&rsquo; work</li>
</ul>

            <footer class="footline">

            </footer>
          </article>

    
    
          <article class="default">
            <header class="headline">
            </header>
<h1 id="git">Git</h1>

<p>Git is one of the many version control programs that has been developed to tackle these challenges, and is currently one of the most popular.  In part, this is because it does a <em>very good job</em> at tackling each of those issues we just discussed.  Of course, it can only do this if you are using it as it was intended to be used&hellip; so it&rsquo;s a good idea to spend a bit of time learning those details (though, as the authors of xkcd suggest, many people don&rsquo;t):</p>
<p>
<a href="#image-03506be0e1ce1c633b29569883a819f7" class="lightbox-link">
<img src="https://imgs.xkcd.com/comics/git.png" alt="xkcd&amp;rsquo;s take on Git" style="height: auto; width: auto;" loading="lazy">
</a>
<a href="javascript:history.back();" class="lightbox" id="image-03506be0e1ce1c633b29569883a819f7">
<img src="https://imgs.xkcd.com/comics/git.png" alt="xkcd&amp;rsquo;s take on Git" class="lightbox-image" loading="lazy">
</a></p>
<p>First, to use Git you need to install a program known as a Git client on your computer. Most people use the open-source command-line <code>git</code> client available from <a href="https://git-scm.com/downloads" target="_blank">https://git-scm.com/downloads</a>
, but there are other clients that provide GUI experiences and the like.  Here we&rsquo;ll focus on the command-line version.</p>
<p>You can also learn more from the official <a href="https://git-scm.com/doc" target="_blank">Git Documentation</a>
 or the free online <a href="https://git-scm.com/book/en/v2" target="_blank">Pro Git Book</a>
.  These are great resources for expanding your Git knowledge, as this appendix is only going to hit the conceptual high points of Git and focus on the workflows you&rsquo;ll be using for this class.</p>

            <footer class="footline">

            </footer>
          </article>

    
    
          <article class="default">
            <header class="headline">
            </header>
<h1 id="git-initialization">Git Initialization</h1>


<a href="https://www.youtube.com/watch?v=zYXS4ILE_Mo">YouTube Video</a>

<p>Git converts an ordinary directory (folder) on our computer into a <em>git repository</em>, allowing you to save different versions of the directory&rsquo;s contents as you make changes to that directory.  Invoking the <strong>git init</strong> command within the top directory of your project starts this process:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#a6e22e">$</span> <span style="color:#a6e22e">git</span> <span style="color:#a6e22e">init</span> 
</span></span></code></pre></div><p>The data describing these changes and how to switch to them is stored in a subdirectory the Git client creates in the top project directory named <em>.git</em>.  This folder is normally hidden from the user on most operating systems, though you can reveal it by tweaking your OS settings.  All the <code>git</code> commands modify the contents of that folder.  This approach has one really great benefit - if you copy your project folder into a new location, your repository information goes with it!</p>
<p>If you&rsquo;re curious about the structure of the <em>.git</em> folder, Pierre DeWulf has a <a href="https://www.daolf.com/posts/git-series-part-1/" target="_blank">good post discussing it</a>
 on his blog. <sup id="fnref:1"><a href="#fn:1" class="footnote-ref" role="doc-noteref">1</a></sup> Essentially, every time you <em>commit</em> (save your current changes), Git creates a new entry representing the state of your files at that point, including an identifying hash (to identify the commit), the previous (parent) commit&rsquo;s hash, a comment describing the commit, the date and time of the commit, and the identity of the user making the commit. We can use this information to restore the project directory to <em>any one of the commits we&rsquo;ve made</em>.</p>

  
  
<div class="box notices cstyle warning">
  <div class="box-label"><i class="fa-fw fas fa-exclamation-triangle"></i> Warning</div>
  <div class="box-content">

<p>Because Git places all of its repository information in the <em>.git</em> folder, deleting it will make the directory no longer be a repository.  All committed changes will be lost, and you will no longer be able to revert your project files to earlier versions.</p>
</div>
</div>
<div class="footnotes" role="doc-endnotes">
<hr>
<ol>
<li id="fn:1">
<p>Pierre DeWulf, <a href="https://www.daolf.com/posts/git-series-part-1/" target="_blank">&ldquo;Git series 1/3: Understanding git for real by exploring the .git directory&rdquo;</a>
, <em>daolf.com</em>, Jan 1, 2019.&#160;<a href="#fnref:1" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
</ol>
</div>

            <footer class="footline">

            </footer>
          </article>

    
    
          <article class="default">
            <header class="headline">
            </header>
<h1 id="staging-and-committing">Staging and Committing</h1>


<a href="https://www.youtube.com/watch?v=isp3dsbZjss">YouTube Video</a>

<p>It is important to understand that Git doesn&rsquo;t save the changes to <em>every</em> file in the directory when you create a commit - it only saves those files you have <em>staged</em> to be committed. This extra step often confuses new Git users, but it exists to give you full control over what gets committed into your repository.</p>
<p>
<a href="#image-3bae0415e829b2194f0b71858de37d89" class="lightbox-link">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/b.5.3.png" alt="Staging Diagram" style="height: auto; width: auto;" loading="lazy">
</a>
<a href="javascript:history.back();" class="lightbox" id="image-3bae0415e829b2194f0b71858de37d89">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/b.5.3.png" alt="Staging Diagram" class="lightbox-image" loading="lazy">
</a></p>
<p>It may help to understand how Git thinks about files.  Files in your repository directory fall into one of five categories - <em>untracked</em>, <em>unstaged</em>, <em>staged</em>, <em>committed</em>, and <em>ignored</em>.</p>
<p><em>Untracked</em> files are those that have never been added to the repository.  As far as the repository is concerned, they don&rsquo;t exist.  If you were to delete one, you cannot restore it, as the repository has no saved version of it.  Mostly these are files that have recently been created.</p>
<p><em>Unstaged</em> files are those that are tracked, but have at least some changes that have not been committed.  These are either new files that have just been added to the repository&rsquo;s index with a <strong>git add</strong> command, or files that have been altered since the last commit.</p>
<p><em>Staged</em> files are those that will be included in the next commit.  They are added to the list of staged files with the <strong>git add</strong> command, and will be committed with the <strong>git commit</strong> command.</p>
<p><em>Committed</em> files are those whose current state has been saved as a commit.  In other words, they are &ldquo;safe&rdquo; as they can be restored from that commit with a <strong>git checkout</strong> command.</p>
<p><em>Ignored</em> files are those whose path matches the pattern in the <em>.gitignore</em> file.  We&rsquo;ll come back to this idea shortly.</p>
<p>You can check for the status of your files in the repository at any time with the <strong>git status</strong> command:</p>
<div class="wrap-code highlight"><pre tabindex="0"><code>$ git status </code></pre></div><p>This will print the status of all uncommitted files:</p>
<p>
<a href="#image-183cae5434cc9579db1f00f56ce96fa5" class="lightbox-link">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/b.5.1.png" alt="The output of git status" style="height: auto; width: auto;" loading="lazy">
</a>
<a href="javascript:history.back();" class="lightbox" id="image-183cae5434cc9579db1f00f56ce96fa5">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/b.5.1.png" alt="The output of git status" class="lightbox-image" loading="lazy">
</a></p>
<p>There are four files in the <em>ff</em> directory: <em>example0.txt</em>, <em>example1.txt</em>, <em>example2.txt</em>, and <em>example3.txt</em>. In the output above, we see:</p>
<ul>
<li><em>example0.txt</em> was committed at some point, but now has changes.  Git helpfully lets us know we can undo those changes and restore the committed version with the command <code>$ git checkout -- example0.txt</code>, or add this file to those staged with <code>$ git add example0.txt</code>.</li>
<li><em>example1.txt</em> does not appear in the status message, as it is already committed and has no changes.</li>
<li><em>example2.txt</em> is a new file (it has never been committed), and is staged to be committed.</li>
<li><em>example3.txt</em> is also a new file, but is not staged to be committed.</li>
</ul>
<p>Interestingly, you can still change a staged file.  If you do so, Git keeps track of the staged but not committed changes, <em>and</em> the new, unstaged modifications.  For example, if we change <em>example2.txt</em> and run <strong>git status</strong> again, we&rsquo;ll see:</p>
<p>
<a href="#image-6293aca7d4f895b33f5680d5550833e2" class="lightbox-link">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/b.5.2.png" alt="The output of git status" style="height: auto; width: auto;" loading="lazy">
</a>
<a href="javascript:history.back();" class="lightbox" id="image-6293aca7d4f895b33f5680d5550833e2">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/b.5.2.png" alt="The output of git status" class="lightbox-image" loading="lazy">
</a></p>
<p>Notice <em>example2.txt</em> now has <em>two</em> statuses - corresponding to the staged and unstaged changes!</p>
<h3 id="committing-changes">Committing Changes</h3>
<p>With this understanding in mind, the standard way of committing changes is to combine a <strong>git add</strong> command and a <strong>git commit</strong> command:</p>
<div class="wrap-code highlight"><pre tabindex="0"><code>$ git add .
$ git commit -m &#34;&lt;a message about the commit&gt;&#34;</code></pre></div><p>The <code>git add .</code> adds <em>all</em> untracked and unstaged files (making them <em>staged</em>), and <code>git commit</code> commits our staged files.</p>

            <footer class="footline">

            </footer>
          </article>

    
    
          <article class="default">
            <header class="headline">
            </header>
<h1 id="ignoring-files">Ignoring Files</h1>


<a href="https://www.youtube.com/watch?v=LjUpxnmgdOQ">YouTube Video</a>

<p>Typically there are some files in a project that we <em>never</em> want to commit.  For example, compilers often create temporary or intermediate files during the compilation process, and these will be recreated every time we re-compile. We also usually don&rsquo;t want to commit the compiled binary files either, as we can always compile our code to get a fresh copy.  Not saving these files means our repository takes up less memory, and Git operations are faster.</p>
<p>And if our project involves some configuration files with sensitive information (passwords, shared secrets, etc), we don&rsquo;t want to commit these to our repository either - especially if it will be publicly visible on GitHub.</p>
<p>We can specify the patterns of files Git should ignore with a special text file named <em>.gitignore</em>.  Inside that file, we specify file path patterns.  Any file matching one of these patterns is effectively ignored by Git.  However, if we have already <em>committed</em> a file to the repository, and then added our <em>.gitignore</em> file, the committed file remains in the repository.  For this reason, we <em>always</em> want to add our <em>.gitignore</em> as we create the repository.</p>

  
  
<div class="box notices cstyle info">
  <div class="box-label"><i class="fa-fw fas fa-info-circle"></i> Info</div>
  <div class="box-content">

<p>While it is technically possible to completely remove a file accidentally committed to a Git repository, the process is not easy to complete correctly, and a mistake often means the file is still accessible to a skilled adversary.  In those situations, it may be best to delete the <em>.git</em> folder and create a new repository.</p>
</div>
</div>
<p>GitHub provides a <a href="https://github.com/github/gitignore" target="_blank">helpful repository of <em>.gitignore</em> files</a>
 for specific programming languages and platforms.  An easy trick is to find the one for the language you are interested in, open it in its raw form, and copy/paste its text into your <em>.gitignore</em> file.  For this class, you&rsquo;ll want to use the <a href="https://raw.githubusercontent.com/github/gitignore/master/VisualStudio.gitignore" target="_blank">Visual Studio .gitignore</a>
.</p>

            <footer class="footline">

            </footer>
          </article>

    
    
          <article class="default">
            <header class="headline">
            </header>
<h1 id="reverting-changes">Reverting Changes</h1>

<p>As we suggested earlier in the chapter, one of the most important uses of a version control system is to allow you to revert to an earlier version of your code.  To ask Git to list the available commits, you can use the <strong>git log</strong> command:</p>
<div class="wrap-code highlight"><pre tabindex="0"><code>$ git log</code></pre></div><p>This should print a list of the commits and their details, with the newest commit first:</p>
<p>
<a href="#image-489d7b37a6c72ffc2f5575a25b03790c" class="lightbox-link">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/b.7.1.png" alt="git log output" style="height: auto; width: auto;" loading="lazy">
</a>
<a href="javascript:history.back();" class="lightbox" id="image-489d7b37a6c72ffc2f5575a25b03790c">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/b.7.1.png" alt="git log output" class="lightbox-image" loading="lazy">
</a></p>
<p>Notice each commit is identified by a hash, date, and commit message. This is why a good commit message is important - it helps to let us know what we changed (and therefore what changes we would be undoing if we reverted to that commit).  If we wanted to revert to an earlier version, we would use the <strong>git checkout</strong> command:</p>
<div class="wrap-code highlight"><pre tabindex="0"><code>$ git checkout [hash]</code></pre></div><p>Where <code>[hash]</code> is the hash of the commit, i.e. <code>cec94d9078c036b6ebd374cde0d7e400a8a94ebd</code> for the initial commit in the example.</p>
<p>This reverts your files to that point, and reports you are in a &lsquo;detached HEAD&rsquo; state, i.e. the commit loaded is not the latest one on this branch.  Carlos Schults has an <a href="https://www.cloudbees.com/blog/git-detached-head" target="_blank">excellent post describing this condition</a>
. If you want to start working from this point (leaving your later changes out), best practice is to create a new branch to hold this commit.  We&rsquo;ll look at branches next.</p>

            <footer class="footline">

            </footer>
          </article>

    
    
          <article class="default">
            <header class="headline">
            </header>
<h1 id="branches">Branches</h1>


<a href="https://www.youtube.com/watch?v=dPzLr53-Geg">YouTube Video</a>

<p>Branches are a powerful mechanisms for working on different versions of your code.  The name &ldquo;branch&rdquo; is derived from visualizing a repository as a tree structure, with each commit being a node in the tree.  For a simple repository, this tree structure is pretty boring - just a straight line as each node has only one child:</p>
<p>
<a href="#image-adeb6318bc10707a81c6e32ccc50d12f" class="lightbox-link">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/b.8.1.png" alt="Simple repository with one branch" style="height: auto; width: auto;" loading="lazy">
</a>
<a href="javascript:history.back();" class="lightbox" id="image-adeb6318bc10707a81c6e32ccc50d12f">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/b.8.1.png" alt="Simple repository with one branch" class="lightbox-image" loading="lazy">
</a></p>
<p>This default branch was historically named &ldquo;master&rdquo;, though recent practice has shifted to using the term &ldquo;main&rdquo;.  GitHub provides <a href="https://github.com/github/renaming" target="_blank">guidance and support for renaming existing project branches</a>
.</p>
<p>At any node in the commit tree, we could create a new branching point with the command <strong>git branch [branchname]</strong> where we supply the branch name.  The branch starts with exactly the same code as the current commit to main (or whatever branch we are branching from).  Then we can check out the branch with <strong>git checkout [branchname]</strong>, using the name we supplied.  Let&rsquo;s create and check out a branch named &ldquo;experiment&rdquo; in our above example:</p>
<div class="wrap-code highlight"><pre tabindex="0"><code>$ git branch experiment
$ git checkout experiment</code></pre></div><p>We now have a new branch, experiment, branching from commit <strong>573ed9f</strong>:</p>
<p>
<a href="#image-de6b8ee8d8f118cb3389b6a5100ac02c" class="lightbox-link">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/b.8.2.png" alt="The same repository with a new branch" style="height: auto; width: auto;" loading="lazy">
</a>
<a href="javascript:history.back();" class="lightbox" id="image-de6b8ee8d8f118cb3389b6a5100ac02c">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/b.8.2.png" alt="The same repository with a new branch" class="lightbox-image" loading="lazy">
</a></p>
<p>While &ldquo;experiment&rdquo; is the checked out branch, any commits we make are placed on it instead of the main branch.  Let&rsquo;s assume we create two commits on the experiment branch; our tree will now look like:</p>
<p>
<a href="#image-f7c5fde8c869095455a0048b6458581e" class="lightbox-link">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/b.8.3.png" alt="Two commits on the experimental branch" style="height: auto; width: auto;" loading="lazy">
</a>
<a href="javascript:history.back();" class="lightbox" id="image-f7c5fde8c869095455a0048b6458581e">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/b.8.3.png" alt="Two commits on the experimental branch" class="lightbox-image" loading="lazy">
</a></p>
<p>We can switch back to the main branch at any point with <strong>git checkout main</strong>.  When we do so, our code will be reverted back to how it was in the last commit to the main branch (commit <strong>573ed9f</strong>).  If it turns out our experiment was a flop, we can forget about the experiment branch and the changes we made to it - we&rsquo;re back to a clean working build at the point before we started the experiment.</p>

  
  
<div class="box notices cstyle info">
  <div class="box-label"><i class="fa-fw fas fa-info-circle"></i> Info</div>
  <div class="box-content">

<p>It is important to understand how commits and branches interact.  When you check out a branch, the code in the repository is reverted to the last commit on that branch. And any new commits you make are saved to the currently checked out branch.</p>
<p>If you have <em>uncommitted</em> or <em>staged</em> changes in files, git will refuse to check out a branch until these are committed or stashed, as checking out the branch will overwrite those changes and they would be lost forever.  In contrast, <em>unstaged</em> and <em>ignored</em> files are fine (as there is no committed version that will overwrite the file).  Best practice is to commit your changes before switching branches, unless you want to throw the changes away.</p>
</div>
</div>
<p>If, on the other hand, we like the changes from the experiment, and want to add them to the main branch, we can <em>merge</em> those changes with the <strong>git merge [branchname]</strong> command:</p>
<div class="wrap-code highlight"><pre tabindex="0"><code>$ git merge experiment</code></pre></div><p>This merges the specified branch with the currently checked-out branch.  Git accomplishes merging through a recursive strategy, which works very well.  However, if both branches have had changes committed since the last shared commit, there is a possibility that some of those changes will overlap, and Git will not be able to determine which to use.  This is called a <em>merge conflict</em> and must be resolved by you.  See the <a href="https://ksu-cs-textbooks.github.io/cis400/b-git-and-github/11-merge-conflicts/">merge conflict</a>
 section later for more details.</p>
<p>There are a number of reasons we might want to create a branch; let&rsquo;s examine some common use cases.</p>
<ul>
<li>
<p>Prototype branches - Let&rsquo;s say we wanted to try making some changes to our code that we aren&rsquo;t sure will work - basically, we are creating an experimental prototype.  If this experiment doesn&rsquo;t end up succeeding, we would like to return to our current version of the project.  This is exactly the scenario we walked through above.</p>
</li>
<li>
<p>Feature branches - Let&rsquo;s assume you have a working program you need to add a new feature to, but you still want to be able to access the working code.  In this case, you can create a branch to work on that feature.  That way, when your feature is only partially done, you can still switch back to your main branch and fix a bug, etc., without needing to remove or comment out your half-written feature code.</p>
</li>
<li>
<p>Personal branches - Let&rsquo;s say you&rsquo;re working with a team.  You want to make sure that the main branch is always clean, ready-to-go code, and you don&rsquo;t want to have to deal with your teammate&rsquo;s half-written code (nor they with yours).  Each team member can create their own branch to do their work on, and when it is tested and ready, merge that code into the main branch.</p>
</li>
</ul>
<p>Each of these approaches can (and usually is) used in conjunction with remote repositories.  We&rsquo;ll take a look at that next.</p>

            <footer class="footline">

            </footer>
          </article>

    
    
          <article class="default">
            <header class="headline">
            </header>
<h1 id="remote-repositories">Remote Repositories</h1>


<a href="https://www.youtube.com/watch?v=RFPd6Y_JRiw">YouTube Video</a>

<p>Git bills itself as a <em>distributed</em> version control system.  This means it has no central server.  Instead, we can create copies of the repository we call <em>remote repositories</em> with the <strong>git clone</strong> command.  These copies can be placed anywhere - in another directory on your computer, or on a different computer on your network, or a computer accessed via the internet.</p>
<p>GitHub is a web service that specifically hosts remote git repositories and allows you to access them through both your git client <em>and</em> through a web (HTML/CSS/JS) interface.  It was created primarily to provide a place to host publicly-accessible, open-source projects, though you can also use it to create private repositories.  It is not the only such service available; <a href="https://bitbucket.org" target="_blank">BitBucket</a>
 is a similar website more focused on closed-source projects, and the popular <a href="https://about.gitlab.com/" target="_blank">GitLab</a>
 is an open-source server for hosting Git projects you can install on your own systems.  The Computer Science department at Kansas State University runs its own GitLab server to host projects developed as part of our research and extension mission.</p>
<p>At this point in your learning, you will likely be using a repository hosted on GitHub (usually created by GitHub classroom when you accept an assignment) as a remote repository you are cloning to one or more local repositories.  For example, you&rsquo;ll likely clone your project on both your home computer and a lab computer so you can work in both locations.</p>
<p>
<a href="#image-024b8b1571be3aa3bf72fadd0eff07e0" class="lightbox-link">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/b.9.1.png" alt="Common remote repository setup diagram" style="height: auto; width: auto;" loading="lazy">
</a>
<a href="javascript:history.back();" class="lightbox" id="image-024b8b1571be3aa3bf72fadd0eff07e0">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/b.9.1.png" alt="Common remote repository setup diagram" class="lightbox-image" loading="lazy">
</a></p>
<p>A clone is a copy of the project in its current state, including the hidden <em>.git</em> folder. This means it is <em>also</em> a complete git repository!  The code will be in the same state as that of the currently active branch of the repo it was cloned from (for a project cloned from GitHub, this would be the main/master branch).</p>

  
  
<div class="box notices cstyle warning">
  <div class="box-label"><i class="fa-fw fas fa-exclamation-triangle"></i> Warning</div>
  <div class="box-content">

<p>While the cloned repository is a copy of an existing repository, it will not contain <em>unstaged</em> or <em>ignored</em> files or directories, as these are not tracked by Git.</p>
</div>
</div>
<p>Thus, in our diagram above, the home, lab, and GitHub copies of our repository all start exactly the same, with commit <strong>ba4</strong>.  But if we make and commit changes to one of those repositories, that repository will be <em>ahead</em> of the other repositories, which will not have that commit. We can see this in the diagram below, where we have added commit <strong>a4e</strong> to the repository on our Lab PC:</p>
<p>
<a href="#image-af6ba995d1ac8facd29b5f5a3b063640" class="lightbox-link">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/b.9.2.png" alt="Lab PC with extra commit" style="height: auto; width: auto;" loading="lazy">
</a>
<a href="javascript:history.back();" class="lightbox" id="image-af6ba995d1ac8facd29b5f5a3b063640">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/b.9.2.png" alt="Lab PC with extra commit" class="lightbox-image" loading="lazy">
</a></p>
<p>To get this same commit on our other remote repositories, we&rsquo;ll use <em>push</em> and <em>pull</em> commands.</p>
<h3 id="pushing">Pushing</h3>
<p>We can push commits from one repository to another one with a <strong>git push</strong> command.  To use this command, we need to know the location of the remote repository, and what branch we want to push our changes to.  When we clone an existing repository, Git automatically saves the location of that repository and gives it the name <em>origin</em>.  Thus, we can copy our commit <strong>a4e</strong> from our Lab PC repository to GitHub with the <strong>git push</strong> command:</p>
<div class="wrap-code highlight"><pre tabindex="0"><code>$ git push origin main</code></pre></div><p>This pushes our new commit to the GitHub repository, so it now also has that commit:</p>
<p>
<a href="#image-5e177c93e3d75f1903f1871839ee46c7" class="lightbox-link">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/b.9.3.png" alt="GitHub with extra commit" style="height: auto; width: auto;" loading="lazy">
</a>
<a href="javascript:history.back();" class="lightbox" id="image-5e177c93e3d75f1903f1871839ee46c7">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/b.9.3.png" alt="GitHub with extra commit" class="lightbox-image" loading="lazy">
</a></p>
<p>Because GitHub does not have a reference to our Home PC&rsquo;s repository, we can&rsquo;t push the commit there.  Instead, we&rsquo;ll need to <em>pull</em> it directly from our home computer.</p>
<h3 id="pulling">Pulling</h3>
<p>As the repository on our home PC is also a clone of the GitHub repository, it kept track of the location of it using the name origin as well.  So we can pull commits from that location (GitHub) using the <strong>git pull</strong> command:</p>
<div class="wrap-code highlight"><pre tabindex="0"><code>$ git pull origin main</code></pre></div><p>This copies any commits on the GitHub repository into the Home PC repository:</p>
<p>
<a href="#image-a01b735477cffc203882b4bf3ce242da" class="lightbox-link">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/b.9.4.png" alt="Home PC with extra commit" style="height: auto; width: auto;" loading="lazy">
</a>
<a href="javascript:history.back();" class="lightbox" id="image-a01b735477cffc203882b4bf3ce242da">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/b.9.4.png" alt="Home PC with extra commit" class="lightbox-image" loading="lazy">
</a></p>

  
  
<div class="box notices cstyle warning">
  <div class="box-label"><i class="fa-fw fas fa-exclamation-triangle"></i> Warning</div>
  <div class="box-content">

<p>If you push or pull changes to a repository that has extra commits, Git merges the extra commits with the pushed ones (as with the <strong>merge</strong> command).  This can introduce the possibility of <em>merge conflicts</em> when Git is uncertain how to best combine two changes.  These must be resolved by you as described in the <a href="https://ksu-cs-textbooks.github.io/cis400/b-git-and-github/11-merge-conflicts/" target="_blank">merge conflict</a>
 section.  For this reason, it is <em>always</em> best practice to pull changes into your local branch, fix any merge conflicts, create a new commit, and only then push it to the remote repository.  This ensures that the main branch code is always in good shape.</p>
</div>
</div>
<h3 id="remote-repositories">Remote Repositories</h3>
<p>You can actually set up as many remote repositories as you want.  In the diagram above, it would be possible to push or pull from the Lab PC to the Home PC directly, provided you had a publicly accessible URL for both (as we normally don&rsquo;t have static IP addresses for home networks, this is unlikely).  You can add an additional remote repository with <strong>git remote add [name] [url]</strong>.</p>
<p>This can be helpful if you have a project you&rsquo;ve started on your home machine and want to push to GitHub.  Create an empty project on GitHub (it must be completely empty, so don&rsquo;t create a default readme or license file).  Then copy the clone URL and use it in your local Git command:</p>
<div class="wrap-code highlight"><pre tabindex="0"><code>git remote add origin [remote url]</code></pre></div><p>where <code>[remote url]</code> is the GitHub clone url.  After you&rsquo;ve done this, you can push your project to GitHub normally.</p>
<p>You can also list all remote repositories in a repo with:</p>
<div class="wrap-code highlight"><pre tabindex="0"><code>git remote -v</code></pre></div><h4 id="remote-branches">Remote Branches</h4>
<p>You probably noticed in our push and pull examples above, we specified the <code>main</code> branch.  You can also pull or push from other branches, i.e. if you had an <code>experiment</code> branch on your remote repository <code>origin</code> you could pull it with:</p>
<div class="wrap-code highlight"><pre tabindex="0"><code>git pull origin experiment</code></pre></div><p>That would merge the <code>experiment</code> branch into the branch you currently have checked out.  Most often, we want to have our remote and local branches correspond to one another.  In that case, we should create a local <code>experiment</code> branch and link it to the one in our <code>origin</code> repository.  We need to first create and checkout our local <code>experiment</code> branch, and set its upstream:</p>
<div class="wrap-code highlight"><pre tabindex="0"><code>git branch experiment
git checkout experiment
git --set-upstream origin experiment</code></pre></div><p>Now our <code>local</code> experiment branch is linked to our remote <code>experiment</code> branch - and we can use the short-form push/pull commands when we have the branch checked out, i.e. when the <code>experiment</code> branch is checked out, we can use <code>git push</code> instead of <code>git push origin experiment</code>.</p>
<p>There is also a shorthand for creating a local branch that is synchronized to a remote upstream branch:</p>
<div class="wrap-code highlight"><pre tabindex="0"><code>git checkout -b experiment origin/experiment</code></pre></div><p>This shorthand does the same operations as the three commands above.</p>

            <footer class="footline">

            </footer>
          </article>

    
    
          <article class="default">
            <header class="headline">
            </header>
<h1 id="feature-branches">Feature Branches</h1>

<p>This section summarizes the git commands you will need when creating feature branches for your semester-long project.</p>
<h2 id="1-create-and-check-out-a-local-branch-for-the-current-milestone">1. Create and check out a local branch for the current milestone</h2>
<p>When you start a new milestone, you need to create a local branch to hold your work. For example, if you wanted to create a feature branch for Milestone 0, you would do:</p>
<div class="wrap-code highlight"><pre tabindex="0"><code>$ git branch ms0</code></pre></div><p>Next, check out your new branch. For our Milestone 0, we would do:</p>
<div class="wrap-code highlight"><pre tabindex="0"><code>$ git checkout ms0</code></pre></div><h2 id="2-work-on-the-new-branch">2. Work on the new branch</h2>
<p>As you make progress on the current milestone, it is a good idea to add your changes to the remote repository. First, make sure you are on your milestone branch by doing:</p>
<div class="wrap-code highlight"><pre tabindex="0"><code>$ git branch</code></pre></div><p>You will see a list of all local branches, with a <code>*</code> next to the currently checked out branch. You should see that the branch for the current milestone has a <code>*</code>. Then, add, commit, and push the changes for your branch to the remote repository:</p>
<div class="wrap-code highlight"><pre tabindex="0"><code>$ git add .
$ git commit -m &#34;description of changes&#34;
$ git push</code></pre></div><p>The first time you do this, it will automatically create a remote branch with the same name.</p>

  
  
<div class="box notices cstyle info">
  <div class="box-label"><i class="fa-fw fas fa-info-circle"></i> Info</div>
  <div class="box-content">

<p>Depending on your <code>git</code> configuration, you may get this error when you <code>git push</code> or <code>git pull</code> on a local branch that has no remote counterpart:</p>
<div class="wrap-code highlight"><pre tabindex="0"><code>fatal: The current branch &lt;branchName&gt; has no upstream branch.
To push the current branch and set the remote as upstream, use

    git push --set-upstream origin &lt;branchName&gt;

To have this happen automatically for branches without a tracking
upstream, see &#39;push.autoSetupRemote&#39; in &#39;git help config&#39;.</code></pre></div><p>If you get this error, you can update your git configuration as follows:</p>
<div class="wrap-code highlight"><pre tabindex="0"><code>git config --global push.autoSetupRemote true</code></pre></div><p>At that point you should be able to use <code>git push</code> or <code>git pull</code> and have it go automatically to/from the corresponding remote branch.</p>
<p>(If you still have errors, you will first need to update your version of git to get a version that is at least 2.37 &ndash; you can check the version number with <code>git --version</code>.)</p>
</div>
</div>
<h2 id="3-continuing-work-on-a-different-computer">3. Continuing work on a different computer</h2>
<p>Suppose you followed the steps above to start a milestone on your home computer (including pushing the latest changes for your milestone branch) and wanted to continue working on a lab computer.</p>
<h3 id="first-time-working-with-the-repository">First time working with the repository</h3>
<p>If this was your FIRST time working on this repository on the new computer, you would need to clone the repository to the new local machine. You can do this with Visual Studio&rsquo;s <em>File-&gt;Clone Repository</em> or from the terminal with <code>git clone [repoURL]</code>. In this case, ALL branches of your remote repository would be cloned to the new local machine.</p>
<h3 id="first-time-working-with-current-branch">First time working with current branch</h3>
<p>If you have worked with this repository before on the current local computer but have not worked with the new milestone branch, you must first create the new branch:</p>
<div class="wrap-code highlight"><pre tabindex="0"><code>$ git branch ms0</code></pre></div><p>Replacing <code>ms0</code> with the current milestone branch. If the branch had already been created, you will see an error message (but nothing will happen).</p>
<h3 id="in-all-cases">In all cases</h3>
<p>Next, checkout the current milestone branch:</p>
<div class="wrap-code highlight"><pre tabindex="0"><code>$ git checkout ms0</code></pre></div><p>Again, replacing <code>ms0</code> with the current milestone branch. Then, pull the latest changes for that branch from the remote repository to the local repository. If you do:</p>
<div class="wrap-code highlight"><pre tabindex="0"><code>$ git pull origin ms0</code></pre></div><p>It will pull from the remote <code>ms0</code> branch into the local <code>ms0</code> branch.</p>
<h2 id="merging-your-feature-branch-into-main">Merging your feature branch into main</h2>
<p>Finally, when you have finished the milestone, you&rsquo;ll want to merge your new changes from the feature branch into the main branch:</p>
<div class="wrap-code highlight"><pre tabindex="0"><code>$ git checkout main 
$ git merge ms0</code></pre></div><p>(Again, replacing <code>ms0</code> with the current milestone branch name). Next, push the newly expanded main branch to GitHub:</p>
<div class="wrap-code highlight"><pre tabindex="0"><code>$ git push origin main</code></pre></div><p>After that, you&rsquo;ll need to <a href="https://ksu-cs-textbooks.github.io/cis400/b-git-and-github/12-release/">create a release</a>
 to turn in.</p>

            <footer class="footline">

            </footer>
          </article>

    
    
          <article class="default">
            <header class="headline">
            </header>
<h1 id="merge-conflicts">Merge Conflicts</h1>


<a href="https://www.youtube.com/watch?v=UNfv8hdywEs">YouTube Video</a>

<p>When git merges commits from two different branches or remote repositories, it applies the committed changes from both.  In many cases, this works seamlessly, but sometimes it results in <em>merge conflicts</em>.  A conflict occurs when the same line(s) in a file were changed in both branches, and git is unsure of which to use.</p>
<p>Git will do several things in this scenario:</p>
<ol>
<li>
<p>It will report as output from that command that caused the conflict which file(s) in the repository contain conflicts, and</p>
</li>
<li>
<p>It will mark the conflicted sections of those files using a special format that shows the two versions of the code.</p>
</li>
</ol>
<p>An example of such a marking is:</p>
<div class="wrap-code highlight"><pre tabindex="0"><code>public void PrintSomething() {  
&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD
  if(testValue) {
=======
  if(otherTestValue) {
&gt;&gt;&gt;&gt;&gt;&gt;&gt; some_branch
  Console.log(&#34;Something...&#34;);
}</code></pre></div><p>Here, we see two conflicting versions of one line: <code>if(testValue) {</code> and <code>if(otherTestValue){</code>. Additionally, we see markers delimiting the conflicting sections: <code>&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD</code>, <code>=======</code>, and <code>&gt;&gt;&gt;&gt;&gt;&gt;&gt; some_branch</code>.  We need to replace all of the code and delimiters with one final version of the code.  This could be the first option, the second option, or a combination of the two:</p>
<div class="wrap-code highlight"><pre tabindex="0"><code>public void PrintSomething() {  
  if(testValue &amp;&amp; otherTestValue) {
  Console.log(&#34;Something...&#34;);
}</code></pre></div><p>We need to do this for all conflicts in all conflicting files.  Once they have all been resolved, we need to commit the changes with the commands:</p>
<div class="wrap-code highlight"><pre tabindex="0"><code>$ git add .
$ git commit -m &#34;Fixed merge conflicts&#34;</code></pre></div>
            <footer class="footline">

            </footer>
          </article>

    
    
          <article class="default">
            <header class="headline">
            </header>
<h1 id="create-a-release">Create a Release</h1>

<p>When you are ready to turn in an assignment, you will need to create a <em>release tag</em>.  A <em>tag</em> is nothing more than a specially named commit, and a <em>release</em> is a special tag created on GitHub to mark a specific version of the software.</p>
<h2 id="step-1---make-sure-_all_-your-code-is-on-github">Step 1 - Make sure <em>All</em> your code is on GitHub</h2>
<p>Since releases are created on GitHub, it is important to make sure you&rsquo;ve <a href="https://ksu-cs-textbooks.github.io/cis400/b-git-and-github/05-staging-and-committing/">committed your changes</a>
 and have <a href="https://ksu-cs-textbooks.github.io/cis400/b-git-and-github/09-remote-repositories/">pushed them to GitHub</a>
 before you create the release.  You can check that all changes have been committed and pushed with the command:</p>
<div class="wrap-code highlight"><pre tabindex="0"><code>$ git status</code></pre></div><p>If you see these messages:</p>
<div class="wrap-code highlight"><pre tabindex="0"><code>Your branch is up to date with &#39;origin/main&#39;.

nothing to commit, working tree clean</code></pre></div><p>Then you are good to go.  On the other hand, if you get the message <code>Your branch is # commits ahead of 'origin/main'</code>, then you need to <a href="https://ksu-cs-textbooks.github.io/cis400/b-git-and-github/09-remote-repositories/#pushing">push to master</a>
, and if any files are listed as uncommitted, you first need to <a href="https://ksu-cs-textbooks.github.io/cis400/b-git-and-github/05-staging-and-committing/#committing-changes">commit them</a>
.</p>
<h2 id="step-2---navigate-to-the-releases-on-github">Step 2 - Navigate to the Releases on GitHub</h2>
<p>Next, open your repository on Github.  Towards the right side of the page you should see a link labeled &ldquo;Create a new release&rdquo;.  Click it.</p>
<p>
<a href="#image-601e11107221a7ddfff40581627091c1" class="lightbox-link">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/b.11.1.png" alt="Releases Link" style="height: auto; width: auto;" loading="lazy">
</a>
<a href="javascript:history.back();" class="lightbox" id="image-601e11107221a7ddfff40581627091c1">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/b.11.1.png" alt="Releases Link" class="lightbox-image" loading="lazy">
</a></p>
<p>This will load the releases page for your repository.</p>
<h2 id="step-3---complete-the-release-form">Step 3 - Complete the Release Form</h2>
<p>You will need to fill out the release form, specifically the version and title, and then click the &ldquo;Publish Release&rdquo; button.</p>
<p>
<a href="#image-3bb4adeb056e4da40f5c672f571bdf6f" class="lightbox-link">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/b.11.3.png" alt="New Release Form" style="height: auto; width: auto;" loading="lazy">
</a>
<a href="javascript:history.back();" class="lightbox" id="image-3bb4adeb056e4da40f5c672f571bdf6f">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/b.11.3.png" alt="New Release Form" class="lightbox-image" loading="lazy">
</a></p>
<p>Releases use <em><a href="https://semver.org/" target="_blank">semantic versioning</a>
</em>, a numbering system that uses three numbers separated by periods (i.e. version 3.4.2).  The first number is the <em>major</em> version - a change in this number indicates a major change in the associated software, i.e. a redesigned interface, a change in what methods are available, etc.  The second number is the <em>minor</em> version.  It indicates small feature additions to the software.  Finally, the third number is the <em>patch</em> version, and this one indicates a change that is typically a bug fix or security fix.  Each number <em>rolls over</em> like the seconds and minutes on a clock when the next version number is increased, i.e. you would go from version 2.7.23 to 3.0.0, or 4.3.12 to 4.4.0.  For this project, each milestone should be treated as a minor release, and each new project as a major one.</p>
<p>Releases also get a human-readable name.  For this class, you should use the assignment name as the release name, i.e. Milestone 0.</p>
<h2 id="step-4---submit-your-release-url-on-k-state-online">Step 4 - Submit your Release URL on K-State Online</h2>
<p>Once you have finished creating the release, GitHub should take you to the release page.  You can also navigate there by clicking the specific release under the &ldquo;Releases&rdquo; heading on the right-hand side of your repository lannding page.  Copy the URL of this page; it is what you will submit on Canvas.</p>
<p>
<a href="#image-1368976ac67267f662fb2aa54d3c070f" class="lightbox-link">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/b.11.4.png" alt="Release URL" style="height: auto; width: auto;" loading="lazy">
</a>
<a href="javascript:history.back();" class="lightbox" id="image-1368976ac67267f662fb2aa54d3c070f">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/b.11.4.png" alt="Release URL" class="lightbox-image" loading="lazy">
</a></p>

            <footer class="footline">

            </footer>
          </article>

    
    
          <article class="default">
            <header class="headline">
            </header>
<h1 id="adding-documentation-files">Adding Documentation Files</h1>

<p>When adding existing documentation files (i.e. UML documents) to your project, you may think adding them through Visual Studio&rsquo;s Solution Explorer would be the way to go.  However, this can lead to an unexpected issue.  Look closely at the example below:</p>
<p>
<a href="#image-8675374073f799541a8e391c68204e57" class="lightbox-link">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/b.12.1.png" alt="Bad Documentation Example" style="height: auto; width: auto;" loading="lazy">
</a>
<a href="javascript:history.back();" class="lightbox" id="image-8675374073f799541a8e391c68204e57">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/b.12.1.png" alt="Bad Documentation Example" class="lightbox-image" loading="lazy">
</a></p>
<p>We can see the PDF has been added to the solution file in the Solution Explorer, and we can see its raw data open in the editing pane.  But take a close look at the Properties.  The file is located in the Downloads folder!  Since the file is not present in a folder managed by Git, <strong>IT WILL NOT BE COMMITTED!</strong></p>
<p>The <em>ONLY</em> way to get Git to track a file is to <em>PUT IT INTO A DIRECTORY TRACKED BY GIT</em>. Visual Studio&rsquo;s Solution Explorer does <em>NOT</em> copy existing PDF files, it simply creates a virtual representation of the file within the solution that points to where that file exists on your filesystem.</p>
<h2 id="open-the-solution-in-file-explorer">Open the Solution in File Explorer</h2>
<p>To summarize, you must <em>move or copy</em> the file you want to share into the solution directory using your operating system&rsquo;s file system, <em>NOT VISUAL STUDIO</em>.  Visual Studio typically places your projects in the directory <code>C:/Users/%username%/source/repos/%solutionname%/</code> where <code>%username%</code> is your Windows username and <code>%solutionname%</code> is your solution&rsquo;s name. If you asked Visual Studio to save your files in another location, you need to look there.</p>
<p>However, there is a quick way to open the exact solution folder from within Visual Studio.  Right-click the solution in the Solution Explorer and choose <strong>Open Folder in File Explorer</strong> from the context menu:</p>
<p>
<a href="#image-d016157ef57f46069b6df0cf82bb8e5d" class="lightbox-link">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/b.12.2.png" alt="Open Folder in File Explorer" style="height: auto; width: auto;" loading="lazy">
</a>
<a href="javascript:history.back();" class="lightbox" id="image-d016157ef57f46069b6df0cf82bb8e5d">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/b.12.2.png" alt="Open Folder in File Explorer" class="lightbox-image" loading="lazy">
</a></p>
<p>Then you can use File Explorer to create your Documentation folder and place your documents:</p>
<p>
<a href="#image-c685a35de24700a67ab7411ef9226cc0" class="lightbox-link">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/b.12.3.png" alt="Copy File into Documentation Folder" style="height: auto; width: auto;" loading="lazy">
</a>
<a href="javascript:history.back();" class="lightbox" id="image-c685a35de24700a67ab7411ef9226cc0">
<img src="https://ksu-cs-textbooks.github.io/cis400/images/b.12.3.png" alt="Copy File into Documentation Folder" class="lightbox-image" loading="lazy">
</a></p>
<p>Once the document is in place, you will need to <a href="https://ksu-cs-textbooks.github.io/cis400/b-git-and-github/05-staging-and-committing/#committing">commit your changes</a>
 and <a href="https://ksu-cs-textbooks.github.io/cis400/b-git-and-github/09-remote-repositories/#pushing">push them to GitHub</a>
</p>

            <footer class="footline">

            </footer>
          </article>

          </section>
          </section>

        </div>
      </main>
    
<div class="git-footer">
<p class="theme-version-footer">5.18.0</p>
<p>Last modified by: 
            <i class='fas fa-user'></i> Russell Feldhausen
            <i class='fas fa-calendar'></i> <a href="https://gitlab.cs.ksu.edu/cs-textbooks/cis400-textbook/-/commit/681e5c9c43e3ac6de614c2cc74487702fd43cab7">Aug 10, 2023</a>
</p>
</div>

    
    </div>
    <script src="https://ksu-cs-textbooks.github.io/cis400/js/clipboard.min.js?1696172880" defer></script>
    <script src="https://ksu-cs-textbooks.github.io/cis400/js/perfect-scrollbar.min.js?1696172880" defer></script>
    <script>
      function useMathJax( config ){
        if( !Object.assign ){
          
          return;
        }
        window.MathJax = Object.assign( window.MathJax || {}, {
          loader: {
            load: ['[tex]/mhchem']
          },
          startup: {
            elements: [
              '.math'
            ]
          },
          tex: {
            inlineMath: [
              ['$', '$'], 
              ['\\(', '\\)']
            ]
          },
          options: {
            enableMenu: false 
          }
        }, config );
      }
      useMathJax( JSON.parse("{}") );
    </script>
    <script id="MathJax-script" async src="https://ksu-cs-textbooks.github.io/cis400/js/mathjax/tex-mml-chtml.js?1696172880"></script>
    <script src="https://ksu-cs-textbooks.github.io/cis400/js/theme.js?1696172880" defer></script>
  </body>
</html>
