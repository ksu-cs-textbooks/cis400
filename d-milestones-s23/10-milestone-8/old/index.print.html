<!doctype html><html lang=en-us dir=ltr itemscope itemtype=http://schema.org/Article><head><meta charset=utf-8><meta name=viewport content="height=device-height,width=device-width,initial-scale=1,minimum-scale=1"><meta name=generator content="Hugo 0.128.0"><meta name=generator content="Relearn 6.0.0"><meta name=description content="Previous Versions of this page:
Milestone 8 Requirements Milestone 8 Requirements (Spring 2022) "><meta name=author content="Nathan Bean"><meta name=twitter:card content="summary"><meta name=twitter:title content="Previous Versions :: K-State CIS 400 Textbook"><meta name=twitter:description content="Previous Versions of this page:
Milestone 8 Requirements Milestone 8 Requirements (Spring 2022) "><meta property="og:url" content="https://textbooks.cs.ksu.edu/cis400/d-milestones-s23/10-milestone-8/old/"><meta property="og:site_name" content="K-State CIS 400 Textbook"><meta property="og:title" content="Previous Versions :: K-State CIS 400 Textbook"><meta property="og:description" content="Previous Versions of this page:
Milestone 8 Requirements Milestone 8 Requirements (Spring 2022) "><meta property="og:locale" content="en-us"><meta property="og:type" content="website"><meta itemprop=name content="Previous Versions :: K-State CIS 400 Textbook"><meta itemprop=description content="Previous Versions of this page:
Milestone 8 Requirements Milestone 8 Requirements (Spring 2022) "><meta itemprop=dateModified content="2023-08-03T13:20:03-05:00"><meta itemprop=wordCount content="13"><title>Previous Versions :: K-State CIS 400 Textbook</title>
<link href=https://textbooks.cs.ksu.edu/cis400/d-milestones-s23/10-milestone-8/old/ rel=canonical type=text/html title="Previous Versions :: K-State CIS 400 Textbook"><link href=/cis400/d-milestones-s23/10-milestone-8/old/index.xml rel=alternate type=application/rss+xml title="Previous Versions :: K-State CIS 400 Textbook"><link href=/cis400/d-milestones-s23/10-milestone-8/old/tele.html rel=alternate type=text/html title="Previous Versions :: K-State CIS 400 Textbook"><link href=/cis400/d-milestones-s23/10-milestone-8/old/embed.html rel=alternate type=text/html title="Previous Versions :: K-State CIS 400 Textbook"><link href=/cis400/css/fontawesome-all.min.css?1731949283 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/cis400/css/fontawesome-all.min.css?1731949283 rel=stylesheet></noscript><link href=/cis400/css/nucleus.css?1731949283 rel=stylesheet><link href=/cis400/css/auto-complete.css?1731949283 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/cis400/css/auto-complete.css?1731949283 rel=stylesheet></noscript><link href=/cis400/css/perfect-scrollbar.min.css?1731949283 rel=stylesheet><link href=/cis400/css/fonts.css?1731949283 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/cis400/css/fonts.css?1731949283 rel=stylesheet></noscript><link href=/cis400/css/theme.css?1731949283 rel=stylesheet><link href=/cis400/css/theme-auto.css?1731949283 rel=stylesheet id=R-variant-style><link href=/cis400/css/chroma-auto.css?1731949283 rel=stylesheet id=R-variant-chroma-style><link href=/cis400/css/variant.css?1731949283 rel=stylesheet><link href=/cis400/css/print.css?1731949283 rel=stylesheet media=print><link href=/cis400/css/format-print.css?1731949283 rel=stylesheet><script src=/cis400/js/variant.js?1731949283></script><script>window.relearn=window.relearn||{},window.relearn.relBasePath="../../..",window.relearn.relBaseUri="../../../..",window.relearn.absBaseUri="https://textbooks.cs.ksu.edu/cis400",window.index_js_url="/cis400/index.search.js",window.variants&&variants.init(["auto","light-theme","dark-theme"]),window.T_Copy_to_clipboard=`Copy to clipboard`,window.T_Copied_to_clipboard=`Copied to clipboard!`,window.T_Copy_link_to_clipboard=`Copy link to clipboard`,window.T_Link_copied_to_clipboard=`Copied link to clipboard!`,window.T_Reset_view=`Reset view`,window.T_View_reset=`View reset!`,window.T_No_results_found=`No results found for "{0}"`,window.T_N_results_found=`{1} results found for "{0}"`</script><link href=/cis400/css/custom.css?1731949283 rel=stylesheet></head><body class="mobile-support print disableInlineCopyToClipboard" data-url=/cis400/d-milestones-s23/10-milestone-8/old/><div id=R-body class=default-animation><div id=R-body-overlay></div><nav id=R-topbar><div class=topbar-wrapper><div class=topbar-sidebar-divider></div><div class="topbar-area topbar-area-start" data-area=start><div class="topbar-button topbar-button-sidebar" data-content-empty=disable data-width-s=show data-width-m=hide data-width-l=hide><button class=topbar-control onclick=toggleNav() type=button title="Menu (CTRL+ALT+n)"><i class="fa-fw fas fa-bars"></i></button></div></div><ol class="topbar-breadcrumbs breadcrumbs highlightable" itemscope itemtype=http://schema.org/BreadcrumbList><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><span itemprop=name>Project Milestones</span><meta itemprop=position content="1">&nbsp;>&nbsp;</li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><a itemprop=item href=/cis400/d-milestones-s23/10-milestone-8/><span itemprop=name>Milestone 8 Requirements</span></a><meta itemprop=position content="2">&nbsp;>&nbsp;</li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><span itemprop=name>Previous Versions</span><meta itemprop=position content="3"></li></ol><div class="topbar-area topbar-area-end" data-area=end><div class="topbar-button topbar-button-prev" data-content-empty=disable data-width-s=show data-width-m=show data-width-l=show><a class=topbar-control href=/cis400/c-exercises-s23/13-deployment/02-deploying/ title="Deploying our Movie Site to Azure (🡐)"><i class="fa-fw fas fa-chevron-left"></i></a></div><div class="topbar-button topbar-button-next" data-content-empty=disable data-width-s=show data-width-m=show data-width-l=show><span class=topbar-control><i class="fa-fw fas fa-chevron-right"></i></span></div></div></div></nav><div id=R-main-overlay></div><main id=R-body-inner class="highlightable default" tabindex=-1><div class=flex-block-wrapper><article class=default><header class=headline></header><h1 id=previous-versions>Previous Versions</h1><p>Previous Versions of this page:</p><ul class="children children-li children-sort-"><li><a href=/cis400/d-milestones-s23/10-milestone-8/old/2022-fall/>Milestone 8 Requirements</a></li><li><a href=/cis400/d-milestones-s23/10-milestone-8/old/2022-spring/>Milestone 8 Requirements (Spring 2022)</a></li></ul><footer class=footline></footer></article><section><h1 class=a11y-only>Subsections of Previous Versions</h1><article class=default><header class=headline></header><h1 id=milestone-8-requirements>Milestone 8 Requirements</h1><div class="box notices cstyle noiframe"><div class=box-label><i class="fa-fw fas fa-times-circle"></i> Web Only</div><div class=box-content><p>This textbook was authored for the <strong>CIS 400 - Object-Oriented Design, Implementation, and Testing</strong> course at Kansas State University. This section describes assignments specific to the <strong>Fall 2022</strong> offering of that course.</p></div></div><h3 id=general-requirements>General requirements:</h3><ul><li><p>You will need to follow the style laid out in the C# Coding Conventions</p></li><li><p>You will need to comment your code using XML comments</p></li><li><p>You will need to update your UML to reflect your current code</p></li><li><p>You will need to write appropriate unit tests for your code</p></li></ul><h3 id=assignment-requirements>Assignment requirements:</h3><ul><li><p>Add the <em>RoundRegister.dll</em> as a dependency to your project</p></li><li><p>Implement the functionality for the &ldquo;complete order&rdquo; and &ldquo;cancel order&rdquo; buttons.</p></li><li><p>Process the payment providing options for credit, debit, or cash using the provided <code>RoundRegister</code> classes.</p></li><li><p>Implement a GUI to support the cashier in collecting a customer&rsquo;s cash payment and making the correct change.</p></li><li><p>Print the receipt using the provided RoundRegister class.</p></li><li><p>Update your UML Class Diagrams for:</p><ul><li>Data Library</li><li>Point of Sale</li></ul></li></ul><p>(You don&rsquo;t need to create a UML of your test project, though you can if you like)</p><h3 id=purpose>Purpose:</h3><p>This assignment is to simulate working with an outside DotNET library - in this case a library for communicating with a cash register, card reader, and receipt printer.</p><p>In addition, this assignment will require you to implement the Model-View-ViewModel architecture and create custom controls with dependency properties.</p><h3 id=assignment-details>Assignment Details</h3><h4 id=canceling-the-order>Canceling the Order</h4><p>The &ldquo;Cancel Order&rdquo; button should be available somewhere in the GUI at every step of taking the order.</p><p>Clicking this button should dispose of the current order and start a new one. This is most easily accomplished by replacing the <code>Order</code> object bound to the <code>DataContext</code> of your top-level order control with a new <code>Order</code> instance. If your databinding is set up correctly, this will empty the displayed order, zero the displayed subtotal, tax, and total, and a new order number will be displayed.</p><h4 id=completing-the-order>Completing the Order</h4><p>The &ldquo;Complete Order&rdquo; button should also be available somewhere in the GUI at every step of taking the order. Clicking it should display the payment options screen.</p><h4 id=payment-options-screen>Payment Options Screen</h4><p>The three payment options should be prominently displayed using appropriate controls. These options are &ldquo;Cash&rdquo; and &ldquo;Credit/Debit&rdquo;. In addition, the order details should continue to be visible, in case the customer wants to confirm any details. There should also be a &ldquo;Return to Order&rdquo; button that returns to the active order to allow for additional changes to be made.</p><p>Choosing the &ldquo;Credit/Debit&rdquo; option should invoke the <code>CardReader.RunCard()</code> method defined in <em>RoundRegister.dll</em> with the amount of the transaction. This will return one of five options (also defined in <em>RoundRegister.dll</em>&rsquo;s <code>RoundRegister</code> namespace):</p><ul><li><code>CardTransactionResult.Approved</code></li><li><code>CardTransactionResult.Declined</code></li><li><code>CardTransactionResult.ReadError</code></li><li><code>CardTransactionResult.InsufficientFunds</code></li><li><code>CardTransactionResult.IncorrectPin</code></li></ul><p>If the result is <code>CardTransactionResult.Approved</code>, the order receipt should print. Then a new order should begin (see the details on <em>Canceling the Order</em> above for details).</p><p>Choosing the &ldquo;Cash&rdquo; option should display a special GUI for taking a cash payment from the customer, as detailed in the <em>Cash Payment Processing</em> below.</p><h4 id=cash-payment-processing>Cash Payment Processing</h4><p>The Round Register includes a cash drawer which initially contains a set amount of bills and coins. The static <code>CashDrawer</code> class in the <em>RoundRegister.dll</em> represents this drawer, and keeps track of each of the number of each kind of currency it contains. As customer payments are taken, and change given, the drawer&rsquo;s values need to be updated to reflect the changing amounts of currency.</p><p>Unfortunately, the developers of Round Payments, Inc. did not provide a class that will integrate with a WPF form easily. You will therefore need to create an intermediary class to update the <code>RoundRegister.CashDrawer</code> and serve as the <code>DataContext</code> for your cash payment control. This intermediary class will need to provide properties for the GUI to bind. These properties need to include:</p><ol><li>Properties to represent the quantity of each kind of currency <em>in the drawer</em></li><li>Properties to represent the quantity of each kind of currency <em>the customer is using to pay</em></li><li>Properties to represent the quantity of each kind of currency <em>that should be provided to the customer as change</em> for the transaction.</li></ol><p>This intermediate class also needs to incorporate the logic for making appropriate change. Hint: Always start with the largest currency possible, and make use of the modulus operator or <code>Math.Floor()</code>.</p><p>Finally, you need to provide a method for finalizing the transaction which invokes the <code>CashDrawer.Open()</code> method, adds the quantity of currency the customer paid to the <code>CashDrawer</code>&rsquo;s fields, and deducts the quantity given as change.</p><p>If you set up this intermediate control correctly, your codebehind for the cash payment control should be minimal - you will need to bind the intermediate class as the <code>DataContext</code>, and all your controls should be set up as bindings.</p><p>Thus, the <code>RoundRegister.CashDrawer</code> is the <em>Model</em>, your intermediary class is the <em>ModelView</em>, and the custom WPF user control is the <em>View</em> of the MVVM architectural pattern.</p><p>A possible configuration for the cash payment control might be:</p><p><a href=#R-image-aef1b0a54846322370ade034e171eee8 class=lightbox-link><img alt="Cash Payment Control Mockup" class="border lazy lightbox noshadow figure-image" loading=lazy src=/cis400/images/CashPayment.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-aef1b0a54846322370ade034e171eee8><img alt="Cash Payment Control Mockup" class="border lazy lightbox noshadow lightbox-image" loading=lazy src=/cis400/images/CashPayment.png></a></p><p>Note that this kind of control could be composed of other custom controls, i.e. a <code>CurrencyControl</code> that exposes a <code>Label</code>, <code>CustomerQuantity</code>, <code>ChangeQuantity</code> dependency properties and looks something like:</p><p><a href=#R-image-e1ec1c17b7c9146d6bac065642a7c9ec class=lightbox-link><img alt="Currency Control Mockup" class="border lazy lightbox noshadow figure-image" loading=lazy src=/cis400/images/CurrencyControl.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-e1ec1c17b7c9146d6bac065642a7c9ec><img alt="Currency Control Mockup" class="border lazy lightbox noshadow lightbox-image" loading=lazy src=/cis400/images/CurrencyControl.png></a></p><p>While the exact appearance and functionality of the GUI is up to you, it should provide a &ldquo;Return to Order&rdquo; button (this can alternatively be labeled as &ldquo;Select Items&rdquo; or something similar) which returns to the order to allow changes to be made, as well as a &ldquo;Finalize Sale&rdquo; which should invoke the method you defined in your intermediate class for finalizing the sale. Once this has finished, you should print the receipt and begin a new order (see the details on <em>Canceling the Order</em> above for details).</p><h4 id=printing-the-receipt>Printing the Receipt</h4><p>The <em>RoundRegister.dll</em> contains a <code>ReceiptPrinter</code> class that exposes two methods:</p><ul><li><code>PrintLine(string text)</code> prints a single line of text onto the receipt tape.</li><li><code>CutTape()</code> cuts the register tape, so the printed receipt can be removed.</li></ul><p>You should add to your PointOfSale project a method or class that manages printing a receipt based on an order and payment method. The printed receipt must contain:</p><ul><li>The order number</li><li>The date and time the order was finalized</li><li>A complete list of all items in the order, including their price and any customization instructions</li><li>The subtotal for the order</li><li>The tax for the order</li><li>The total for the order</li><li>The payment method (i.e. cash or card)</li><li>The change owed</li></ul><p>The arrangement of these items and their labels should be such that a customer would reasonably be able to understand the entire receipt. You will need to print the receipt one line at a time with <code>PrintLine(string text)</code> and finish with a <code>CutTape()</code> call. Also, note that <strong>each line in the receipt cannot be longer than 40 characters</strong>. The <code>PrintLine()</code> method does not account for this hardware limitation - so <strong>you</strong> will need to ensure that no line exceeds this limit!</p><p>To make it easier for you to check your work, the printed results are saved in a file, <em>receipts.txt</em>, which should end up in your <em>debug</em> folder.</p><p>You should print a receipt for each completed sale.</p><h4 id=testing-the-cash-payment-processing>Testing the Cash Payment Processing</h4><p>One of the primary benefits of the MVVM architecture is it allows you to push logic that would otherwise be in the View classes into the ViewModel, and create unit tests for this ViewModel. You should write unit tests for the intermediate class that test the ability to make correct change, finalize the sale, and update properties correctly.</p><p>Because the <code>PointOfSale</code> is targeting the <code>net5.0-windows</code> framework, you cannot set <code>PointOfSale</code> as a dependency of your <code>DataTests</code> project. Instead, you will need to create a <em>new</em> XUnit test project named <code>PointOfSaleTests</code> to place your unit tests in. There is not a <code>.net5.0-windows</code> XUnit test project template, so use the normal XUnit template and choose the <code>.Net 5.0</code> option in the &ldquo;Additional information&rdquo; dialog:</p><p><a href=#R-image-e6b42ccea6ebfff8c8e35d05af4fdd52 class=lightbox-link><img alt=".NET 5.0 framework option" class="border lazy lightbox noshadow figure-image" loading=lazy src=/cis400/images/dotnet5framework.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-e6b42ccea6ebfff8c8e35d05af4fdd52><img alt=".NET 5.0 framework option" class="border lazy lightbox noshadow lightbox-image" loading=lazy src=/cis400/images/dotnet5framework.png></a></p><p>Once your project is added, open the <em>PointOfSaleTests.csproj</em> file by double-clicking it in Visual Studio. This should open it as an XML file. Change the <code>&lt;TargetFramework></code> entry to <code>net5.0-windows</code>:</p><p><a href=#R-image-775e6df370bc6f5355376cc2f780b44f class=lightbox-link><img alt=".NET 5.0-windows framework setting" class="border lazy lightbox noshadow figure-image" loading=lazy src=/cis400/images/dotnet5framework-windows.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-775e6df370bc6f5355376cc2f780b44f><img alt=".NET 5.0-windows framework setting" class="border lazy lightbox noshadow lightbox-image" loading=lazy src=/cis400/images/dotnet5framework-windows.png></a></p><p>Now you can add the <code>PointOfSale</code> project as a project dependency to <code>PointOfSaleTests</code>, allowing you to add a unit test for any ModelView classes you need to write to test your <code>PointOfSale</code> project.</p><div class="box notices cstyle tip"><div class=box-label><i class="fa-fw fas fa-lightbulb"></i> Tip</div><div class=box-content><p>Since you will not be able to replace the <code>CashDrawer</code> with a mock instance, you should invoke its <code>Reset()</code> method at the start of each test to ensure that each test starts with the drawer in the same state.</p></div></div><h4 id=testing-the-payment-gui>Testing the Payment GUI</h4><p>While you will be able to unit-test any ViewModel classes you have written programmatically, the GUI functionality must still be hand-tested. Update your test document to include tests for:</p><ol><li>Taking a Credit Card Payment</li><li>Taking a Cash Payment</li><li>Stopping taking a payment early to return to the order and adding additional items</li><li>Canceling the order and starting a new one</li></ol><h4 id=update-your-uml-diagrams>Update Your UML Diagrams</h4><p>You will need to update your UML diagrams to reflect the changes you have made to the <code>Data</code> and <code>PointOfSale</code> projects. Remember to mark the associations between your <code>Order</code> and its various <code>IMenuItem</code> instances.</p><h2 id=submitting-the-assignment>Submitting the Assignment</h2><p>Once your project is complete, merge your feature branch back into the <code>main</code> branch and <a href=https://textbooks.cs.ksu.edu/cis400/b-git-and-github/12-release/ rel=external target=_blank>create a release</a> tagged <code>v0.8.0</code> with name <code>"Milestone 8"</code>. Copy the URL for the release page and submit it to the Canvas assignment.</p><h2 id=grading-rubric>Grading Rubric</h2><p>The grading rubric for this assignment will be:</p><p><strong>15% Structure</strong> Did you implement the structure as laid out in the specification? Are the correct names used for classes, enums, properties, methods, events, etc? Do classes inherit from expected base classes?</p><p><strong>15% Documentation</strong> Does every class, method, property, and field use the correct XML-style documentation? Does every XML comment tag contain explanatory text?</p><p><strong>15% Design</strong> Are you appropriately using C# to create reasonably efficient, secure, and usable software? Does your code contain bugs that will cause issues at runtime?</p><p><strong>15% UML Diagrams</strong> Does your UML diagram reflect the code actually in your release? Are all classes, enums, etc. included? Are associations correctly identified?</p><p><strong>20% Functionality</strong> Does the program do what the assignment asks? Do properties return the expected values? Do methods perform the expected actions?</p><p><strong>20% Testing</strong> Do you have unit tests for all classes? Do your unit tests cover all the functionality of those classes? Do you have a written test plan for your GUI?</p><div class="box notices cstyle warning"><div class=box-label><i class="fa-fw fas fa-exclamation-triangle"></i> Warning</div><div class=box-content><p>Projects that do not compile will receive an automatic grade of 0.</p></div></div><footer class=footline></footer></article><article class=default><header class=headline></header><h1 id=milestone-8-requirements-spring-2022>Milestone 8 Requirements (Spring 2022)</h1><div class="box notices cstyle noiframe"><div class=box-label><i class="fa-fw fas fa-times-circle"></i> Web Only</div><div class=box-content><p>This textbook was authored for the <strong>CIS 400 - Object-Oriented Design, Implementation, and Testing</strong> course at Kansas State University. This section describes assignments specific to the <strong>Fall 2022</strong> offering of that course. If you are not enrolled in the course, please disregard this section.</p></div></div><p>For this milestone you are going to be adding the functionality for taking payments from customers to your <em>PointOfSale</em> project. This will involve working with a compiled code library <em>which you cannot see the code for!</em>. Instead, you must utilize the library&rsquo;s documentation to determine how to interact with it. You will also be writing custom UI controls that support data binding and a ModelView class to handle communication with this &ldquo;dumb&rdquo; library.</p><h3 id=general-requirements>General requirements:</h3><ul><li><p>You will need to follow the style laid out in the C# Coding Conventions</p></li><li><p>You will need to comment your code using XML comments</p></li><li><p>You will need to update your UML to reflect your current code</p></li><li><p>You will need to write appropriate unit tests for your code</p></li></ul><h3 id=assignment-requirements>Assignment requirements:</h3><ul><li><p>Add the <em>RoundRegister.dll</em> as a dependency to your project</p></li><li><p>Implement the functionality for the &ldquo;complete order&rdquo; and &ldquo;cancel order&rdquo; buttons.</p></li><li><p>Process the payment providing options for credit, debit, or cash using the provided <code>RoundRegister</code> classes.</p></li><li><p>Implement a GUI to support the cashier in collecting a customer&rsquo;s cash payment and making the correct change.</p></li><li><p>Print the receipt using the provided RoundRegister class.</p></li><li><p>Update your UML Class Diagrams for:</p><ul><li>Data Library</li><li>Point of Sale</li></ul></li></ul><p>(You don&rsquo;t need to create a UML of your test project, though you can if you like)</p><h3 id=purpose>Purpose:</h3><p>This assignment is to simulate working with an outside DotNET library - in this case a library for communicating with a cash register, card reader, and receipt printer.</p><p>In addition, this assignment will require you to implement the Model-View-ViewModel architecture and create custom controls with dependency properties.</p><h3 id=assignment-details>Assignment Details</h3><h4 id=canceling-the-order>Canceling the Order</h4><p>The &ldquo;Cancel Order&rdquo; button should be available somewhere in the GUI at every step of taking the order.</p><p>Clicking this button should dispose of the current order and start a new one. This is most easily accomplished by replacing the <code>Order</code> object bound to the <code>DataContext</code> of your top-level order control with a new <code>Order</code> instance. If your databinding is set up correctly, this will empty the displayed order, zero the displayed subtotal, tax, and total, and a new order number will be displayed.</p><h4 id=completing-the-order>Completing the Order</h4><p>The &ldquo;Complete Order&rdquo; button should also be available somewhere in the GUI at every step of taking the order. Clicking it should display the payment options screen.</p><h4 id=payment-options-screen>Payment Options Screen</h4><p>The three payment options should be prominently displayed using appropriate controls. These options are &ldquo;Cash&rdquo; and &ldquo;Credit/Debit&rdquo;. In addition, the order details should continue to be visible, in case the customer wants to confirm any details. There should also be a &ldquo;Return to Order&rdquo; button that returns to the active order to allow for additional changes to be made.</p><p>Choosing the &ldquo;Credit/Debit&rdquo; option should invoke the <code>CardReader.RunCard()</code> method defined in <em>RoundRegister.dll</em> with the amount of the transaction. This will return one of five options (also defined in <em>RoundRegister.dll</em>&rsquo;s <code>RoundRegister</code> namespace):</p><ul><li><code>CardTransactionResult.Approved</code></li><li><code>CardTransactionResult.Declined</code></li><li><code>CardTransactionResult.ReadError</code></li><li><code>CardTransactionResult.InsufficientFunds</code></li><li><code>CardTransactionResult.IncorrectPin</code></li></ul><p>If the result is <code>CardTransactionResult.Approved</code>, the order receipt should print. Then a new order should begin (see the details on <em>Canceling the Order</em> above for details).</p><p>Choosing the &ldquo;Cash&rdquo; option should display a special GUI for taking a cash payment from the customer, as detailed in the <em>Cash Payment Processing</em> below.</p><h4 id=cash-payment-processing>Cash Payment Processing</h4><p>The Round Register includes a cash drawer which initially contains a set amount of bills and coins. The static <code>CashDrawer</code> class in the <em>RoundRegister.dll</em> represents this drawer, and keeps track of each of the number of each kind of currency it contains. As customer payments are taken, and change given, the drawer&rsquo;s values need to be updated to reflect the changing amounts of currency.</p><p>Unfortunately, the developers of Round Payments, Inc. did not provide a class that will integrate with a WPF form easily. You will therefore need to create an intermediary class to update the <code>RoundRegister.CashDrawer</code> and serve as the <code>DataContext</code> for your cash payment control. This intermediary class will need to provide properties for the GUI to bind. These properties need to include:</p><ol><li>Properties to represent the quantity of each kind of currency <em>in the drawer</em></li><li>Properties to represent the quantity of each kind of currency <em>the customer is using to pay</em></li><li>Properties to represent the quantity of each kind of currency <em>that should be provided to the customer as change</em> for the transaction.</li></ol><p>This intermediate class also needs to incorporate the logic for making appropriate change. Hint: Always start with the largest currency possible, and make use of the modulus operator or <code>Math.Floor()</code>.</p><p>Finally, you need to provide a method for finalizing the transaction which invokes the <code>CashDrawer.Open()</code> method, adds the quantity of currency the customer paid to the <code>CashDrawer</code>&rsquo;s fields, and deducts the quantity given as change.</p><p>If you set up this intermediate control correctly, your codebehind for the cash payment control should be minimal - you will need to bind the intermediate class as the <code>DataContext</code>, and all your controls should be set up as bindings.</p><p>Thus, the <code>RoundRegister.CashDrawer</code> is the <em>Model</em>, your intermediary class is the <em>ModelView</em>, and the custom WPF user control is the <em>View</em> of the MVVM architectural pattern.</p><p>A possible configuration for the cash payment control might be:</p><p><a href=#R-image-5a5ab79dc7a9f08a9941b0251939dadf class=lightbox-link><img alt="Cash Payment Control Mockup" class="border lazy lightbox noshadow figure-image" loading=lazy src=/cis400/images/CashPayment.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-5a5ab79dc7a9f08a9941b0251939dadf><img alt="Cash Payment Control Mockup" class="border lazy lightbox noshadow lightbox-image" loading=lazy src=/cis400/images/CashPayment.png></a></p><p>Note that this kind of control could be composed of other custom controls, i.e. a <code>CurrencyControl</code> that exposes a <code>Label</code>, <code>CustomerQuantity</code>, <code>ChangeQuantity</code> dependency properties and looks something like:</p><p><a href=#R-image-eb21a300c47aee3154fc86841fed9eae class=lightbox-link><img alt="Currency Control Mockup" class="border lazy lightbox noshadow figure-image" loading=lazy src=/cis400/images/CurrencyControl.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-eb21a300c47aee3154fc86841fed9eae><img alt="Currency Control Mockup" class="border lazy lightbox noshadow lightbox-image" loading=lazy src=/cis400/images/CurrencyControl.png></a></p><p>While the exact appearance and functionality of the GUI is up to you, it should provide a &ldquo;Return to Order&rdquo; button (this can alternatively be labeled as &ldquo;Select Items&rdquo; or something similar) which returns to the order to allow changes to be made, as well as a &ldquo;Finalize Sale&rdquo; which should invoke the method you defined in your intermediate class for finalizing the sale. Once this has finished, you should print the receipt and begin a new order (see the details on <em>Canceling the Order</em> above for details).</p><h4 id=printing-the-receipt>Printing the Receipt</h4><p>The <em>RoundRegister.dll</em> contains a <code>ReceiptPrinter</code> class that exposes two methods:</p><ul><li><code>PrintLine(string text)</code> prints a single line of text onto the receipt tape.</li><li><code>CutTape()</code> cuts the register tape, so the printed receipt can be removed.</li></ul><p>You should add to your PointOfSale project a method or class that manages printing a receipt based on an order and payment method. The printed receipt must contain:</p><ul><li>The order number</li><li>The date and time the order was finalized</li><li>A complete list of all items in the order, including their price and any customization instructions</li><li>The subtotal for the order</li><li>The tax for the order</li><li>The total for the order</li><li>The payment method (i.e. cash or card)</li><li>The change owed</li></ul><p>The arrangement of these items and their labels should be such that a customer would reasonably be able to understand the entire receipt. You will need to print the receipt one line at a time with <code>PrintLine(string text)</code> and finish with a <code>CutTape()</code> call. Also, note that <strong>each line in the receipt cannot be longer than 40 characters</strong>. The <code>PrintLine()</code> method does not account for this hardware limitation - so <strong>you</strong> will need to ensure that no line exceeds this limit!</p><p>To make it easier for you to check your work, the printed results are saved in a file, <em>receipts.txt</em>, which should end up in your <em>debug</em> folder.</p><p>You should print a receipt for each completed sale.</p><h4 id=testing-the-cash-payment-processing>Testing the Cash Payment Processing</h4><p>One of the primary benefits of the MVVM architecture is it allows you to push logic that would otherwise be in the View classes into the ViewModel, and create unit tests for this ViewModel. You should write unit tests for the intermediate class that test the ability to make correct change, finalize the sale, and update properties correctly.</p><p>Because the <code>PointOfSale</code> is targeting the <code>net5.0-windows</code> framework, you cannot set <code>PointOfSale</code> as a dependency of your <code>DataTests</code> project. Instead, you will need to create a <em>new</em> XUnit test project named <code>PointOfSaleTests</code> to place your unit tests in. There is not a <code>.net5.0-windows</code> XUnit test project template, so use the normal XUnit template and choose the <code>.Net 5.0</code> option in the &ldquo;Additional information&rdquo; dialog:</p><p><a href=#R-image-319d08dde272f18ddf876c946c56d758 class=lightbox-link><img alt=".NET 5.0 framework option" class="border lazy lightbox noshadow figure-image" loading=lazy src=/cis400/images/dotnet5framework.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-319d08dde272f18ddf876c946c56d758><img alt=".NET 5.0 framework option" class="border lazy lightbox noshadow lightbox-image" loading=lazy src=/cis400/images/dotnet5framework.png></a></p><p>Once your project is added, open the <em>PointOfSaleTests.csproj</em> file by double-clicking it in Visual Studio. This should open it as an XML file. Change the <code>&lt;TargetFramework></code> entry to <code>net5.0-windows</code>:</p><p><a href=#R-image-f5b284358283344e3a753deddf3d5b11 class=lightbox-link><img alt=".NET 5.0-windows framework setting" class="border lazy lightbox noshadow figure-image" loading=lazy src=/cis400/images/dotnet5framework-windows.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-f5b284358283344e3a753deddf3d5b11><img alt=".NET 5.0-windows framework setting" class="border lazy lightbox noshadow lightbox-image" loading=lazy src=/cis400/images/dotnet5framework-windows.png></a></p><p>Now you can add the <code>PointOfSale</code> project as a project dependency to <code>PointOfSaleTests</code>, allowing you to add a unit test for any ModelView classes you need to write to test your <code>PointOfSale</code> project.</p><div class="box notices cstyle tip"><div class=box-label><i class="fa-fw fas fa-lightbulb"></i> Tip</div><div class=box-content><p>Since you will not be able to replace the <code>CashDrawer</code> with a mock instance, you should invoke its <code>Reset()</code> method at the start of each test to ensure that each test starts with the drawer in the same state.</p></div></div><h4 id=testing-the-payment-gui>Testing the Payment GUI</h4><p>While you will be able to unit-test any ViewModel classes you have written programmatically, the GUI functionality must still be hand-tested. Update your test document to include tests for:</p><ol><li>Taking a Credit Card Payment</li><li>Taking a Cash Payment</li><li>Stopping taking a payment early to return to the order and adding additional items</li><li>Canceling the order and starting a new one</li></ol><h4 id=update-your-uml-diagrams>Update Your UML Diagrams</h4><p>You will need to update your UML diagrams to reflect the changes you have made to the <code>Data</code> and <code>PointOfSale</code> projects. Remember to mark the associations between your <code>Order</code> and its various <code>IMenuItem</code> instances.</p><h2 id=submitting-the-assignment>Submitting the Assignment</h2><p>Once your project is complete, merge your feature branch back into the <code>main</code> branch and <a href=https://textbooks.cs.ksu.edu/cis400/b-git-and-github/12-release/ rel=external target=_blank>create a release</a> tagged <code>v0.8.0</code> with name <code>"Milestone 8"</code>. Copy the URL for the release page and submit it to the Canvas assignment.</p><h2 id=grading-rubric>Grading Rubric</h2><p>The grading rubric for this assignment will be:</p><p><strong>15% Structure</strong> Did you implement the structure as laid out in the specification? Are the correct names used for classes, enums, properties, methods, events, etc? Do classes inherit from expected base classes?</p><p><strong>15% Documentation</strong> Does every class, method, property, and field use the correct XML-style documentation? Does every XML comment tag contain explanatory text?</p><p><strong>15% Design</strong> Are you appropriately using C# to create reasonably efficient, secure, and usable software? Does your code contain bugs that will cause issues at runtime?</p><p><strong>15% UML Diagrams</strong> Does your UML diagram reflect the code actually in your release? Are all classes, enums, etc. included? Are associations correctly identified?</p><p><strong>20% Functionality</strong> Does the program do what the assignment asks? Do properties return the expected values? Do methods perform the expected actions?</p><p><strong>20% Testing</strong> Do you have unit tests for all classes? Do your unit tests cover all the functionality of those classes? Do you have a written test plan for your GUI? Do you have a record of employing the test plan in your release?</p><div class="box notices cstyle warning"><div class=box-label><i class="fa-fw fas fa-exclamation-triangle"></i> Warning</div><div class=box-content><p>Projects that do not compile will receive an automatic grade of 0.</p></div></div><footer class=footline></footer></article></section></div></main><div class=git-footer><p class=theme-version-footer>6.0.0</p><p>Last modified by:
<i class='fas fa-user'></i> Julie Thornton
<i class='fas fa-calendar'></i> <a href=https://github.com/ksu-cs-textbooks/cis400/commit/49e1b7656e0b4e6d675d8aa55bc1e73c58f44a99>Aug 3, 2023</a></p></div></div><script src=/cis400/js/clipboard.min.js?1731949283 defer></script><script src=/cis400/js/perfect-scrollbar.min.js?1731949283 defer></script><script src=/cis400/js/theme.js?1731949283 defer></script></body></html>