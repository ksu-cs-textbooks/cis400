<!doctype html><html lang=en-us dir=ltr itemscope itemtype=http://schema.org/Article><head><meta charset=utf-8><meta name=viewport content="height=device-height,width=device-width,initial-scale=1,minimum-scale=1"><meta name=generator content="Hugo 0.128.0"><meta name=generator content="Relearn 6.0.0"><meta name=description content="One of the most important ideas behind unit testing is the idea that you are testing an object in isolation from other objects (This is in direct contrast to integration testing, where you are interested in how objects are working together).
But how do we test a class that has a strong dependency on another class? Let’s consider the case of an Automated Teller Machine (ATM). If we designed its control system using an object-oriented language, one natural architecture would be to have classes representing the cash dispenser, card reader, keyboard, display, and user’s bank accounts."><meta name=author content="Nathan Bean"><meta name=twitter:card content="summary"><meta name=twitter:title content="Mock Objects :: K-State CIS 400 Textbook"><meta name=twitter:description content="One of the most important ideas behind unit testing is the idea that you are testing an object in isolation from other objects (This is in direct contrast to integration testing, where you are interested in how objects are working together).
But how do we test a class that has a strong dependency on another class? Let’s consider the case of an Automated Teller Machine (ATM). If we designed its control system using an object-oriented language, one natural architecture would be to have classes representing the cash dispenser, card reader, keyboard, display, and user’s bank accounts."><meta property="og:url" content="https://textbooks.cs.ksu.edu/cis400/1-object-orientation/04-testing/06-mock-objects/embed.html"><meta property="og:site_name" content="K-State CIS 400 Textbook"><meta property="og:title" content="Mock Objects :: K-State CIS 400 Textbook"><meta property="og:description" content="One of the most important ideas behind unit testing is the idea that you are testing an object in isolation from other objects (This is in direct contrast to integration testing, where you are interested in how objects are working together).
But how do we test a class that has a strong dependency on another class? Let’s consider the case of an Automated Teller Machine (ATM). If we designed its control system using an object-oriented language, one natural architecture would be to have classes representing the cash dispenser, card reader, keyboard, display, and user’s bank accounts."><meta property="og:locale" content="en-us"><meta property="og:type" content="article"><meta property="article:section" content="Object-Orientation"><meta property="article:published_time" content="2018-08-24T10:53:26-05:00"><meta property="article:modified_time" content="2024-02-12T08:46:39-06:00"><meta itemprop=name content="Mock Objects :: K-State CIS 400 Textbook"><meta itemprop=description content="One of the most important ideas behind unit testing is the idea that you are testing an object in isolation from other objects (This is in direct contrast to integration testing, where you are interested in how objects are working together).
But how do we test a class that has a strong dependency on another class? Let’s consider the case of an Automated Teller Machine (ATM). If we designed its control system using an object-oriented language, one natural architecture would be to have classes representing the cash dispenser, card reader, keyboard, display, and user’s bank accounts."><meta itemprop=datePublished content="2018-08-24T10:53:26-05:00"><meta itemprop=dateModified content="2024-02-12T08:46:39-06:00"><meta itemprop=wordCount content="620"><title>Mock Objects :: K-State CIS 400 Textbook</title>
<link href=https://textbooks.cs.ksu.edu/cis400/1-object-orientation/04-testing/06-mock-objects/ rel=canonical type=text/html title="Mock Objects :: K-State CIS 400 Textbook"><link href=/cis400/1-object-orientation/04-testing/06-mock-objects/index.xml rel=alternate type=application/rss+xml title="Mock Objects :: K-State CIS 400 Textbook"><link href=/cis400/1-object-orientation/04-testing/06-mock-objects/index.print.html rel=alternate type=text/html title="Mock Objects :: K-State CIS 400 Textbook"><link href=/cis400/1-object-orientation/04-testing/06-mock-objects/tele.html rel=alternate type=text/html title="Mock Objects :: K-State CIS 400 Textbook"><link href=/cis400/css/fontawesome-all.min.css?1737134597 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/cis400/css/fontawesome-all.min.css?1737134597 rel=stylesheet></noscript><link href=/cis400/css/nucleus.css?1737134597 rel=stylesheet><link href=/cis400/css/auto-complete.css?1737134597 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/cis400/css/auto-complete.css?1737134597 rel=stylesheet></noscript><link href=/cis400/css/perfect-scrollbar.min.css?1737134597 rel=stylesheet><link href=/cis400/css/fonts.css?1737134597 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/cis400/css/fonts.css?1737134597 rel=stylesheet></noscript><link href=/cis400/css/theme.css?1737134597 rel=stylesheet><link href=/cis400/css/theme-light-theme.css?1737134597 rel=stylesheet id=R-variant-style><link href=/cis400/css/chroma-relearn-light.css?1737134597 rel=stylesheet id=R-variant-chroma-style><link href=/cis400/css/variant.css?1737134597 rel=stylesheet><link href=/cis400/css/print.css?1737134597 rel=stylesheet media=print><script>window.relearn=window.relearn||{},window.relearn.relBasePath="../../..",window.relearn.relBaseUri="../../../..",window.relearn.absBaseUri="https://textbooks.cs.ksu.edu/cis400",window.index_js_url="/cis400/index.search.js",window.variants&&variants.init(["light-theme"]),window.T_Copy_to_clipboard=`Copy to clipboard`,window.T_Copied_to_clipboard=`Copied to clipboard!`,window.T_Copy_link_to_clipboard=`Copy link to clipboard`,window.T_Link_copied_to_clipboard=`Copied link to clipboard!`,window.T_Reset_view=`Reset view`,window.T_View_reset=`View reset!`,window.T_No_results_found=`No results found for "{0}"`,window.T_N_results_found=`{1} results found for "{0}"`</script><link href=/cis400/css/custom.css?1737134597 rel=stylesheet></head><body class="mobile-support embed disableInlineCopyToClipboard" data-url=/cis400/1-object-orientation/04-testing/06-mock-objects/embed.html><div id=R-body class=default-animation><div id=R-body-overlay></div><div id=R-main-overlay></div><main id=R-body-inner class="highlightable default" tabindex=-1><div class=flex-block-wrapper><article class=default><p>One of the most important ideas behind unit testing is the idea that you are testing an object <em>in isolation</em> from other objects (This is in direct contrast to <em>integration testing</em>, where you are interested in how objects are working together).</p><p>But how do we test a class that has a strong dependency on another class? Let&rsquo;s consider the case of an Automated Teller Machine (ATM). If we designed its control system using an object-oriented language, one natural architecture would be to have classes representing the cash dispenser, card reader, keyboard, display, and user&rsquo;s bank accounts. Then we might coordinate each of these into a central object, representing the entire ATM.</p><p>Unit testing most of these classes would be straightforward, but how do we unit test the ATM class? It would have dependencies on each of the other classes. If we used normal instances of those, we&rsquo;d have no idea if the test was failing due to the ATM class or its dependency. This is where <em>mock objects</em> come into play.</p><p>We start by replacing each of the dependencies with an interface using the same method signatures, and we pass the dependencies through the ATM constructor. We make sure our existing classes implement the interface, and pass them into the ATM when we create it. Thus, this step doesn&rsquo;t change much about how our program operates - we&rsquo;re still using the same classes to do the same things.</p><p>But in our unit tests for the <code>ATM</code> class, we can create new classes that implement the interfaces and pass them into the ATM instance we are testing. These are our <em>mock</em> classes, because they &ldquo;fill in&rdquo; for the real classes. Typically, a mock class is much simpler than a real class, and exposes information we might need in our test. For example, our Display class might include a <code>DisplayText</code> method, so have it implement an <code>IDisplay</code> interface that lists <code>DisplayText</code>. Then our <code>MockDisplay</code> class might look like:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=kd>internal</span> <span class=k>class</span> <span class=nc>MockDisplay</span> <span class=p>:</span><span class=n>IDisplay</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=kd>public</span> <span class=kt>string</span> <span class=n>LastTextDisplayed</span> <span class=p>{</span><span class=k>get</span><span class=p>;</span> <span class=k>set</span><span class=p>;}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=kd>public</span> <span class=k>void</span> <span class=n>DisplayText</span><span class=p>(</span><span class=kt>string</span> <span class=n>text</span><span class=p>)</span> 
</span></span><span class=line><span class=cl>  <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>LastTextDisplayed</span> <span class=p>=</span> <span class=n>text</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div><p>Note that our mock class implements the required method, <code>DisplayText</code>, but in a very different way than a real display would - it just holds onto the string and makes it accessible with a public property. That way, we could check its value in a test:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=na>[fact]</span>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=k>void</span> <span class=n>ShouldDisplayGreetingOnStartup</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=n>MockDisplay</span> <span class=n>md</span> <span class=p>=</span> <span class=k>new</span> <span class=n>MockDisplay</span><span class=p>();</span>
</span></span><span class=line><span class=cl>  <span class=n>MockKeyboard</span> <span class=n>mk</span> <span class=p>=</span> <span class=k>new</span> <span class=n>MockKeyboard</span><span class=p>();</span>
</span></span><span class=line><span class=cl>  <span class=n>MockCardReader</span> <span class=n>mcr</span><span class=p>=</span> <span class=k>new</span> <span class=n>MockCardReader</span><span class=p>();</span>
</span></span><span class=line><span class=cl>  <span class=n>MockCashDispenser</span> <span class=n>mcd</span> <span class=p>=</span> <span class=k>new</span> <span class=n>MockCashDispenser</span><span class=p>();</span>
</span></span><span class=line><span class=cl>  <span class=n>Atm</span> <span class=n>atm</span> <span class=p>=</span> <span class=k>new</span> <span class=n>Atm</span><span class=p>(</span><span class=n>md</span><span class=p>,</span> <span class=n>mk</span><span class=p>,</span> <span class=n>mcr</span><span class=p>,</span> <span class=n>mcd</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=n>Assert</span><span class=p>.</span><span class=n>Equal</span><span class=p>(</span><span class=s>&#34;Hello ATM!&#34;</span><span class=p>,</span> <span class=n>md</span><span class=p>.</span><span class=n>LastTextDisplayed</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div><p>Given our knowledge of C#, the only way <code>md.LastTextDisplayed</code> would be the string specified was if the <code>ATM</code> class asked it to display the message when it was constructed. Thus, we know it will do the same with the real <code>DisplayScreen</code> class. And if we have also thoroughly unit tested the <code>DisplayScreen</code> class, then we have a strong basis for believing our system is built correctly.</p><p>This approach also allows us to test things that would normally be very difficult to do - for example, we can write a method to have a <code>MockCardReader</code> trigger a <code>CardInserted</code> event:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=kd>internal</span> <span class=k>class</span> <span class=nc>MockCardReader</span> <span class=p>:</span> <span class=n>ICardReader</span> 
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=kd>public</span> <span class=k>event</span> <span class=n>EventHandler</span><span class=p>&lt;</span><span class=n>CardInsertedEventArgs</span><span class=p>&gt;</span> <span class=n>CardInserted</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=kd>public</span> <span class=k>void</span> <span class=n>TriggerCardInserted</span><span class=p>()</span>
</span></span><span class=line><span class=cl>  <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>CardInserted</span><span class=p>.</span><span class=n>Invoke</span><span class=p>(</span><span class=k>this</span><span class=p>,</span> <span class=k>new</span> <span class=n>CardInsertedEventArgs</span><span class=p>());</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div><p>Which allows us to check that the ATM prompts a user for a PIN once a card is inserted:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=na>[Fact]</span>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=k>void</span> <span class=n>ShouldPromptForPinOnCardInsert</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=n>MockDisplay</span> <span class=n>md</span> <span class=p>=</span> <span class=k>new</span> <span class=n>MockDisplay</span><span class=p>();</span>
</span></span><span class=line><span class=cl>  <span class=n>MockKeyboard</span> <span class=n>mk</span> <span class=p>=</span> <span class=k>new</span> <span class=n>MockKeyboard</span><span class=p>();</span>
</span></span><span class=line><span class=cl>  <span class=n>MockCardReader</span> <span class=n>mcr</span><span class=p>=</span> <span class=k>new</span> <span class=n>MockCardReader</span><span class=p>();</span>
</span></span><span class=line><span class=cl>  <span class=n>MockCashDispenser</span> <span class=n>mcd</span> <span class=p>=</span> <span class=k>new</span> <span class=n>MockCashDispenser</span><span class=p>();</span>
</span></span><span class=line><span class=cl>  <span class=n>Atm</span> <span class=n>atm</span> <span class=p>=</span> <span class=k>new</span> <span class=n>Atm</span><span class=p>(</span><span class=n>md</span><span class=p>,</span> <span class=n>mk</span><span class=p>,</span> <span class=n>mcr</span><span class=p>,</span> <span class=n>mcd</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=n>mcr</span><span class=p>.</span><span class=n>TriggerCardInserted</span><span class=p>();</span>
</span></span><span class=line><span class=cl>  <span class=n>Assert</span><span class=p>.</span><span class=n>Equal</span><span class=p>(</span><span class=s>&#34;Please enter your PIN:&#34;</span><span class=p>,</span> <span class=n>md</span><span class=p>.</span><span class=n>LastTextDisplayed</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div><p>Using mock objects like this can greatly simplify the test-writing process, and improve the quality and robustness of your unit tests.</p><footer class=footline></footer></article></div></main></div><script src=/cis400/js/clipboard.min.js?1737134597 defer></script><script src=/cis400/js/perfect-scrollbar.min.js?1737134597 defer></script><script src=/cis400/js/theme.js?1737134597 defer></script><script src=/cis400/js/embed-iframe.js?1737134597 defer></script></body></html>