




	
	
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		
		

	
	
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		
		

	
	
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		
		
<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="height=device-height, width=device-width, initial-scale=1.0, minimum-scale=1.0">
    <meta name="generator" content="Hugo 0.117.0">
    <meta name="generator" content="Relearn 5.18.0">
    <meta name="description" content="K-State CIS 400 Textbook">
    <meta name="author" content="Nathan Bean">
    <title>Mock Objects :: K-State CIS 400 Textbook</title>
    <link href="https://ksu-cs-textbooks.github.io/cis400/1-object-orientation/04-testing/06-mock-objects/index.html" rel="canonical" type="text/html" title="Mock Objects :: K-State CIS 400 Textbook">
    <link href="https://ksu-cs-textbooks.github.io/cis400/1-object-orientation/04-testing/06-mock-objects/index.xml" rel="alternate" type="application/rss+xml" title="Mock Objects :: K-State CIS 400 Textbook">
    <link href="https://ksu-cs-textbooks.github.io/cis400/1-object-orientation/04-testing/06-mock-objects/index.print.html" rel="alternate" type="text/html" title="Mock Objects :: K-State CIS 400 Textbook">
    <link href="https://ksu-cs-textbooks.github.io/cis400/1-object-orientation/04-testing/06-mock-objects/tele.html" rel="alternate" type="text/html" title="Mock Objects :: K-State CIS 400 Textbook">
    
    <!-- https://github.com/filamentgroup/loadCSS/blob/master/README.md#how-to-use -->
    <link href="https://ksu-cs-textbooks.github.io/cis400/css/fontawesome-all.min.css?1713796377" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="https://ksu-cs-textbooks.github.io/cis400/css/fontawesome-all.min.css?1713796377" rel="stylesheet"></noscript>
    <link href="https://ksu-cs-textbooks.github.io/cis400/css/nucleus.css?1713796377" rel="stylesheet">
    <link href="https://ksu-cs-textbooks.github.io/cis400/css/auto-complete.css?1713796377" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="https://ksu-cs-textbooks.github.io/cis400/css/auto-complete.css?1713796377" rel="stylesheet"></noscript>
    <link href="https://ksu-cs-textbooks.github.io/cis400/css/perfect-scrollbar.min.css?1713796377" rel="stylesheet">
    <link href="https://ksu-cs-textbooks.github.io/cis400/css/fonts.css?1713796377" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="https://ksu-cs-textbooks.github.io/cis400/css/fonts.css?1713796377" rel="stylesheet"></noscript>
    <link href="https://ksu-cs-textbooks.github.io/cis400/css/theme.css?1713796377" rel="stylesheet">
    
    
    
    <link href="https://ksu-cs-textbooks.github.io/cis400/css/theme-light-theme.css?1713796377" rel="stylesheet" id="variant-style">
    <link href="https://ksu-cs-textbooks.github.io/cis400/css/variant.css?1713796377" rel="stylesheet">
    <link href="https://ksu-cs-textbooks.github.io/cis400/css/print.css?1713796377" rel="stylesheet" media="print">
    <link href="https://ksu-cs-textbooks.github.io/cis400/css/ie.css?1713796377" rel="stylesheet">
    <script src="https://ksu-cs-textbooks.github.io/cis400/js/url.js?1713796377"></script>
    
    
    
    <script>
      // hack to let hugo tell us how to get to the root when using relativeURLs, it needs to be called *url= for it to do its magic:
      // https://github.com/gohugoio/hugo/blob/145b3fcce35fbac25c7033c91c1b7ae6d1179da8/transform/urlreplacers/absurlreplacer.go#L72
      window.index_js_url="https://ksu-cs-textbooks.github.io/cis400/index.search.js";
      var root_url="https://ksu-cs-textbooks.github.io/cis400/";
      var baseUri=root_url.replace(/\/$/, '');
      // translations
      window.T_Copy_to_clipboard = 'Copy to clipboard';
      window.T_Copied_to_clipboard = 'Copied to clipboard!';
      window.T_Copy_link_to_clipboard = 'Copy link to clipboard';
      window.T_Link_copied_to_clipboard = 'Copied link to clipboard!';
      window.T_No_results_found = 'No results found for \u0022{0}\u0022';
      window.T_N_results_found = '{1} results found for \u0022{0}\u0022';
      // some further base stuff
      var baseUriFull='https:\/\/ksu-cs-textbooks.github.io\/cis400/';
      window.variants && variants.init( [ 'light-theme', 'dark-theme' ] );
    </script>
    
    <link href="https://ksu-cs-textbooks.github.io/cis400/css/custom.css?1713796377" rel="stylesheet">

    
  </head>
  <body class="mobile-support embed disableInlineCopyToClipboard" data-url="https://ksu-cs-textbooks.github.io/cis400/1-object-orientation/04-testing/06-mock-objects/embed.html">
    <div id="body" class="default-animation">
      
      
      
      <main id="body-inner" class="highlightable default" tabindex="-1">
        <div class="flex-block-wrapper">
          <article class="default">
    
    
    
<p>One of the most important ideas behind unit testing is the idea that you are testing an object <em>in isolation</em> from other objects (This is in direct contrast to <em>integration testing</em>, where you are interested in how objects are working together).</p>
<p>But how do we test a class that has a strong dependency on another class? Let&rsquo;s consider the case of an Automated Teller Machine (ATM). If we designed its control system using an object-oriented language, one natural architecture would be to have classes representing the cash dispenser, card reader, keyboard, display, and user&rsquo;s bank accounts. Then we might coordinate each of these into a central object, representing the entire ATM.</p>
<p>Unit testing most of these classes would be straightforward, but how do we unit test the ATM class?  It would have dependencies on each of the other classes.  If we used normal instances of those, we&rsquo;d have no idea if the test was failing due to the ATM class or its dependency. This is where <em>mock objects</em> come into play.</p>
<p>We start by replacing each of the dependencies with an interface using the same method signatures, and we pass the dependencies through the ATM constructor.  We make sure our existing classes implement the interface, and pass them into the ATM when we create it.  Thus, this step doesn&rsquo;t change much about how our program operates - we&rsquo;re still using the same classes to do the same things.</p>
<p>But in our unit tests for the <code>ATM</code> class, we can create new classes that implement the interfaces and pass them into the ATM instance we are testing.  These are our <em>mock</em> classes, because they &ldquo;fill in&rdquo; for the real classes.  Typically, a mock class is much simpler than a real class, and exposes information we might need in our test.  For example, our Display class might include a <code>DisplayText</code> method, so have it implement an <code>IDisplay</code> interface that lists <code>DisplayText</code>. Then our <code>MockDisplay</code> class might look like:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">internal</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">MockDisplay</span> :IDisplay
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">string</span> LastTextDisplayed {<span style="color:#66d9ef">get</span>; <span style="color:#66d9ef">set</span>;}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> DisplayText(<span style="color:#66d9ef">string</span> text) 
</span></span><span style="display:flex;"><span>  {
</span></span><span style="display:flex;"><span>    LastTextDisplayed = text;
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>Note that our mock class implements the required method, <code>DisplayText</code>, but in a very different way than a real display would - it just holds onto the string and makes it accessible with a public property. That way, we could check its value in a test:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#a6e22e">[fact]</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> ShouldDisplayGreetingOnStartup()
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  MockDisplay md = <span style="color:#66d9ef">new</span> MockDisplay();
</span></span><span style="display:flex;"><span>  MockKeyboard mk = <span style="color:#66d9ef">new</span> MockKeyboard();
</span></span><span style="display:flex;"><span>  MockCardReader mcr= <span style="color:#66d9ef">new</span> MockCardReader();
</span></span><span style="display:flex;"><span>  MockCashDispenser mcd = <span style="color:#66d9ef">new</span> MockCashDispenser();
</span></span><span style="display:flex;"><span>  Atm atm = <span style="color:#66d9ef">new</span> Atm(md, mk, mcr, mcd);
</span></span><span style="display:flex;"><span>  Assert.Equal(<span style="color:#e6db74">&#34;Hello ATM!&#34;</span>, md.LastTextDisplayed);
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>Given our knowledge of C#, the only way <code>md.LastTextDisplayed</code> would be the string specified was if the <code>ATM</code> class asked it to display the message when it was constructed. Thus, we know it will do the same with the real <code>DisplayScreen</code> class.  And if we have also thoroughly unit tested the <code>DisplayScreen</code> class, then we have a strong basis for believing our system is built correctly.</p>
<p>This approach also allows us to test things that would normally be very difficult to do - for example, we can write a method to have a <code>MockCardReader</code> trigger a <code>CardInserted</code> event:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">internal</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">MockCardReader</span> : ICardReader 
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">event</span> EventHandler&lt;CardInsertedEventArgs&gt; CardInserted;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> TriggerCardInserted()
</span></span><span style="display:flex;"><span>  {
</span></span><span style="display:flex;"><span>    CardInserted.Invoke(<span style="color:#66d9ef">this</span>, <span style="color:#66d9ef">new</span> CardInsertedEventArgs());
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>Which allows us to check that the ATM prompts a user for a PIN once a card is inserted:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#a6e22e">[Fact]</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> ShouldPromptForPinOnCardInsert()
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  MockDisplay md = <span style="color:#66d9ef">new</span> MockDisplay();
</span></span><span style="display:flex;"><span>  MockKeyboard mk = <span style="color:#66d9ef">new</span> MockKeyboard();
</span></span><span style="display:flex;"><span>  MockCardReader mcr= <span style="color:#66d9ef">new</span> MockCardReader();
</span></span><span style="display:flex;"><span>  MockCashDispenser mcd = <span style="color:#66d9ef">new</span> MockCashDispenser();
</span></span><span style="display:flex;"><span>  Atm atm = <span style="color:#66d9ef">new</span> Atm(md, mk, mcr, mcd);
</span></span><span style="display:flex;"><span>  mcr.TriggerCardInserted();
</span></span><span style="display:flex;"><span>  Assert.Equal(<span style="color:#e6db74">&#34;Please enter your PIN:&#34;</span>, md.LastTextDisplayed);
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>Using mock objects like this can greatly simplify the test-writing process, and improve the quality and robustness of your unit tests.</p>

            <footer class="footline">

            </footer>
          </article>
        </div>
      </main>
    </div>
    
    
    
    <script src="https://ksu-cs-textbooks.github.io/cis400/js/clipboard.min.js?1713796378" defer></script>
    <script src="https://ksu-cs-textbooks.github.io/cis400/js/perfect-scrollbar.min.js?1713796378" defer></script>
    <script src="https://ksu-cs-textbooks.github.io/cis400/js/theme.js?1713796378" defer></script>
    
    <script src="https://ksu-cs-textbooks.github.io/cis400/js/embed-iframe.js?1713796378 defer"></script>
  </body>
</html>
