<!doctype html><html lang=en-us dir=ltr itemscope itemtype=http://schema.org/Article><head><meta charset=utf-8><meta name=viewport content="height=device-height,width=device-width,initial-scale=1,minimum-scale=1"><meta name=generator content="Hugo 0.128.0"><meta name=generator content="Relearn 6.0.0"><meta name=description content="Itâ€™s a shapeshifter!"><meta name=author content="Nathan Bean"><meta name=twitter:card content="summary"><meta name=twitter:title content="Polymorphism :: K-State CIS 400 Textbook"><meta name=twitter:description content="Itâ€™s a shapeshifter!"><meta property="og:url" content="https://textbooks.cs.ksu.edu/cis400/1-object-orientation/02-polymorphism/"><meta property="og:site_name" content="K-State CIS 400 Textbook"><meta property="og:title" content="Polymorphism :: K-State CIS 400 Textbook"><meta property="og:description" content="Itâ€™s a shapeshifter!"><meta property="og:locale" content="en-us"><meta property="og:type" content="website"><meta itemprop=name content="Polymorphism :: K-State CIS 400 Textbook"><meta itemprop=description content="Itâ€™s a shapeshifter!"><meta itemprop=datePublished content="2018-08-24T10:53:05-05:00"><meta itemprop=dateModified content="2023-09-03T10:38:57-05:00"><meta itemprop=wordCount content="3"><title>Polymorphism :: K-State CIS 400 Textbook</title>
<link href=https://textbooks.cs.ksu.edu/cis400/1-object-orientation/02-polymorphism/ rel=canonical type=text/html title="Polymorphism :: K-State CIS 400 Textbook"><link href=/cis400/1-object-orientation/02-polymorphism/index.xml rel=alternate type=application/rss+xml title="Polymorphism :: K-State CIS 400 Textbook"><link href=/cis400/1-object-orientation/02-polymorphism/tele.html rel=alternate type=text/html title="Polymorphism :: K-State CIS 400 Textbook"><link href=/cis400/1-object-orientation/02-polymorphism/embed.html rel=alternate type=text/html title="Polymorphism :: K-State CIS 400 Textbook"><link href=/cis400/css/fontawesome-all.min.css?1728334428 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/cis400/css/fontawesome-all.min.css?1728334428 rel=stylesheet></noscript><link href=/cis400/css/nucleus.css?1728334428 rel=stylesheet><link href=/cis400/css/auto-complete.css?1728334428 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/cis400/css/auto-complete.css?1728334428 rel=stylesheet></noscript><link href=/cis400/css/perfect-scrollbar.min.css?1728334428 rel=stylesheet><link href=/cis400/css/fonts.css?1728334428 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/cis400/css/fonts.css?1728334428 rel=stylesheet></noscript><link href=/cis400/css/theme.css?1728334428 rel=stylesheet><link href=/cis400/css/theme-auto.css?1728334428 rel=stylesheet id=R-variant-style><link href=/cis400/css/chroma-auto.css?1728334428 rel=stylesheet id=R-variant-chroma-style><link href=/cis400/css/variant.css?1728334428 rel=stylesheet><link href=/cis400/css/print.css?1728334428 rel=stylesheet media=print><link href=/cis400/css/format-print.css?1728334428 rel=stylesheet><script src=/cis400/js/variant.js?1728334428></script><script>window.relearn=window.relearn||{},window.relearn.relBasePath="../..",window.relearn.relBaseUri="../../..",window.relearn.absBaseUri="https://textbooks.cs.ksu.edu/cis400",window.index_js_url="/cis400/index.search.js",window.variants&&variants.init(["auto","light-theme","dark-theme"]),window.T_Copy_to_clipboard=`Copy to clipboard`,window.T_Copied_to_clipboard=`Copied to clipboard!`,window.T_Copy_link_to_clipboard=`Copy link to clipboard`,window.T_Link_copied_to_clipboard=`Copied link to clipboard!`,window.T_Reset_view=`Reset view`,window.T_View_reset=`View reset!`,window.T_No_results_found=`No results found for "{0}"`,window.T_N_results_found=`{1} results found for "{0}"`</script><link href=/cis400/css/custom.css?1728334428 rel=stylesheet></head><body class="mobile-support print disableInlineCopyToClipboard" data-url=/cis400/1-object-orientation/02-polymorphism/><div id=R-body class=default-animation><div id=R-body-overlay></div><nav id=R-topbar><div class=topbar-wrapper><div class=topbar-sidebar-divider></div><div class="topbar-area topbar-area-start" data-area=start><div class="topbar-button topbar-button-sidebar" data-content-empty=disable data-width-s=show data-width-m=hide data-width-l=hide><button class=topbar-control onclick=toggleNav() type=button title="Menu (CTRL+ALT+n)"><i class="fa-fw fas fa-bars"></i></button></div></div><ol class="topbar-breadcrumbs breadcrumbs highlightable" itemscope itemtype=http://schema.org/BreadcrumbList><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><a itemprop=item href=/cis400/1-object-orientation/><span itemprop=name>Object-Orientation</span></a><meta itemprop=position content="1">&nbsp;>&nbsp;</li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><span itemprop=name>Polymorphism</span><meta itemprop=position content="2"></li></ol><div class="topbar-area topbar-area-end" data-area=end><div class="topbar-button topbar-button-prev" data-content-empty=disable data-width-s=show data-width-m=show data-width-l=show><a class=topbar-control href=/cis400/1-object-orientation/01-objects/12-summary/ title="Summary (ðŸ¡)"><i class="fa-fw fas fa-chevron-left"></i></a></div><div class="topbar-button topbar-button-next" data-content-empty=disable data-width-s=show data-width-m=show data-width-l=show><a class=topbar-control href=/cis400/1-object-orientation/02-polymorphism/01-introduction/ title="Introduction (ðŸ¡’)"><i class="fa-fw fas fa-chevron-right"></i></a></div></div></div></nav><div id=R-main-overlay></div><main id=R-body-inner class="highlightable chapter narrow" tabindex=-1><div class=flex-block-wrapper><article class=chapter><header class=headline></header><div class=article-subheading>Chapter 2</div><h1 id=polymorphism>Polymorphism</h1><p>It&rsquo;s a shapeshifter!</p><footer class=footline></footer></article><section><h1 class=a11y-only>Subsections of Polymorphism</h1><article class=default><header class=headline></header><h1 id=introduction>Introduction</h1><p>The term <em>polymorphism</em> means <em>many forms.</em> In computer science, it refers to the ability of a single symbol (i.e. a function or class name) to represent multiple <em>types</em>. Some form of polymorphism can be found in nearly all programming languages.</p><p>While encapsulation of state and behavior into objects is the most central theoretical idea of object-oriented languages, polymorphism - specifically in the form of <em>inheritance</em> is a close second. In this chapter weâ€™ll look at how polymorphism is commonly implemented in object-oriented languages.</p><h2 id=key-terms>Key Terms</h2><p>Some key terms to learn in this chapter are:</p><ul><li>Polymorphism</li><li>Type</li><li>Type Checking</li><li>Casting</li><li>Implicit Casting</li><li>Explicit Casting</li><li>Interface</li><li>Inheritance</li><li>Superclass</li><li>Subclass</li><li>Abstract Classes</li></ul><p>C# Keywords:</p><ul><li><code>Interface</code></li><li><code>protected</code></li><li><code>abstract</code></li><li><code>virtual</code></li><li><code>override</code></li><li><code>sealed</code></li><li><code>as</code></li><li><code>is</code></li><li><code>dynamic</code></li></ul><footer class=footline></footer></article><article class=default><header class=headline></header><h1 id=types>Types</h1><p>Before we can discuss polymorphism in detail, we must first understand the concept of <em>types</em>. In computer science, a <em>type</em> is a way of categorizing a variable by its storage strategy, i.e., how it is represented in the computer&rsquo;s memory.</p><p>You&rsquo;ve already used types extensively in your programming up to this point. Consider the declaration:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=kt>int</span> <span class=n>number</span> <span class=p>=</span> <span class=m>5</span><span class=p>;</span></span></span></code></pre></div><p>The variable <strong>number</strong> is declared to have the type <strong>int</strong>. This lets the .NET interpreter know that the value of number will be stored using a specific scheme. This scheme will use 32 bits and contain the number in <a href=https://en.wikipedia.org/wiki/Two%27s_complement target=_blank>Two&rsquo;s complement binary form</a>. This form, and the number of bytes, allows us to represent numbers in the range -2,147,483,648 to 2,147,483,647. If we need to store larger values, we might instead use a <em>long</em> which uses 64 bits of storage. Or, if we only need positive numbers, we might instead use a <em>uint</em>, which uses 32 bits and stores the number in regular <a href=https://en.wikipedia.org/wiki/Binary_number rel=external target=_blank>base 2 (binary) form</a>.</p><p>This is why languages like C# provide multiple <a href=https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/builtin-types/integral-numeric-types rel=external target=_blank>integral</a> and <a href=https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/builtin-types/floating-point-numeric-types rel=external target=_blank>float</a> types. Each provides a different representation, representing a tradeoff between memory required to store the variable and the range or precision that variable can represent.</p><p>In addition to integral and float types, most programming languages include types for booleans, characters, arrays, and often strings. C# is no exception - you can read about its built-in value types <a href=https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/keywords/value-types rel=external target=_blank>in the documentation</a>.</p><h2 id=user-defined-types>User-Defined Types</h2><p>In addition to built-in types, most programming languages support <em>user-defined types</em>, that is, new types defined by the programmer. For example, if we were to define a C# enum:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=kd>public</span> <span class=kd>enum</span> <span class=n>Grade</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=n>A</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=n>B</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=n>C</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=n>D</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=n>F</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div><p>Defines the type <em>Grade</em>. We can then create variables with that type:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=n>Grade</span> <span class=n>courseGrade</span> <span class=p>=</span> <span class=n>Grade</span><span class=p>.</span><span class=n>A</span><span class=p>;</span></span></span></code></pre></div><p>Similarly, <em>structs</em> provide a way of creating user-defined compound data types.</p><h2 id=classes-are-types>Classes are Types</h2><p>In an object-oriented programming language, a Class also <em>defines a new type</em>. As we discussed in the previous chapter, the Class defines the structure for the <em>state</em> (what is represented) and <em>memory</em> (how it is represented) for objects implementing that type. Consider the C# class Student:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=kd>public</span> <span class=k>class</span> <span class=nc>Student</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=c1>// backing variables</span>
</span></span><span class=line><span class=cl>  <span class=kd>private</span> <span class=kt>float</span> <span class=n>creditPoints</span> <span class=p>=</span> <span class=m>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=kd>private</span> <span class=kt>uint</span> <span class=n>creditHours</span> <span class=p>=</span> <span class=m>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=cs>/// &lt;summary&gt;</span>
</span></span><span class=line><span class=cl>  <span class=cs>/// Gets and sets first name.</span>
</span></span><span class=line><span class=cl>  <span class=cs>/// &lt;/summary&gt;</span>
</span></span><span class=line><span class=cl>  <span class=kd>public</span> <span class=kt>string</span> <span class=n>First</span> <span class=p>{</span> <span class=k>get</span><span class=p>;</span> <span class=k>set</span><span class=p>;</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=cs>/// &lt;summary&gt;</span>
</span></span><span class=line><span class=cl>  <span class=cs>/// Gets and sets last name.</span>
</span></span><span class=line><span class=cl>  <span class=cs>/// &lt;/summary&gt;</span>
</span></span><span class=line><span class=cl>  <span class=kd>public</span> <span class=kt>string</span> <span class=n>Last</span> <span class=p>{</span> <span class=k>get</span><span class=p>;</span> <span class=k>set</span><span class=p>;</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=cs>/// &lt;summary&gt;</span>
</span></span><span class=line><span class=cl>  <span class=cs>/// Gets the student&#39;s GPA</span>
</span></span><span class=line><span class=cl>  <span class=cs>/// &lt;/summary&gt;</span>
</span></span><span class=line><span class=cl>  <span class=kd>public</span> <span class=kt>float</span> <span class=n>GPA</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>get</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=k>return</span> <span class=n>creditPoints</span> <span class=p>/</span> <span class=n>creditHours</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=cs>/// &lt;summary&gt;</span>
</span></span><span class=line><span class=cl>  <span class=cs>/// Adds a final grade for a course to the</span>
</span></span><span class=line><span class=cl>  <span class=c1>// student&#39;s GPA.</span>
</span></span><span class=line><span class=cl>  <span class=cs>/// &lt;/summary&gt;</span>
</span></span><span class=line><span class=cl>  <span class=cs>/// &lt;param name=&#34;grade&#34;&gt;The student&#39;s final letter grade in the course&lt;/param&gt;</span>
</span></span><span class=line><span class=cl>  <span class=cs>/// &lt;param name=&#34;hours&#34;&gt;The course&#39;s credit hours&lt;/param&gt;</span>
</span></span><span class=line><span class=cl>  <span class=kd>public</span> <span class=k>void</span> <span class=n>AddCourseGrade</span><span class=p>(</span><span class=n>Grade</span> <span class=n>grade</span><span class=p>,</span> <span class=kt>uint</span> <span class=n>hours</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>this</span><span class=p>.</span><span class=n>creditHours</span> <span class=p>+=</span> <span class=n>hours</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>switch</span><span class=p>(</span><span class=n>grade</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=k>case</span> <span class=n>Grade</span><span class=p>.</span><span class=n>A</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=p>.</span><span class=n>creditPoints</span> <span class=p>+=</span> <span class=m>4.0</span> <span class=p>*</span> <span class=n>hours</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=k>break</span><span class=p>;</span>
</span></span><span class=line><span class=cl>      <span class=k>case</span> <span class=n>Grade</span><span class=p>.</span><span class=n>B</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=p>.</span><span class=n>creditPoints</span> <span class=p>+=</span> <span class=m>3.0</span> <span class=p>*</span> <span class=n>hours</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=k>break</span><span class=p>;</span>
</span></span><span class=line><span class=cl>      <span class=k>case</span> <span class=n>Grade</span><span class=p>.</span><span class=n>C</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=p>.</span><span class=n>creditPoints</span> <span class=p>+=</span> <span class=m>2.0</span> <span class=p>*</span> <span class=n>hours</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=k>break</span><span class=p>;</span>
</span></span><span class=line><span class=cl>      <span class=k>case</span> <span class=n>Grade</span><span class=p>.</span><span class=n>D</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=p>.</span><span class=n>creditPoints</span> <span class=p>+=</span> <span class=m>1.0</span> <span class=p>*</span> <span class=n>hours</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=k>break</span><span class=p>;</span>
</span></span><span class=line><span class=cl>      <span class=k>case</span> <span class=n>Grade</span><span class=p>.</span><span class=n>F</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=p>.</span><span class=n>creditPoints</span> <span class=p>+=</span> <span class=m>0.0</span> <span class=p>*</span> <span class=n>hours</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=k>break</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div><p>If we want to create a new student, we would create an instance of the class <strong>Student</strong> which is an object of <em>type</em> <strong>Student</strong>:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=n>Student</span> <span class=n>willie</span> <span class=p>=</span> <span class=k>new</span> <span class=n>Student</span><span class=p>(</span><span class=s>&#34;Willie&#34;</span><span class=p>,</span> <span class=s>&#34;Wildcat&#34;</span><span class=p>);</span></span></span></code></pre></div><p>Hence, the <em>type</em> of an object is <em>the class it is an instance of</em>. This is a staple across all object-oriented languages.</p><h2 id=static-vs-dynamic-typed-languages>Static vs. Dynamic Typed Languages</h2><p>A final note on types. You may hear languages being referred to as <em>statically</em> or <em>dynamically</em> typed. A <em>statically</em> typed language is one where the type is set by the code itself, either <em>explicitly</em>:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=kt>int</span> <span class=n>foo</span> <span class=p>=</span> <span class=m>5</span><span class=p>;</span></span></span></code></pre></div><p>or <em>implicitly</em> (where the compiler determines the type based on the assigned value):</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=kt>var</span> <span class=n>bar</span> <span class=p>=</span> <span class=m>6</span><span class=p>;</span></span></span></code></pre></div><p>In a statically typed language, a variable <em>cannot</em> be assigned a value of a different type, i.e.:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=n>foo</span> <span class=p>=</span> <span class=m>8.3</span><span class=p>;</span></span></span></code></pre></div><p>Will fail with an error, as a float is a different type than an int. Similarly, because <em>bar</em> has an implied type of int, this code will fail:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=n>bar</span> <span class=p>=</span> <span class=m>4.3</span><span class=p>;</span></span></span></code></pre></div><p>However, we can <em>cast</em> the value to a new type (changing how it is represented), i.e.:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=n>foo</span> <span class=p>=</span> <span class=p>(</span><span class=kt>int</span><span class=p>)</span><span class=m>8.9</span><span class=p>;</span></span></span></code></pre></div><p>For this to work, the language must know how to perform the cast. The cast may also lose some information - in the above example, the resulting value of <strong>foo</strong> is <em>8</em> (the fractional part is discarded).</p><p>In contrast, in a <em>dynamically</em> typed language the type of the variable changes when a value of a different type is assigned to it. For example, in JavaScript, this expression is legal:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kd>var</span> <span class=nx>a</span> <span class=o>=</span> <span class=mi>5</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=nx>a</span> <span class=o>=</span> <span class=s2>&#34;foo&#34;</span><span class=p>;</span></span></span></code></pre></div><p>and the type of <strong>a</strong> changes from int (at the first assignment) to string (at the second assignment).</p><p>C#, Java, C, C++, and Kotlin are all <em>statically typed languages</em>, while Python, JavaScript, and Ruby are <em>dynamically typed languages</em>.</p><footer class=footline></footer></article><article class=default><header class=headline></header><h1 id=interfaces>Interfaces</h1><p>If we think back to the concept of <em>message passing</em> in object-oriented languages, it can be useful to think of the collection of public methods available in a class as an <em>interface</em>, i.e., a list of messages you can dispatch to an object created from that class. When you were first learning a language (and probably even now), you find yourself referring to these kinds of lists, either in the language documentation, or via Intellisense in Visual Studio.</p><p><a href=#R-image-96631bdbbc1e6e6fc93426f320d7e054 class=lightbox-link><img alt="The Java API" class="border lazy lightbox noshadow figure-image" loading=lazy src=/cis400/images/2.1.3.1.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-96631bdbbc1e6e6fc93426f320d7e054><img alt="The Java API" class="border lazy lightbox noshadow lightbox-image" loading=lazy src=/cis400/images/2.1.3.1.png></a></p><p><a href=#R-image-b48f609083fda69f188e636b23b4f218 class=lightbox-link><img alt="Visual Studio Intellisense" class="border lazy lightbox noshadow figure-image" loading=lazy src=/cis400/images/2.1.3.2.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-b48f609083fda69f188e636b23b4f218><img alt="Visual Studio Intellisense" class="border lazy lightbox noshadow lightbox-image" loading=lazy src=/cis400/images/2.1.3.2.png></a></p><p>Essentially, programmers use these &lsquo;interfaces&rsquo; to determine what methods can be invoked on an object. In other words, which <em>messages</em> can be <em>passed</em> to the object. This &lsquo;interface&rsquo; (note the lowercase i) is determined by the class definition, specifically what methods it contains.</p><p>In dynamically typed programming languages, like Python, JavaScript, and Ruby, if two classes accept the same message, you can treat them interchangeably, i.e. the <code>Kangaroo</code> class and <code>Car</code> class both define a <code>jump()</code> method, you could populate a list with both, and call the <code>jump()</code> method on each:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kd>var</span> <span class=nx>jumpables</span> <span class=o>=</span> <span class=p>[</span><span class=k>new</span> <span class=nx>Kangaroo</span><span class=p>(),</span> <span class=k>new</span> <span class=nx>Car</span><span class=p>(),</span> <span class=k>new</span> <span class=nx>Kangaroo</span><span class=p>()];</span>
</span></span><span class=line><span class=cl><span class=k>for</span><span class=p>(</span><span class=kr>int</span> <span class=nx>i</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=nx>i</span> <span class=o>&lt;</span> <span class=nx>jumpables</span><span class=p>.</span><span class=nx>length</span><span class=p>;</span> <span class=nx>i</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>jumpables</span><span class=p>[</span><span class=nx>i</span><span class=p>].</span><span class=nx>jump</span><span class=p>();</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div><p>This is sometimes called <a href=https://en.wikipedia.org/wiki/Duck_typing rel=external target=_blank>duck typing</a>, from the sense that &ldquo;if it walks like a duck, and quacks like a duck, it might as well be a duck.&rdquo;</p><p>However, for statically typed languages we must explicitly indicate that two types both possess the same message definition, by making the interface <em>explicit</em>. We do this by declaring an <code>interface</code>. I.e., the interface for classes that possess a parameter-less jump method might be:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=cs>/// &lt;summary&gt;</span>
</span></span><span class=line><span class=cl><span class=cs>/// An interface indicating an object&#39;s ability to jump</span>
</span></span><span class=line><span class=cl><span class=cs>/// &lt;/summary&gt;</span>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=k>interface</span> <span class=nc>IJumpable</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=cs>/// &lt;summary&gt;</span>
</span></span><span class=line><span class=cl>    <span class=cs>/// A method that causes the object to jump</span>
</span></span><span class=line><span class=cl>    <span class=cs>/// &lt;/summary&gt;</span>
</span></span><span class=line><span class=cl>    <span class=k>void</span> <span class=n>Jump</span><span class=p>();</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div><p>In C#, it is common practice to preface interface names with the character <code>I</code>. The <code>interface</code> declaration defines an &lsquo;interface&rsquo; - the shape of the messages that can be passed to an object implementing the interface - in the form of a method signature. Note that this signature <em>does not include a body</em>, but instead ends in a semicolon (<code>;</code>). An interface simply indicates the message to be sent, <em>not the behavior it will cause!</em> We can specify as many methods in an <code>interface</code> declaration as we want.</p><p>Also note that the method signatures in an <code>interface</code> declaration <em>do not have access modifiers</em>. This is because the whole purpose of defining an interface is to signify methods <em>that can be used by other code</em>. In other words, <code>public</code> access is implied by including the method signature in the <code>interface</code> declaration.</p><p>This <code>interface</code> can then be implemented by other classes by listing it after the class name, after a colon <code>:</code>. Any <code>Class</code> declaration implementing the interface <em>must define public methods whose signatures match those were specified by the interface</em>:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=cs>/// &lt;summary&gt;A class representing a kangaroo&lt;/summary&gt;</span>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=k>class</span> <span class=nc>Kangaroo</span> <span class=p>:</span> <span class=n>IJumpable</span> 
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=cs>/// &lt;summary&gt;Causes the Kangaroo to jump into the air&lt;/summary&gt;</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=k>void</span> <span class=n>Jump</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=c1>// TODO: Implement jumping...</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=cs>/// &lt;summary&gt;A class representing an automobile&lt;/summary&gt;</span>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=k>class</span> <span class=nc>Car</span> <span class=p>:</span> <span class=n>IJumpable</span> 
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=cs>/// &lt;summary&gt;Helps a stalled car to start by providing electricity from another car&#39;s battery&lt;/summary&gt;</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=k>void</span> <span class=n>Jump</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=c1>// TODO: Implement jumping a car...</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=cs>/// &lt;summary&gt;Starts the car&lt;/summary&gt;</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=k>void</span> <span class=n>Start</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=c1>// TODO: Implement starting a car...</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div><p>We can then treat these two disparate classes as though they shared the same type, defined by the <code>IJumpable</code> interface:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=n>List</span><span class=p>&lt;</span><span class=n>IJumpable</span><span class=p>&gt;</span> <span class=n>jumpables</span> <span class=p>=</span> <span class=k>new</span> <span class=n>List</span><span class=p>&lt;</span><span class=n>IJumpable</span><span class=p>&gt;()</span> <span class=p>{</span><span class=k>new</span> <span class=n>Kangaroo</span><span class=p>(),</span> <span class=k>new</span> <span class=n>Car</span><span class=p>(),</span> <span class=k>new</span> <span class=n>Kangaroo</span><span class=p>()};</span>
</span></span><span class=line><span class=cl><span class=k>for</span><span class=p>(</span><span class=kt>int</span> <span class=n>i</span> <span class=p>=</span> <span class=m>0</span><span class=p>;</span> <span class=n>i</span> <span class=p>&lt;</span> <span class=n>jumpables</span><span class=p>.</span><span class=n>Count</span><span class=p>;</span> <span class=n>i</span><span class=p>++)</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>jumpables</span><span class=p>[</span><span class=n>i</span><span class=p>].</span><span class=n>Jump</span><span class=p>();</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div><p>Note that while we are treating the Kangaroo and Car instances <em>as</em> <code>IJumpable</code> instances, we can <em>only</em> invoke the methods defined in the <code>IJumpable</code> interface, even if these objects have other methods. Essentially, the interface represents a new <em>type</em> that can be shared amongst disparate objects in a statically-typed language. The interface definition serves to assure the static type checker that the objects implementing it can be treated as this new type - i.e. the <code>Interface</code> provides a mechanism for implementing polymorphism.</p><p>We often describe the relationship between the interface and the class that implements it as a <em>is-a</em> relationship, i.e. a Kangaroo <em>is an</em> IJumpable (i.e. a Kangaroo is a thing that can jump). We further distinguish this from a related polymorphic mechanism, inheritance, by the strength of the relationship. We consider the relationship between interfaces and classes implementing them to be <strong>weak is-a</strong> connections. For example, other than the shared interface, a Kangaroo and a Car don&rsquo;t have much to do with one another.</p><p>A C# class can implement as many interfaces as we want, they just need to be separated by commas, i.e.:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=kd>public</span> <span class=k>class</span> <span class=nc>Frog</span> <span class=p>:</span> <span class=n>IJumpable</span><span class=p>,</span> <span class=n>ICroakable</span><span class=p>,</span> <span class=n>ICatchFlies</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// TODO: Implement frog class...</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div><footer class=footline></footer></article><article class=default><header class=headline></header><h1 id=object-inheritance>Object Inheritance</h1><p>In an object-oriented language, inheritance is a mechanism for deriving part of a class definition from another existing class definition. This allows the programmer to &ldquo;share&rdquo; code between classes, reducing the amount of code that must be written.</p><p>Consider a <strong>Student</strong> class:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=cs>/// &lt;summary&gt;</span>
</span></span><span class=line><span class=cl><span class=cs>/// A class representing a student</span>
</span></span><span class=line><span class=cl><span class=cs>/// &lt;/summary&gt;</span>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=k>class</span> <span class=nc>Student</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=c1>// private backing variables</span>
</span></span><span class=line><span class=cl>  <span class=kd>private</span> <span class=kt>double</span> <span class=n>hours</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=kd>private</span> <span class=kt>double</span> <span class=n>points</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=cs>/// &lt;summary&gt;</span>
</span></span><span class=line><span class=cl>  <span class=cs>/// Gets the students&#39; GPA</span>
</span></span><span class=line><span class=cl>  <span class=cs>/// &lt;/summary&gt;</span>
</span></span><span class=line><span class=cl>  <span class=kd>public</span> <span class=kt>double</span> <span class=n>GPA</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>get</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=k>return</span> <span class=n>points</span> <span class=p>/</span> <span class=n>hours</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=cs>/// &lt;summary&gt;</span>
</span></span><span class=line><span class=cl>  <span class=cs>/// Gets or sets the first name</span>
</span></span><span class=line><span class=cl>  <span class=cs>/// &lt;/summary&gt;</span>
</span></span><span class=line><span class=cl>  <span class=kd>public</span> <span class=kt>string</span> <span class=n>First</span> <span class=p>{</span> <span class=k>get</span><span class=p>;</span> <span class=k>set</span><span class=p>;</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=cs>/// &lt;summary&gt;</span>
</span></span><span class=line><span class=cl>  <span class=cs>/// Gets or sets the last name</span>
</span></span><span class=line><span class=cl>  <span class=cs>/// &lt;/summary&gt;</span>
</span></span><span class=line><span class=cl>  <span class=kd>public</span> <span class=kt>string</span> <span class=n>Last</span> <span class=p>{</span> <span class=k>get</span><span class=p>;</span> <span class=k>set</span><span class=p>;</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=cs>/// &lt;summary&gt;</span>
</span></span><span class=line><span class=cl>  <span class=cs>/// Constructs a new instance of Student</span>
</span></span><span class=line><span class=cl>  <span class=cs>/// &lt;/summary&gt;</span>
</span></span><span class=line><span class=cl>  <span class=cs>/// &lt;param name=&#34;first&#34;&gt;The student&#39;s first name &lt;/param&gt;</span>
</span></span><span class=line><span class=cl>  <span class=cs>/// &lt;param name=&#34;last&#34;&gt;The student&#39;s last name&lt;/param&gt;</span>
</span></span><span class=line><span class=cl>  <span class=kd>public</span> <span class=n>Student</span><span class=p>(</span><span class=kt>string</span> <span class=n>first</span><span class=p>,</span> <span class=kt>string</span> <span class=n>last</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>this</span><span class=p>.</span><span class=n>First</span> <span class=p>=</span> <span class=n>first</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>this</span><span class=p>.</span><span class=n>Last</span> <span class=p>=</span> <span class=n>last</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=cs>/// &lt;summary&gt;</span>
</span></span><span class=line><span class=cl>  <span class=cs>/// Adds a new course grade to the student&#39;s record.</span>
</span></span><span class=line><span class=cl>  <span class=cs>/// &lt;/summary&gt;</span>
</span></span><span class=line><span class=cl>  <span class=cs>/// &lt;param name=&#34;creditHours&#34;&gt;The number of credit hours in the course &lt;/param&gt;</span>
</span></span><span class=line><span class=cl>  <span class=cs>/// &lt;param name=&#34;finalGrade&#34;&gt;The final grade earned in the course&lt;/param&gt;</span>
</span></span><span class=line><span class=cl>  <span class=cs>///</span>
</span></span><span class=line><span class=cl>  <span class=kd>public</span> <span class=k>void</span> <span class=n>AddCourseGrade</span><span class=p>(</span><span class=kt>uint</span> <span class=n>creditHours</span><span class=p>,</span> <span class=n>Grade</span> <span class=n>finalGrade</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>this</span><span class=p>.</span><span class=n>hours</span> <span class=p>+=</span> <span class=n>creditHours</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>switch</span><span class=p>(</span><span class=n>finalGrade</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=k>case</span> <span class=n>Grade</span><span class=p>.</span><span class=n>A</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=p>.</span><span class=n>points</span> <span class=p>+=</span> <span class=m>4</span> <span class=p>*</span> <span class=n>creditHours</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=k>break</span><span class=p>;</span>
</span></span><span class=line><span class=cl>      <span class=k>case</span> <span class=n>Grade</span><span class=p>.</span><span class=n>B</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=p>.</span><span class=n>points</span> <span class=p>+=</span> <span class=m>3</span> <span class=p>*</span> <span class=n>creditHours</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=k>break</span><span class=p>;</span>
</span></span><span class=line><span class=cl>      <span class=k>case</span> <span class=n>Grade</span><span class=p>.</span><span class=n>C</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=p>.</span><span class=n>points</span> <span class=p>+=</span> <span class=m>2</span> <span class=p>*</span> <span class=n>creditHours</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=k>break</span><span class=p>;</span>
</span></span><span class=line><span class=cl>      <span class=k>case</span> <span class=n>Grade</span><span class=p>.</span><span class=n>D</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=p>.</span><span class=n>points</span> <span class=p>+=</span> <span class=m>1</span> <span class=p>*</span> <span class=n>creditHours</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=k>break</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div><p>This would work well for representing a student. But what if we are representing multiple <em>kinds</em> of students, like undergraduate and graduate students? We&rsquo;d need separate classes for each, but both would still have names and calculate their GPA the same way. So it would be handy if we could say &ldquo;an undergraduate is a student, and has all the properties and methods a student has&rdquo; and &ldquo;a graduate student is a student, and has all the properties and methods a student has.&rdquo; This is exactly what inheritance does for us, and we often describe it as a <em>is a</em> relationship. We distinguish this from the interface mechanism we looked at earlier by saying it is a <strong>strong is a</strong> relationship, as an <code>Undergraduate</code> student is, for all purposes, <em>also</em> a <code>Student</code>.</p><p>Let&rsquo;s define an undergraduate student class:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=cs>/// &lt;summary&gt;</span>
</span></span><span class=line><span class=cl><span class=cs>/// A class representing an undergraduate student</span>
</span></span><span class=line><span class=cl><span class=cs>/// &lt;/summary&gt;</span>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=k>class</span> <span class=nc>UndergraduateStudent</span> <span class=p>:</span> <span class=n>Student</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=cs>/// &lt;summary&gt;</span>
</span></span><span class=line><span class=cl>  <span class=cs>/// Constructs a new instance of UndergraduateStudent</span>
</span></span><span class=line><span class=cl>  <span class=cs>/// &lt;/summary&gt;</span>
</span></span><span class=line><span class=cl>  <span class=cs>/// &lt;param name=&#34;first&#34;&gt;The student&#39;s first name &lt;/param&gt;</span>
</span></span><span class=line><span class=cl>  <span class=cs>/// &lt;param name=&#34;last&#34;&gt;The student&#39;s last name&lt;/param&gt;</span>
</span></span><span class=line><span class=cl>  <span class=kd>public</span> <span class=n>UndergraduateStudent</span><span class=p>(</span><span class=kt>string</span> <span class=n>first</span><span class=p>,</span> <span class=kt>string</span> <span class=n>last</span><span class=p>)</span> <span class=p>:</span> <span class=k>base</span><span class=p>(</span><span class=n>first</span><span class=p>,</span> <span class=n>last</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div><p>In C#, the <code>:</code> indicates inheritance - so <code>public class UndergraduateStudent : Student</code> indicates that <code>UndergraduateStudent</code> inherits from (is a) <code>Student</code>. Thus, it has properties <code>First</code>, <code>Last</code>, and <code>GPA</code> that are inherited from <code>Student</code>. Similarly, it inherits the <code>AddCourseGrade()</code> method.</p><p>In fact, the only method we need to define in our <code>UndergraduateStudent</code> class is the constructor - and we only need to define this because the base class has a defined constructor taking two parameters, <code>first</code> and <code>last</code> names. This <code>Student</code> constructor must be invoked by the <code>UndergraduateStudent</code> constructor - that&rsquo;s what the <code>:base(first, last)</code> portion does - it invokes the <code>Student</code> constructor with the <code>first</code> and <code>last</code> parameters passed into the <code>UndergraduateStudent</code> constructor.</p><h2 id=inheritance-state-and-behavior>Inheritance, State, and Behavior</h2><p>Let&rsquo;s define a <code>GraduateStudent</code> class as well. This will look much like an <code>UndergraduateStudent</code>, but all graduates have a bachelor&rsquo;s degree:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=cs>/// &lt;summary&gt;</span>
</span></span><span class=line><span class=cl><span class=cs>/// A class representing a graduate student</span>
</span></span><span class=line><span class=cl><span class=cs>/// &lt;/summary&gt;</span>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=k>class</span> <span class=nc>GraduateStudent</span> <span class=p>:</span> <span class=n>Student</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=cs>/// &lt;summary&gt;</span>
</span></span><span class=line><span class=cl>  <span class=cs>/// Gets the student&#39;s bachelor degree</span>
</span></span><span class=line><span class=cl>  <span class=cs>/// &lt;/summary&gt;</span>
</span></span><span class=line><span class=cl>  <span class=kd>public</span> <span class=kt>string</span> <span class=n>BachelorDegree</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>get</span><span class=p>;</span> <span class=kd>private</span> <span class=k>set</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=cs>/// &lt;summary&gt;</span>
</span></span><span class=line><span class=cl>  <span class=cs>/// Constructs a new instance of GraduateStudent</span>
</span></span><span class=line><span class=cl>  <span class=cs>/// &lt;/summary&gt;</span>
</span></span><span class=line><span class=cl>  <span class=cs>/// &lt;param name=&#34;first&#34;&gt;The student&#39;s first name &lt;/param&gt;</span>
</span></span><span class=line><span class=cl>  <span class=cs>/// &lt;param name=&#34;last&#34;&gt;The student&#39;s last name&lt;/param&gt;</span>
</span></span><span class=line><span class=cl>  <span class=cs>/// &lt;param name=&#34;degree&#34;&gt;The student&#39;s bachelor degree&lt;/param&gt;</span>
</span></span><span class=line><span class=cl>  <span class=kd>public</span> <span class=n>GraduateStudent</span><span class=p>(</span><span class=kt>string</span> <span class=n>first</span><span class=p>,</span> <span class=kt>string</span> <span class=n>last</span><span class=p>,</span> <span class=kt>string</span> <span class=n>degree</span><span class=p>)</span> <span class=p>:</span> <span class=k>base</span><span class=p>(</span><span class=n>first</span><span class=p>,</span> <span class=n>last</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>BachelorDegree</span> <span class=p>=</span> <span class=n>degree</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div><p>Here we add a property for <code>BachelorDegree</code>. Since it&rsquo;s setter is marked as <code>private</code>, it can only be written to by the class, as is done in the constructor. To the outside world, it is treated as read-only.</p><p>Thus, the <code>GraduateStudent</code> has all the state and behavior encapsulated in <code>Student</code>, <em>plus</em> the additional state of the bachelor&rsquo;s degree title.</p><h2 id=the-protected-keyword>The <code>protected</code> Keyword</h2><p>What you might not expect is that any fields declared <code>private</code> in the base class are inaccessible in the derived class. Thus, the private fields <code>points</code> and <code>hours</code> cannot be used in a method defined in <code>GraduateStudent</code>. This is again part of the <em>encapsulation</em> and <em>data hiding</em> ideals - we&rsquo;ve encapsulated and hidden those variables within the base class, and any code outside that assembly, even in a derived class, is not allowed to mess with it.</p><p>However, we often will want to allow access to such variables in a derived class. C# uses the access modifier <code>protected</code> to allow for this access in derived classes, but not the wider world.</p><h2 id=inheritance-and-memory>Inheritance and Memory</h2><p>What happens when we construct an instance of <code>GraduateStudent</code>? First, we invoke the constructor of the <code>GraduateStudent</code> class:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=n>GraduateStudent</span> <span class=n>bobby</span> <span class=p>=</span> <span class=k>new</span> <span class=n>GraduateStudent</span><span class=p>(</span><span class=s>&#34;Bobby&#34;</span><span class=p>,</span> <span class=s>&#34;TwoSocks&#34;</span><span class=p>,</span> <span class=s>&#34;Economics&#34;</span><span class=p>);</span></span></span></code></pre></div><p>This constructor then invokes the constructor of the base class, <code>Student</code>, with the arguments <code>"Bobby"</code> and <code>"TwoSocks"</code>. Thus, we allocate space to hold the state of a student, and populate it with the values set by the constructor. Finally, execution returns to the derived class of <code>GraduateStudent</code>, which allocates the additional memory for the reference to the <code>BachelorDegree</code> property. Thus, the memory space of the <code>GraduateStudent</code> <em>contains</em> an instance of the <code>Student</code>, somewhat like nesting dolls.</p><p>Because of this, we can treat a <code>GraduateStudent</code> object as a <code>Student</code> object. For example, we can store it in a list of type <code>Student</code>, along with <code>UndergraduateStudent</code> objects:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=n>List</span><span class=p>&lt;</span><span class=n>Student</span><span class=p>&gt;</span> <span class=n>students</span> <span class=p>=</span> <span class=k>new</span> <span class=n>List</span><span class=p>&lt;</span><span class=n>Student</span><span class=p>&gt;();</span>
</span></span><span class=line><span class=cl><span class=n>students</span><span class=p>.</span><span class=n>Add</span><span class=p>(</span><span class=n>bobby</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=n>students</span><span class=p>.</span><span class=n>Add</span><span class=p>(</span><span class=k>new</span> <span class=n>UndergraduateStudent</span><span class=p>(</span><span class=s>&#34;Mary&#34;</span><span class=p>,</span> <span class=s>&#34;Contrary&#34;</span><span class=p>));</span></span></span></code></pre></div><p>Because of their relationship through inheritance, both <code>GraduateStudent</code> class instances and <code>UndergraduateStudent</code> class instances are considered to be of type <code>Student</code>, as well as their supertypes.</p><h2 id=nested-inheritance>Nested Inheritance</h2><p>We can go as deep as we like with inheritance - each base type can be a superclass of another base type, and has all the state and behavior of all the inherited base classes.</p><p>This said, having too many levels of inheritance can make it difficult to reason about an object. In practice, a good guideline is to limit nested inheritance to two or three levels of depth.</p><h2 id=abstract-classes>Abstract Classes</h2><p>If we have a base class that only exists to inherit from (like our <code>Student</code> class in the example), we can mark it as <em>abstract</em> with the <code>abstract</code> keyword. An abstract class <em>cannot be instantiated</em> (that is, we cannot create an instance of it using the <code>new</code> keyword). It can still define fields and methods, but you can&rsquo;t construct it. If we were to re-write our <code>Student</code> class as an abstract class:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=cs>/// &lt;summary&gt;</span>
</span></span><span class=line><span class=cl><span class=cs>/// A class representing a student</span>
</span></span><span class=line><span class=cl><span class=cs>/// &lt;/summary&gt;</span>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=kd>abstract</span> <span class=k>class</span> <span class=nc>Student</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=c1>// private backing variables</span>
</span></span><span class=line><span class=cl>  <span class=kd>private</span> <span class=kt>double</span> <span class=n>hours</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=kd>private</span> <span class=kt>double</span> <span class=n>points</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=cs>/// &lt;summary&gt;</span>
</span></span><span class=line><span class=cl>  <span class=cs>/// Gets the students&#39; GPA</span>
</span></span><span class=line><span class=cl>  <span class=cs>/// &lt;/summary&gt;</span>
</span></span><span class=line><span class=cl>  <span class=kd>public</span> <span class=kt>double</span> <span class=n>GPA</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>get</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=k>return</span> <span class=n>points</span> <span class=p>/</span> <span class=n>hours</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=cs>/// &lt;summary&gt;</span>
</span></span><span class=line><span class=cl>  <span class=cs>/// Gets or sets the first name</span>
</span></span><span class=line><span class=cl>  <span class=cs>/// &lt;/summary&gt;</span>
</span></span><span class=line><span class=cl>  <span class=kd>public</span> <span class=kt>string</span> <span class=n>First</span> <span class=p>{</span> <span class=k>get</span><span class=p>;</span> <span class=k>set</span><span class=p>;</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=cs>/// &lt;summary&gt;</span>
</span></span><span class=line><span class=cl>  <span class=cs>/// Gets or sets the last name</span>
</span></span><span class=line><span class=cl>  <span class=cs>/// &lt;/summary&gt;</span>
</span></span><span class=line><span class=cl>  <span class=kd>public</span> <span class=kt>string</span> <span class=n>Last</span> <span class=p>{</span> <span class=k>get</span><span class=p>;</span> <span class=k>set</span><span class=p>;</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=cs>/// &lt;summary&gt;</span>
</span></span><span class=line><span class=cl>  <span class=cs>/// Constructs a new instance of Student</span>
</span></span><span class=line><span class=cl>  <span class=cs>/// &lt;/summary&gt;</span>
</span></span><span class=line><span class=cl>  <span class=cs>/// &lt;param name=&#34;first&#34;&gt;The student&#39;s first name &lt;/param&gt;</span>
</span></span><span class=line><span class=cl>  <span class=cs>/// &lt;param name=&#34;last&#34;&gt;The student&#39;s last name&lt;/param&gt;</span>
</span></span><span class=line><span class=cl>  <span class=kd>public</span> <span class=n>Student</span><span class=p>(</span><span class=kt>string</span> <span class=n>first</span><span class=p>,</span> <span class=kt>string</span> <span class=n>last</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>this</span><span class=p>.</span><span class=n>First</span> <span class=p>=</span> <span class=n>first</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>this</span><span class=p>.</span><span class=n>Last</span> <span class=p>=</span> <span class=n>last</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=cs>/// &lt;summary&gt;</span>
</span></span><span class=line><span class=cl>  <span class=cs>/// Adds a new course grade to the student&#39;s record.</span>
</span></span><span class=line><span class=cl>  <span class=cs>/// &lt;/summary&gt;</span>
</span></span><span class=line><span class=cl>  <span class=cs>/// &lt;param name=&#34;creditHours&#34;&gt;The number of credit hours in the course &lt;/param&gt;</span>
</span></span><span class=line><span class=cl>  <span class=cs>/// &lt;param name=&#34;finalGrade&#34;&gt;The final grade earned in the course&lt;/param&gt;</span>
</span></span><span class=line><span class=cl>  <span class=cs>///</span>
</span></span><span class=line><span class=cl>  <span class=kd>public</span> <span class=k>void</span> <span class=n>AddCourseGrade</span><span class=p>(</span><span class=kt>uint</span> <span class=n>creditHours</span><span class=p>,</span> <span class=n>Grade</span> <span class=n>finalGrade</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>this</span><span class=p>.</span><span class=n>hours</span> <span class=p>+=</span> <span class=n>creditHours</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>switch</span><span class=p>(</span><span class=n>finalGrade</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=k>case</span> <span class=n>Grade</span><span class=p>.</span><span class=n>A</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=p>.</span><span class=n>points</span> <span class=p>+=</span> <span class=m>4</span> <span class=p>*</span> <span class=n>creditHours</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=k>break</span><span class=p>;</span>
</span></span><span class=line><span class=cl>      <span class=k>case</span> <span class=n>Grade</span><span class=p>.</span><span class=n>B</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=p>.</span><span class=n>points</span> <span class=p>+=</span> <span class=m>3</span> <span class=p>*</span> <span class=n>creditHours</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=k>break</span><span class=p>;</span>
</span></span><span class=line><span class=cl>      <span class=k>case</span> <span class=n>Grade</span><span class=p>.</span><span class=n>C</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=p>.</span><span class=n>points</span> <span class=p>+=</span> <span class=m>2</span> <span class=p>*</span> <span class=n>creditHours</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=k>break</span><span class=p>;</span>
</span></span><span class=line><span class=cl>      <span class=k>case</span> <span class=n>Grade</span><span class=p>.</span><span class=n>D</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=p>.</span><span class=n>points</span> <span class=p>+=</span> <span class=m>1</span> <span class=p>*</span> <span class=n>creditHours</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=k>break</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div><p>Now with <code>Student</code> as an abstract class, attempting to create a <code>Student</code> instance i.e. <code>Student mark = new Student("Mark", "Guy")</code> would fail with an exception. However, we can still create instances of the derived classes <code>GraduateStudent</code> and <code>UndergraduateStudent</code>, and treat them as <code>Student</code> instances. It is best practice to make a class abstract if it serves only as a base class for derived classes and will never be created directly.</p><h2 id=sealed-classes>Sealed Classes</h2><p>Conversely, C# also offers the <code>sealed</code> keyword, which can be used to indicate that a class should <em>not</em> be inheritable. For example:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=cs>/// &lt;summary&gt;</span>
</span></span><span class=line><span class=cl><span class=cs>/// A class that cannot be inherited from</span>
</span></span><span class=line><span class=cl><span class=cs>/// &lt;/summary&gt;</span>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=kd>sealed</span> <span class=k>class</span> <span class=nc>DoNotDerive</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div><p>Derived classes can <em>also</em> be sealed. I.e., we could seal our <code>UndergraduateStudent</code> class to prevent further derivation:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=cs>/// &lt;summary&gt;</span>
</span></span><span class=line><span class=cl><span class=cs>/// A sealed version  of the class representing an undergraduate student</span>
</span></span><span class=line><span class=cl><span class=cs>/// &lt;/summary&gt;</span>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=kd>sealed</span> <span class=k>class</span> <span class=nc>UndergraduateStudent</span> <span class=p>:</span> <span class=n>Student</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=cs>/// &lt;summary&gt;</span>
</span></span><span class=line><span class=cl>  <span class=cs>/// Constructs a new instance of UndergraduateStudent</span>
</span></span><span class=line><span class=cl>  <span class=cs>/// &lt;/summary&gt;</span>
</span></span><span class=line><span class=cl>  <span class=cs>/// &lt;param name=&#34;first&#34;&gt;The student&#39;s first name &lt;/param&gt;</span>
</span></span><span class=line><span class=cl>  <span class=cs>/// &lt;param name=&#34;last&#34;&gt;The student&#39;s last name&lt;/param&gt;</span>
</span></span><span class=line><span class=cl>  <span class=kd>public</span> <span class=n>UndergraduateStudent</span><span class=p>(</span><span class=kt>string</span> <span class=n>first</span><span class=p>,</span> <span class=kt>string</span> <span class=n>last</span><span class=p>)</span> <span class=p>:</span> <span class=k>base</span><span class=p>(</span><span class=n>first</span><span class=p>,</span> <span class=n>last</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div><p>Many of the library classes provided with the C# installation are sealed. This helps prevent developers from making changes to well-known classes that would make their code harder to maintain. It is good practice to seal classes that you expect will never be inherited from.</p><h2 id=interfaces-and-inheritance>Interfaces and Inheritance</h2><p>A class can use both inheritance and interfaces. In C#, a class can only inherit <em>one</em> base class, and it should always be the first after the colon (<code>:</code>). Following that we can have as many interfaces as we want, all separated from each other and the base class by commas (<code>,</code>):</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=kd>public</span> <span class=k>class</span> <span class=nc>UndergraduateStudent</span> <span class=p>:</span> <span class=n>Student</span><span class=p>,</span> <span class=n>ITeachable</span><span class=p>,</span> <span class=n>IEmailable</span> 
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=c1>// TODO: Implement student class </span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div><footer class=footline></footer></article><article class=default><header class=headline></header><h1 id=casting>Casting</h1><p>You have probably used casting to convert numeric values from one type to another, i.e.:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=kt>int</span> <span class=n>a</span> <span class=p>=</span> <span class=m>5</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kt>double</span> <span class=n>b</span> <span class=p>=</span> <span class=n>a</span><span class=p>;</span></span></span></code></pre></div><p>And</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=kt>int</span> <span class=n>c</span> <span class=p>=</span> <span class=p>(</span><span class=kt>int</span><span class=p>)</span><span class=n>b</span><span class=p>;</span></span></span></code></pre></div><p>What you are actually doing when you cast is <em>transforming a value from one type to another</em>. In the first case, you are taking the value of <code>a</code> (5), and converting it to the equivalent double (5.0). If you consider the internal representation of an integer (a 2&rsquo;s complement binary number) to a double (an <a href=https://en.wikipedia.org/wiki/IEEE_754 rel=external target=_blank>IEEE 754 standard</a> representation), we are actually applying a conversion algorithm to the binary representations.</p><p>We call the first operation an <em>implicit cast</em>, as we don&rsquo;t expressly tell the compiler to perform the cast. In contrast, the second assignment is an <em>explicit cast</em>, as we signify the cast by wrapping the <em>type</em> we are casting to in parenthesis before the variable we are casting. We <em>have</em> to perform an explicit cast in the second case, as the conversion has the possibility of losing some precision (i.e. if we cast 7.2 to an integer, it would be truncated to 7). In any case where the conversion may lose precision or possibly throw an error, an <em>explicit</em> cast is required.</p><h2 id=custom-casting-conversions>Custom Casting Conversions</h2><p>We can actually <a href=https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/operators/user-defined-conversion-operators rel=external target=_blank>extend the C# language to add additional conversions</a> to provide additional casting operations. Consider if we had <code>Rectangle</code> and <code>Square</code> structs:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=cs>/// &lt;summary&gt;A struct representing a rectangle&lt;/summary&gt;</span>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=k>struct</span> <span class=nc>Rectangle</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=cs>/// &lt;summary&gt;The length of the short side of the rectangle&lt;/summary&gt;</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kt>int</span> <span class=n>ShortSideLength</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=cs>/// &lt;summary&gt;The length of the long side of the rectangle&lt;/summary&gt;</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kt>int</span> <span class=n>LongSideLength</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=cs>/// &lt;summary&gt;Constructs a new rectangle&lt;/summary&gt;</span>
</span></span><span class=line><span class=cl>    <span class=cs>/// &lt;param name=&#34;shortSideLength&#34;&gt;The length of the shorter sides of the rectangle&lt;/param&gt;</span>
</span></span><span class=line><span class=cl>    <span class=cs>/// &lt;param name=&#34;longSideLength&#34;&gt;The length of the longer sides of the rectangle&lt;/param&gt;</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=n>Rectangle</span><span class=p>(</span><span class=kt>int</span> <span class=n>shortSideLength</span><span class=p>,</span> <span class=kt>int</span> <span class=n>longSideLength</span><span class=p>){</span>
</span></span><span class=line><span class=cl>        <span class=n>ShortSideLength</span> <span class=p>=</span> <span class=n>shortSideLength</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=n>LongSideLength</span> <span class=p>=</span> <span class=n>longSideLength</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=cs>/// &lt;summary&gt;A struct representing a square&lt;/summary&gt;</span>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=k>struct</span> <span class=nc>Square</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=cs>/// &lt;summary&gt; The length of the square&#39;s sides&lt;/summary&gt;</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kt>int</span> <span class=n>SideLength</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=cs>/// &lt;summary&gt;Constructs a new square&lt;/summary&gt;</span>
</span></span><span class=line><span class=cl>    <span class=cs>/// &lt;param name=&#34;sideLength&#34;&gt;The length of the square&#39;s sides&lt;/param&gt;</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=n>Square</span><span class=p>(</span><span class=kt>int</span> <span class=n>sideLength</span><span class=p>){</span>
</span></span><span class=line><span class=cl>        <span class=n>SideLength</span> <span class=p>=</span> <span class=n>sideLength</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div><p>Since we know that a square is a special case of a rectangle (where all sides are the same length), we might define an implicit casting operator to convert it into a <code>Rectangle</code> (this would be placed inside the <code>Square</code> struct definition):</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl>    <span class=cs>/// &lt;summary&gt;Casts the &lt;paramref name=&#34;square&#34;/&gt; into a Rectangle&lt;/summary&gt;</span>
</span></span><span class=line><span class=cl>    <span class=cs>/// &lt;param name=&#34;square&#34;&gt;The square to cast&lt;/param&gt;</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kd>static</span> <span class=kd>implicit</span> <span class=kd>operator</span> <span class=n>Rectangle</span><span class=p>(</span><span class=n>Square</span> <span class=n>square</span><span class=p>)</span> 
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=k>new</span> <span class=n>Rectangle</span><span class=p>(</span><span class=n>square</span><span class=p>.</span><span class=n>SideLength</span><span class=p>,</span> <span class=n>square</span><span class=p>.</span><span class=n>SideLength</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span></span></span></code></pre></div><p>Similarly, we might create a cast operator to convert a rectangle to a square. But as this can <em>only</em> happen when the sides of the rectangle are all the same size, it would need to be an <em>explicit</em> cast operator , and throw an exception when that condition is not met (this method is placed in the <code>Rectangle</code> struct definition):</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl>    <span class=cs>/// &lt;summary&gt;Casts the &lt;paramref name=&#34;rectangle&#34;/&gt; into a Square&lt;/summary&gt;</span>
</span></span><span class=line><span class=cl>    <span class=cs>/// &lt;param name=&#34;rectangle&#34;&gt;The rectangle to cast&lt;/param&gt;</span>
</span></span><span class=line><span class=cl>    <span class=cs>/// &lt;exception cref=&#34;System.InvalidCastOperation&#34;&gt;The rectangle sides must be equal to cast to a square&lt;/exception&gt;</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kd>static</span> <span class=kd>explicit</span> <span class=kd>operator</span> <span class=n>Square</span><span class=p>(</span><span class=n>Rectangle</span> <span class=n>rectangle</span><span class=p>){</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span><span class=p>(</span><span class=n>rectangle</span><span class=p>.</span><span class=n>LongSideLength</span> <span class=p>!=</span> <span class=n>rectangle</span><span class=p>.</span><span class=n>ShortSideLength</span><span class=p>)</span> <span class=k>throw</span> <span class=k>new</span> <span class=n>InvalidCastException</span><span class=p>(</span><span class=s>&#34;The sides of a square must be of equal lengths&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=k>new</span> <span class=n>Square</span><span class=p>(</span><span class=n>rectangle</span><span class=p>.</span><span class=n>LongSideLength</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span></span></span></code></pre></div><h2 id=casting-and-inheritance>Casting and Inheritance</h2><p>Casting becomes a bit more involved when we consider inheritance. As you saw in the previous discussion of inheritance, we can treat derived classes <em>as the base class</em>, i.e. the code:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=n>Student</span> <span class=n>sam</span> <span class=p>=</span> <span class=k>new</span> <span class=n>UndergraduateStudent</span><span class=p>(</span><span class=s>&#34;Sam&#34;</span><span class=p>,</span> <span class=s>&#34;Malone&#34;</span><span class=p>);</span></span></span></code></pre></div><p>Is actually <em>implicitly casting</em> the undergraduate student &ldquo;Sam Malone&rdquo; into a student class. Because an <code>UndergraduateStudent</code> is a <code>Student</code>, this cast can be <em>implicit</em>. Moreover, we don&rsquo;t need to define a casting operator - we can always implicitly cast a class to one of its ancestor classes, it&rsquo;s built into the inheritance mechanism of C#.</p><p>Going the other way requires an <em>explicit cast</em> as there is a chance that the <code>Student</code> we are casting <em>isn&rsquo;t</em> an undergraduate, i.e.:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=n>UndergraduateStudent</span> <span class=n>u</span> <span class=p>=</span> <span class=p>(</span><span class=n>UndergraduateStudent</span><span class=p>)</span><span class=n>sam</span><span class=p>;</span></span></span></code></pre></div><p>If we tried to cast <code>sam</code> into a graduate student:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=n>GraduateStudent</span> <span class=n>g</span> <span class=p>=</span> <span class=p>(</span><span class=n>GraduateStudent</span><span class=p>)</span><span class=n>sam</span><span class=p>;</span></span></span></code></pre></div><p>The program would throw an <code>InvalidCastException</code> when run.</p><h2 id=casting-and-interfaces>Casting and Interfaces</h2><p>Casting interacts similarly with interfaces. A class can be implicitly cast to an interface it implements:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=n>IJumpable</span> <span class=n>roo</span> <span class=p>=</span> <span class=k>new</span> <span class=n>Kangaroo</span><span class=p>();</span></span></span></code></pre></div><p>But must be <em>explicitly</em> cast to convert it back into the class that implemented it:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=n>Kangaroo</span> <span class=n>k</span> <span class=p>=</span> <span class=p>(</span><span class=n>Kangaroo</span><span class=p>)</span><span class=n>roo</span><span class=p>;</span></span></span></code></pre></div><p>And if that cast is illegal, we&rsquo;ll throw an <code>InvalidCastException</code>:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=n>Car</span> <span class=n>c</span> <span class=p>=</span> <span class=p>(</span><span class=n>Car</span><span class=p>)</span><span class=n>roo</span><span class=p>;</span></span></span></code></pre></div><h2 id=the-as-operator>The <code>as</code> Operator</h2><p>When we are casting reference and nullable types, we have an additional casting option - the <code>as</code> casting operator.</p><p>The <code>as</code> operator performs the cast, or evaluates to <code>null</code> if the cast fails (instead of throwing an <code>InvalidCastException</code>), i.e.:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=n>UndergraduateStudent</span> <span class=n>u</span> <span class=p>=</span> <span class=n>sam</span> <span class=k>as</span> <span class=n>UndergraduateStudent</span><span class=p>;</span> <span class=c1>// evaluates to an UndergraduateStudent </span>
</span></span><span class=line><span class=cl><span class=n>GraduateStudent</span> <span class=n>g</span> <span class=p>=</span> <span class=n>sam</span> <span class=k>as</span> <span class=n>GraduateStudent</span><span class=p>;</span> <span class=c1>// evaluates to null</span>
</span></span><span class=line><span class=cl><span class=n>Kangaroo</span> <span class=n>k</span> <span class=p>=</span> <span class=n>roo</span> <span class=k>as</span> <span class=n>Kangaroo</span><span class=p>;</span> <span class=c1>// evaluates to a Kangaroo </span>
</span></span><span class=line><span class=cl><span class=n>Car</span> <span class=n>c</span> <span class=p>=</span> <span class=n>roo</span> <span class=k>as</span> <span class=n>Kangaroo</span><span class=p>;</span> <span class=c1>// evaluates to null</span></span></span></code></pre></div><h2 id=the-is-operator>The <code>is</code> Operator</h2><p>Rather than performing a cast and catching the exception (or performing a null check when using the <code>as</code> operator), it is often useful to know if a cast is possible. This can be checked for with the <code>is</code> operator. It evaluates to a boolean, <code>true</code> if the cast is possible, <code>false</code> if not:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=n>sam</span> <span class=k>is</span> <span class=n>UndergraduateStudent</span><span class=p>;</span> <span class=c1>// evaluates to true</span>
</span></span><span class=line><span class=cl><span class=n>sam</span> <span class=k>is</span> <span class=n>GraduateStudent</span><span class=p>;</span> <span class=c1>// evaluates to false</span>
</span></span><span class=line><span class=cl><span class=n>roo</span> <span class=k>is</span> <span class=n>Kangaroo</span><span class=p>;</span> <span class=c1>// evaluates to true</span>
</span></span><span class=line><span class=cl><span class=n>roo</span> <span class=k>is</span> <span class=n>Car</span><span class=p>;</span> <span class=c1>// evaluates to false</span></span></span></code></pre></div><div class="box notices cstyle warning"><div class=box-label><i class="fa-fw fas fa-exclamation-triangle"></i> Warning</div><div class=box-content><p>The <code>is</code> operator does not work with user-defined casting operators, i.e. when used with the Rectangle/Square cast we defined above:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=n>Square</span> <span class=n>s</span> <span class=p>=</span> <span class=k>new</span> <span class=n>Square</span><span class=p>(</span><span class=m>10</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kt>bool</span> <span class=n>test</span> <span class=p>=</span> <span class=n>s</span> <span class=k>is</span> <span class=n>Rectangle</span><span class=p>;</span></span></span></code></pre></div><p>The value of <code>test</code> will be <code>false</code>, even though we have a user-defined implicit cast that works.</p></div></div><p>The <code>is</code> operator is commonly used to determine if a cast will succeed before performing it, i.e.:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=k>if</span><span class=p>(</span><span class=n>sam</span> <span class=k>is</span> <span class=n>UndergraduateStudent</span><span class=p>)</span> 
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>Undergraduate</span> <span class=n>samAsUGrad</span> <span class=p>=</span> <span class=n>sam</span> <span class=k>as</span> <span class=n>UndergraduateStudent</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=c1>// TODO: Do something undergraduate-ey with samAsUGrad</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div><p>This pattern was so commonly employed, it led to the addition of the <a href=https://docs.microsoft.com/en-us/dotnet/csharp/pattern-matching#the-is-type-pattern-expression rel=external target=_blank>is type pattern matching expression</a> in C# version 7.0:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=k>if</span><span class=p>(</span><span class=n>sam</span> <span class=k>is</span> <span class=n>UndergraduateStudent</span> <span class=n>samAsUGrad</span><span class=p>)</span> 
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// TODO: Do something undergraduate-y with samAsUGrad</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div><p>If the cast is possible, it is performed and the result assigned to the provided variable name (in this case, <code>samAsUGrad</code>). This is another example of <a href=https://en.wikipedia.org/wiki/Syntactic_sugar rel=external target=_blank>syntactic sugar</a>.</p><footer class=footline></footer></article><article class=default><header class=headline></header><h1 id=message-dispatching>Message Dispatching</h1><p>The term <em>dispatch</em> refers to how a language decides which polymorphic operation (a method or function) a message should trigger.</p><p>Consider polymorphic functions in C# (aka <em>Method Overloading</em>, where multiple methods use the same name but have different parameters) like this one for calculating the rounded sum of an array of numbers:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=kt>int</span> <span class=n>RoundedSum</span><span class=p>(</span><span class=kt>int</span><span class=p>[]</span> <span class=n>a</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=kt>int</span> <span class=n>sum</span> <span class=p>=</span> <span class=m>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=k>foreach</span><span class=p>(</span><span class=kt>int</span> <span class=n>i</span> <span class=k>in</span> <span class=n>a</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>sum</span> <span class=p>+=</span> <span class=n>i</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=n>sum</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kt>int</span> <span class=n>RoundedSum</span><span class=p>(</span><span class=kt>float</span><span class=p>[]</span> <span class=n>a</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kt>double</span> <span class=n>sum</span> <span class=p>=</span> <span class=m>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>foreach</span><span class=p>(</span><span class=kt>int</span> <span class=n>i</span> <span class=k>in</span> <span class=n>a</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>sum</span> <span class=p>+=</span> <span class=n>i</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=p>(</span><span class=kt>int</span><span class=p>)</span><span class=n>Math</span><span class=p>.</span><span class=n>Round</span><span class=p>(</span><span class=n>sum</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div><p>How does the interpreter know which version to invoke at runtime? It should not be a surprise that it is determined by the arguments - if an integer array is passed, the first is invoked, if a float array is passed, the second.</p><h2 id=object-oriented-polymorphism>Object-Oriented Polymorphism</h2><p>However, inheritance can cause some challenges in selecting the appropriate polymorphic form. Consider the following fruit implementations that feature a <strong>Blend()</strong> method:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=cs>/// &lt;summary&gt;</span>
</span></span><span class=line><span class=cl><span class=cs>/// A base class representing fruit</span>
</span></span><span class=line><span class=cl><span class=cs>/// &lt;/summary&gt;</span>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=k>class</span> <span class=nc>Fruit</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=cs>/// &lt;summary&gt;</span>
</span></span><span class=line><span class=cl>    <span class=cs>/// Blends the fruit</span>
</span></span><span class=line><span class=cl>    <span class=cs>/// &lt;/summary&gt;</span>
</span></span><span class=line><span class=cl>    <span class=cs>/// &lt;returns&gt;The result of blending&lt;/returns&gt;</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kt>string</span> <span class=n>Blend</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=k>return</span> <span class=s>&#34;A pulpy mess, I guess&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=cs>/// &lt;summary&gt;</span>
</span></span><span class=line><span class=cl><span class=cs>/// A class representing a banana</span>
</span></span><span class=line><span class=cl><span class=cs>/// &lt;/summary&gt;</span>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=k>class</span> <span class=nc>Banana</span> <span class=p>:</span> <span class=n>Fruit</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=cs>/// &lt;summary&gt;</span>
</span></span><span class=line><span class=cl>    <span class=cs>/// Blends the banana</span>
</span></span><span class=line><span class=cl>    <span class=cs>/// &lt;/summary&gt;</span>
</span></span><span class=line><span class=cl>    <span class=cs>/// &lt;returns&gt;The result of blending the banana&lt;/returns&gt;</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kt>string</span> <span class=n>Blend</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=s>&#34;yellow mush&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=cs>/// &lt;summary&gt;</span>
</span></span><span class=line><span class=cl><span class=cs>/// A class representing a Strawberry</span>
</span></span><span class=line><span class=cl><span class=cs>/// &lt;/summary&gt;</span>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=k>class</span> <span class=nc>Strawberry</span> <span class=p>:</span> <span class=n>Fruit</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=cs>/// &lt;summary&gt;</span>
</span></span><span class=line><span class=cl>    <span class=cs>/// Blends the strawberry</span>
</span></span><span class=line><span class=cl>    <span class=cs>/// &lt;/summary&gt;</span>
</span></span><span class=line><span class=cl>    <span class=cs>/// &lt;returns&gt;The result of blending a strawberry&lt;/returns&gt;</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kt>string</span> <span class=n>Blend</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=s>&#34;Gooey Red Sweetness&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div><p>Let&rsquo;s add fruit instances to a list, and invoke their <code>Blend()</code> methods:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=n>List</span><span class=p>&lt;</span><span class=n>Fruit</span><span class=p>&gt;</span> <span class=n>toBlend</span> <span class=p>=</span> <span class=k>new</span> <span class=n>List</span><span class=p>&lt;</span><span class=n>Fruit</span><span class=p>&gt;();</span>
</span></span><span class=line><span class=cl><span class=n>toBlend</span><span class=p>.</span><span class=n>Add</span><span class=p>(</span><span class=k>new</span> <span class=n>Banana</span><span class=p>());</span>
</span></span><span class=line><span class=cl><span class=n>toBlend</span><span class=p>.</span><span class=n>Add</span><span class=p>(</span><span class=k>new</span> <span class=n>Strawberry</span><span class=p>());</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>foreach</span><span class=p>(</span><span class=n>Fruit</span> <span class=n>item</span> <span class=k>in</span> <span class=n>toBlend</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=n>Console</span><span class=p>.</span><span class=n>WriteLine</span><span class=p>(</span><span class=n>item</span><span class=p>.</span><span class=n>Blend</span><span class=p>());</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div><p>You might expect this code to produce the lines:</p><div class=highlight><pre tabindex=0><code>yellow mush
Gooey Red Sweetness</code></pre></div><p>As these are the return values for the <code>Blend()</code> methods for the <code>Banana</code> and <code>Strawberry</code> classes, respectively. However, we will get:</p><div class=highlight><pre tabindex=0><code>A pulpy mess, I guess?
A pulpy mess, I guess?</code></pre></div><p>Which is the return value for the <code>Fruit</code> base class <code>Blend()</code> implementation. The line <code>forEach(Fruit item in toBlend)</code> explicitly tells the interpreter to treat the <code>item</code> as a <code>Fruit</code> instance, so of the two available methods (the base or super class implementation), the <code>Fruit</code> base class one is selected.</p><p>C# 4.0 introduced a new keyword, <a href=https://docs.microsoft.com/en-us/dotnet/csharp/programming-guide/types/using-type-dynamic rel=external target=_blank>dynamic</a> to allow variables like <code>item</code> to be dynamically typed at runtime. Hence, changing the loop to this:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=n>forEach</span><span class=p>(</span><span class=kt>dynamic</span> <span class=n>item</span> <span class=k>in</span> <span class=n>toBlend</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=n>Console</span><span class=p>.</span><span class=n>WriteLine</span><span class=p>(</span><span class=n>item</span><span class=p>.</span><span class=n>Blend</span><span class=p>());</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div><p>Will give us the first set of results we discussed.</p><h2 id=method-overriding>Method Overriding</h2><p>Of course, part of the issue in the above example is that we actually have <em>two</em> implementations for <code>Blend()</code> available to each fruit. If we wanted all bananas to use the <code>Banana</code> class&rsquo;s <code>Blend()</code> method, even when the banana was being treated as a <code>Fruit</code>, we need to <em>override</em> the base method instead of creating a new one that hides it (in fact, in Visual Studio we should get a warning that our new method hides the base implementation, and be prompted to add the <code>new</code> keyword if that was our intent).</p><p>To override a base class method, we first must mark it as <code>abstract</code> or <code>virtual</code>. The first keyword, <code>abstract</code>, indicates that the method <em>does not have an implementation</em> (a body). The second, <code>virtual</code>, indicates that the base class <em>does</em> provide an implementation. We should use <code>abstract</code> when each derived class will define its own implementation, and <code>virtual</code> when some derived classes will want to use a common base implementation. Then, we must mark the method in the derived class with the <code>override</code> keyword.</p><p>Considering our <code>Fruit</code> class, since we&rsquo;re providing a unique implementation of <code>Blend()</code> in each derived class, the <code>abstract</code> keyword is more appropriate:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=cs>/// &lt;summary&gt;</span>
</span></span><span class=line><span class=cl><span class=cs>/// A base class representing fruit</span>
</span></span><span class=line><span class=cl><span class=cs>/// &lt;/summary&gt;</span>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=kd>abstract</span> <span class=k>class</span> <span class=nc>Fruit</span> <span class=p>:</span> <span class=n>IBlendable</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=cs>/// &lt;summary&gt;</span>
</span></span><span class=line><span class=cl>    <span class=cs>/// Blends the fruit</span>
</span></span><span class=line><span class=cl>    <span class=cs>/// &lt;/summary&gt;</span>
</span></span><span class=line><span class=cl>    <span class=cs>/// &lt;returns&gt;The result of blending&lt;/returns&gt;</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kd>abstract</span> <span class=kt>string</span> <span class=n>Blend</span><span class=p>();</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div><p>As you can see above, the <code>Blend()</code> method does not have a body, only the method signature.</p><p>Also, note that if we use an abstract method in a class, the class itself must <em>also</em> be declared abstract. The reason should be clear - an abstract method cannot be called, so we should not create an object that only has the abstract method. The virtual keyword can be used in both abstract and regular classes.</p><p>Now we can override the <code>Blend()</code> method in Banana class:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=cs>/// &lt;summary&gt;</span>
</span></span><span class=line><span class=cl><span class=cs>/// A class representing a banana</span>
</span></span><span class=line><span class=cl><span class=cs>/// &lt;/summary&gt;</span>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=k>class</span> <span class=nc>Banana</span> <span class=p>:</span> <span class=n>Fruit</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=cs>/// &lt;summary&gt;</span>
</span></span><span class=line><span class=cl>    <span class=cs>/// Blends the banana</span>
</span></span><span class=line><span class=cl>    <span class=cs>/// &lt;/summary&gt;</span>
</span></span><span class=line><span class=cl>    <span class=cs>/// &lt;returns&gt;The result of blending the banana&lt;/returns&gt;</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kd>override</span> <span class=kt>string</span> <span class=n>Blend</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=s>&#34;yellow mush&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div><p>Now, even if we go back to our non-dynamic loop that treats our fruit as <code>Fruit</code> instances, we&rsquo;ll get the result of the <code>Banana</code> class&rsquo;s <code>Blend()</code> method.</p><p>We can override any method marked <code>abstract</code>, <code>virtual</code>, or <code>override</code> (this last will only occur in a derived class whose base class is also derived, as it is overriding an already-overridden method).</p><h2 id=sealed-methods>Sealed Methods</h2><p>We can also apply the <code>sealed</code> keyword to overridden methods, which prevents them from being overridden further. Let&rsquo;s apply this to the Strawberry class:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=cs>/// &lt;summary&gt;</span>
</span></span><span class=line><span class=cl><span class=cs>/// A class representing a Strawberry</span>
</span></span><span class=line><span class=cl><span class=cs>/// &lt;/summary&gt;</span>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=k>class</span> <span class=nc>Strawberry</span> <span class=p>:</span> <span class=n>Fruit</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=cs>/// &lt;summary&gt;</span>
</span></span><span class=line><span class=cl>    <span class=cs>/// Blends the strawberry</span>
</span></span><span class=line><span class=cl>    <span class=cs>/// &lt;/summary&gt;</span>
</span></span><span class=line><span class=cl>    <span class=cs>/// &lt;returns&gt;The result of blending a strawberry&lt;/returns&gt;</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kd>sealed</span> <span class=kd>override</span> <span class=kt>string</span> <span class=n>Blend</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=s>&#34;Gooey Red Sweetness&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div><p>Now, any class inheriting from Strawberry will not be allowed to override the Blend() method.</p><footer class=footline></footer></article><article class=default><header class=headline></header><h1 id=c-collections>C# Collections</h1><p>Collections in C# are a great example of polymorphism in action. Many collections utilize <a href=/cis400/1-object-orientation/06-advanced-csharp/05-generics/>generics</a> to allow the collection to hold an arbitrary type. For example, the <code>List&lt;T></code> can be used to hold strings, integers, or even specific objects:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=n>List</span><span class=p>&lt;</span><span class=kt>string</span><span class=p>&gt;</span> <span class=n>strings</span> <span class=p>=</span> <span class=k>new</span> <span class=n>List</span><span class=p>&lt;</span><span class=kt>string</span><span class=p>&gt;();</span>
</span></span><span class=line><span class=cl><span class=n>List</span><span class=p>&lt;</span><span class=kt>int</span><span class=p>&gt;</span> <span class=n>ints</span> <span class=p>=</span> <span class=k>new</span> <span class=n>List</span><span class=p>&lt;</span><span class=kt>int</span><span class=p>&gt;();</span>
</span></span><span class=line><span class=cl><span class=n>List</span><span class=p>&lt;</span><span class=n>Person</span><span class=p>&gt;</span> <span class=n>persons</span> <span class=p>=</span> <span class=k>new</span> <span class=n>List</span><span class=p>&lt;</span><span class=n>Person</span><span class=p>&gt;();</span></span></span></code></pre></div><p>We can also use an interface as the type, as we did with the <code>IJumpable</code> interface as we discussed in the <a href=/cis400/1-object-orientation/06-advanced-csharp/05-generics/>generics section</a>, i.e.:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=n>List</span><span class=p>&lt;</span><span class=n>IJumpable</span><span class=p>&gt;</span> <span class=n>jumpables</span> <span class=p>=</span> <span class=k>new</span> <span class=n>List</span><span class=p>&lt;</span><span class=n>IJumpable</span><span class=p>&gt;();</span>
</span></span><span class=line><span class=cl><span class=n>jumpables</span><span class=p>.</span><span class=n>Add</span><span class=p>(</span><span class=k>new</span> <span class=n>Kangaroo</span><span class=p>());</span>
</span></span><span class=line><span class=cl><span class=n>jumpables</span><span class=p>.</span><span class=n>Add</span><span class=p>(</span><span class=k>new</span> <span class=n>Car</span><span class=p>());</span>
</span></span><span class=line><span class=cl><span class=n>jumpables</span><span class=p>.</span><span class=n>Add</span><span class=p>(</span><span class=k>new</span> <span class=n>Kangaroo</span><span class=p>());</span></span></span></code></pre></div><h2 id=collection-interfaces>Collection Interfaces</h2><p>The C# language and system libraries also define a number of interfaces that apply to custom collections. Implementing these interfaces allows different kinds of data structures to be utilized in a standardized way.</p><h3 id=the-ienumerablelttgt-interface>The IEnumerable&lt;T> Interface</h3><p>The first of these is the <code>IEnumerable&lt;T></code> interface, which requires the collection to implement one method:</p><ul><li><code>public IEnumerator&lt;T> GetEnumerator()</code></li></ul><p>Implementing this interface allows the collection to be used in a <code>foreach</code> loop.</p><h3 id=the-icollectionlttgt-interface>The ICollection&lt;T> Interface</h3><p>C# Collections also typically implement the <code>ICollection&lt;T></code> interface, which <em>extends</em> the <code>IEnumerable&lt;T></code> interface and adds additional methods:</p><ul><li><code>public void Add&lt;T>(T item)</code> adds <code>item</code> to the collection</li><li><code>public void Clear()</code> empties the collection</li><li><code>public bool Contains(T item)</code> returns <code>true</code> if <code>item</code> is in the collection, <code>false</code> if not.</li><li><code>public void CopyTo(T[] array, int arrayIndex)</code> copies the collection contents into <code>array</code>, starting at <code>arrayIndex</code>.</li><li><code>public bool Remove(T item)</code> removes <code>item</code> from the collection, returning <code>true</code> if item was removed, <code>false</code> otherwise</li></ul><p>Additionally, the collection must implement the following properties:</p><ul><li><code>int Count</code> the number of items in the collection</li><li><code>bool IsReadOnly</code> the collection is read-only (can&rsquo;t be added to or removed from)</li></ul><h3 id=the-ilistlttgt-interface>The IList&lt;T> Interface</h3><p>Finally, collections that have an implied order and are intended to be accessed by a specific index should probably implement the <code>IList&lt;T></code> interface, which extends <code>ICollection&lt;T></code> and <code>IEnumerable&lt;T></code>. This interface adds these additional methods:</p><ul><li><code>public int IndexOf(T item)</code> returns the index of <code>item</code> in the list, or -1 if not found</li><li><code>public void Insert(int index, T item)</code> Inserts <code>item</code> into the list at position <code>index</code></li><li><code>public void RemoveAt(int index)</code> Removes the item from the list at position <code>index</code></li></ul><p>The interface also adds the property:</p><ul><li><code>Item[int index]</code> which gets or sets the item at <code>index</code>.</li></ul><h2 id=collection-implementation-strategies>Collection Implementation Strategies</h2><p>When writing a C# collection, there are three general strategies you can follow to ensure you implement the corresponding interfaces:</p><ol><li>Write the entire class by scratch</li><li>Implement the interface methods as a <em>pass-through</em> to a system library collection</li><li>Inherit from a system library collection</li></ol><p>Writing collections from scratch was the strategy you utilized in CIS 300 - Data Structures and Algorithms. While this strategy gives you the most control, it is also the most time-consuming.</p><p>The pass-through strategy involves creating a system library collection, such as a <code>List&lt;T></code>, as a private field in your collection class. Then, when you implement the necessary interface methods, you simply <em>pass through</em> the call to the private collection. I.e.:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=kd>public</span> <span class=k>class</span> <span class=nc>PassThroughList</span><span class=p>&lt;</span><span class=n>T</span><span class=p>&gt;</span> <span class=p>:</span> <span class=n>IList</span><span class=p>&lt;</span><span class=n>T</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=kd>private</span> <span class=n>List</span><span class=p>&lt;</span><span class=n>T</span><span class=p>&gt;</span> <span class=n>_list</span> <span class=p>=</span> <span class=k>new</span> <span class=n>List</span><span class=p>&lt;</span><span class=n>T</span><span class=p>&gt;;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=kd>public</span> <span class=n>IEnumerator</span><span class=p>&lt;</span><span class=n>T</span><span class=p>&gt;</span> <span class=n>GetEnumerator</span><span class=p>()</span> 
</span></span><span class=line><span class=cl>  <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>_list</span><span class=p>.</span><span class=n>GetEnumerator</span><span class=p>();</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span> 
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=c1>// TODO: Implement remaining methods and properties...</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div><p>Using this approach, you can add whatever additional logic your collection needs into your pass-through methods without needing to re-implement the basic collection functionality.</p><p>Using inheritance gives your derived class all of the methods of the base class, so if you extend a class that already implements the collection interfaces, you&rsquo;ve already got all the methods!</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=kd>public</span> <span class=k>class</span> <span class=nc>InheritedList</span><span class=p>&lt;</span><span class=n>T</span><span class=p>&gt;</span> <span class=p>:</span> <span class=n>List</span><span class=p>&lt;</span><span class=n>T</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=c1>// All IList&lt;T&gt;, ICollection&lt;T&gt;, and IEnumerable&lt;T&gt; methods </span>
</span></span><span class=line><span class=cl>  <span class=c1>// from List&lt;T&gt; are already defined on InheritedList&lt;T&gt;</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div><p>However, most system collection class methods are not declared as <code>virtual</code>, so you cannot override them to add custom functionality.</p><footer class=footline></footer></article><article class=default><header class=headline></header><h1 id=summary>Summary</h1><p>In this chapter, we explored the concept of types and discussed how variables are specific types that can be explicitly or implicitly declared. We saw how in a statically-typed language (like C#), variables are not allowed to change types (though they can do so in a dynamically-typed language). We also discussed how casting can convert a value stored in a variable into a different type. Implicit casts can happen automatically, but explicit casts must be indicated by the programmer using a cast operator, as the cast could result in loss of precision or the throwing of an exception.</p><p>We explored how class declarations and interface declarations create new types. We saw how polymorphic mechanisms like interface implementation and inheritance allow objects to be treated as (and cast to) different types. We also introduced the <code>as</code> and <code>is</code> casting operators, which can be used to cast or test the ability to cast, respectively. We saw that if the <code>as</code> cast operator fails, it evaluates to null instead of throwing an exception. We also saw the <code>is</code> type pattern expression, which simplifies a casting test and casting operation into a single expression.</p><p>Next, we looked at how C# collections leverage the use of interfaces, inheritance, and generic types to quickly and easily make custom collection objects that interact with the C# language in well-defined ways.</p><p>Finally, we explored how messages are dispatched when polymorphism is involved. We saw that the method invoked depends on what Type we are currently treating the object as. We saw how the C# modifiers <code>protected</code>, <code>abstract</code>, <code>virtual</code>, <code>override</code>, and <code>sealed</code> interacted with this message dispatch process. We also saw how the <code>dynamic</code> type could delay determining an object&rsquo;s type until runtime.</p><footer class=footline></footer></article></section></div></main><div class=git-footer><p class=theme-version-footer>6.0.0</p><p>Last modified by:
<i class='fas fa-user'></i> Julie Thornton
<i class='fas fa-calendar'></i> <a href=https://github.com/ksu-cs-textbooks/cis400/commit/0344e391ed5c1a44c264b3adc43c3f0c681d720f>Sep 3, 2023</a></p></div></div><script src=/cis400/js/clipboard.min.js?1728334428 defer></script><script src=/cis400/js/perfect-scrollbar.min.js?1728334428 defer></script><script src=/cis400/js/theme.js?1728334428 defer></script></body></html>