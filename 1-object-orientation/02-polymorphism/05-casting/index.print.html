




	
	
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		
		

	
	
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		
		

	
	
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		
		
<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="height=device-height, width=device-width, initial-scale=1.0, minimum-scale=1.0">
    <meta name="generator" content="Hugo 0.117.0">
    <meta name="generator" content="Relearn 5.18.0">
    <meta name="description" content="K-State CIS 400 Textbook">
    <meta name="author" content="Nathan Bean">
    <title>Casting :: K-State CIS 400 Textbook</title>
    <link href="https://ksu-cs-textbooks.github.io/cis400/1-object-orientation/02-polymorphism/05-casting/index.html" rel="canonical" type="text/html" title="Casting :: K-State CIS 400 Textbook">
    <link href="https://ksu-cs-textbooks.github.io/cis400/1-object-orientation/02-polymorphism/05-casting/index.xml" rel="alternate" type="application/rss+xml" title="Casting :: K-State CIS 400 Textbook">
    <link href="https://ksu-cs-textbooks.github.io/cis400/1-object-orientation/02-polymorphism/05-casting/tele.html" rel="alternate" type="text/html" title="Casting :: K-State CIS 400 Textbook">
    <link href="https://ksu-cs-textbooks.github.io/cis400/1-object-orientation/02-polymorphism/05-casting/embed.html" rel="alternate" type="text/html" title="Casting :: K-State CIS 400 Textbook">
    <!-- https://github.com/filamentgroup/loadCSS/blob/master/README.md#how-to-use -->
    <link href="https://ksu-cs-textbooks.github.io/cis400/css/fontawesome-all.min.css?1707854515" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="https://ksu-cs-textbooks.github.io/cis400/css/fontawesome-all.min.css?1707854515" rel="stylesheet"></noscript>
    <link href="https://ksu-cs-textbooks.github.io/cis400/css/nucleus.css?1707854515" rel="stylesheet">
    <link href="https://ksu-cs-textbooks.github.io/cis400/css/auto-complete.css?1707854515" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="https://ksu-cs-textbooks.github.io/cis400/css/auto-complete.css?1707854515" rel="stylesheet"></noscript>
    <link href="https://ksu-cs-textbooks.github.io/cis400/css/perfect-scrollbar.min.css?1707854515" rel="stylesheet">
    <link href="https://ksu-cs-textbooks.github.io/cis400/css/fonts.css?1707854515" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="https://ksu-cs-textbooks.github.io/cis400/css/fonts.css?1707854515" rel="stylesheet"></noscript>
    <link href="https://ksu-cs-textbooks.github.io/cis400/css/theme.css?1707854515" rel="stylesheet">
    <link href="https://ksu-cs-textbooks.github.io/cis400/css/theme-auto.css?1707854515" rel="stylesheet" id="variant-style">
    <link href="https://ksu-cs-textbooks.github.io/cis400/css/variant.css?1707854515" rel="stylesheet">
    <link href="https://ksu-cs-textbooks.github.io/cis400/css/print.css?1707854515" rel="stylesheet" media="print">
    <link href="https://ksu-cs-textbooks.github.io/cis400/css/format-print.css?1707854515" rel="stylesheet">
    <link href="https://ksu-cs-textbooks.github.io/cis400/css/ie.css?1707854515" rel="stylesheet">
    <script src="https://ksu-cs-textbooks.github.io/cis400/js/url.js?1707854515"></script>
    <script src="https://ksu-cs-textbooks.github.io/cis400/js/variant.js?1707854515"></script>
    <script>
      // hack to let hugo tell us how to get to the root when using relativeURLs, it needs to be called *url= for it to do its magic:
      // https://github.com/gohugoio/hugo/blob/145b3fcce35fbac25c7033c91c1b7ae6d1179da8/transform/urlreplacers/absurlreplacer.go#L72
      window.index_js_url="https://ksu-cs-textbooks.github.io/cis400/index.search.js";
      var root_url="https://ksu-cs-textbooks.github.io/cis400/";
      var baseUri=root_url.replace(/\/$/, '');
      // translations
      window.T_Copy_to_clipboard = 'Copy to clipboard';
      window.T_Copied_to_clipboard = 'Copied to clipboard!';
      window.T_Copy_link_to_clipboard = 'Copy link to clipboard';
      window.T_Link_copied_to_clipboard = 'Copied link to clipboard!';
      window.T_No_results_found = 'No results found for \u0022{0}\u0022';
      window.T_N_results_found = '{1} results found for \u0022{0}\u0022';
      // some further base stuff
      var baseUriFull='https:\/\/ksu-cs-textbooks.github.io\/cis400/';
      window.variants && variants.init( [ 'auto', 'light-theme', 'dark-theme' ] );
    </script>
    
    <link href="https://ksu-cs-textbooks.github.io/cis400/css/custom.css?1707854515" rel="stylesheet">

  </head>
  <body class="mobile-support print disableInlineCopyToClipboard" data-url="https://ksu-cs-textbooks.github.io/cis400/1-object-orientation/02-polymorphism/05-casting/index.html">
    <div id="body" class="default-animation">
      <div id="sidebar-overlay"></div>
      <div id="toc-overlay"></div>
      <nav id="topbar" class="highlightable">
        <div>
          <div id="top-tele-link">
            <a class="print-link" title='Teleprompter View' href="https://ksu-cs-textbooks.github.io/cis400/1-object-orientation/02-polymorphism/05-casting/tele.html">
              <i class="fas fa-tv fa-fw"></i>
            </a>
          </div>
          <div id="top-embed-link">
            <a class="print-link" title='Embeddable Version' href="https://ksu-cs-textbooks.github.io/cis400/1-object-orientation/02-polymorphism/05-casting/embed.html">
              <i class="fas fa-expand-arrows-alt fa-fw"></i>
            </a>
          </div>
          <div id="breadcrumbs">
            <span id="sidebar-toggle-span">
              <a href="#" id="sidebar-toggle" class="topbar-link" title='Menu (CTRL+ALT+n)'><i class="fas fa-bars fa-fw"></i></a>
            </span>
            <ol class="links" itemscope itemtype="http://schema.org/BreadcrumbList">
              <li itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement"><a itemprop="item" href="https://ksu-cs-textbooks.github.io/cis400/index.html"><span itemprop="name">CIS 400: Object-Oriented Design, Implementation, and Testing</span></a><meta itemprop="position" content="1"> &gt; </li>
              <li itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement"><a itemprop="item" href="https://ksu-cs-textbooks.github.io/cis400/1-object-orientation/index.html"><span itemprop="name">Object-Orientation</span></a><meta itemprop="position" content="2"> &gt; </li>
              <li itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement"><a itemprop="item" href="https://ksu-cs-textbooks.github.io/cis400/1-object-orientation/02-polymorphism/index.html"><span itemprop="name">Polymorphism</span></a><meta itemprop="position" content="3"> &gt; </li>
              <li itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement"><span itemprop="name">Casting</span><meta itemprop="position" content="4"></li>
            </ol>
          </div>
        </div>
      </nav>
      <main id="body-inner" class="highlightable default" tabindex="-1">
        <div class="flex-block-wrapper">
          <article class="default">
            <header class="headline">
            </header>
<h1 id="casting">Casting</h1>

<p>You have probably used casting to convert numeric values from one type to another, i.e.:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">int</span> a = <span style="color:#ae81ff">5</span>;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">double</span> b = a;</span></span></code></pre></div><p>And</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">int</span> c = (<span style="color:#66d9ef">int</span>)b;</span></span></code></pre></div><p>What you are actually doing when you cast is <em>transforming a value from one type to another</em>.  In the first case, you are taking the value of <code>a</code> (5), and converting it to the equivalent double (5.0).  If you consider the internal representation of an integer (a 2&rsquo;s complement binary number) to a double (an <a href="https://en.wikipedia.org/wiki/IEEE_754" target="_blank">IEEE 754 standard</a>
 representation), we are actually applying a conversion algorithm to the binary representations.</p>
<p>We call the first operation an <em>implicit cast</em>, as we don&rsquo;t expressly tell the compiler to perform the cast. In contrast, the second assignment is an <em>explicit cast</em>, as we signify the cast by wrapping the <em>type</em> we are casting to in parenthesis before the variable we are casting.  We <em>have</em> to perform an explicit cast in the second case, as the conversion has the possibility of losing some precision (i.e. if we cast 7.2 to an integer, it would be truncated to 7).  In any case where the conversion may lose precision or possibly throw an error, an <em>explicit</em> cast is required.</p>
<h2 id="custom-casting-conversions">Custom Casting Conversions</h2>
<p>We can actually <a href="https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/operators/user-defined-conversion-operators" target="_blank">extend the C# language to add additional conversions</a>
 to provide additional casting operations.  Consider if we had <code>Rectangle</code> and <code>Square</code> structs:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#75715e">/// &lt;summary&gt;A struct representing a rectangle&lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">struct</span> <span style="color:#a6e22e">Rectangle</span> {
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt;The length of the short side of the rectangle&lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">int</span> ShortSideLength;
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt;The length of the long side of the rectangle&lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">int</span> LongSideLength;
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt;Constructs a new rectangle&lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;param name=&#34;shortSideLength&#34;&gt;The length of the shorter sides of the rectangle&lt;/param&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;param name=&#34;longSideLength&#34;&gt;The length of the longer sides of the rectangle&lt;/param&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> Rectangle(<span style="color:#66d9ef">int</span> shortSideLength, <span style="color:#66d9ef">int</span> longSideLength){
</span></span><span style="display:flex;"><span>        ShortSideLength = shortSideLength;
</span></span><span style="display:flex;"><span>        LongSideLength = longSideLength;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;summary&gt;A struct representing a square&lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">struct</span> <span style="color:#a6e22e">Square</span> {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt; The length of the square&#39;s sides&lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">int</span> SideLength;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt;Constructs a new square&lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;param name=&#34;sideLength&#34;&gt;The length of the square&#39;s sides&lt;/param&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> Square(<span style="color:#66d9ef">int</span> sideLength){
</span></span><span style="display:flex;"><span>        SideLength = sideLength;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>Since we know that a square is a special case of a rectangle (where all sides are the same length), we might define an implicit casting operator to convert it into a <code>Rectangle</code> (this would be placed inside the <code>Square</code> struct definition):</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt;Casts the &lt;paramref name=&#34;square&#34;/&gt; into a Rectangle&lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;param name=&#34;square&#34;&gt;The square to cast&lt;/param&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">implicit</span> <span style="color:#66d9ef">operator</span> Rectangle(Square square) 
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">new</span> Rectangle(square.SideLength, square.SideLength);
</span></span><span style="display:flex;"><span>    }</span></span></code></pre></div><p>Similarly, we might create a cast operator to convert a rectangle to a square.  But as this can <em>only</em> happen when the sides of the rectangle are all the same size, it would need to be an <em>explicit</em> cast operator , and throw an exception when that condition is not met (this method is placed in the <code>Rectangle</code> struct definition):</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt;Casts the &lt;paramref name=&#34;rectangle&#34;/&gt; into a Square&lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;param name=&#34;rectangle&#34;&gt;The rectangle to cast&lt;/param&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;exception cref=&#34;System.InvalidCastOperation&#34;&gt;The rectangle sides must be equal to cast to a square&lt;/exception&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">explicit</span> <span style="color:#66d9ef">operator</span> Square(Rectangle rectangle){
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span>(rectangle.LongSideLength != rectangle.ShortSideLength) <span style="color:#66d9ef">throw</span> <span style="color:#66d9ef">new</span> InvalidCastException(<span style="color:#e6db74">&#34;The sides of a square must be of equal lengths&#34;</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">new</span> Square(rectangle.LongSideLength);
</span></span><span style="display:flex;"><span>    }</span></span></code></pre></div><h2 id="casting-and-inheritance">Casting and Inheritance</h2>
<p>Casting becomes a bit more involved when we consider inheritance.  As you saw in the previous discussion of inheritance, we can treat derived classes <em>as the base class</em>, i.e. the code:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>Student sam = <span style="color:#66d9ef">new</span> UndergraduateStudent(<span style="color:#e6db74">&#34;Sam&#34;</span>, <span style="color:#e6db74">&#34;Malone&#34;</span>);</span></span></code></pre></div><p>Is actually <em>implicitly casting</em> the undergraduate student &ldquo;Sam Malone&rdquo; into a student class.  Because an <code>UndergraduateStudent</code> is a <code>Student</code>, this cast can be <em>implicit</em>.  Moreover, we don&rsquo;t need to define a casting operator - we can always implicitly cast a class to one of its ancestor classes, it&rsquo;s built into the inheritance mechanism of C#.</p>
<p>Going the other way requires an <em>explicit cast</em> as there is a chance that the <code>Student</code> we are casting <em>isn&rsquo;t</em> an undergraduate, i.e.:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>UndergraduateStudent u = (UndergraduateStudent)sam;</span></span></code></pre></div><p>If we tried to cast <code>sam</code> into a graduate student:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>GraduateStudent g = (GraduateStudent)sam;</span></span></code></pre></div><p>The program would throw an <code>InvalidCastException</code> when run.</p>
<h2 id="casting-and-interfaces">Casting and Interfaces</h2>
<p>Casting interacts similarly with interfaces.  A class can be implicitly cast to an interface it implements:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>IJumpable roo = <span style="color:#66d9ef">new</span> Kangaroo();</span></span></code></pre></div><p>But must be <em>explicitly</em> cast to convert it back into the class that implemented it:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>Kangaroo k = (Kangaroo)roo;</span></span></code></pre></div><p>And if that cast is illegal, we&rsquo;ll throw an <code>InvalidCastException</code>:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>Car c = (Car)roo;</span></span></code></pre></div><h2 id="the-as-operator">The <code>as</code> Operator</h2>
<p>When we are casting reference and nullable types, we have an additional casting option - the <code>as</code> casting operator.</p>
<p>The <code>as</code> operator performs the cast, or evaluates to <code>null</code> if the cast fails (instead of throwing an <code>InvalidCastException</code>), i.e.:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>UndergraduateStudent u = sam <span style="color:#66d9ef">as</span> UndergraduateStudent; <span style="color:#75715e">// evaluates to an UndergraduateStudent </span>
</span></span><span style="display:flex;"><span>GraduateStudent g = sam <span style="color:#66d9ef">as</span> GraduateStudent; <span style="color:#75715e">// evaluates to null</span>
</span></span><span style="display:flex;"><span>Kangaroo k = roo <span style="color:#66d9ef">as</span> Kangaroo; <span style="color:#75715e">// evaluates to a Kangaroo </span>
</span></span><span style="display:flex;"><span>Car c = roo <span style="color:#66d9ef">as</span> Kangaroo; <span style="color:#75715e">// evaluates to null</span></span></span></code></pre></div><h2 id="the-is-operator">The <code>is</code> Operator</h2>
<p>Rather than performing a cast and catching the exception (or performing a null check when using the <code>as</code> operator), it is often useful to know if a cast is possible.  This can be checked for with the <code>is</code> operator.  It evaluates to a boolean, <code>true</code> if the cast is possible, <code>false</code> if not:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>sam <span style="color:#66d9ef">is</span> UndergraduateStudent; <span style="color:#75715e">// evaluates to true</span>
</span></span><span style="display:flex;"><span>sam <span style="color:#66d9ef">is</span> GraduateStudent; <span style="color:#75715e">// evaluates to false</span>
</span></span><span style="display:flex;"><span>roo <span style="color:#66d9ef">is</span> Kangaroo; <span style="color:#75715e">// evaluates to true</span>
</span></span><span style="display:flex;"><span>roo <span style="color:#66d9ef">is</span> Car; <span style="color:#75715e">// evaluates to false</span></span></span></code></pre></div>
  
  
<div class="box notices cstyle warning">
  <div class="box-label"><i class="fa-fw fas fa-exclamation-triangle"></i> Warning</div>
  <div class="box-content">

<p>The <code>is</code> operator does not work with user-defined casting operators, i.e. when used with the Rectangle/Square cast we defined above:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>Square s = <span style="color:#66d9ef">new</span> Square(<span style="color:#ae81ff">10</span>);
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">bool</span> test = s <span style="color:#66d9ef">is</span> Rectangle;</span></span></code></pre></div><p>The value of <code>test</code> will be <code>false</code>, even though we have a user-defined implicit cast that works.</p>
</div>
</div>
<p>The <code>is</code> operator is commonly used to determine if a cast will succeed before performing it, i.e.:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">if</span>(sam <span style="color:#66d9ef">is</span> UndergraduateStudent) 
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    Undergraduate samAsUGrad = sam <span style="color:#66d9ef">as</span> UndergraduateStudent;
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// TODO: Do something undergraduate-ey with samAsUGrad</span>
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>This pattern was so commonly employed, it led to the addition of the <a href="https://docs.microsoft.com/en-us/dotnet/csharp/pattern-matching#the-is-type-pattern-expression" target="_blank">is type pattern matching expression</a>
 in C# version 7.0:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">if</span>(sam <span style="color:#66d9ef">is</span> UndergraduateStudent samAsUGrad) 
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// TODO: Do something undergraduate-y with samAsUGrad</span>
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>If the cast is possible, it is performed and the result assigned to the provided variable name (in this case, <code>samAsUGrad</code>).  This is another example of <a href="https://en.wikipedia.org/wiki/Syntactic_sugar" target="_blank">syntactic sugar</a>
.</p>

            <footer class="footline">

            </footer>
          </article>


        </div>
      </main>
    
<div class="git-footer">
<p class="theme-version-footer">5.18.0</p>
<p>Last modified by: 
            <i class='fas fa-user'></i> Julie Thornton
            <i class='fas fa-calendar'></i> <a href="https://gitlab.cs.ksu.edu/cs-textbooks/cis400-textbook/-/commit/f70e810044d45afbcdf6f8532b834c53bf331afe">Feb 13, 2024</a>
</p>
</div>

    
    </div>
    <script src="https://ksu-cs-textbooks.github.io/cis400/js/clipboard.min.js?1707854516" defer></script>
    <script src="https://ksu-cs-textbooks.github.io/cis400/js/perfect-scrollbar.min.js?1707854516" defer></script>
    <script src="https://ksu-cs-textbooks.github.io/cis400/js/theme.js?1707854516" defer></script>
  </body>
</html>
