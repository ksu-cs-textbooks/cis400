<!doctype html><html lang=en-us dir=ltr itemscope itemtype=http://schema.org/Article><head><meta charset=utf-8><meta name=viewport content="height=device-height,width=device-width,initial-scale=1,minimum-scale=1"><meta name=generator content="Hugo 0.128.0"><meta name=generator content="Relearn 6.0.0"><meta name=description content="For a Sharper Language"><meta name=author content="Nathan Bean"><meta name=twitter:card content="summary"><meta name=twitter:title content="Advanced C# :: K-State CIS 400 Textbook"><meta name=twitter:description content="For a Sharper Language"><meta property="og:url" content="https://textbooks.cs.ksu.edu/cis400/1-object-orientation/06-advanced-csharp/"><meta property="og:site_name" content="K-State CIS 400 Textbook"><meta property="og:title" content="Advanced C# :: K-State CIS 400 Textbook"><meta property="og:description" content="For a Sharper Language"><meta property="og:locale" content="en-us"><meta property="og:type" content="website"><meta itemprop=name content="Advanced C# :: K-State CIS 400 Textbook"><meta itemprop=description content="For a Sharper Language"><meta itemprop=datePublished content="2018-08-24T10:53:05-05:00"><meta itemprop=dateModified content="2023-08-10T15:29:34-05:00"><meta itemprop=wordCount content="4"><title>Advanced C# :: K-State CIS 400 Textbook</title>
<link href=https://textbooks.cs.ksu.edu/cis400/1-object-orientation/06-advanced-csharp/ rel=canonical type=text/html title="Advanced C# :: K-State CIS 400 Textbook"><link href=/cis400/1-object-orientation/06-advanced-csharp/index.xml rel=alternate type=application/rss+xml title="Advanced C# :: K-State CIS 400 Textbook"><link href=/cis400/1-object-orientation/06-advanced-csharp/tele.html rel=alternate type=text/html title="Advanced C# :: K-State CIS 400 Textbook"><link href=/cis400/1-object-orientation/06-advanced-csharp/embed.html rel=alternate type=text/html title="Advanced C# :: K-State CIS 400 Textbook"><link href=/cis400/css/fontawesome-all.min.css?1731949280 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/cis400/css/fontawesome-all.min.css?1731949280 rel=stylesheet></noscript><link href=/cis400/css/nucleus.css?1731949280 rel=stylesheet><link href=/cis400/css/auto-complete.css?1731949280 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/cis400/css/auto-complete.css?1731949280 rel=stylesheet></noscript><link href=/cis400/css/perfect-scrollbar.min.css?1731949280 rel=stylesheet><link href=/cis400/css/fonts.css?1731949280 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/cis400/css/fonts.css?1731949280 rel=stylesheet></noscript><link href=/cis400/css/theme.css?1731949280 rel=stylesheet><link href=/cis400/css/theme-auto.css?1731949280 rel=stylesheet id=R-variant-style><link href=/cis400/css/chroma-auto.css?1731949280 rel=stylesheet id=R-variant-chroma-style><link href=/cis400/css/variant.css?1731949280 rel=stylesheet><link href=/cis400/css/print.css?1731949280 rel=stylesheet media=print><link href=/cis400/css/format-print.css?1731949280 rel=stylesheet><script src=/cis400/js/variant.js?1731949280></script><script>window.relearn=window.relearn||{},window.relearn.relBasePath="../..",window.relearn.relBaseUri="../../..",window.relearn.absBaseUri="https://textbooks.cs.ksu.edu/cis400",window.index_js_url="/cis400/index.search.js",window.variants&&variants.init(["auto","light-theme","dark-theme"]),window.T_Copy_to_clipboard=`Copy to clipboard`,window.T_Copied_to_clipboard=`Copied to clipboard!`,window.T_Copy_link_to_clipboard=`Copy link to clipboard`,window.T_Link_copied_to_clipboard=`Copied link to clipboard!`,window.T_Reset_view=`Reset view`,window.T_View_reset=`View reset!`,window.T_No_results_found=`No results found for "{0}"`,window.T_N_results_found=`{1} results found for "{0}"`</script><link href=/cis400/css/custom.css?1731949280 rel=stylesheet></head><body class="mobile-support print disableInlineCopyToClipboard" data-url=/cis400/1-object-orientation/06-advanced-csharp/><div id=R-body class=default-animation><div id=R-body-overlay></div><nav id=R-topbar><div class=topbar-wrapper><div class=topbar-sidebar-divider></div><div class="topbar-area topbar-area-start" data-area=start><div class="topbar-button topbar-button-sidebar" data-content-empty=disable data-width-s=show data-width-m=hide data-width-l=hide><button class=topbar-control onclick=toggleNav() type=button title="Menu (CTRL+ALT+n)"><i class="fa-fw fas fa-bars"></i></button></div></div><ol class="topbar-breadcrumbs breadcrumbs highlightable" itemscope itemtype=http://schema.org/BreadcrumbList><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><a itemprop=item href=/cis400/1-object-orientation/><span itemprop=name>Object-Orientation</span></a><meta itemprop=position content="1">&nbsp;>&nbsp;</li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><span itemprop=name>Advanced C#</span><meta itemprop=position content="2"></li></ol><div class="topbar-area topbar-area-end" data-area=end><div class="topbar-button topbar-button-prev" data-content-empty=disable data-width-s=show data-width-m=show data-width-l=show><a class=topbar-control href=/cis400/1-object-orientation/05-uml/08-summary/ title="Summary (ðŸ¡)"><i class="fa-fw fas fa-chevron-left"></i></a></div><div class="topbar-button topbar-button-next" data-content-empty=disable data-width-s=show data-width-m=show data-width-l=show><a class=topbar-control href=/cis400/1-object-orientation/06-advanced-csharp/01-introduction/ title="Introduction (ðŸ¡’)"><i class="fa-fw fas fa-chevron-right"></i></a></div></div></div></nav><div id=R-main-overlay></div><main id=R-body-inner class="highlightable chapter narrow" tabindex=-1><div class=flex-block-wrapper><article class=chapter><header class=headline></header><div class=article-subheading>Chapter 6</div><h1 id=advanced-c>Advanced C#</h1><p>For a Sharper Language</p><footer class=footline></footer></article><section><h1 class=a11y-only>Subsections of Advanced C#</h1><article class=default><header class=headline></header><h1 id=introduction>Introduction</h1><p>Throughout the earlier chapters, we&rsquo;ve focused on the theoretical aspects of Object-Orientation, and discussed how those are embodied in the C# language. Before we close this section though, it would be a good idea to recognize that C# is not <em>just</em> an object-oriented language, but actually draws upon many ideas and syntax approaches that are not very object-oriented at all!</p><p>In this chapter, we&rsquo;ll examine many aspects of C# that fall outside of the object-oriented mold. Understanding how and why these constructs have entered C# will help make you a better .NET programmer, and hopefully alleviate any confusion you might have.</p><h2 id=key-terms>Key Terms</h2><p>Some key terms to learn in this chapter are:</p><ul><li>Production Languages</li><li>The <code>static</code> keyword</li><li>Generics</li><li>Nullables</li><li>Anonymous Types</li><li>Lambda Syntax</li><li>Pattern Matching</li></ul><footer class=footline></footer></article><article class=default><header class=headline></header><h1 id=production-languages>Production Languages</h1><p>It is important to understand that C# is a <em>production</em> language - i.e. one intended to be used to create real-world software. To support this goal, the developers of the C# language have made many efforts to make C# code easier to write, read, and reason about. Each new version of C# has added additional syntax and features to make the language more powerful and easier to use. In some cases, these are entirely new things the language couldn&rsquo;t do previously, and in others they are <em>syntactic sugar</em> - a kind of abbreviation of an existing syntax. Consider the following <code>if</code> statement:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=k>if</span><span class=p>(</span><span class=n>someTestFlag</span><span class=p>)</span> 
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>DoThing</span><span class=p>();</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=k>else</span> 
</span></span><span class=line><span class=cl><span class=p>{</span> 
</span></span><span class=line><span class=cl>    <span class=n>DoOtherThing</span><span class=p>();</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div><p>As the branches only execute a single expression each, this can be abbreviated as:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=k>if</span><span class=p>(</span><span class=n>someTestFlag</span><span class=p>)</span> <span class=n>DoThing</span><span class=p>();</span>
</span></span><span class=line><span class=cl><span class=k>else</span> <span class=n>DoOtherThing</span><span class=p>();</span></span></span></code></pre></div><p>Similarly, Visual Studio has evolved side-by-side with the language. For example, you have probably come to like <em>Intellisense</em> - Visual Studio&rsquo;s ability to offer descriptions of classes and methods as you type them, as well as <em>code completion</em>, where it offers to complete the statement you have been typing with a likely target. As we mentioned in our section on learning programming, these powerful features can be great for a professional, but can interfere with a novice programmer&rsquo;s learning.</p><p>Let&rsquo;s take a look at some of the features of C# that we haven&rsquo;t examined in detail yet.</p><footer class=footline></footer></article><article class=default><header class=headline></header><h1 id=the-static-keyword>The static Keyword</h1><p>To start, let&rsquo;s revisit one more keyword that causes a lot of confusion for new programmers, <code>static</code>. We mentioned it briefly when talking about encapsulation and modules, and said we could mimic a module in C# with a static class. We offered this example:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=cs>/// &lt;summary&gt;</span>
</span></span><span class=line><span class=cl><span class=cs>/// A library of vector math functions</span>
</span></span><span class=line><span class=cl><span class=cs>/// &lt;/summary&gt;</span>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=kd>static</span> <span class=k>class</span> <span class=nc>VectorMath</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=cs>/// &lt;summary&gt;</span>
</span></span><span class=line><span class=cl>    <span class=cs>/// Computes the dot product of two vectors </span>
</span></span><span class=line><span class=cl>    <span class=cs>/// &lt;/summary&gt;</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kd>static</span> <span class=kt>double</span> <span class=n>DotProduct</span><span class=p>(</span><span class=n>Vector3</span> <span class=n>a</span><span class=p>,</span> <span class=n>Vector3</span> <span class=n>b</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>a</span><span class=p>.</span><span class=n>x</span> <span class=p>*</span> <span class=n>b</span><span class=p>.</span><span class=n>x</span> <span class=p>+</span> <span class=n>a</span><span class=p>.</span><span class=n>y</span> <span class=p>*</span> <span class=n>b</span><span class=p>.</span><span class=n>y</span> <span class=p>+</span> <span class=n>a</span><span class=p>.</span><span class=n>z</span> <span class=p>*</span> <span class=n>b</span><span class=p>.</span><span class=n>z</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=cs>/// &lt;summary&gt;</span>
</span></span><span class=line><span class=cl>    <span class=cs>/// Computes the magnitude of a vector</span>
</span></span><span class=line><span class=cl>    <span class=cs>/// &lt;/summary&gt;</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kd>static</span> <span class=kt>double</span> <span class=n>Magnitude</span><span class=p>(</span><span class=n>Vector3</span> <span class=n>a</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>Math</span><span class=p>.</span><span class=n>Sqrt</span><span class=p>(</span><span class=n>Math</span><span class=p>.</span><span class=n>Pow</span><span class=p>(</span><span class=n>a</span><span class=p>.</span><span class=n>x</span><span class=p>,</span> <span class=m>2</span><span class=p>)</span> <span class=p>+</span> <span class=n>Math</span><span class=p>.</span><span class=n>Pow</span><span class=p>(</span><span class=n>a</span><span class=p>.</span><span class=n>y</span><span class=p>,</span> <span class=m>2</span><span class=p>)</span> <span class=p>+</span> <span class=n>Math</span><span class=p>.</span><span class=n>Pow</span><span class=p>(</span><span class=n>a</span><span class=p>.</span><span class=n>z</span><span class=p>,</span> <span class=m>2</span><span class=p>));</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div><p>You&rsquo;ve probably worked with the C# <code>Math</code> class before, which is declared the same way - as a static class containing static methods. For example, to compute 8 cubed, you might have used:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=n>Math</span><span class=p>.</span><span class=n>Pow</span><span class=p>(</span><span class=m>8</span><span class=p>,</span> <span class=m>3</span><span class=p>);</span></span></span></code></pre></div><p>Notice how we didn&rsquo;t construct an object from the <code>Math</code> class? In C# we <em>cannot construct static classes</em> - they simply exist as a container for static fields and methods. If you&rsquo;re thinking that doesn&rsquo;t sound very object-oriented, you&rsquo;re absolutely right. The <code>static</code> keyword allows for some very non-object-oriented behavior more in line with imperative languages like C. Bringing the idea of <code>static</code> classes into C# let programmers with an imperative background use similar techniques to what they were used to, which is why <code>static</code> classes have been a part of C# from the beginning.</p><h3 id=static-methods-in-regular-classes>Static Methods in Regular Classes</h3><p>You can also create <code>static</code> methods within a non-static class. For example, we could refactor our <code>Vector3</code> class to add a static <code>DotProduct()</code> within it:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=kd>public</span> <span class=k>struct</span> <span class=nc>Vector3</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kt>double</span> <span class=n>X</span> <span class=p>{</span><span class=k>get</span><span class=p>;</span> <span class=k>set</span><span class=p>;}</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kt>double</span> <span class=n>Y</span> <span class=p>{</span><span class=k>get</span><span class=p>;</span> <span class=k>set</span><span class=p>;}</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kt>double</span> <span class=n>Z</span> <span class=p>{</span><span class=k>get</span><span class=p>;</span> <span class=k>set</span><span class=p>;}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=cs>/// &lt;summary&gt; </span>
</span></span><span class=line><span class=cl>    <span class=cs>/// Creates a new Vector3 object</span>
</span></span><span class=line><span class=cl>    <span class=cs>/// &lt;/summary&gt;</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=n>Vector3</span><span class=p>(</span><span class=kt>double</span> <span class=n>x</span><span class=p>,</span> <span class=kt>double</span> <span class=n>y</span><span class=p>,</span> <span class=kt>double</span> <span class=n>z</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=p>.</span><span class=n>X</span> <span class=p>=</span> <span class=n>x</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=p>.</span><span class=n>Y</span> <span class=p>=</span> <span class=n>y</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=p>.</span><span class=n>Z</span> <span class=p>=</span> <span class=n>z</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=cs>/// &lt;summary&gt;</span>
</span></span><span class=line><span class=cl>    <span class=cs>/// Computes the dot product of this vector and another one </span>
</span></span><span class=line><span class=cl>    <span class=cs>/// &lt;/summary&gt;</span>
</span></span><span class=line><span class=cl>    <span class=cs>/// &lt;param name=&#34;other&#34;&gt;The other vector&lt;/param&gt;</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kt>double</span> <span class=n>DotProduct</span><span class=p>(</span><span class=n>Vector3</span> <span class=n>other</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=k>this</span><span class=p>.</span><span class=n>X</span> <span class=p>*</span> <span class=n>other</span><span class=p>.</span><span class=n>X</span> <span class=p>+</span> <span class=k>this</span><span class=p>.</span><span class=n>Y</span> <span class=p>*</span> <span class=n>other</span><span class=p>.</span><span class=n>Y</span> <span class=p>+</span> <span class=k>this</span><span class=p>.</span><span class=n>Z</span> <span class=p>*</span> <span class=n>other</span><span class=p>.</span><span class=n>Z</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=cs>/// &lt;summary&gt;</span>
</span></span><span class=line><span class=cl>    <span class=cs>/// Computes the dot product of two vectors </span>
</span></span><span class=line><span class=cl>    <span class=cs>/// &lt;/summary&gt;</span>
</span></span><span class=line><span class=cl>    <span class=cs>/// &lt;param name=&#34;a&#34;&gt;The first vector&lt;param&gt;</span>
</span></span><span class=line><span class=cl>    <span class=cs>/// &lt;param name=&#34;b&#34;&gt;The second vector&lt;/param&gt;</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kd>static</span> <span class=n>DotProduct</span><span class=p>(</span><span class=n>Vector3</span> <span class=n>a</span><span class=p>,</span> <span class=n>Vector3</span> <span class=n>b</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>a</span><span class=p>.</span><span class=n>DotProduct</span><span class=p>(</span><span class=n>b</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div><p>This method would be invoked like any other <code>static</code> method, i.e.:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=n>Vector3</span> <span class=n>a</span> <span class=p>=</span> <span class=k>new</span> <span class=n>Vector3</span><span class=p>(</span><span class=m>1</span><span class=p>,</span><span class=m>3</span><span class=p>,</span><span class=m>4</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=n>Vector3</span> <span class=n>b</span> <span class=p>=</span> <span class=k>new</span> <span class=n>Vector3</span><span class=p>(</span><span class=m>4</span><span class=p>,</span><span class=m>3</span><span class=p>,</span><span class=m>1</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=n>Vector3</span><span class=p>.</span><span class=n>DotProduct</span><span class=p>(</span><span class=n>a</span><span class=p>,</span> <span class=n>b</span><span class=p>);</span></span></span></code></pre></div><p>You can see we&rsquo;re doing the same thing as the instance method <code>DotProduct(Vector3 other)</code>, but in a library-like way.</p><h3 id=static-fields-within-regular-classes>Static Fields Within Regular Classes</h3><p>We can also declare fields as <code>static</code>, which has a meaning slightly different than static methods. Specifically, the field is <em>shared</em> amongst all instances of the class. Consider the following class:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=kd>public</span> <span class=k>class</span> <span class=nc>Tribble</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kd>private</span> <span class=kd>static</span> <span class=kt>int</span> <span class=n>count</span> <span class=p>=</span> <span class=m>1</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=n>Tribble</span><span class=p>()</span> 
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>count</span> <span class=p>*=</span> <span class=m>2</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kt>int</span> <span class=n>TotalTribbles</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>get</span> 
</span></span><span class=line><span class=cl>        <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=n>count</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div><p>If we create a single Tribble, and then ask how many total Tribbles there are:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=kt>var</span> <span class=n>t</span> <span class=p>=</span> <span class=k>new</span> <span class=n>Tribble</span><span class=p>();</span>
</span></span><span class=line><span class=cl><span class=n>t</span><span class=p>.</span><span class=n>TotalTribbles</span><span class=p>;</span> <span class=c1>// expect this to be 2</span></span></span></code></pre></div><p>We would expect the value to be 2, as <code>count</code> was initialized to <code>1</code> and then multiplied by <code>2</code> in the Tribble constructor. But if we construct <em>two</em> Tribbles:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=kt>var</span> <span class=n>t</span> <span class=p>=</span> <span class=k>new</span> <span class=n>Tribble</span><span class=p>();</span>
</span></span><span class=line><span class=cl><span class=kt>var</span> <span class=n>u</span> <span class=p>=</span> <span class=k>new</span> <span class=n>Tribble</span><span class=p>();</span>
</span></span><span class=line><span class=cl><span class=n>t</span><span class=p>.</span><span class=n>TotalTribbles</span><span class=p>;</span> <span class=c1>// will be 4</span>
</span></span><span class=line><span class=cl><span class=n>u</span><span class=p>.</span><span class=n>TotalTribbles</span><span class=p>;</span> <span class=c1>// will be 4</span></span></span></code></pre></div><p>This is because <em>all instances of Tribble share the <code>count</code> field</em>. So it is initialized to <code>1</code>, multiplied by <code>2</code> when tribble <code>a</code> was constructed, and multiplied by <code>2</code> again when tribble <code>b</code> was constructed. Hence $1 * 2 * 2 = 4$. Every additional Tribble we construct will double the total population (which is the trouble with Tribbles).</p><h2 id=why-call-this-static>Why Call This Static?</h2><p>Which brings us to a point of confusion for most students, <em>why call this static</em>? After all, doesn&rsquo;t the word <em>static</em> indicate <em>unchanging</em>?</p><p>The answer lies in how memory is allocated in a program. Sometimes we know in advance how much memory we need to hold a variable, i.e. a <code>double</code> in C# requires 64 bits of memory. We call these types <em>value types</em> in C#, as the value is stored directly in memory where our variable is allocated. Other types, i.e. a <code>List&lt;T></code>, we may not know exactly how much memory will be required. We call these <em>reference</em> types. Instead of the variable holding a binary value, it holds a binary <em>address</em> to <em>another</em> location in memory where the list data is stored (hence, it is a <em>reference</em>).</p><p>When your program runs, it gets assigned a big chunk of memory from the operating system. Your program is loaded into the first part of this memory, and the remaining memory is used to hold variable values as the program runs. If you imagine that memory as a long shelf, we put the program instructions and any literal values to the far left of this shelf. Then, as the program runs and we need to create space for variables, we either put them on the left side or right side of the remaining shelf space. Value types, which we know will only exist for the duration of their scope (i.e. the method they are defined in) go to the left, and once we&rsquo;ve ended that scope we remove them. Similarly, the references we create (holding the address of memory of reference types) go on the left. The <em>data</em> of the reference types however, go on the right, because we don&rsquo;t know when we&rsquo;ll be done with them.</p><p>We call the kind of memory allocation that happens on the left <em>static</em>, as we know it should exist as long as the variable is in scope. Hence, the <code>static</code> keyword. In lower-level languages like C, we have to manually allocate space for our reference types (hence, not static). C# is a <em>memory managed</em> language in that we don&rsquo;t need to manually allocate and deallocate space for reference types, but we <em>do</em> allocate space every time we use the <code>new</code> keyword, and the garbage collector frees any space it decides we&rsquo;re done with (because we no longer have references pointing at it). So pointers <em>do</em> exist in C#, they are just &ldquo;under the hood&rdquo;.</p><p>By the way, the left side of the shelf we call the <strong>Stack</strong>, and the right the <strong>Heap</strong>. This is the source of the name for a <strong>Stack Overflow Exception</strong> - it means your program used up all the available space in the <strong>Stack</strong>, but still needs more. This is why it typically happens with infinite loops or recursion - they keep allocating variables on the stack until they run out of space.</p><p>Memory allocation and pointers is covered in detail in <strong>CIS 308 - C Language Lab</strong>, and you&rsquo;ll learn more about how programs run and the heap and stack in <strong>CIS 450 - Computer Architecture and Operations</strong>.</p><footer class=footline></footer></article><article class=default><header class=headline></header><h1 id=operator-overloading>Operator Overloading</h1><p>C# allows you to override most of the language&rsquo;s operators to provide class-specific functionality. The user-defined casts <a href=https://textbooks.cs.ksu.edu/cis400/1-object-orientation/02-polymorphism/05-casting/ rel=external target=_blank>we discussed earlier</a> are one example of this.</p><p>Perhaps the most obvious of these are the arithmetic operators, i.e. <code>+</code>, <code>-</code>, <code>\</code>, <code>*</code>. Consider our <code>Vector3</code> class we defined earlier. If we wanted to overload the <code>+</code> operator to allow for vector addition, we could add it to the class definition:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=cs>/// &lt;summary&gt;</span>
</span></span><span class=line><span class=cl><span class=cs>/// A class representing a 3-element vector</span>
</span></span><span class=line><span class=cl><span class=cs>/// &lt;/summary&gt;</span>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=k>class</span> <span class=nc>Vector3</span> 
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=cs>/// &lt;summary&gt;The x-coordinate&lt;/summary&gt;</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kt>double</span> <span class=n>X</span> <span class=p>{</span> <span class=k>get</span><span class=p>;</span> <span class=k>set</span><span class=p>;}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=cs>/// &lt;summary&gt;The y-coordinate&lt;/summary&gt;</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kt>double</span> <span class=n>Y</span> <span class=p>{</span> <span class=k>get</span><span class=p>;</span> <span class=k>set</span><span class=p>;}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=cs>/// &lt;summary&gt;The z-coordinate&lt;/summary&gt;</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kt>double</span> <span class=n>Z</span> <span class=p>{</span> <span class=k>get</span><span class=p>;</span> <span class=k>set</span><span class=p>;}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=cs>/// &lt;summary&gt;</span>
</span></span><span class=line><span class=cl>    <span class=cs>/// Constructs a new vector</span>
</span></span><span class=line><span class=cl>    <span class=cs>/// &lt;/summary&gt;</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=n>Vector3</span><span class=p>(</span><span class=kt>double</span> <span class=n>x</span><span class=p>,</span> <span class=kt>double</span> <span class=n>y</span><span class=p>,</span> <span class=kt>double</span> <span class=n>z</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>X</span> <span class=p>=</span> <span class=n>x</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=n>Y</span> <span class=p>=</span> <span class=n>y</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=n>Z</span> <span class=p>=</span> <span class=n>z</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=cs>/// Adds two vectors using vector addition</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kd>static</span> <span class=n>Vector3</span> <span class=kd>operator</span> <span class=p>+(</span><span class=n>Vector3</span> <span class=n>v1</span><span class=p>,</span> <span class=n>Vector3</span> <span class=n>v2</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=k>new</span> <span class=n>Vector3</span><span class=p>(</span><span class=n>v1</span><span class=p>.</span><span class=n>X</span> <span class=p>+</span> <span class=n>v2</span><span class=p>.</span><span class=n>X</span><span class=p>,</span> <span class=n>v1</span><span class=p>.</span><span class=n>Y</span> <span class=p>+</span> <span class=n>v2</span><span class=p>.</span><span class=n>Y</span><span class=p>,</span> <span class=n>v1</span><span class=p>.</span><span class=n>Z</span> <span class=p>+</span> <span class=n>v2</span><span class=p>.</span><span class=n>Z</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div><p>Note that we have to make the method <code>static</code>, and include the <code>operator</code> keyword, along with the symbol of the operation. This vector addition we are performing here is also a <em>binary</em> operation (meaning it takes two parameters). We can also define <em>unary</em> operations, like negation:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=cs>/// Negates a vector</span>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=kd>static</span> <span class=n>Vector3</span> <span class=kd>operator</span> <span class=p>-(</span><span class=n>Vector3</span> <span class=n>v</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=k>new</span> <span class=n>Vector3</span><span class=p>(-</span><span class=n>v</span><span class=p>.</span><span class=n>X</span><span class=p>,</span> <span class=p>-</span><span class=n>v</span><span class=p>.</span><span class=n>Y</span><span class=p>,</span> <span class=p>-</span><span class=n>v</span><span class=p>.</span><span class=n>Z</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div><p>The full list of <a href=https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/operators/operator-overloading#overloadable-operators rel=external target=_blank>overloadable operators is found in the C# documentation</a></p><footer class=footline></footer></article><article class=default><header class=headline></header><h1 id=generics>Generics</h1><p>Generics expand the type system of C# by allowing classes and structs to be defined with a generic type parameter, which will be instantiated when it is used in code. This avoids the necessity of writing similar specialized classes that each work with a different data type. You&rsquo;ve used examples of this extensively in your <em>CIS 300 - Data Structures</em> course.</p><p>For example, the generic <code>List&lt;T></code> can be used to create a list of any type. If we want a list of integers, we declare it using <code>List&lt;int></code>, and if we want a list of booleans we declare it using <code>List&lt;bool></code>. Both use the same generic list class.</p><p>You can declare your own generics as well. Say you need a binary tree, but want to be able to support different types. We can declare a generic <code>BinaryTreeNode&lt;T></code> class:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=cs>/// &lt;summary&gt;</span>
</span></span><span class=line><span class=cl><span class=cs>/// A class representing a node in a binary tree </span>
</span></span><span class=line><span class=cl><span class=cs>/// &lt;summary&gt;</span>
</span></span><span class=line><span class=cl><span class=cs>/// &lt;typeparam name=&#34;T&#34;&gt;The type to hold in the tree&lt;/typeparam&gt;</span>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=k>class</span> <span class=nc>BinaryTreeNode</span><span class=p>&lt;</span><span class=n>T</span><span class=p>&gt;</span> 
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=cs>/// &lt;summary&gt; </span>
</span></span><span class=line><span class=cl>    <span class=cs>/// The value held in this node of the tree </span>
</span></span><span class=line><span class=cl>    <span class=cs>/// &lt;/summary&gt;</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=n>T</span> <span class=n>Value</span> <span class=p>{</span> <span class=k>get</span><span class=p>;</span> <span class=k>set</span><span class=p>;</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=cs>/// &lt;summary&gt; </span>
</span></span><span class=line><span class=cl>    <span class=cs>/// The left branch of this node</span>
</span></span><span class=line><span class=cl>    <span class=cs>/// &lt;/summary&gt;</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=n>BinaryTreeNode</span><span class=p>&lt;</span><span class=n>T</span><span class=p>&gt;</span> <span class=n>Left</span> <span class=p>{</span> <span class=k>get</span><span class=p>;</span> <span class=k>set</span><span class=p>;</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=cs>/// &lt;summary&gt; </span>
</span></span><span class=line><span class=cl>    <span class=cs>/// The right branch of this node</span>
</span></span><span class=line><span class=cl>    <span class=cs>/// &lt;/summary&gt;</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=n>BinaryTreeNode</span><span class=p>&lt;</span><span class=n>T</span><span class=p>&gt;</span> <span class=n>Right</span> <span class=p>{</span> <span class=k>get</span><span class=p>;</span> <span class=k>set</span><span class=p>;</span> <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div><p>Note the use of <code>&lt;typeparam></code> in the XML comments. You should always document your generic type parameters when using them.</p><footer class=footline></footer></article><article class=default><header class=headline></header><h1 id=nullables>Nullables</h1><p>Returning to the distinction between value and reference types, a <em>value</em> type stores its value directly in the variable, while a <em>reference</em> type stores an address to another location in memory that has been allocated to hold the value. This is why reference types can be <code>null</code> - this indicates they aren&rsquo;t pointing at anything. In contrast, value types cannot be null - they <em>always</em> contain a value. However, there are times it would be convenient to have a value type be allowed to be null.</p><p>For these circumstances, we can use the <a href=https://docs.microsoft.com/en-us/dotnet/api/system.nullable-1 rel=external target=_blank>Nullable<t></a> generic type, which allows the variable to represent the same values as before, <em>plus</em> <code>null</code>. It does this by wrapping the value in a simple structure that stores the value in its <code>Value</code> property, and also has a boolean property for <code>HasValue</code>. More importantly, it supports explicit casting into the template type, so we can still use it in expressions, i.e.:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=n>Nullable</span><span class=p>&lt;</span><span class=kt>int</span><span class=p>&gt;</span> <span class=n>a</span> <span class=p>=</span> <span class=m>5</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kt>int</span> <span class=n>b</span> <span class=p>=</span> <span class=m>6</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kt>int</span> <span class=n>c</span> <span class=p>=</span> <span class=p>(</span><span class=kt>int</span><span class=p>)</span><span class=n>a</span> <span class=p>+</span> <span class=n>b</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=c1>// This evaluates to 11.</span></span></span></code></pre></div><p>However, if the value is <code>null</code>, we&rsquo;ll get an <code>InvalidOperationException</code> with the message <em>&ldquo;Nullable object must have a value&rdquo;</em>.</p><p>There is also syntactic sugar for declaring nullable types. We can follow the type with a question mark (<code>?</code>), i.e.:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=kt>int?</span> <span class=n>a</span> <span class=p>=</span> <span class=m>5</span><span class=p>;</span></span></span></code></pre></div><p>Which works the same as <code>Nullable&lt;int> a = 5;</code>, but is less typing.</p><footer class=footline></footer></article><article class=default><header class=headline></header><h1 id=anonymous-types>Anonymous Types</h1><p>Another new addition to C# is <a href=https://docs.microsoft.com/en-us/dotnet/csharp/programming-guide/classes-and-structs/anonymous-types rel=external target=_blank>anonymous types</a>. These are read-only objects whose type is created by the compiler rather than being defined in code. They are created using syntax very similar to object initializer syntax.</p><p>For example, the line:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=kt>var</span> <span class=n>name</span> <span class=p>=</span> <span class=k>new</span> <span class=p>{</span> <span class=n>First</span><span class=p>=</span><span class=s>&#34;Jack&#34;</span><span class=p>,</span> <span class=n>Last</span><span class=p>=</span><span class=s>&#34;Sprat&#34;</span> <span class=p>};</span></span></span></code></pre></div><p>Creates an anonymous object with properties <code>First</code> and <code>Last</code> and assigns it to the variable name. Note we have to use <code>var</code>, because the object does not have a defined type. Anonymous types are primarily used with LINQ, which we&rsquo;ll cover in the future.</p><footer class=footline></footer></article><article class=default><header class=headline></header><h1 id=lambda-syntax>Lambda Syntax</h1><p>The next topic we&rsquo;ll cover is <em>lambda syntax</em>. You may remember from CIS 115 the <em>Turing Machine</em>, which was Alan Turing&rsquo;s theoretical computer he used to prove a lot of theoretical computer science ideas. Another mathematician of the day, Alan Church, created his own equivalent of the Turing machine expressed as a formal logic system, <a href=https://en.wikipedia.org/wiki/Lambda_calculus rel=external target=_blank>Lambda calculus</a>. Broadly speaking, the two approaches do the same thing, but are expressed very differently - the Turing machine is an (imaginary) hardware-based system, while Lambda Calculus is a formal symbolic system grounded in mathematical logic. Computer scientists develop familiarity with both conceptions, and some of the most important work in our field is the result of putting them together.</p><p>But they do represent two different perspectives, which influenced different programming language paradigms. The Turing machine you worked with in CIS 115 is very similar to assembly language, and the imperative programming paradigm draws strongly upon this approach. In contrast, the logical and functional programming paradigms were more influenced by Lambda calculus. This difference in perspective also appears in how functions are commonly written in these different paradigms. An imperative language tends to define functions something like:</p><div class=highlight><pre tabindex=0><code>Add(param1, param2)
{
    return param1 + param2;
}</code></pre></div><p>While a functional language might express the same idea as:</p><div class=highlight><pre tabindex=0><code>(param1, param2) =&gt; param1 + param2</code></pre></div><p>This &ldquo;arrow&rdquo; or &ldquo;lambda&rdquo; syntax has since been adopted as an alternative way of writing functions in many modern languages, including C#. In C#, it is primarily used as syntactic sugar, to replace what would otherwise be a lot of typing to express a simple idea.</p><p>Consider the case where we want to search a <code>List&lt;string> AnimalList</code> for a string containing the substring <code>"kitten"</code>. The <code>List.Find()</code> takes a predicate - a static method that can be invoked to find an item in the list. We have to define a static method, i.e.:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=kd>private</span> <span class=kd>static</span> <span class=kt>bool</span> <span class=n>FindKittenSubstring</span><span class=p>(</span><span class=kt>string</span> <span class=n>fullString</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>fullString</span><span class=p>.</span><span class=n>Contains</span><span class=p>(</span><span class=s>&#34;kitten&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div><p>From this method, we create a predicate:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=n>Predicate</span><span class=p>&lt;</span><span class=kt>string</span><span class=p>&gt;</span> <span class=n>findKittenPredicate</span> <span class=p>=</span> <span class=n>FindKittenSubstring</span><span class=p>;</span></span></span></code></pre></div><p>Then we can pass that predicate into our <code>Find</code>:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=kt>bool</span> <span class=n>containsKitten</span> <span class=p>=</span> <span class=n>AnimalList</span><span class=p>.</span><span class=n>Find</span><span class=p>(</span><span class=n>findKittenPredicate</span><span class=p>);</span></span></span></code></pre></div><p>This is quite a lot of work to express a simple idea. C# introduced lambda syntax as a way to streamline it. The same operation using lambda syntax is:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=kt>bool</span> <span class=n>containsKitten</span> <span class=p>=</span> <span class=n>AnimalList</span><span class=p>.</span><span class=n>Find</span><span class=p>((</span><span class=n>fullString</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=n>fullString</span><span class=p>.</span><span class=n>Contains</span><span class=p>(</span><span class=s>&#34;kitten&#34;</span><span class=p>));</span></span></span></code></pre></div><p>Much cleaner to write. The C# compiler is converting this lambda expression into a predicate as it compiles, but we no longer have to write it! You&rsquo;ll see this syntax in your xUnit tests as well as when we cover LINQ. It has also been adapted to simplify writing getters and setters. Consider this case:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=kd>public</span> <span class=k>class</span> <span class=nc>Person</span> 
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kt>string</span> <span class=n>LastName</span> <span class=p>{</span> <span class=k>get</span><span class=p>;</span> <span class=k>set</span><span class=p>;</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kt>string</span> <span class=n>FirstName</span> <span class=p>{</span> <span class=k>get</span><span class=p>;</span> <span class=k>set</span><span class=p>;</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kt>string</span> <span class=n>FullName</span> 
</span></span><span class=line><span class=cl>    <span class=p>{</span> 
</span></span><span class=line><span class=cl>        <span class=k>get</span> 
</span></span><span class=line><span class=cl>        <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=n>FirstName</span> <span class=p>+</span> <span class=s>&#34; &#34;</span> <span class=p>+</span> <span class=n>LastName</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div><p>We could instead express this as:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=kd>public</span> <span class=k>class</span> <span class=nc>Person</span> 
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kt>string</span> <span class=n>LastName</span> <span class=p>{</span> <span class=k>get</span><span class=p>;</span> <span class=k>set</span><span class=p>;</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kt>string</span> <span class=n>FirstName</span> <span class=p>{</span> <span class=k>get</span><span class=p>;</span> <span class=k>set</span><span class=p>;</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kt>string</span> <span class=n>FullName</span> <span class=p>=&gt;</span> <span class=n>FirstName</span> <span class=p>+</span> <span class=s>&#34; &#34;</span> <span class=p>+</span> <span class=n>LastName</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div><p>In fact, all methods that return the result of a single expression can be written this way:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=kd>public</span> <span class=k>class</span> <span class=nc>VectorMath</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kt>double</span> <span class=n>Add</span><span class=p>(</span><span class=n>Vector</span> <span class=n>a</span><span class=p>,</span> <span class=n>Vector</span> <span class=n>b</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=k>new</span> <span class=n>Vector</span><span class=p>(</span><span class=n>a</span><span class=p>.</span><span class=n>X</span> <span class=p>+</span> <span class=n>b</span><span class=p>.</span><span class=n>X</span><span class=p>,</span> <span class=n>a</span><span class=p>.</span><span class=n>Y</span> <span class=p>+</span> <span class=n>b</span><span class=p>.</span><span class=n>Y</span><span class=p>,</span> <span class=n>a</span><span class=p>.</span><span class=n>Z</span> <span class=p>+</span> <span class=n>b</span><span class=p>.</span><span class=n>Z</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div><footer class=footline></footer></article><article class=default><header class=headline></header><h1 id=pattern-matching>Pattern Matching</h1><p>Pattern matching is another idea common to functional languages that has gradually crept into C#. Pattern matching refers to extracting information from structured data by matching the shape of that data.</p><p>We&rsquo;ve already seen the pattern-matching is operator <a href=https://textbooks.cs.ksu.edu/cis400/1-object-orientation/02-polymorphism/05-casting/ rel=external target=_blank>in our discussion of casting</a>. This allows us to extract the <em>cast</em> version of a variable and assign it to a new one:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=k>if</span><span class=p>(</span><span class=n>oldVariable</span> <span class=k>is</span> <span class=n>SpecificType</span> <span class=n>newVariable</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// within this block newVariable is (SpecificType)oldVariable</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div><p>The <code>switch</code> statement is also an example of pattern matching. The traditional version only matched constant values, i.e.:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=k>switch</span><span class=p>(</span><span class=n>choice</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>case</span> <span class=s>&#34;1&#34;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=c1>// Do something</span>
</span></span><span class=line><span class=cl>        <span class=k>break</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>case</span> <span class=s>&#34;2&#34;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=c1>// Do something else</span>
</span></span><span class=line><span class=cl>        <span class=k>break</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>case</span> <span class=s>&#34;3&#34;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=c1>// Do a third thing</span>
</span></span><span class=line><span class=cl>        <span class=k>break</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>default</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=c1>// Do a default action</span>
</span></span><span class=line><span class=cl>        <span class=k>break</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div><p>However, in C# version 7.0, this has been expanded to also match patterns. For example, given a <code>Square</code>, <code>Circle</code>, and <code>Rectangle</code> class that all extend a <code>Shape</code> class, we can write a method to find the area using a switch:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=kd>public</span> <span class=kd>static</span> <span class=kt>double</span> <span class=n>ComputeCircumference</span><span class=p>(</span><span class=n>Shape</span> <span class=n>shape</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>switch</span><span class=p>(</span><span class=n>shape</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>case</span> <span class=n>Square</span> <span class=n>s</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=m>4</span> <span class=p>*</span> <span class=n>s</span><span class=p>.</span><span class=n>Side</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=k>case</span> <span class=n>Circle</span> <span class=n>c</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=n>c</span><span class=p>.</span><span class=n>Radius</span> <span class=p>*</span> <span class=m>2</span> <span class=p>*</span> <span class=n>Math</span><span class=p>.</span><span class=n>PI</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=k>case</span> <span class=n>Rectangle</span> <span class=n>r</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=m>2</span> <span class=p>*</span> <span class=n>r</span><span class=p>.</span><span class=n>Length</span> <span class=p>+</span> <span class=m>2</span> <span class=p>*</span> <span class=n>r</span><span class=p>.</span><span class=n>Height</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=k>default</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=k>throw</span> <span class=k>new</span> <span class=n>ArgumentException</span><span class=p>(</span>
</span></span><span class=line><span class=cl>                <span class=n>message</span><span class=p>:</span> <span class=s>&#34;shape is not a recognized shape&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=n>paramName</span><span class=p>:</span> <span class=n>nameof</span><span class=p>(</span><span class=n>shape</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div><p>Note that here we match the type of the <code>shape</code> <em>and</em> cast it to that type making it available in the provided variable, i.e. <code>case Square s:</code> matches if <code>shape</code> can be cast to a <code>Square</code>, and <code>s</code> is the result of that cast operation.</p><p>This is further expanded upon with the use of <code>when</code> clauses, i.e. we could add a special case for a circle or square with a circumference of 0:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=kd>public</span> <span class=kd>static</span> <span class=kt>double</span> <span class=n>ComputeCircumference</span><span class=p>(</span><span class=n>Shape</span> <span class=n>shape</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>switch</span><span class=p>(</span><span class=n>shape</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>case</span> <span class=n>Square</span> <span class=n>s</span> <span class=n>when</span> <span class=n>s</span><span class=p>.</span><span class=n>Side</span> <span class=p>==</span> <span class=m>0</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=k>case</span> <span class=n>Circle</span> <span class=n>c</span> <span class=n>when</span> <span class=n>c</span><span class=p>.</span><span class=n>Radius</span> <span class=p>==</span> <span class=m>0</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=m>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=k>case</span> <span class=n>Square</span> <span class=n>s</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=m>4</span> <span class=p>*</span> <span class=n>s</span><span class=p>.</span><span class=n>Side</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=k>case</span> <span class=n>Circle</span> <span class=n>c</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=n>c</span><span class=p>.</span><span class=n>Radius</span> <span class=p>*</span> <span class=m>2</span> <span class=p>*</span> <span class=n>Math</span><span class=p>.</span><span class=n>PI</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=k>case</span> <span class=n>Rectangle</span> <span class=n>r</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=m>2</span> <span class=p>*</span> <span class=n>r</span><span class=p>.</span><span class=n>Length</span> <span class=p>+</span> <span class=m>2</span> <span class=p>*</span> <span class=n>r</span><span class=p>.</span><span class=n>Height</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=k>default</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=k>throw</span> <span class=k>new</span> <span class=n>ArgumentException</span><span class=p>(</span>
</span></span><span class=line><span class=cl>                <span class=n>message</span><span class=p>:</span> <span class=s>&#34;shape is not a recognized shape&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=n>paramName</span><span class=p>:</span> <span class=n>nameof</span><span class=p>(</span><span class=n>shape</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div><p>The <code>when</code> applies conditions to the match that only allow a match when the corresponding condition is true.</p><div class="box notices cstyle info"><div class=box-label><i class="fa-fw fas fa-info-circle"></i> Info</div><div class=box-content><p>C# 8.0, which is currently in preview, has <a href=https://docs.microsoft.com/en-us/archive/msdn-magazine/2019/may/csharp-8-0-pattern-matching-in-csharp-8-0 rel=external target=_blank>expanded greatly upon pattern matching</a>, adding exciting new features, such as the switch expression, tuples, and deconstruction operator.</p></div></div><footer class=footline></footer></article><article class=default><header class=headline></header><h1 id=summary>Summary</h1><p>In this chapter we looked at some of the features of C# that aren&rsquo;t directly related to object-orientation, including many drawn from imperative or functional paradigms. Some have been with the language since the beginning, such as the <code>static</code> keyword, while others have recently been added, like pattern matching.</p><p>Each addition has greatly expanded the power and usability of C# - consider generics, whose introduction brought entirely new (and much more performant) library collections like <code>List&lt;T></code>, <code>Dictionary&lt;T></code>, and <code>HashSet&lt;T></code>. Others have lead to simpler and cleaner code, like the use of Lambda expressions. Perhaps most important is the realization that programming languages often continue to evolve beyond their original conceptions.</p><footer class=footline></footer></article></section></div></main><div class=git-footer><p class=theme-version-footer>6.0.0</p><p>Last modified by:
<i class='fas fa-user'></i> Russell Feldhausen
<i class='fas fa-calendar'></i> <a href=https://github.com/ksu-cs-textbooks/cis400/commit/681e5c9c43e3ac6de614c2cc74487702fd43cab7>Aug 10, 2023</a></p></div></div><script src=/cis400/js/clipboard.min.js?1731949280 defer></script><script src=/cis400/js/perfect-scrollbar.min.js?1731949280 defer></script><script src=/cis400/js/theme.js?1731949280 defer></script></body></html>