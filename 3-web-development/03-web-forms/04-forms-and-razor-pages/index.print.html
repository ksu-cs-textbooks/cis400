<!doctype html><html lang=en-us dir=ltr itemscope itemtype=http://schema.org/Article><head><meta charset=utf-8><meta name=viewport content="height=device-height,width=device-width,initial-scale=1,minimum-scale=1"><meta name=generator content="Hugo 0.128.0"><meta name=generator content="Relearn 6.0.0"><meta name=description content="While C# does provide utilities for parsing URL-encoded strings, the functionality of parsing incoming form data is built into the ASP.NET response handling. Thus, when writing a Razor page application, we don’t need to perform decoding on the form data - it has already been done for us. There are several strategies built into Razor Pages to access this information:
The Request Object The first of these is the HttpRequest object, which is available as the Request property within a Page."><meta name=author content="Nathan Bean"><meta name=twitter:card content="summary"><meta name=twitter:title content="Razor Pages and Form Data :: K-State CIS 400 Textbook"><meta name=twitter:description content="While C# does provide utilities for parsing URL-encoded strings, the functionality of parsing incoming form data is built into the ASP.NET response handling. Thus, when writing a Razor page application, we don’t need to perform decoding on the form data - it has already been done for us. There are several strategies built into Razor Pages to access this information:
The Request Object The first of these is the HttpRequest object, which is available as the Request property within a Page."><meta property="og:url" content="https://textbooks.cs.ksu.edu/cis400/3-web-development/03-web-forms/04-forms-and-razor-pages/"><meta property="og:site_name" content="K-State CIS 400 Textbook"><meta property="og:title" content="Razor Pages and Form Data :: K-State CIS 400 Textbook"><meta property="og:description" content="While C# does provide utilities for parsing URL-encoded strings, the functionality of parsing incoming form data is built into the ASP.NET response handling. Thus, when writing a Razor page application, we don’t need to perform decoding on the form data - it has already been done for us. There are several strategies built into Razor Pages to access this information:
The Request Object The first of these is the HttpRequest object, which is available as the Request property within a Page."><meta property="og:locale" content="en-us"><meta property="og:type" content="article"><meta property="article:section" content="Web Development"><meta property="article:published_time" content="2018-08-24T10:53:26-05:00"><meta property="article:modified_time" content="2024-04-22T16:44:57-05:00"><meta itemprop=name content="Razor Pages and Form Data :: K-State CIS 400 Textbook"><meta itemprop=description content="While C# does provide utilities for parsing URL-encoded strings, the functionality of parsing incoming form data is built into the ASP.NET response handling. Thus, when writing a Razor page application, we don’t need to perform decoding on the form data - it has already been done for us. There are several strategies built into Razor Pages to access this information:
The Request Object The first of these is the HttpRequest object, which is available as the Request property within a Page."><meta itemprop=datePublished content="2018-08-24T10:53:26-05:00"><meta itemprop=dateModified content="2024-04-22T16:44:57-05:00"><meta itemprop=wordCount content="764"><title>Razor Pages and Form Data :: K-State CIS 400 Textbook</title>
<link href=https://textbooks.cs.ksu.edu/cis400/3-web-development/03-web-forms/04-forms-and-razor-pages/ rel=canonical type=text/html title="Razor Pages and Form Data :: K-State CIS 400 Textbook"><link href=/cis400/3-web-development/03-web-forms/04-forms-and-razor-pages/index.xml rel=alternate type=application/rss+xml title="Razor Pages and Form Data :: K-State CIS 400 Textbook"><link href=/cis400/3-web-development/03-web-forms/04-forms-and-razor-pages/tele.html rel=alternate type=text/html title="Razor Pages and Form Data :: K-State CIS 400 Textbook"><link href=/cis400/3-web-development/03-web-forms/04-forms-and-razor-pages/embed.html rel=alternate type=text/html title="Razor Pages and Form Data :: K-State CIS 400 Textbook"><link href=/cis400/css/fontawesome-all.min.css?1733760446 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/cis400/css/fontawesome-all.min.css?1733760446 rel=stylesheet></noscript><link href=/cis400/css/nucleus.css?1733760446 rel=stylesheet><link href=/cis400/css/auto-complete.css?1733760446 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/cis400/css/auto-complete.css?1733760446 rel=stylesheet></noscript><link href=/cis400/css/perfect-scrollbar.min.css?1733760446 rel=stylesheet><link href=/cis400/css/fonts.css?1733760446 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/cis400/css/fonts.css?1733760446 rel=stylesheet></noscript><link href=/cis400/css/theme.css?1733760446 rel=stylesheet><link href=/cis400/css/theme-auto.css?1733760446 rel=stylesheet id=R-variant-style><link href=/cis400/css/chroma-auto.css?1733760446 rel=stylesheet id=R-variant-chroma-style><link href=/cis400/css/variant.css?1733760446 rel=stylesheet><link href=/cis400/css/print.css?1733760446 rel=stylesheet media=print><link href=/cis400/css/format-print.css?1733760446 rel=stylesheet><script src=/cis400/js/variant.js?1733760446></script><script>window.relearn=window.relearn||{},window.relearn.relBasePath="../../..",window.relearn.relBaseUri="../../../..",window.relearn.absBaseUri="https://textbooks.cs.ksu.edu/cis400",window.index_js_url="/cis400/index.search.js",window.variants&&variants.init(["auto","light-theme","dark-theme"]),window.T_Copy_to_clipboard=`Copy to clipboard`,window.T_Copied_to_clipboard=`Copied to clipboard!`,window.T_Copy_link_to_clipboard=`Copy link to clipboard`,window.T_Link_copied_to_clipboard=`Copied link to clipboard!`,window.T_Reset_view=`Reset view`,window.T_View_reset=`View reset!`,window.T_No_results_found=`No results found for "{0}"`,window.T_N_results_found=`{1} results found for "{0}"`</script><link href=/cis400/css/custom.css?1733760446 rel=stylesheet></head><body class="mobile-support print disableInlineCopyToClipboard" data-url=/cis400/3-web-development/03-web-forms/04-forms-and-razor-pages/><div id=R-body class=default-animation><div id=R-body-overlay></div><nav id=R-topbar><div class=topbar-wrapper><div class=topbar-sidebar-divider></div><div class="topbar-area topbar-area-start" data-area=start><div class="topbar-button topbar-button-sidebar" data-content-empty=disable data-width-s=show data-width-m=hide data-width-l=hide><button class=topbar-control onclick=toggleNav() type=button title="Menu (CTRL+ALT+n)"><i class="fa-fw fas fa-bars"></i></button></div></div><ol class="topbar-breadcrumbs breadcrumbs highlightable" itemscope itemtype=http://schema.org/BreadcrumbList><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><a itemprop=item href=/cis400/3-web-development/><span itemprop=name>Web Development</span></a><meta itemprop=position content="1">&nbsp;>&nbsp;</li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><a itemprop=item href=/cis400/3-web-development/03-web-forms/><span itemprop=name>Form Data</span></a><meta itemprop=position content="2">&nbsp;>&nbsp;</li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><span itemprop=name>Razor Pages and Form Data</span><meta itemprop=position content="3"></li></ol><div class="topbar-area topbar-area-end" data-area=end><div class="topbar-button topbar-button-prev" data-content-empty=disable data-width-s=show data-width-m=show data-width-l=show><a class=topbar-control href=/cis400/3-web-development/03-web-forms/03-form-data/ title="Form Data (🡐)"><i class="fa-fw fas fa-chevron-left"></i></a></div><div class="topbar-button topbar-button-next" data-content-empty=disable data-width-s=show data-width-m=show data-width-l=show><a class=topbar-control href=/cis400/3-web-development/03-web-forms/05-validation/ title="Validation (🡒)"><i class="fa-fw fas fa-chevron-right"></i></a></div></div></div></nav><div id=R-main-overlay></div><main id=R-body-inner class="highlightable default" tabindex=-1><div class=flex-block-wrapper><article class=default><header class=headline></header><h1 id=razor-pages-and-form-data>Razor Pages and Form Data</h1><p>While C# does provide utilities for parsing URL-encoded strings, the functionality of parsing incoming form data is built into the ASP.NET response handling. Thus, when writing a Razor page application, we don&rsquo;t need to perform decoding on the form data - it has already been done for us. There are several strategies built into Razor Pages to access this information:</p><h3 id=the-request-object>The Request Object</h3><p>The first of these is the <a href="https://docs.microsoft.com/en-us/dotnet/api/system.web.httprequest?view=netframework-4.8" rel=external target=_blank>HttpRequest</a> object, which is available as the <code>Request</code> property within a <code>Page</code>. This object provides access to the <code>QueryString</code> and <code>Form</code>, as well as <code>Cookies</code>, <code>ServerVariables</code> and more.</p><p>If the form was submitted as a GET request, then the <code>Request.QueryString</code> is a collection of key-value pairs used like a dictionary, i.e. to access the value of the input with name &ldquo;Color&rdquo;, we would use: <code>Request.QueryString["Color"]</code>.</p><p>Similarly, the <code>Form</code> also exposes the form content as a collection of key-value pairs, so we could access a POST request&rsquo;s input with the name &ldquo;Color&rdquo; value with <code>Request.Form["Color"]</code>.</p><p>Finally, the request also allows for checking <em>both</em> collections using its own accessor property, i.e. <code>Request["Color"]</code> would provide the submitted value for the input &ldquo;Color&rdquo; if it was sent with <em>either</em> a GET or POST request.</p><h3 id=parameter-binding>Parameter Binding</h3><p>A second approach to accessing form data in ASP.NET is <a href=https://docs.microsoft.com/en-us/aspnet/web-api/overview/formats-and-model-binding/parameter-binding-in-aspnet-web-api rel=external target=_blank>Parameter Binding</a>. You&rsquo;ve already seen the <code>OnGet()</code> method of the <code>PageModel</code> class. This is invoked every time a GET request to our server matches the page it is associated with. We can also supply methods for other HTTP actions, i.e. POST, PUT, DELETE map to <code>OnPost()</code>, <code>OnPut()</code>, and <code>OnDelete()</code> respectively. For each of these methods, we can use parameter binding to automatically parse and convert form data into parameter variables.</p><p>In its simplest form, we simply declare parameters whose type and name match those of our form. Thus, for the form:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>form</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>input</span> <span class=na>type</span><span class=o>=</span><span class=s>&#34;text&#34;</span> <span class=na>name</span><span class=o>=</span><span class=s>&#34;Name&#34;</span> <span class=na>value</span><span class=o>=</span><span class=s>&#34;Grover&#34;</span><span class=p>/&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>select</span> <span class=na>name</span><span class=o>=</span><span class=s>&#34;Color&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>        <span class=p>&lt;</span><span class=nt>option</span> <span class=na>value</span><span class=o>=</span><span class=s>&#34;Red&#34;</span><span class=p>&gt;</span>Red<span class=p>&lt;/</span><span class=nt>option</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>        <span class=p>&lt;</span><span class=nt>option</span> <span class=na>selected</span><span class=o>=</span><span class=s>&#34;true&#34;</span> <span class=na>value</span><span class=o>=</span><span class=s>&#34;Blue&#34;</span><span class=p>&gt;</span>Blue<span class=p>&lt;/</span><span class=nt>option</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>        <span class=p>&lt;</span><span class=nt>option</span> <span class=na>value</span><span class=o>=</span><span class=s>&#34;Green&#34;</span><span class=p>&gt;</span>Green<span class=p>&lt;/</span><span class=nt>option</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;/</span><span class=nt>select</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>input</span> <span class=na>type</span><span class=o>=</span><span class=s>&#34;number&#34;</span> <span class=na>name</span><span class=o>=</span><span class=s>&#34;Age&#34;</span> <span class=na>value</span><span class=o>=</span><span class=s>&#34;36&#34;</span><span class=p>/&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>form</span><span class=p>&gt;</span></span></span></code></pre></div><p>We could add several parameters to our <code>OnGet()</code> corresponding the names and types of the form fields:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=n>OnGet</span><span class=p>(</span><span class=kt>string</span> <span class=n>Name</span><span class=p>,</span> <span class=kt>string</span> <span class=n>Color</span><span class=p>,</span> <span class=kt>int</span> <span class=n>Age</span><span class=p>){</span>
</span></span><span class=line><span class=cl>    <span class=c1>// Name would be &#34;Grover&#34;</span>
</span></span><span class=line><span class=cl>    <span class=c1>// Color would be &#34;Blue&#34;</span>
</span></span><span class=line><span class=cl>    <span class=c1>// Number would be 36</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div><p>The form values are automatically converted and bound to the corresponding parameters of the <code>OnGet</code> method. If the form does not contain the corresponding parameter, then it is assigned the default value (for value types) or null (for reference types).</p><div class="box notices cstyle info"><div class=box-label><i class="fa-fw fas fa-info-circle"></i> Info</div><div class=box-content><p>There are times you may not want to use default values for value types. For example, in the form above, if the <code>Age</code> property is not specified, it will default to <code>0</code>. If we instead wanted it to be <code>null</code>, we could use the <a href=https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/builtin-types/nullable-value-types rel=external target=_blank><code>Nullable&lt;T></code></a> type:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=n>OnGet</span><span class=p>(</span><span class=kt>string</span> <span class=n>Name</span><span class=p>,</span> <span class=kt>string</span> <span class=n>Color</span><span class=p>,</span> <span class=n>Nullable</span><span class=p>&lt;</span><span class=kt>int</span><span class=p>&gt;</span> <span class=n>Age</span><span class=p>)</span> <span class=p>{...}</span></span></span></code></pre></div><p>This allows <code>Age</code> to be <code>null</code>, in addition to all its normal possible values. You can also specify a nullable type with the <code>?</code> shorthand, i.e.:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=n>OnGet</span><span class=p>(</span><span class=kt>string</span> <span class=n>Name</span><span class=p>,</span> <span class=kt>string</span> <span class=n>Color</span><span class=p>,</span> <span class=kt>int?</span> <span class=n>Age</span><span class=p>)</span> <span class=p>{...}</span></span></span></code></pre></div></div></div><h3 id=model-binding>Model Binding</h3><p>A third approach is <a href="https://docs.microsoft.com/en-us/aspnet/core/mvc/models/model-binding?view=aspnetcore-3.1" rel=external target=_blank>Model Binding</a>, where decorators are used on public properties of the <code>PageModel</code> class to indicate that they should be bound to form data, i.e.:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=kd>public</span> <span class=k>class</span> <span class=nc>Muppet</span> <span class=p>:</span> <span class=n>PageModel</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=cs>/// &lt;summary&gt;The muppet&#39;s name&lt;/summary&gt;</span>
</span></span><span class=line><span class=cl><span class=na>    [BindProperty]</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kt>string</span> <span class=n>Name</span> <span class=p>{</span> <span class=k>get</span><span class=p>;</span> <span class=k>set</span><span class=p>;</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=cs>/// &lt;summary&gt;The muppet&#39;s color&lt;/summary&gt;</span>
</span></span><span class=line><span class=cl><span class=na>    [BindProperty]</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kt>string</span> <span class=n>Color</span> <span class=p>{</span> <span class=k>get</span><span class=p>;</span> <span class=k>set</span><span class=p>;</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=cs>///&lt;summary&gt;The muppet&#39;s age&lt;/summary&gt;</span>
</span></span><span class=line><span class=cl><span class=na>    [BindProperty]</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kt>int</span> <span class=n>Age</span> <span class=p>{</span><span class=k>get</span><span class=p>;</span> <span class=k>set</span><span class=p>;}</span>    
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div><p>When set up this way, the properties will be populated with the corresponding form data on POST, PUT, and PATCH requests. By default, they will <em>not</em> be populated on GET requests, though you can override this behavior with <code>SupportsGet</code>:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl>    <span class=cs>/// &lt;summary&gt;The muppet&#39;s name&lt;/summary&gt;</span>
</span></span><span class=line><span class=cl><span class=na>    [BindProperty(SupportGet = true)]</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kt>string</span> <span class=n>Name</span> <span class=p>{</span> <span class=k>get</span><span class=p>;</span> <span class=k>set</span><span class=p>;</span> <span class=p>}</span></span></span></code></pre></div><p>Finally, we can indicate <em>all</em> properties of the model class should be bound with a single <code>[BindsProperties]</code> decorator on the class, i.e.:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=na>[BindProperties(SupportsGet = true)]</span>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=k>class</span> <span class=nc>Muppet</span> <span class=p>:</span> <span class=n>PageModel</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=cs>/// &lt;summary&gt;The muppet&#39;s name&lt;/summary&gt;</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kt>string</span> <span class=n>Name</span> <span class=p>{</span> <span class=k>get</span><span class=p>;</span> <span class=k>set</span><span class=p>;</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=cs>/// &lt;summary&gt;The muppet&#39;s color&lt;/summary&gt;</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kt>string</span> <span class=n>Color</span> <span class=p>{</span> <span class=k>get</span><span class=p>;</span> <span class=k>set</span><span class=p>;</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=cs>///&lt;summary&gt;The muppet&#39;s age&lt;/summary&gt;</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kt>int</span> <span class=n>Age</span> <span class=p>{</span><span class=k>get</span><span class=p>;</span> <span class=k>set</span><span class=p>;}</span>    
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div><div class="box notices cstyle info"><div class=box-label><i class="fa-fw fas fa-info-circle"></i> Info</div><div class=box-content><p>You might be wondering why ModelBinding does not work with GET requests by default. In the previous section, we discussed when to use GET or POST requests to submit form data - we use GET requests for smaller data we don&rsquo;t mind displaying the URL, like search terms or filter values. We use POST requests for large data, especially data we will use to populate an object. So when using Model Binding, using the POST method is most appropriate. Microsoft chose to reinforce this practice through the choice to not bind GET requests by default.</p></div></div><footer class=footline></footer></article></div></main><div class=git-footer><p class=theme-version-footer>6.0.0</p><p>Last modified by:
<i class='fas fa-user'></i> Julie Thornton
<i class='fas fa-calendar'></i> <a href=https://github.com/ksu-cs-textbooks/cis400/commit/402a07c77047f7392a125569202f902d514d981b>Apr 22, 2024</a></p></div></div><script src=/cis400/js/clipboard.min.js?1733760446 defer></script><script src=/cis400/js/perfect-scrollbar.min.js?1733760446 defer></script><script src=/cis400/js/theme.js?1733760446 defer></script></body></html>