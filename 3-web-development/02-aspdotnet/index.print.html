




	
	
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		
		

	
	
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		
		

	
	
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="height=device-height, width=device-width, initial-scale=1.0, minimum-scale=1.0">
    <meta name="generator" content="Hugo 0.117.0">
    <meta name="generator" content="Relearn 5.18.0">
    <meta name="description" content="K-State CIS 400 Textbook">
    <meta name="author" content="Nathan Bean">
    <title>ASP.NET :: K-State CIS 400 Textbook</title>
    <link href="https://ksu-cs-textbooks.github.io/cis400/3-web-development/02-aspdotnet/index.html" rel="canonical" type="text/html" title="ASP.NET :: K-State CIS 400 Textbook">
    <link href="https://ksu-cs-textbooks.github.io/cis400/3-web-development/02-aspdotnet/index.xml" rel="alternate" type="application/rss+xml" title="ASP.NET :: K-State CIS 400 Textbook">
    <link href="https://ksu-cs-textbooks.github.io/cis400/3-web-development/02-aspdotnet/tele.html" rel="alternate" type="text/html" title="ASP.NET :: K-State CIS 400 Textbook">
    <link href="https://ksu-cs-textbooks.github.io/cis400/3-web-development/02-aspdotnet/embed.html" rel="alternate" type="text/html" title="ASP.NET :: K-State CIS 400 Textbook">
    <!-- https://github.com/filamentgroup/loadCSS/blob/master/README.md#how-to-use -->
    <link href="https://ksu-cs-textbooks.github.io/cis400/css/fontawesome-all.min.css?1695148949" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="https://ksu-cs-textbooks.github.io/cis400/css/fontawesome-all.min.css?1695148949" rel="stylesheet"></noscript>
    <link href="https://ksu-cs-textbooks.github.io/cis400/css/nucleus.css?1695148949" rel="stylesheet">
    <link href="https://ksu-cs-textbooks.github.io/cis400/css/auto-complete.css?1695148949" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="https://ksu-cs-textbooks.github.io/cis400/css/auto-complete.css?1695148949" rel="stylesheet"></noscript>
    <link href="https://ksu-cs-textbooks.github.io/cis400/css/perfect-scrollbar.min.css?1695148949" rel="stylesheet">
    <link href="https://ksu-cs-textbooks.github.io/cis400/css/fonts.css?1695148949" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="https://ksu-cs-textbooks.github.io/cis400/css/fonts.css?1695148949" rel="stylesheet"></noscript>
    <link href="https://ksu-cs-textbooks.github.io/cis400/css/theme.css?1695148949" rel="stylesheet">
    <link href="https://ksu-cs-textbooks.github.io/cis400/css/theme-auto.css?1695148949" rel="stylesheet" id="variant-style">
    <link href="https://ksu-cs-textbooks.github.io/cis400/css/variant.css?1695148949" rel="stylesheet">
    <link href="https://ksu-cs-textbooks.github.io/cis400/css/print.css?1695148949" rel="stylesheet" media="print">
    <link href="https://ksu-cs-textbooks.github.io/cis400/css/format-print.css?1695148949" rel="stylesheet">
    <link href="https://ksu-cs-textbooks.github.io/cis400/css/ie.css?1695148949" rel="stylesheet">
    <script src="https://ksu-cs-textbooks.github.io/cis400/js/url.js?1695148949"></script>
    <script src="https://ksu-cs-textbooks.github.io/cis400/js/variant.js?1695148949"></script>
    <script>
      // hack to let hugo tell us how to get to the root when using relativeURLs, it needs to be called *url= for it to do its magic:
      // https://github.com/gohugoio/hugo/blob/145b3fcce35fbac25c7033c91c1b7ae6d1179da8/transform/urlreplacers/absurlreplacer.go#L72
      window.index_js_url="https://ksu-cs-textbooks.github.io/cis400/index.search.js";
      var root_url="https://ksu-cs-textbooks.github.io/cis400/";
      var baseUri=root_url.replace(/\/$/, '');
      // translations
      window.T_Copy_to_clipboard = 'Copy to clipboard';
      window.T_Copied_to_clipboard = 'Copied to clipboard!';
      window.T_Copy_link_to_clipboard = 'Copy link to clipboard';
      window.T_Link_copied_to_clipboard = 'Copied link to clipboard!';
      window.T_No_results_found = 'No results found for \u0022{0}\u0022';
      window.T_N_results_found = '{1} results found for \u0022{0}\u0022';
      // some further base stuff
      var baseUriFull='https:\/\/ksu-cs-textbooks.github.io\/cis400/';
      window.variants && variants.init( [ 'auto', 'light-theme', 'dark-theme' ] );
    </script>
    
    <link href="https://ksu-cs-textbooks.github.io/cis400/css/custom.css?1695148949" rel="stylesheet">

  </head>
  <body class="mobile-support print disableInlineCopyToClipboard" data-url="https://ksu-cs-textbooks.github.io/cis400/3-web-development/02-aspdotnet/index.html">
    <div id="body" class="default-animation">
      <div id="sidebar-overlay"></div>
      <div id="toc-overlay"></div>
      <nav id="topbar" class="highlightable">
        <div>
          <div id="top-tele-link">
            <a class="print-link" title='Teleprompter View' href="https://ksu-cs-textbooks.github.io/cis400/3-web-development/02-aspdotnet/tele.html">
              <i class="fas fa-tv fa-fw"></i>
            </a>
          </div>
          <div id="top-embed-link">
            <a class="print-link" title='Embeddable Version' href="https://ksu-cs-textbooks.github.io/cis400/3-web-development/02-aspdotnet/embed.html">
              <i class="fas fa-expand-arrows-alt fa-fw"></i>
            </a>
          </div>
          <div id="breadcrumbs">
            <span id="sidebar-toggle-span">
              <a href="#" id="sidebar-toggle" class="topbar-link" title='Menu (CTRL+ALT+n)'><i class="fas fa-bars fa-fw"></i></a>
            </span>
            <ol class="links" itemscope itemtype="http://schema.org/BreadcrumbList">
              <li itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement"><a itemprop="item" href="https://ksu-cs-textbooks.github.io/cis400/index.html"><span itemprop="name">CIS 400: Object-Oriented Design, Implementation, and Testing</span></a><meta itemprop="position" content="1"> &gt; </li>
              <li itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement"><a itemprop="item" href="https://ksu-cs-textbooks.github.io/cis400/3-web-development/index.html"><span itemprop="name">Web Development</span></a><meta itemprop="position" content="2"> &gt; </li>
              <li itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement"><span itemprop="name">ASP.NET</span><meta itemprop="position" content="3"></li>
            </ol>
          </div>
        </div>
      </nav>
      <main id="body-inner" class="highlightable chapter narrow" tabindex="-1">
        <div class="flex-block-wrapper">
          <article class="chapter">
            <header class="headline">
            </header>


<div class="article-subheading">Chapter 2</div>
<h1 id="aspnet">ASP.NET</h1>

<p>.NET Goes Online</p>

            <footer class="footline">

            </footer>
          </article>

          <section>
            <h1 class="a11y-only">Subsections of ASP.NET</h1>
    
    
          <article class="default">
            <header class="headline">
            </header>
<h1 id="introduction">Introduction</h1>

<p>While web browsers request resources (including HTTP, CSS, and JavaScript) files over HTTP, the other end of this connection, and what supplies those files, is a <em>web server</em>.  Unlike web clients, which are limited by what technologies a browser understands (namely HTML, CSS, and JS), a web server can be written in any programming language.  In this chapter, we will explore writing web servers in C#, using aspects of the ASP.NET framework.</p>
<h2 id="key-terms">Key Terms</h2>
<p>Some key terms to learn in this chapter are:</p>
<ul>
<li>Web Server</li>
<li>ASP.NET</li>
<li>Dynamic Web Pages</li>
<li>Templates</li>
<li>Razor Pages</li>
</ul>
<h2 id="key-skills">Key Skills</h2>
<p>The key skills you will be developing in this chapter are:</p>
<ul>
<li>Creating a web server to serve a web application using ASP.NET</li>
<li>The ability to author Razor Pages combining HTML with embedded C# code</li>
</ul>

            <footer class="footline">

            </footer>
          </article>

    
    
          <article class="default">
            <header class="headline">
            </header>
<h1 id="static-webservers">Static Webservers</h1>

<p>The earliest web servers simply served files held in a directory. If you think back to your web development assignment from CIS 115, this is exactly what you did - you created some HTML, CSS, and JS files and placed them in the <em>public_html</em> directory in your user directory on the CS Linux server.  Anything placed in this folder is automatically served by an instance of the Apache web server running on the Linux server, at the address <code>https://people.cs.ksu.edu/~[eid]/</code> where <code>[eid]</code> is your K-State eid.</p>
<p><a href="https://www.apache.org/" target="_blank">Apache</a>
 is one of the oldest and most popular open-source web servers in the world.  Microsoft introduced their own web server, <a href="https://www.iis.net/" target="_blank">Internet Information Services (IIS)</a>
 around the same time.  Unlike Apache, which can be installed on most operating systems, IIS only runs on the Windows Server OS.</p>
<p>While Apache installations typically serve static files from either a <em>html</em> or <em>public_html</em> directory, IIS serves files from a <em>wwwroot</em> directory.</p>
<p>As the web grew in popularity, there was tremendous demand to supplement static pages with pages created on the fly in response to requests - allowing pages to be customized to a user, or displaying the most up-to-date information from a database.  In other words, <em>dynamic</em> pages.  We&rsquo;ll take a look at these next.</p>

            <footer class="footline">

            </footer>
          </article>

    
    
          <article class="default">
            <header class="headline">
            </header>
<h1 id="dynamic-pages">Dynamic Pages</h1>

<p>Modern websites are more often full-fledged applications than collections of static files.  But these applications remain built upon the foundations of the core web technologies of HTML, CSS, and JavaScript.  In fact, the client-side application is typically built of <em>exactly</em> these three kinds of files!  So how can we create a dynamic web application?</p>
<p>One of the earliest approaches was to write a program to <em>dynamically create</em> the HTML file that was being served.  Consider this method:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">string</span> GeneratePage()
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    StringBuilder sb = <span style="color:#66d9ef">new</span> StringBuilder();
</span></span><span style="display:flex;"><span>    sb.Append(<span style="color:#e6db74">&#34;&lt;!DOCTYPE html&gt;&#34;</span>);
</span></span><span style="display:flex;"><span>    sb.Append(<span style="color:#e6db74">&#34;&lt;html&gt;&#34;</span>);
</span></span><span style="display:flex;"><span>    sb.Append(<span style="color:#e6db74">&#34;&lt;head&gt;&#34;</span>);
</span></span><span style="display:flex;"><span>    sb.Append(<span style="color:#e6db74">&#34;&lt;title&gt;My Dynamic Page&lt;/title&gt;&#34;</span>);
</span></span><span style="display:flex;"><span>    sb.Append(<span style="color:#e6db74">&#34;&lt;/head&gt;&#34;</span>);
</span></span><span style="display:flex;"><span>    sb.Append(<span style="color:#e6db74">&#34;&lt;body&gt;&#34;</span>);
</span></span><span style="display:flex;"><span>    sb.Append(<span style="color:#e6db74">&#34;&lt;h1&gt;Hello, world!&lt;/h1&gt;&#34;</span>);
</span></span><span style="display:flex;"><span>    sb.Append(<span style="color:#e6db74">&#34;&lt;p&gt;Time on the server is &#34;</span>);
</span></span><span style="display:flex;"><span>    sb.Append(DateTime.Now);
</span></span><span style="display:flex;"><span>    sb.Append(<span style="color:#e6db74">&#34;&lt;/p&gt;&#34;</span>);
</span></span><span style="display:flex;"><span>    sb.Append(<span style="color:#e6db74">&#34;&lt;/body&gt;&#34;</span>);
</span></span><span style="display:flex;"><span>    sb.Append(<span style="color:#e6db74">&#34;&lt;/html&gt;&#34;</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> sb.ToString();
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>It generates the HTML of a page showing the current date and time.  Remember too that HTTP responses are simply text, so we can generate a response as a string as well:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">string</span> GenerateResponse()
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">string</span> page = GeneratePage();
</span></span><span style="display:flex;"><span>    StringBuilder sb = <span style="color:#66d9ef">new</span> StringBuilder();
</span></span><span style="display:flex;"><span>    sb.AppendLine(<span style="color:#e6db74">&#34;HTTP/1.1 200&#34;</span>);
</span></span><span style="display:flex;"><span>    sb.AppendLine(<span style="color:#e6db74">&#34;Content-Type: text/html; charset=utf-8&#34;</span>);
</span></span><span style="display:flex;"><span>    sb.AppendLine(<span style="color:#e6db74">&#34;ContentLength:&#34;</span> + page.Length);
</span></span><span style="display:flex;"><span>    sb.AppendLine(<span style="color:#e6db74">&#34;&#34;</span>);
</span></span><span style="display:flex;"><span>    sb.Append(page);
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> sb.ToString();
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>The resulting string could then be streamed back to the requesting web browser.  This is the basic technique used in all server-side web frameworks: they dynamically assemble the response to a request by assembling strings into an HTML page.  Where they differ is what language they use to do so, and how much of the process they&rsquo;ve abstracted.</p>
<p>This approach was adopted by Microsoft and implemented as <em>Active Server Pages (ASP)</em>.  By placing files with the <em>.asp</em> extension among those served by an IIS server, C# or Visual Basic code written on that page would be executed, and the resulting string would be served as a file.  This would happen on each request - so a request for <a href="http://somesite.com/somepage.asp" target="_blank">http://somesite.com/somepage.asp</a>
 would execute the code in the <em>somepage.asp</em> file, and the resulting text would be served.</p>
<p>You might have looked at the above examples and shuddered.  After all, who wants to assemble text like that?  And when you assemble HTML using raw string concatenation, you don&rsquo;t have the benefit of syntax highlighting, code completion, or any of the other modern development tools we&rsquo;ve grown to rely on.  Thankfully, most web development frameworks provide some abstraction around this process, and by and large have adopted some form of <em>template syntax</em> to make the process of writing a page easier.</p>

            <footer class="footline">

            </footer>
          </article>

    
    
          <article class="default">
            <header class="headline">
            </header>
<h1 id="template-rendering">Template Rendering</h1>

<p>It was not long before new technologies sprang up to replace the ad-hoc string concatenation approach to creating dynamic pages.  These template approaches allow you to write a page using primarily HTML, but embed snippets of another language to execute and concatenate into the final page.  This is very similar to the template strings we have used in C#, i.e.:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">string</span> time = <span style="color:#e6db74">$&#34;The time is {DateTime.Now}&#34;</span>;</span></span></code></pre></div><p>Which concatenates the invoking the <a href="">DateTime.Now</a>
 property&rsquo;s <code>ToString()</code> method into the string <code>time</code>.  While the C# template string above uses curly braces to call out the script snippets, most HTML template libraries initially used some variation of angle brackets + additional characters.  As browsers interpret anything within angle brackets (<code>&lt;&gt;</code>) as HTML tags, these would not be rendered if the template was accidentally served as HTML wihout executing and concatenating scripts.  Two early examples are:</p>
<ul>
<li><code>&lt;?php echo &quot;This is a PHP example&quot; ?&gt;</code></li>
<li><code>&lt;% Response.Write(&quot;This is a classic ASP example) %&gt;</code></li>
</ul>
<p>And abbreviated versions:</p>
<ul>
<li><code>&lt;?= &quot;This is the short form for PHP&quot; ?&gt;</code></li>
<li><code>&lt;%= &quot;This is the short form for classic ASP&quot; %&gt;</code></li>
</ul>
<p>Template rendering proved such a popular and powerful tool that rendering libraries were written for most programming languages, and could be used for more than just HTML files - really <em>any</em> kind of text file can be rendered with a template.  Thus, you can find template rendering libraries for JavaScript, Python, Ruby, and pretty much any language you care to (and they aren&rsquo;t that hard to write either).</p>
<p>Microsoft&rsquo;s classic ASP implementation was limited to the Visual Basic programming language.  As the C# language gained in popularity, they replaced classic ASP with ASP.NET web pages.  Like classic ASP, each page file (named with a <em>.aspx</em> extension) generates a corresponding HTML page.  The script could be either Visual Basic or C#, and a new syntax using the at symbol (<code>@</code>) to proceed the code snippets was adopted.  Thus the page:</p>
<div class="wrap-code highlight"><pre tabindex="0"><code class="language-aspx" data-lang="aspx">&lt;html&gt;
    &lt;body&gt;
        &lt;h1&gt;Hello Web Pages&lt;/h1&gt;
        &lt;p&gt;The time is @DateTime.Now&lt;/p&gt;
    &lt;/body&gt;
&lt;/html&gt;</code></pre></div><p>Would render the current time.  You can run (and modify) this example on the <a href="https://www.w3schools.com/asp/showfile_c.asp?filename=try_webpages_cs_001" target="_blank">w3schools.com</a>
.</p>
<p>This template syntax is the <a href="https://en.wikipedia.org/wiki/ASP.NET_Razor" target="_blank">Razor syntax</a>
, and used throughout Microsoft&rsquo;s ASP.NET platform.  Additionally it can be used outside of ASP.NET with the open-source <a href="https://antaris.github.io/RazorEngine/" target="_blank">RazorEngine</a>
.</p>
<p>Classic PHP, Classic ASP, and ASP.NET web pages all use a single-page model, where the client (the browser) requests a specific file, and as that file is interpreted, the dynamic page is generated.  This approach worked well in the early days of the world-wide-web, where web sites were essentially a collection of pages.  However, as the web grew increasingly interactive, many web sites grew into full-fledged <em>web applications</em>, full-blown programs that did lend themselves to a page-baed structure.  This new need resulted in new technologies to fill the void - web frameworks.  We&rsquo;ll talk about these next.</p>

            <footer class="footline">

            </footer>
          </article>

    
    
          <article class="default">
            <header class="headline">
            </header>
<h1 id="web-frameworks">Web Frameworks</h1>

<p>As web <em>sites</em> became web <em>applications</em>, developers began looking to use ideas and techniques drawn from traditional software development.  These included architectural patterns like <a href="https://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller" target="_blank">Model-View-Controller (MVC)</a>
 and <a href="https://en.wikipedia.org/wiki/Pipeline_%28software%29" target="_blank">Pipeline</a>
 that simply were not possible with the server page model.  The result was the development of a host of web frameworks across multiple programming languages, including:</p>
<ul>
<li><a href="https://rubyonrails.org/" target="_blank">Ruby on Rails</a>
, which uses the <a href="https://www.ruby-lang.org/en/" target="_blank">Ruby</a>
 programming language and adopts a MVC architecture</li>
<li><a href="https://laravel.com/" target="_blank">Laravel</a>
, which uses the <a href="https://www.php.net/" target="_blank">PHP</a>
 programming language and adopts a MVC architecture</li>
<li><a href="https://www.djangoproject.com/" target="_blank">Django</a>
, which uses the <a href="https://www.python.org/" target="_blank">Python</a>
 programming language and adopts a MVC architecture</li>
<li><a href="https://expressjs.com/" target="_blank">Express</a>
, which uses the <a href="https://nodejs.org/en/" target="_blank">Node implementation of the JavaScript</a>
 programming language and adopts the Pipeline architecture</li>
<li><a href="https://revel.github.io/" target="_blank">Revel</a>
, which uses the <a href="https://golang.org/" target="_blank">Go</a>
 programming language and adopts a Pipeline architecture</li>
<li><a href="https://github.com/ninenines/cowboy" target="_blank">Cowboy</a>
, which uses the <a href="https://www.erlang.org/" target="_blank">erlang</a>
 programming language and adopts a Pipeline architecture</li>
<li><a href="https://www.phoenixframework.org/" target="_blank">Phoenix</a>
, which uses the <a href="https://elixir-lang.org/" target="_blank">elixir</a>
 programming language, and adopts a Pipeline architecture</li>
</ul>
<h3 id="aspnet-frameworks">ASP.NET Frameworks</h3>
<p>This is only a sampling of the many frameworks and languages used in the modern web.  Microsoft adapted to the new approach by creating their own frameworks within the ASP.NET family:</p>
<ul>
<li><a href="https://dotnet.microsoft.com/apps/aspnet/mvc" target="_blank">ASP.NET MVC</a>
 uses C# (or Visual Basic) for a language and adopts a MVC architecture</li>
<li><a href="https://docs.microsoft.com/en-us/aspnet/core/tutorials/razor-pages/?view=aspnetcore-3.1" target="_blank">ASP.NET Razor Pages</a>
, which also uses C# (or Visual Basic) for its language, and adopts a Pipeline architecture</li>
<li><a href="https://dotnet.microsoft.com/apps/aspnet/apis" target="_blank">ASP.NET API</a>
 is a web framework focused on creating RESTful web APIs (i.e. a web application that serves data instead of HTML)</li>
</ul>
<h3 id="iis-and-aspnet-core">IIS and ASP.NET Core</h3>
<p>While ASP.NET applications are traditionally hosted on IIS running on the Windows Server operating system, the introduction of .NET Core made it possible to run .NET programs on Linux machines.  As Linux operating systems are typically free and dominate the web server market (W3Cook<sup id="fnref:1"><a href="#fn:1" class="footnote-ref" role="doc-noteref">1</a></sup> reports 98.1% of web servers worldwide run on a Linux OS).</p>
<p>Microsoft has accordingly migrated its ASP.NET family to a new implementation can run on .NET Core <em>or</em> IIS: <a href="https://docs.microsoft.com/en-us/aspnet/core/?view=aspnetcore-5.0" target="_blank">ASP.NET Core</a>
.  When you build a ASP.NET Core application, you can choose your deployment target: IIS, .NET Core, or even Microsoft&rsquo;s cloud service, Azure.  The same application can run on <em>any</em> of these platforms.</p>
<div class="footnotes" role="doc-endnotes">
<hr>
<ol>
<li id="fn:1">
<p><a href="https://web.archive.org/web/20150806093859/http://www.w3cook.com/os/summary/" target="_blank">W3Cook OS Summary</a>
&#160;<a href="#fnref:1" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
</ol>
</div>

            <footer class="footline">

            </footer>
          </article>

    
    
          <article class="default">
            <header class="headline">
            </header>
<h1 id="razor-pages">Razor Pages</h1>

<p>ASP.NET Core adds a project type to Visual Studio&rsquo;s new project wizard, <em>ASP.NET Core web application</em> which uses <em>Razor Pages</em>.  The Razor Page approach represents a hybrid approach between a MVC and Pipeline architecture and leverages some of the ideas of component-based design that we saw with WPF applications.</p>
<p>The program entry point is <em>Program.cs</em>, which creates the web server our application will run on.  In it, we initialize and configure the server based on the <em>Startup.cs</em> class, which details what aspects of the ASP.NET program we want to use.  The wizard does the initial configuration for us, and for now we&rsquo;ll leave the defaults:</p>
<ul>
<li>Adding the Razor Pages service (which allows us to use Razor Pages)</li>
<li>Enabling HTTPS redirection (which instructs browsers making HTTP requests against our server to make HTTPS requests instead)</li>
<li>Enabling the use of static files, which means files in the <em>wwwroot</em> folder will be served as they are, in as efficient a manner of possible</li>
<li>Mapping requests to razor pages (this makes a request against a route like <em>/index</em> map to the <em>Pages/Index.cshtml</em> razor page)</li>
</ul>
<p>Under this architecture, any file we want to serve as-is (i.e. our CSS and JavaScript files), we&rsquo;ll place in <em>wwwroot</em> folder.  Any route we want to serve dynamically, we&rsquo;ll create a corresponding Razor page for in the <em>Pages</em> folder.</p>
<h2 id="razor-page-syntax">Razor Page Syntax</h2>
<p>Let&rsquo;s look at an example Razor page, <em>index.cshtml</em>, and then break down its components:</p>
<div class="wrap-code highlight"><pre tabindex="0"><code class="language-razor" data-lang="razor">@page 
@model IndexModel
@{
    ViewData[&#34;Title&#34;] = &#34;Home page&#34;;
}
&lt;div class=&#34;text-center&#34;&gt;
    &lt;h1 class=&#34;display-4&#34;&gt;Welcome&lt;/h1&gt;
    &lt;p&gt;Learn about &lt;a href=&#34;https://docs.microsoft.com/aspnet/core&#34;&gt;building Web apps with ASP.NET Core&lt;/a&gt;.&lt;/p&gt;
&lt;/div&gt;</code></pre></div><p>The <code>@page</code> line indicates to the compiler that this file represents a Razor page.  This is necessary for the page to be interpreted correctly, and for setting up the mapping from a request for the route <em>/index</em> to be mapped to this page (<em>Index.cshtml</em>).</p>
<p>The <code>@model</code> line indicates the <em>model</em> class to use with this page.  Conventionally, the model class has the same name as the Razor page, plus a <em>.cs</em> extension, though we can use a different model file if needed.  If we follow the convention, the model file is grouped with the Razor page file, much like the codebehind files in WPF and Forms. The model class provides the data for the web page, in a manner somewhat like the ViewModel classes we worked with in WPF.  We&rsquo;ll talk more about model classes shortly.</p>
<p>The <code>@{}</code> section is a place to define variables.  In this case, we add a key/value pair to the <code>ViewData</code> dictionary.  This dictionary is available in both the page and the layout, and is an easy way to pass values between them (in this case, we are providing a title to the layout). The layout is discussed below.</p>
<p>Finally, the page content itself is presented in Razor syntax - a mixture of HTML and embedded C# proceeded by the <code>@</code> symbol.  Note that we do not need to provide termination to the C# code - the compiler will automatically determine when we switch from code back to HTML based on the grammar of the C# language.</p>
<h2 id="layouts">Layouts</h2>
<p>If you remember from our discussions of HTML, a valid HTML page must have a <code>&lt;!DOCTYPE html&gt;</code> element, and <code>&lt;html&gt;</code>, <code>&lt;head&gt;</code>, <code>&lt;title&gt;</code>, and <code>&lt;body&gt;</code> elements.  But where are these in our Razor page?  It exists in the _Pages/Shared/<em>Layout.cshtml</em> file:</p>
<div class="wrap-code highlight"><pre tabindex="0"><code class="language-cshtml" data-lang="cshtml">&lt;!DOCTYPE html&gt;
&lt;html lang=&#34;en&#34;&gt;
&lt;head&gt;
    &lt;meta charset=&#34;utf-8&#34; /&gt;
    &lt;meta name=&#34;viewport&#34; content=&#34;width=device-width, initial-scale=1.0&#34; /&gt;
    &lt;title&gt;@ViewData[&#34;Title&#34;] - ExampleWebApplication&lt;/title&gt;
    &lt;link rel=&#34;stylesheet&#34; href=&#34;~/lib/bootstrap/dist/css/bootstrap.min.css&#34; /&gt;
    &lt;link rel=&#34;stylesheet&#34; href=&#34;~/css/site.css&#34; /&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;header&gt;
        &lt;nav class=&#34;navbar navbar-expand-sm navbar-toggleable-sm navbar-light bg-white border-bottom box-shadow mb-3&#34;&gt;
            &lt;div class=&#34;container&#34;&gt;
                &lt;a class=&#34;navbar-brand&#34; asp-area=&#34;&#34; asp-page=&#34;/Index&#34;&gt;ExampleWebApplication&lt;/a&gt;
                &lt;button class=&#34;navbar-toggler&#34; type=&#34;button&#34; data-toggle=&#34;collapse&#34; data-target=&#34;.navbar-collapse&#34; aria-controls=&#34;navbarSupportedContent&#34;
                        aria-expanded=&#34;false&#34; aria-label=&#34;Toggle navigation&#34;&gt;
                    &lt;span class=&#34;navbar-toggler-icon&#34;&gt;&lt;/span&gt;
                &lt;/button&gt;
                &lt;div class=&#34;navbar-collapse collapse d-sm-inline-flex flex-sm-row-reverse&#34;&gt;
                    &lt;ul class=&#34;navbar-nav flex-grow-1&#34;&gt;
                        &lt;li class=&#34;nav-item&#34;&gt;
                            &lt;a class=&#34;nav-link text-dark&#34; asp-area=&#34;&#34; asp-page=&#34;/Index&#34;&gt;Home&lt;/a&gt;
                        &lt;/li&gt;
                        &lt;li class=&#34;nav-item&#34;&gt;
                            &lt;a class=&#34;nav-link text-dark&#34; asp-area=&#34;&#34; asp-page=&#34;/Privacy&#34;&gt;Privacy&lt;/a&gt;
                        &lt;/li&gt;
                    &lt;/ul&gt;
                &lt;/div&gt;
            &lt;/div&gt;
        &lt;/nav&gt;
    &lt;/header&gt;
    &lt;div class=&#34;container&#34;&gt;
        &lt;main role=&#34;main&#34; class=&#34;pb-3&#34;&gt;
            @RenderBody()
        &lt;/main&gt;
    &lt;/div&gt;

    &lt;footer class=&#34;border-top footer text-muted&#34;&gt;
        &lt;div class=&#34;container&#34;&gt;
            &amp;copy; 2020 - ExampleWebApplication - &lt;a asp-area=&#34;&#34; asp-page=&#34;/Privacy&#34;&gt;Privacy&lt;/a&gt;
        &lt;/div&gt;
    &lt;/footer&gt;

    &lt;script src=&#34;~/lib/jquery/dist/jquery.min.js&#34;&gt;&lt;/script&gt;
    &lt;script src=&#34;~/lib/bootstrap/dist/js/bootstrap.bundle.min.js&#34;&gt;&lt;/script&gt;
    &lt;script src=&#34;~/js/site.js&#34; asp-append-version=&#34;true&#34;&gt;&lt;/script&gt;

    @RenderSection(&#34;Scripts&#34;, required: false)
&lt;/body&gt;
&lt;/html&gt;</code></pre></div><p>Using a layout file allows us to place boilerplate HTML (code that is repeated on every page of our site) in a single location, and share it amongst all pages in our application.  The <code>@RenderBody()</code> line indicates where the content of the Razor page will be rendered.</p>
<p>Note that we also implement a navigation menu in this layout.  Instead of giving the links in this navigation page a <code>href</code> element, we use <code>asp-page</code>, which converts into an appropriate <code>href</code> linking to one of our Razor pages on compilation.  Thus <code>asp-page=&quot;/Index&quot;</code> will point to our <em>Index.cshtml.cs</em> page.  The <code>asp-page</code> is an example of a <a href="https://docs.microsoft.com/en-us/aspnet/core/mvc/views/tag-helpers/intro?view=aspnetcore-3.1" target="_blank">TagHelper</a>
, syntax that provides extra details to be processed by the Razor rendering engine.</p>
<p>We can include other sections within the layout with <code>@RenderSection()</code> For example, the <code>@RenderSection(&quot;Scripts&quot;, required: false)</code> will render a &ldquo;Scripts&rdquo; section, if there is one defined in our Razor page.  We define such sections with the <code>@section</code> syntax, i.e.:</p>
<div class="wrap-code highlight"><pre tabindex="0"><code class="language-cshtml" data-lang="cshtml">@section Scripts{
    &lt;script src=&#34;my-script.js&#34;&gt;&lt;/script&gt;
}</code></pre></div><p>Would place the additional <code>&lt;script&gt;</code> element in the rendered Razor page.  You can define as many sections as you want.</p>
<p>While the _Pages/Shared/<em>Layout.cshtml</em> file is the default layout, you can define your own layout files.  These should also be placed in the <em>Pages/Shared</em> folder, and their name should begin with an underscore.  You can then set it to be used as the layout for your page by setting the page&rsquo;s <code>Layout</code> property:</p>
<div class="wrap-code highlight"><pre tabindex="0"><code class="language-cshtml" data-lang="cshtml">@{
    Layout = &#34;_YourLayout&#34;;
}</code></pre></div><p>Where the string you set the property to is the name of your layout.</p>
<h2 id="model-classes">Model Classes</h2>
<p>The model class serves a similar role to the codebehind classes of your WPF and Windows Forms applications.  Any public properties defined in the model class are accessible in the Razor page.  I.e. if we defined a property:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">IndexModel</span>:PageModel {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> DateTime CurrentTime 
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">get</span> 
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">return</span> DateTime.Now;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> IActionResult OnGet()
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>We could use it in the corresponding Razor page:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>@page 
</span></span><span style="display:flex;"><span>@model IndexModel 
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>&lt;p&gt;The current time <span style="color:#66d9ef">is</span> @Model.CurrentTime&lt;/p&gt;</span></span></code></pre></div><p>In addition, the model class can define a method to be triggered on each HTTP Request, i.e. the <code>OnGet()</code> method will be triggered with each HTTP GET request, and <code>OnPost()</code> will be called with each HTTP POST request.  You can define a method for any of the valid HTTP request verbs that will be invoked on each corresponding request.</p>

            <footer class="footline">

            </footer>
          </article>

    
    
          <article class="default">
            <header class="headline">
            </header>
<h1 id="summary">Summary</h1>

<p>In this chapter we explored how server-side web technologies have evolved to create <em>dynamic</em> web sites and web applications.  The ASP.NET Core platform is Microsoft&rsquo;s answer to this evolution.  It can run on either Microsoft&rsquo;s flagship IIS server, or as a stand-alone server on a variety of platforms.  It brings together a suite of technologies to build web pages and web applications.  We took an in-depth look at one of these - Razor pages, and learned how to build our own Razor pages app.</p>

            <footer class="footline">

            </footer>
          </article>

          </section>

        </div>
      </main>
    
<div class="git-footer">
<p class="theme-version-footer">5.18.0</p>
<p>Last modified by: 
            <i class='fas fa-user'></i> Russell Feldhausen
            <i class='fas fa-calendar'></i> <a href="https://gitlab.cs.ksu.edu/cs-textbooks/cis400-textbook/-/commit/681e5c9c43e3ac6de614c2cc74487702fd43cab7">Aug 10, 2023</a>
</p>
</div>

    
    </div>
    <script src="https://ksu-cs-textbooks.github.io/cis400/js/clipboard.min.js?1695148953" defer></script>
    <script src="https://ksu-cs-textbooks.github.io/cis400/js/perfect-scrollbar.min.js?1695148953" defer></script>
    <script src="https://ksu-cs-textbooks.github.io/cis400/js/theme.js?1695148953" defer></script>
  </body>
</html>
