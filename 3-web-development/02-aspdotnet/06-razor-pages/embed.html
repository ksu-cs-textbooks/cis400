




	
	
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		
		

	
	
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		
		

	
	
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		
		
<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="height=device-height, width=device-width, initial-scale=1.0, minimum-scale=1.0">
    <meta name="generator" content="Hugo 0.117.0">
    <meta name="generator" content="Relearn 5.18.0">
    <meta name="description" content="K-State CIS 400 Textbook">
    <meta name="author" content="Nathan Bean">
    <title>Razor Pages :: K-State CIS 400 Textbook</title>
    <link href="https://ksu-cs-textbooks.github.io/cis400/3-web-development/02-aspdotnet/06-razor-pages/index.html" rel="canonical" type="text/html" title="Razor Pages :: K-State CIS 400 Textbook">
    <link href="https://ksu-cs-textbooks.github.io/cis400/3-web-development/02-aspdotnet/06-razor-pages/index.xml" rel="alternate" type="application/rss+xml" title="Razor Pages :: K-State CIS 400 Textbook">
    <link href="https://ksu-cs-textbooks.github.io/cis400/3-web-development/02-aspdotnet/06-razor-pages/index.print.html" rel="alternate" type="text/html" title="Razor Pages :: K-State CIS 400 Textbook">
    <link href="https://ksu-cs-textbooks.github.io/cis400/3-web-development/02-aspdotnet/06-razor-pages/tele.html" rel="alternate" type="text/html" title="Razor Pages :: K-State CIS 400 Textbook">
    
    <!-- https://github.com/filamentgroup/loadCSS/blob/master/README.md#how-to-use -->
    <link href="https://ksu-cs-textbooks.github.io/cis400/css/fontawesome-all.min.css?1708973473" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="https://ksu-cs-textbooks.github.io/cis400/css/fontawesome-all.min.css?1708973473" rel="stylesheet"></noscript>
    <link href="https://ksu-cs-textbooks.github.io/cis400/css/nucleus.css?1708973473" rel="stylesheet">
    <link href="https://ksu-cs-textbooks.github.io/cis400/css/auto-complete.css?1708973473" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="https://ksu-cs-textbooks.github.io/cis400/css/auto-complete.css?1708973473" rel="stylesheet"></noscript>
    <link href="https://ksu-cs-textbooks.github.io/cis400/css/perfect-scrollbar.min.css?1708973473" rel="stylesheet">
    <link href="https://ksu-cs-textbooks.github.io/cis400/css/fonts.css?1708973473" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="https://ksu-cs-textbooks.github.io/cis400/css/fonts.css?1708973473" rel="stylesheet"></noscript>
    <link href="https://ksu-cs-textbooks.github.io/cis400/css/theme.css?1708973473" rel="stylesheet">
    
    
    
    <link href="https://ksu-cs-textbooks.github.io/cis400/css/theme-light-theme.css?1708973473" rel="stylesheet" id="variant-style">
    <link href="https://ksu-cs-textbooks.github.io/cis400/css/variant.css?1708973473" rel="stylesheet">
    <link href="https://ksu-cs-textbooks.github.io/cis400/css/print.css?1708973473" rel="stylesheet" media="print">
    <link href="https://ksu-cs-textbooks.github.io/cis400/css/ie.css?1708973473" rel="stylesheet">
    <script src="https://ksu-cs-textbooks.github.io/cis400/js/url.js?1708973473"></script>
    
    
    
    <script>
      // hack to let hugo tell us how to get to the root when using relativeURLs, it needs to be called *url= for it to do its magic:
      // https://github.com/gohugoio/hugo/blob/145b3fcce35fbac25c7033c91c1b7ae6d1179da8/transform/urlreplacers/absurlreplacer.go#L72
      window.index_js_url="https://ksu-cs-textbooks.github.io/cis400/index.search.js";
      var root_url="https://ksu-cs-textbooks.github.io/cis400/";
      var baseUri=root_url.replace(/\/$/, '');
      // translations
      window.T_Copy_to_clipboard = 'Copy to clipboard';
      window.T_Copied_to_clipboard = 'Copied to clipboard!';
      window.T_Copy_link_to_clipboard = 'Copy link to clipboard';
      window.T_Link_copied_to_clipboard = 'Copied link to clipboard!';
      window.T_No_results_found = 'No results found for \u0022{0}\u0022';
      window.T_N_results_found = '{1} results found for \u0022{0}\u0022';
      // some further base stuff
      var baseUriFull='https:\/\/ksu-cs-textbooks.github.io\/cis400/';
      window.variants && variants.init( [ 'light-theme', 'dark-theme' ] );
    </script>
    
    <link href="https://ksu-cs-textbooks.github.io/cis400/css/custom.css?1708973473" rel="stylesheet">

    
  </head>
  <body class="mobile-support embed disableInlineCopyToClipboard" data-url="https://ksu-cs-textbooks.github.io/cis400/3-web-development/02-aspdotnet/06-razor-pages/embed.html">
    <div id="body" class="default-animation">
      
      
      
      <main id="body-inner" class="highlightable default" tabindex="-1">
        <div class="flex-block-wrapper">
          <article class="default">
    
    
    
<p>ASP.NET Core adds a project type to Visual Studio&rsquo;s new project wizard, <em>ASP.NET Core web application</em> which uses <em>Razor Pages</em>.  The Razor Page approach represents a hybrid approach between a MVC and Pipeline architecture and leverages some of the ideas of component-based design that we saw with WPF applications.</p>
<p>The program entry point is <em>Program.cs</em>, which creates the web server our application will run on.  In it, we initialize and configure the server based on the <em>Startup.cs</em> class, which details what aspects of the ASP.NET program we want to use.  The wizard does the initial configuration for us, and for now we&rsquo;ll leave the defaults:</p>
<ul>
<li>Adding the Razor Pages service (which allows us to use Razor Pages)</li>
<li>Enabling HTTPS redirection (which instructs browsers making HTTP requests against our server to make HTTPS requests instead)</li>
<li>Enabling the use of static files, which means files in the <em>wwwroot</em> folder will be served as they are, in as efficient a manner of possible</li>
<li>Mapping requests to razor pages (this makes a request against a route like <em>/index</em> map to the <em>Pages/Index.cshtml</em> razor page)</li>
</ul>
<p>Under this architecture, any file we want to serve as-is (i.e. our CSS and JavaScript files), we&rsquo;ll place in <em>wwwroot</em> folder.  Any route we want to serve dynamically, we&rsquo;ll create a corresponding Razor page for in the <em>Pages</em> folder.</p>
<h2 id="razor-page-syntax">Razor Page Syntax</h2>
<p>Let&rsquo;s look at an example Razor page, <em>index.cshtml</em>, and then break down its components:</p>
<div class="wrap-code highlight"><pre tabindex="0"><code class="language-razor" data-lang="razor">@page 
@model IndexModel
@{
    ViewData[&#34;Title&#34;] = &#34;Home page&#34;;
}
&lt;div class=&#34;text-center&#34;&gt;
    &lt;h1 class=&#34;display-4&#34;&gt;Welcome&lt;/h1&gt;
    &lt;p&gt;Learn about &lt;a href=&#34;https://docs.microsoft.com/aspnet/core&#34;&gt;building Web apps with ASP.NET Core&lt;/a&gt;.&lt;/p&gt;
&lt;/div&gt;</code></pre></div><p>The <code>@page</code> line indicates to the compiler that this file represents a Razor page.  This is necessary for the page to be interpreted correctly, and for setting up the mapping from a request for the route <em>/index</em> to be mapped to this page (<em>Index.cshtml</em>).</p>
<p>The <code>@model</code> line indicates the <em>model</em> class to use with this page.  Conventionally, the model class has the same name as the Razor page, plus a <em>.cs</em> extension, though we can use a different model file if needed.  If we follow the convention, the model file is grouped with the Razor page file, much like the codebehind files in WPF and Forms. The model class provides the data for the web page, in a manner somewhat like the ViewModel classes we worked with in WPF.  We&rsquo;ll talk more about model classes shortly.</p>
<p>The <code>@{}</code> section is a place to define variables.  In this case, we add a key/value pair to the <code>ViewData</code> dictionary.  This dictionary is available in both the page and the layout, and is an easy way to pass values between them (in this case, we are providing a title to the layout). The layout is discussed below.</p>
<p>Finally, the page content itself is presented in Razor syntax - a mixture of HTML and embedded C# proceeded by the <code>@</code> symbol.  Note that we do not need to provide termination to the C# code - the compiler will automatically determine when we switch from code back to HTML based on the grammar of the C# language.</p>
<h2 id="layouts">Layouts</h2>
<p>If you remember from our discussions of HTML, a valid HTML page must have a <code>&lt;!DOCTYPE html&gt;</code> element, and <code>&lt;html&gt;</code>, <code>&lt;head&gt;</code>, <code>&lt;title&gt;</code>, and <code>&lt;body&gt;</code> elements.  But where are these in our Razor page?  It exists in the _Pages/Shared/<em>Layout.cshtml</em> file:</p>
<div class="wrap-code highlight"><pre tabindex="0"><code class="language-cshtml" data-lang="cshtml">&lt;!DOCTYPE html&gt;
&lt;html lang=&#34;en&#34;&gt;
&lt;head&gt;
    &lt;meta charset=&#34;utf-8&#34; /&gt;
    &lt;meta name=&#34;viewport&#34; content=&#34;width=device-width, initial-scale=1.0&#34; /&gt;
    &lt;title&gt;@ViewData[&#34;Title&#34;] - ExampleWebApplication&lt;/title&gt;
    &lt;link rel=&#34;stylesheet&#34; href=&#34;~/lib/bootstrap/dist/css/bootstrap.min.css&#34; /&gt;
    &lt;link rel=&#34;stylesheet&#34; href=&#34;~/css/site.css&#34; /&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;header&gt;
        &lt;nav class=&#34;navbar navbar-expand-sm navbar-toggleable-sm navbar-light bg-white border-bottom box-shadow mb-3&#34;&gt;
            &lt;div class=&#34;container&#34;&gt;
                &lt;a class=&#34;navbar-brand&#34; asp-area=&#34;&#34; asp-page=&#34;/Index&#34;&gt;ExampleWebApplication&lt;/a&gt;
                &lt;button class=&#34;navbar-toggler&#34; type=&#34;button&#34; data-toggle=&#34;collapse&#34; data-target=&#34;.navbar-collapse&#34; aria-controls=&#34;navbarSupportedContent&#34;
                        aria-expanded=&#34;false&#34; aria-label=&#34;Toggle navigation&#34;&gt;
                    &lt;span class=&#34;navbar-toggler-icon&#34;&gt;&lt;/span&gt;
                &lt;/button&gt;
                &lt;div class=&#34;navbar-collapse collapse d-sm-inline-flex flex-sm-row-reverse&#34;&gt;
                    &lt;ul class=&#34;navbar-nav flex-grow-1&#34;&gt;
                        &lt;li class=&#34;nav-item&#34;&gt;
                            &lt;a class=&#34;nav-link text-dark&#34; asp-area=&#34;&#34; asp-page=&#34;/Index&#34;&gt;Home&lt;/a&gt;
                        &lt;/li&gt;
                        &lt;li class=&#34;nav-item&#34;&gt;
                            &lt;a class=&#34;nav-link text-dark&#34; asp-area=&#34;&#34; asp-page=&#34;/Privacy&#34;&gt;Privacy&lt;/a&gt;
                        &lt;/li&gt;
                    &lt;/ul&gt;
                &lt;/div&gt;
            &lt;/div&gt;
        &lt;/nav&gt;
    &lt;/header&gt;
    &lt;div class=&#34;container&#34;&gt;
        &lt;main role=&#34;main&#34; class=&#34;pb-3&#34;&gt;
            @RenderBody()
        &lt;/main&gt;
    &lt;/div&gt;

    &lt;footer class=&#34;border-top footer text-muted&#34;&gt;
        &lt;div class=&#34;container&#34;&gt;
            &amp;copy; 2020 - ExampleWebApplication - &lt;a asp-area=&#34;&#34; asp-page=&#34;/Privacy&#34;&gt;Privacy&lt;/a&gt;
        &lt;/div&gt;
    &lt;/footer&gt;

    &lt;script src=&#34;~/lib/jquery/dist/jquery.min.js&#34;&gt;&lt;/script&gt;
    &lt;script src=&#34;~/lib/bootstrap/dist/js/bootstrap.bundle.min.js&#34;&gt;&lt;/script&gt;
    &lt;script src=&#34;~/js/site.js&#34; asp-append-version=&#34;true&#34;&gt;&lt;/script&gt;

    @RenderSection(&#34;Scripts&#34;, required: false)
&lt;/body&gt;
&lt;/html&gt;</code></pre></div><p>Using a layout file allows us to place boilerplate HTML (code that is repeated on every page of our site) in a single location, and share it amongst all pages in our application.  The <code>@RenderBody()</code> line indicates where the content of the Razor page will be rendered.</p>
<p>Note that we also implement a navigation menu in this layout.  Instead of giving the links in this navigation page a <code>href</code> element, we use <code>asp-page</code>, which converts into an appropriate <code>href</code> linking to one of our Razor pages on compilation.  Thus <code>asp-page=&quot;/Index&quot;</code> will point to our <em>Index.cshtml.cs</em> page.  The <code>asp-page</code> is an example of a <a href="https://docs.microsoft.com/en-us/aspnet/core/mvc/views/tag-helpers/intro?view=aspnetcore-3.1" target="_blank">TagHelper</a>
, syntax that provides extra details to be processed by the Razor rendering engine.</p>
<p>We can include other sections within the layout with <code>@RenderSection()</code> For example, the <code>@RenderSection(&quot;Scripts&quot;, required: false)</code> will render a &ldquo;Scripts&rdquo; section, if there is one defined in our Razor page.  We define such sections with the <code>@section</code> syntax, i.e.:</p>
<div class="wrap-code highlight"><pre tabindex="0"><code class="language-cshtml" data-lang="cshtml">@section Scripts{
    &lt;script src=&#34;my-script.js&#34;&gt;&lt;/script&gt;
}</code></pre></div><p>Would place the additional <code>&lt;script&gt;</code> element in the rendered Razor page.  You can define as many sections as you want.</p>
<p>While the _Pages/Shared/<em>Layout.cshtml</em> file is the default layout, you can define your own layout files.  These should also be placed in the <em>Pages/Shared</em> folder, and their name should begin with an underscore.  You can then set it to be used as the layout for your page by setting the page&rsquo;s <code>Layout</code> property:</p>
<div class="wrap-code highlight"><pre tabindex="0"><code class="language-cshtml" data-lang="cshtml">@{
    Layout = &#34;_YourLayout&#34;;
}</code></pre></div><p>Where the string you set the property to is the name of your layout.</p>
<h2 id="model-classes">Model Classes</h2>
<p>The model class serves a similar role to the codebehind classes of your WPF and Windows Forms applications.  Any public properties defined in the model class are accessible in the Razor page.  I.e. if we defined a property:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">IndexModel</span>:PageModel {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> DateTime CurrentTime 
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">get</span> 
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">return</span> DateTime.Now;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> IActionResult OnGet()
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>We could use it in the corresponding Razor page:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>@page 
</span></span><span style="display:flex;"><span>@model IndexModel 
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>&lt;p&gt;The current time <span style="color:#66d9ef">is</span> @Model.CurrentTime&lt;/p&gt;</span></span></code></pre></div><p>In addition, the model class can define a method to be triggered on each HTTP Request, i.e. the <code>OnGet()</code> method will be triggered with each HTTP GET request, and <code>OnPost()</code> will be called with each HTTP POST request.  You can define a method for any of the valid HTTP request verbs that will be invoked on each corresponding request.</p>

            <footer class="footline">

            </footer>
          </article>
        </div>
      </main>
    </div>
    
    
    
    <script src="https://ksu-cs-textbooks.github.io/cis400/js/clipboard.min.js?1708973476" defer></script>
    <script src="https://ksu-cs-textbooks.github.io/cis400/js/perfect-scrollbar.min.js?1708973476" defer></script>
    <script src="https://ksu-cs-textbooks.github.io/cis400/js/theme.js?1708973476" defer></script>
    
    <script src="https://ksu-cs-textbooks.github.io/cis400/js/embed-iframe.js?1708973476 defer"></script>
  </body>
</html>
