<!doctype html><html lang=en-us dir=ltr itemscope itemtype=http://schema.org/Article><head><meta charset=utf-8><meta name=viewport content="height=device-height,width=device-width,initial-scale=1,minimum-scale=1"><meta name=generator content="Hugo 0.128.0"><meta name=generator content="Relearn 6.0.0"><meta name=description content="Making a HTTP request is a multi-step process. First you must establish a connection with the server, then create the request data, then you must stream that data to your server through the connection. Once the server has received and processed your request data, it should stream a response back to you.
You can write code to handle each step, but most programming languages provide one or more libraries that provide a level of abstraction to this process."><meta name=author content="Nathan Bean"><meta name=twitter:card content="summary"><meta name=twitter:title content="Making Requests :: K-State CIS 400 Textbook"><meta name=twitter:description content="Making a HTTP request is a multi-step process. First you must establish a connection with the server, then create the request data, then you must stream that data to your server through the connection. Once the server has received and processed your request data, it should stream a response back to you.
You can write code to handle each step, but most programming languages provide one or more libraries that provide a level of abstraction to this process."><meta property="og:url" content="https://textbooks.cs.ksu.edu/cis400/3-web-development/04-apis/02-making-requests/"><meta property="og:site_name" content="K-State CIS 400 Textbook"><meta property="og:title" content="Making Requests :: K-State CIS 400 Textbook"><meta property="og:description" content="Making a HTTP request is a multi-step process. First you must establish a connection with the server, then create the request data, then you must stream that data to your server through the connection. Once the server has received and processed your request data, it should stream a response back to you.
You can write code to handle each step, but most programming languages provide one or more libraries that provide a level of abstraction to this process."><meta property="og:locale" content="en-us"><meta property="og:type" content="article"><meta property="article:section" content="Web Development"><meta property="article:published_time" content="2018-08-24T10:53:26-05:00"><meta property="article:modified_time" content="2021-11-29T10:41:36-06:00"><meta itemprop=name content="Making Requests :: K-State CIS 400 Textbook"><meta itemprop=description content="Making a HTTP request is a multi-step process. First you must establish a connection with the server, then create the request data, then you must stream that data to your server through the connection. Once the server has received and processed your request data, it should stream a response back to you.
You can write code to handle each step, but most programming languages provide one or more libraries that provide a level of abstraction to this process."><meta itemprop=datePublished content="2018-08-24T10:53:26-05:00"><meta itemprop=dateModified content="2021-11-29T10:41:36-06:00"><meta itemprop=wordCount content="449"><title>Making Requests :: K-State CIS 400 Textbook</title>
<link href=https://textbooks.cs.ksu.edu/cis400/3-web-development/04-apis/02-making-requests/ rel=canonical type=text/html title="Making Requests :: K-State CIS 400 Textbook"><link href=/cis400/3-web-development/04-apis/02-making-requests/index.xml rel=alternate type=application/rss+xml title="Making Requests :: K-State CIS 400 Textbook"><link href=/cis400/3-web-development/04-apis/02-making-requests/tele.html rel=alternate type=text/html title="Making Requests :: K-State CIS 400 Textbook"><link href=/cis400/3-web-development/04-apis/02-making-requests/embed.html rel=alternate type=text/html title="Making Requests :: K-State CIS 400 Textbook"><link href=/cis400/css/fontawesome-all.min.css?1728334431 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/cis400/css/fontawesome-all.min.css?1728334431 rel=stylesheet></noscript><link href=/cis400/css/nucleus.css?1728334431 rel=stylesheet><link href=/cis400/css/auto-complete.css?1728334431 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/cis400/css/auto-complete.css?1728334431 rel=stylesheet></noscript><link href=/cis400/css/perfect-scrollbar.min.css?1728334431 rel=stylesheet><link href=/cis400/css/fonts.css?1728334431 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/cis400/css/fonts.css?1728334431 rel=stylesheet></noscript><link href=/cis400/css/theme.css?1728334431 rel=stylesheet><link href=/cis400/css/theme-auto.css?1728334431 rel=stylesheet id=R-variant-style><link href=/cis400/css/chroma-auto.css?1728334431 rel=stylesheet id=R-variant-chroma-style><link href=/cis400/css/variant.css?1728334431 rel=stylesheet><link href=/cis400/css/print.css?1728334431 rel=stylesheet media=print><link href=/cis400/css/format-print.css?1728334431 rel=stylesheet><script src=/cis400/js/variant.js?1728334431></script><script>window.relearn=window.relearn||{},window.relearn.relBasePath="../../..",window.relearn.relBaseUri="../../../..",window.relearn.absBaseUri="https://textbooks.cs.ksu.edu/cis400",window.index_js_url="/cis400/index.search.js",window.variants&&variants.init(["auto","light-theme","dark-theme"]),window.T_Copy_to_clipboard=`Copy to clipboard`,window.T_Copied_to_clipboard=`Copied to clipboard!`,window.T_Copy_link_to_clipboard=`Copy link to clipboard`,window.T_Link_copied_to_clipboard=`Copied link to clipboard!`,window.T_Reset_view=`Reset view`,window.T_View_reset=`View reset!`,window.T_No_results_found=`No results found for "{0}"`,window.T_N_results_found=`{1} results found for "{0}"`</script><link href=/cis400/css/custom.css?1728334431 rel=stylesheet></head><body class="mobile-support print disableInlineCopyToClipboard" data-url=/cis400/3-web-development/04-apis/02-making-requests/><div id=R-body class=default-animation><div id=R-body-overlay></div><nav id=R-topbar><div class=topbar-wrapper><div class=topbar-sidebar-divider></div><div class="topbar-area topbar-area-start" data-area=start><div class="topbar-button topbar-button-sidebar" data-content-empty=disable data-width-s=show data-width-m=hide data-width-l=hide><button class=topbar-control onclick=toggleNav() type=button title="Menu (CTRL+ALT+n)"><i class="fa-fw fas fa-bars"></i></button></div></div><ol class="topbar-breadcrumbs breadcrumbs highlightable" itemscope itemtype=http://schema.org/BreadcrumbList><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><a itemprop=item href=/cis400/3-web-development/><span itemprop=name>Web Development</span></a><meta itemprop=position content="1">&nbsp;>&nbsp;</li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><a itemprop=item href=/cis400/3-web-development/04-apis/><span itemprop=name>Web APIs</span></a><meta itemprop=position content="2">&nbsp;>&nbsp;</li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><span itemprop=name>Making Requests</span><meta itemprop=position content="3"></li></ol><div class="topbar-area topbar-area-end" data-area=end><div class="topbar-button topbar-button-prev" data-content-empty=disable data-width-s=show data-width-m=show data-width-l=show><a class=topbar-control href=/cis400/3-web-development/04-apis/01-introduction/ title="Introduction (🡐)"><i class="fa-fw fas fa-chevron-left"></i></a></div><div class="topbar-button topbar-button-next" data-content-empty=disable data-width-s=show data-width-m=show data-width-l=show><a class=topbar-control href=/cis400/3-web-development/04-apis/03-working-with-disposables/ title="Working With Disposables (🡒)"><i class="fa-fw fas fa-chevron-right"></i></a></div></div></div></nav><div id=R-main-overlay></div><main id=R-body-inner class="highlightable default" tabindex=-1><div class=flex-block-wrapper><article class=default><header class=headline></header><h1 id=making-requests>Making Requests</h1><p>Making a HTTP request is a multi-step process. First you must establish a connection with the server, then create the request data, then you must stream that data to your server through the connection. Once the server has received and processed your request data, it should stream a response back to you.</p><p>You can write code to handle each step, but most programming languages provide one or more libraries that provide a level of abstraction to this process. The C# language actually offers several options in its system libraries, and there are multiple open-source options as well.</p><h3 id=webrequest>WebRequest</h3><p>The simplest of these is the <code>WebRequest</code> object. It represents and carries out a single HTTP request and provides the response. Let&rsquo;s take a look at an example, which retrieves a &ldquo;Joke of the Day&rdquo; from a web API at <a href=https://jokes.one rel=external target=_blank>https://jokes.one</a>:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=n>WebRequest</span> <span class=n>request</span> <span class=p>=</span> <span class=n>WebRequest</span><span class=p>.</span><span class=n>Create</span><span class=p>(</span><span class=s>&#34;http://api.jokes.one/jod&#34;</span><span class=p>);</span></span></span></code></pre></div><p>This one line of code creates the <code>WebRequest</code> object. Notice that we are <strong>not using a constructor</strong>. Instead, we invoke a <code>Create()</code> method. This is an example of the <a href=https://en.wikipedia.org/wiki/Factory_method_pattern rel=external target=_blank>Factory Method Pattern</a>, which you will learn more about in CIS 501. But to briefly introduce the concept, the <code>WebRequest</code> class is actually a <em>base class</em> for a multiple different classes, each representing a <em>specific kind</em> of web request (i.e. using HTTP, HTTPS, FTP and so on). Based on the URI supplied to <code>WebRequest.Create(Uri uri)</code>, the method will determine the appropriate kind of request to make, and create and return the corresponding object.</p><p>Now that we have our request, we can send it and obtain a response with:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=n>WebResponse</span> <span class=n>response</span> <span class=p>=</span> <span class=n>request</span><span class=p>.</span><span class=n>GetResponse</span><span class=p>();</span></span></span></code></pre></div><p>This opens the connection to the server, streams the request to it, and then captures the sever&rsquo;s response. We can access this response as a stream (similar to how we would read a file):</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=k>using</span> <span class=nn>Stream</span> <span class=n>responseStream</span> <span class=p>=</span> <span class=n>response</span><span class=p>.</span><span class=n>GetStream</span><span class=p>()</span> 
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=n>StreamReader</span> <span class=n>reader</span> <span class=p>=</span> <span class=k>new</span> <span class=n>StreamReader</span><span class=p>(</span><span class=n>responseStream</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=kt>string</span> <span class=n>responseText</span><span class=p>=</span> <span class=n>reader</span><span class=p>.</span><span class=n>ReadToEnd</span><span class=p>();</span>
</span></span><span class=line><span class=cl>  <span class=n>Console</span><span class=p>.</span><span class=n>WriteLine</span><span class=p>(</span><span class=n>responseText</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div><p>You likely are wondering what the <code>using</code> and curly braces <code>{}</code> are doing in this code. They are there because the <code>Stream</code> object implements the <code>IDisposable</code> interface. We&rsquo;ll discuss this in detail in the next section. But for now, let&rsquo;s focus on how we use the stream. First we create a <code>StreamReader</code> to read it:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl>  <span class=n>StreamReader</span> <span class=n>reader</span> <span class=p>=</span> <span class=k>new</span> <span class=n>StreamReader</span><span class=p>(</span><span class=n>responseStream</span><span class=p>);</span></span></span></code></pre></div><p>Then read to the end of the stream:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl>  <span class=kt>string</span> <span class=n>responseFromServer</span> <span class=p>=</span> <span class=n>reader</span><span class=p>.</span><span class=n>ReadToEnd</span><span class=p>();</span></span></span></code></pre></div><p>And write the response&rsquo;s text to the console:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl>  <span class=n>Console</span><span class=p>.</span><span class=n>WriteLine</span><span class=p>(</span><span class=n>responseText</span><span class=p>);</span></span></span></code></pre></div><p>Finally, we must close the <code>WebResponse</code> object&rsquo;s connection to the server once we are done:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl>  <span class=n>response</span><span class=p>.</span><span class=n>Close</span><span class=p>();</span></span></span></code></pre></div><p>This last step is important, as the open connection is actually managed by our operating system, and unless we close it, our system resources will be tied up, making our computer slower and potentially unable to make web requests for other programs (including your browser)!</p><footer class=footline></footer></article></div></main><div class=git-footer><p class=theme-version-footer>6.0.0</p><p>Last modified by:
<i class='fas fa-user'></i> Nathan Bean
<i class='fas fa-calendar'></i> <a href=https://github.com/ksu-cs-textbooks/cis400/commit/e38b1b037243a9f9b704250ec41367e15ed9b6ce>Nov 29, 2021</a></p></div></div><script src=/cis400/js/clipboard.min.js?1728334431 defer></script><script src=/cis400/js/perfect-scrollbar.min.js?1728334431 defer></script><script src=/cis400/js/theme.js?1728334431 defer></script></body></html>